import{Fragment as e,Transition as t,_export_sfc as n,addUnit as r,buildProps as i,computed as a,createBaseVNode as o,createBlock as s,createCommentVNode as c,createElementBlock as l,createVNode as u,debugWarn as d,defineComponent as f,definePropType as p,inject as m,isClient as h,isElement as g,isNumber as _,isObject as v,nextTick as y,normalizeClass as b,normalizeStyle as x,onBeforeUnmount as S,onMounted as C,onUpdated as w,openBlock as T,provide as E,reactive as D,ref as O,renderSlot as k,resolveDynamicComponent as A,throwError as j,toRef as M,unref as N,useAriaProps as P,useEventListener as F,useNamespace as I,useResizeObserver as L,vShow as R,watch as z,withCtx as B,withDirectives as V,withInstall as H}from"./app-ctFZFRv9.js";const U=4,W={vertical:{offset:`offsetHeight`,scroll:`scrollTop`,scrollSize:`scrollHeight`,size:`height`,key:`vertical`,axis:`Y`,client:`clientY`,direction:`top`},horizontal:{offset:`offsetWidth`,scroll:`scrollLeft`,scrollSize:`scrollWidth`,size:`width`,key:`horizontal`,axis:`X`,client:`clientX`,direction:`left`}},G=({move:e,size:t,bar:n})=>({[n.size]:t,transform:`translate${n.axis}(${e}%)`}),K=Symbol(`scrollbarContextKey`),q=i({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),J=`Thumb`,ee=f({__name:`thumb`,props:q,setup(e){let n=e,r=m(K),i=I(`scrollbar`);r||j(J,`can not inject scrollbar context`);let c=O(),l=O(),u=O({}),d=O(!1),f=!1,p=!1,g=h?document.onselectstart:null,_=a(()=>W[n.vertical?`vertical`:`horizontal`]),v=a(()=>G({size:n.size,move:n.move,bar:_.value})),y=a(()=>c.value[_.value.offset]**2/r.wrapElement[_.value.scrollSize]/n.ratio/l.value[_.value.offset]),C=e=>{var t;if(e.stopPropagation(),e.ctrlKey||[1,2].includes(e.button))return;(t=window.getSelection())==null||t.removeAllRanges(),E(e);let n=e.currentTarget;n&&(u.value[_.value.axis]=n[_.value.offset]-(e[_.value.client]-n.getBoundingClientRect()[_.value.direction]))},w=e=>{if(!l.value||!c.value||!r.wrapElement)return;let t=Math.abs(e.target.getBoundingClientRect()[_.value.direction]-e[_.value.client]),n=l.value[_.value.offset]/2,i=(t-n)*100*y.value/c.value[_.value.offset];r.wrapElement[_.value.scroll]=i*r.wrapElement[_.value.scrollSize]/100},E=e=>{e.stopImmediatePropagation(),f=!0,document.addEventListener(`mousemove`,D),document.addEventListener(`mouseup`,k),g=document.onselectstart,document.onselectstart=()=>!1},D=e=>{if(!c.value||!l.value||f===!1)return;let t=u.value[_.value.axis];if(!t)return;let n=(c.value.getBoundingClientRect()[_.value.direction]-e[_.value.client])*-1,i=l.value[_.value.offset]-t,a=(n-i)*100*y.value/c.value[_.value.offset];r.wrapElement[_.value.scroll]=a*r.wrapElement[_.value.scrollSize]/100},k=()=>{f=!1,u.value[_.value.axis]=0,document.removeEventListener(`mousemove`,D),document.removeEventListener(`mouseup`,k),L(),p&&(d.value=!1)},A=()=>{p=!1,d.value=!!n.size},P=()=>{p=!0,d.value=f};S(()=>{L(),document.removeEventListener(`mouseup`,k)});let L=()=>{document.onselectstart!==g&&(document.onselectstart=g)};return F(M(r,`scrollbarElement`),`mousemove`,A),F(M(r,`scrollbarElement`),`mouseleave`,P),(e,n)=>(T(),s(t,{name:N(i).b(`fade`),persisted:``},{default:B(()=>[V(o(`div`,{ref_key:`instance`,ref:c,class:b([N(i).e(`bar`),N(i).is(N(_).key)]),onMousedown:w},[o(`div`,{ref_key:`thumb`,ref:l,class:b(N(i).e(`thumb`)),style:x(N(v)),onMousedown:C},null,38)],34),[[R,e.always||d.value]])]),_:1},8,[`name`]))}});var Y=n(ee,[[`__file`,`thumb.vue`]]);const te=i({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),ne=f({__name:`bar`,props:te,setup(t,{expose:n}){let r=t,i=m(K),a=O(0),o=O(0),s=O(``),c=O(``),d=O(1),f=O(1),p=e=>{if(e){let t=e.offsetHeight-U,n=e.offsetWidth-U;o.value=e.scrollTop*100/t*d.value,a.value=e.scrollLeft*100/n*f.value}},h=()=>{let e=i?.wrapElement;if(!e)return;let t=e.offsetHeight-U,n=e.offsetWidth-U,a=t**2/e.scrollHeight,o=n**2/e.scrollWidth,l=Math.max(a,r.minSize),u=Math.max(o,r.minSize);d.value=a/(t-a)/(l/(t-l)),f.value=o/(n-o)/(u/(n-u)),c.value=l+U<t?`${l}px`:``,s.value=u+U<n?`${u}px`:``};return n({handleScroll:p,update:h}),(t,n)=>(T(),l(e,null,[u(Y,{move:a.value,ratio:f.value,size:s.value,always:t.always},null,8,[`move`,`ratio`,`size`,`always`]),u(Y,{move:o.value,ratio:d.value,size:c.value,vertical:``,always:t.always},null,8,[`move`,`ratio`,`size`,`always`])],64))}});var re=n(ne,[[`__file`,`bar.vue`]]);const ie=i({height:{type:[String,Number],default:``},maxHeight:{type:[String,Number],default:``},native:{type:Boolean,default:!1},wrapStyle:{type:p([String,Object,Array]),default:``},wrapClass:{type:[String,Array],default:``},viewClass:{type:[String,Array],default:``},viewStyle:{type:[String,Array,Object],default:``},noresize:Boolean,tag:{type:String,default:`div`},always:Boolean,minSize:{type:Number,default:20},id:String,role:String,...P([`ariaLabel`,`ariaOrientation`])}),ae={scroll:({scrollTop:e,scrollLeft:t})=>[e,t].every(_)},X=`ElScrollbar`,oe=f({name:X}),se=f({...oe,props:ie,emits:ae,setup(e,{expose:t,emit:n}){let i=e,u=I(`scrollbar`),f,p,m=O(),h=O(),g=O(),S=O(),j=a(()=>{let e={};return i.height&&(e.height=r(i.height)),i.maxHeight&&(e.maxHeight=r(i.maxHeight)),[i.wrapStyle,e]}),M=a(()=>[i.wrapClass,u.e(`wrap`),{[u.em(`wrap`,`hidden-default`)]:!i.native}]),P=a(()=>[u.e(`view`),i.viewClass]),R=()=>{var e;h.value&&((e=S.value)==null||e.handleScroll(h.value),n(`scroll`,{scrollTop:h.value.scrollTop,scrollLeft:h.value.scrollLeft}))};function V(e,t){v(e)?h.value.scrollTo(e):_(e)&&_(t)&&h.value.scrollTo(e,t)}let H=e=>{if(!_(e)){d(X,`value must be a number`);return}h.value.scrollTop=e},U=e=>{if(!_(e)){d(X,`value must be a number`);return}h.value.scrollLeft=e},W=()=>{var e;(e=S.value)==null||e.update()};return z(()=>i.noresize,e=>{e?(f?.(),p?.()):({stop:f}=L(g,W),p=F(`resize`,W))},{immediate:!0}),z(()=>[i.maxHeight,i.height],()=>{i.native||y(()=>{var e;W(),h.value&&((e=S.value)==null||e.handleScroll(h.value))})}),E(K,D({scrollbarElement:m,wrapElement:h})),C(()=>{i.native||y(()=>{W()})}),w(()=>W()),t({wrapRef:h,update:W,scrollTo:V,setScrollTop:H,setScrollLeft:U,handleScroll:R}),(e,t)=>(T(),l(`div`,{ref_key:`scrollbarRef`,ref:m,class:b(N(u).b())},[o(`div`,{ref_key:`wrapRef`,ref:h,class:b(N(M)),style:x(N(j)),onScroll:R},[(T(),s(A(e.tag),{id:e.id,ref_key:`resizeRef`,ref:g,class:b(N(P)),style:x(e.viewStyle),role:e.role,"aria-label":e.ariaLabel,"aria-orientation":e.ariaOrientation},{default:B(()=>[k(e.$slots,`default`)]),_:3},8,[`id`,`class`,`style`,`role`,`aria-label`,`aria-orientation`]))],38),e.native?c(`v-if`,!0):(T(),s(re,{key:0,ref_key:`barRef`,ref:S,always:e.always,"min-size":e.minSize},null,8,[`always`,`min-size`]))],2))}});var ce=n(se,[[`__file`,`scrollbar.vue`]]);const le=H(ce),Z=new Map;let Q;h&&(document.addEventListener(`mousedown`,e=>Q=e),document.addEventListener(`mouseup`,e=>{for(let t of Z.values())for(let{documentHandler:n}of t)n(e,Q)}));function $(e,t){let n=[];return Array.isArray(t.arg)?n=t.arg:g(t.arg)&&n.push(t.arg),function(r,i){let a=t.instance.popperRef,o=r.target,s=i?.target,c=!t||!t.instance,l=!o||!s,u=e.contains(o)||e.contains(s),d=e===o,f=n.length&&n.some(e=>e?.contains(o))||n.length&&n.includes(s),p=a&&(a.contains(o)||a.contains(s));c||l||u||d||f||p||t.value(r,i)}}const ue={beforeMount(e,t){Z.has(e)||Z.set(e,[]),Z.get(e).push({documentHandler:$(e,t),bindingFn:t.value})},updated(e,t){Z.has(e)||Z.set(e,[]);let n=Z.get(e),r=n.findIndex(e=>e.bindingFn===t.oldValue),i={documentHandler:$(e,t),bindingFn:t.value};r>=0?n.splice(r,1,i):n.push(i)},unmounted(e){Z.delete(e)}};export{ue as ClickOutside,le as ElScrollbar};