import"./isEqual-DUAGDpZY.js";import"./isArrayLikeObject-DWAcihF8.js";import"./merge-XDSJ7w6H.js";import"./_baseIteratee-t-25AuYs.js";import{ElTable as e,ElTableColumn as t}from"./table-Db0XwM4K.js";import"./click-outside-CeocQVdO.js";import"./checkbox-C8nKweXK.js";import{ElTag as n}from"./tag-ByueM0Jv.js";import{__plugin_vue_export_helper_default as r,computed as i,createBaseVNode as a,createElementBlock as o,createTextVNode as s,createVNode as c,defineComponent as l,handler as u,onMounted as d,onUnmounted as f,openBlock as p,reactive as m,ref as h,resolveComponent as g,toDisplayString as _,withCtx as v}from"./app-ctFZFRv9.js";const y={id:`app`,class:`redis-status-container`},b={class:`mt-3 px-3 flex items-center`},ee={class:`grid grid-cols-3 gap-4 mt-4 px-3`},x={class:`col-span-1`},S={class:`box-card p-3 bg-secondBg mb-3`},C={class:`server-status-tag-p`},w={class:`server-status-text`},T={class:`server-status-tag-p`},E=[`title`],D={class:`server-status-tag-p`},O={class:`server-status-text`},k={class:`col-span-1`},A={class:`box-card p-3 bg-secondBg mb-3`},j={class:`server-status-tag-p`},M={class:`server-status-text`},N={class:`server-status-tag-p`},P={class:`server-status-text`},F={class:`server-status-tag-p`},I={class:`server-status-text`},te={class:`col-span-1`},L={class:`box-card p-3 bg-secondBg mb-3`},R={class:`server-status-tag-p`},z={class:`server-status-text`},B={class:`server-status-tag-p`},V={class:`server-status-text`},H={class:`server-status-tag-p`},U={class:`server-status-text`},W={class:`mt-4 px-3`},G={class:`box-card p-3 bg-secondBg mb-3`},K={class:`mt-4 px-3`},q={class:`box-card p-3 bg-secondBg mb-3`};var J=l({__name:`redisStatus`,setup(r){let l=h(!1),J=h(null),Y=h(2e3),X=m({}),Z=i(()=>{let e=[];for(let t in X)if(t.startsWith(`db`)){let n=X[t],r=n.split(`,`);e.push({db:t,keys:r[0].split(`=`)[1],expires:r[1].split(`=`)[1],avg_ttl:r[2].split(`=`)[1]})}return e}),Q=i(()=>{let e=[];for(let t in X)e.push({key:t,value:X[t]});return e});d(()=>{$(),u.on(`info`,e=>{ae(e)}),u.emit(`init`)}),f(()=>{clearInterval(J.value)});let $=()=>{J.value=setInterval(()=>{l.value&&u.emit(`init`)},Y.value)},ne=(e,t)=>e.keys-t.keys,re=(e,t)=>e.expires-t.expires,ie=(e,t)=>e.avg_ttl-t.avg_ttl,ae=e=>{if(!e)return{};e=e.split(`
`);let t={};for(let n of e){if(n=n.replace(/\s/gi,``),n.startsWith(`#`)||!n)continue;let e=n.split(`:`);t[e[0]]=e[1]}Object.assign(X,t)};return(r,i)=>{let u=n,d=g(`vsc-switch`),f=g(`vsc-tooltip`),m=t,h=e;return p(),o(`div`,y,[a(`div`,b,[c(u,{type:`info`,class:`mr-2`},{default:v(()=>i[1]||=[a(`i`,{class:`el-icon-refresh`},null,-1),s(` Auto Refresh `)]),_:1}),c(f,{title:`Auto Refresh Switch, Refresh Every 2 Seconds`},{default:v(()=>[c(d,{modelValue:l.value,"onUpdate:modelValue":i[0]||=e=>l.value=e,onChange:$},null,8,[`modelValue`])]),_:1})]),a(`div`,ee,[a(`div`,x,[a(`div`,S,[i[5]||=a(`span`,{class:`text-base mb-2 block`},`Server`,-1),a(`p`,C,[c(u,{class:`server-status-container`,type:`info`},{default:v(()=>[i[2]||=s(` Redis Version: `),a(`span`,w,_(X.redis_version),1)]),_:1})]),a(`p`,T,[c(u,{class:`server-status-container`,type:`info`},{default:v(()=>[i[3]||=s(` OS: `),a(`span`,{class:`server-status-text`,title:X.os},_(X.os),9,E)]),_:1})]),a(`p`,D,[c(u,{class:`server-status-container`,type:`info`},{default:v(()=>[i[4]||=s(` Process ID: `),a(`span`,O,_(X.process_id),1)]),_:1})])])]),a(`div`,k,[a(`div`,A,[i[9]||=a(`span`,{class:`text-base mb-2 block`},` Memory`,-1),a(`p`,j,[c(u,{class:`server-status-container`,type:`info`},{default:v(()=>[i[6]||=s(` Used Memory: `),a(`span`,M,_(X.used_memory_human),1)]),_:1})]),a(`p`,N,[c(u,{class:`server-status-container`,type:`info`},{default:v(()=>[i[7]||=s(` Used Memory Peak: `),a(`span`,P,_(X.used_memory_peak_human),1)]),_:1})]),a(`p`,F,[c(u,{class:`server-status-container`,type:`info`},{default:v(()=>[i[8]||=s(` Used Memory Lua: `),a(`span`,I,_(Math.round(X.used_memory_lua/1024))+`K`,1)]),_:1})])])]),a(`div`,te,[a(`div`,L,[i[13]||=a(`span`,{class:`text-base mb-2 block`},`Stats`,-1),a(`p`,R,[c(u,{class:`server-status-container`,type:`info`},{default:v(()=>[i[10]||=s(` Connected Clients: `),a(`span`,z,_(X.connected_clients),1)]),_:1})]),a(`p`,B,[c(u,{class:`server-status-container`,type:`info`},{default:v(()=>[i[11]||=s(` Total Connections: `),a(`span`,V,_(X.total_connections_received),1)]),_:1})]),a(`p`,H,[c(u,{class:`server-status-container`,type:`info`},{default:v(()=>[i[12]||=s(` Total Commands: `),a(`span`,U,_(X.total_commands_processed),1)]),_:1})])])])]),a(`div`,W,[a(`div`,G,[i[14]||=a(`span`,{class:`text-base mb-2 block`},`Key Statistics`,-1),c(h,{data:Z.value},{default:v(()=>[c(m,{prop:`db`,label:`DB`}),c(m,{sortable:``,prop:`keys`,label:`Keys`,"sort-method":ne}),c(m,{sortable:``,prop:`expires`,label:`Expires`,"sort-method":re}),c(m,{sortable:``,prop:`avg_ttl`,label:`Avg TTL`,"sort-method":ie})]),_:1},8,[`data`])])]),a(`div`,K,[a(`div`,q,[i[15]||=a(`span`,{class:`text-base mb-2 block`},` All Redis Info`,-1),c(h,{data:Q.value},{default:v(()=>[c(m,{prop:`key`,label:`Key`}),c(m,{prop:`value`,label:`Value`})]),_:1},8,[`data`])])])])}}}),Y=r(J,[[`__scopeId`,`data-v-122fec95`]]);export{Y as default};