import{vRepeatClick as e}from"./repeat-click-Dr4eiNbz.js";import{CHANGE_EVENT as t,ElIcon as n,ElInput as r,INPUT_EVENT as i,UPDATE_MODEL_EVENT as a,_export_sfc as o,arrow_down_default as s,arrow_up_default as c,buildProps as l,computed as u,createBlock as d,createCommentVNode as f,createElementBlock as p,createVNode as m,debugWarn as h,defineComponent as g,isNil_default as _,isNumber as v,isString as ee,isUndefined as y,minus_default as te,normalizeClass as b,onMounted as ne,onUpdated as re,openBlock as x,plus_default as ie,reactive as ae,ref as oe,renderSlot as S,throwError as se,unref as C,useAriaProps as w,useDeprecated as T,useFormDisabled as E,useFormItem as D,useFormSize as O,useLocale as ce,useNamespace as le,useSizeProp as k,watch as ue,withCtx as A,withDirectives as j,withInstall as M,withKeys as N,withModifiers as P}from"./app-ctFZFRv9.js";const F=l({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:1/0},min:{type:Number,default:-1/0},modelValue:Number,readonly:Boolean,disabled:Boolean,size:k,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:``,values:[``,`right`]},valueOnClear:{type:[String,Number,null],validator:e=>e===null||v(e)||[`min`,`max`].includes(e),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:e=>e>=0&&e===Number.parseInt(`${e}`,10)},validateEvent:{type:Boolean,default:!0},...w([`ariaLabel`])}),I={[t]:(e,t)=>t!==e,blur:e=>e instanceof FocusEvent,focus:e=>e instanceof FocusEvent,[i]:e=>v(e)||_(e),[a]:e=>v(e)||_(e)},de=[`aria-label`,`onKeydown`],fe=[`aria-label`,`onKeydown`],L=g({name:`ElInputNumber`}),R=g({...L,props:F,emits:I,setup(o,{expose:l,emit:g}){let w=o,{t:k}=ce(),M=le(`input-number`),F=oe(),I=ae({currentValue:w.modelValue,userInput:null}),{formItem:L}=D(),R=u(()=>v(w.modelValue)&&w.modelValue<=w.min),z=u(()=>v(w.modelValue)&&w.modelValue>=w.max),B=u(()=>{let e=K(w.step);return y(w.precision)?Math.max(K(w.modelValue),e):(e>w.precision&&h(`InputNumber`,`precision should not be less than the decimal places of step`),w.precision)}),V=u(()=>w.controls&&w.controlsPosition===`right`),H=O(),U=E(),W=u(()=>{if(I.userInput!==null)return I.userInput;let e=I.currentValue;if(_(e))return``;if(v(e)){if(Number.isNaN(e))return``;y(w.precision)||(e=e.toFixed(w.precision))}return e}),G=(e,t)=>{if(y(t)&&(t=B.value),t===0)return Math.round(e);let n=String(e),r=n.indexOf(`.`);if(r===-1)return e;let i=n.replace(`.`,``).split(``),a=i[r+t];if(!a)return e;let o=n.length;return n.charAt(o-1)===`5`&&(n=`${n.slice(0,Math.max(0,o-1))}6`),Number.parseFloat(Number(n).toFixed(t))},K=e=>{if(_(e))return 0;let t=e.toString(),n=t.indexOf(`.`),r=0;return n!==-1&&(r=t.length-n-1),r},q=(e,t=1)=>v(e)?G(e+w.step*t):I.currentValue,J=()=>{if(w.readonly||U.value||z.value)return;let e=Number(W.value)||0,t=q(e);Z(t),g(i,I.currentValue),$()},Y=()=>{if(w.readonly||U.value||R.value)return;let e=Number(W.value)||0,t=q(e,-1);Z(t),g(i,I.currentValue),$()},X=(e,t)=>{let{max:n,min:r,step:i,precision:o,stepStrictly:s,valueOnClear:c}=w;n<r&&se(`InputNumber`,`min should not be greater than max.`);let l=Number(e);if(_(e)||Number.isNaN(l))return null;if(e===``){if(c===null)return null;l=ee(c)?{min:r,max:n}[c]:c}return s&&(l=G(Math.round(l/i)*i,o)),y(o)||(l=G(l,o)),(l>n||l<r)&&(l=l>n?n:r,t&&g(a,l)),l},Z=(e,n=!0)=>{var r;let i=I.currentValue,o=X(e);if(!n){g(a,o);return}i===o&&e||(I.userInput=null,g(a,o),i!==o&&g(t,o,i),w.validateEvent&&((r=L?.validate)==null||r.call(L,`change`).catch(e=>h(e))),I.currentValue=o)},pe=e=>{I.userInput=e;let t=e===``?null:Number(e);g(i,t),Z(t,!1)},me=e=>{let t=e===``?``:Number(e);(v(t)&&!Number.isNaN(t)||e===``)&&Z(t),$(),I.userInput=null},he=()=>{var e,t;(t=(e=F.value)?.focus)==null||t.call(e)},ge=()=>{var e,t;(t=(e=F.value)?.blur)==null||t.call(e)},_e=e=>{g(`focus`,e)},Q=e=>{var t;I.userInput=null,g(`blur`,e),w.validateEvent&&((t=L?.validate)==null||t.call(L,`blur`).catch(e=>h(e)))},$=()=>{I.currentValue!==w.modelValue&&(I.currentValue=w.modelValue)},ve=e=>{document.activeElement===e.target&&e.preventDefault()};return ue(()=>w.modelValue,(e,t)=>{let n=X(e,!0);I.userInput===null&&n!==t&&(I.currentValue=n)},{immediate:!0}),ne(()=>{var e;let{min:t,max:n,modelValue:r}=w,i=(e=F.value)?.input;if(i.setAttribute(`role`,`spinbutton`),Number.isFinite(n)?i.setAttribute(`aria-valuemax`,String(n)):i.removeAttribute(`aria-valuemax`),Number.isFinite(t)?i.setAttribute(`aria-valuemin`,String(t)):i.removeAttribute(`aria-valuemin`),i.setAttribute(`aria-valuenow`,I.currentValue||I.currentValue===0?String(I.currentValue):``),i.setAttribute(`aria-disabled`,String(U.value)),!v(r)&&r!=null){let e=Number(r);Number.isNaN(e)&&(e=null),g(a,e)}i.addEventListener(`wheel`,ve,{passive:!1})}),re(()=>{var e,t;let n=(e=F.value)?.input;n?.setAttribute(`aria-valuenow`,`${(t=I.currentValue)??``}`)}),T({from:`label`,replacement:`aria-label`,version:`2.8.0`,scope:`el-input-number`,ref:`https://element-plus.org/en-US/component/input-number.html`},u(()=>!!w.label)),l({focus:he,blur:ge}),(t,i)=>(x(),p(`div`,{class:b([C(M).b(),C(M).m(C(H)),C(M).is(`disabled`,C(U)),C(M).is(`without-controls`,!t.controls),C(M).is(`controls-right`,C(V))]),onDragstart:i[0]||=P(()=>{},[`prevent`])},[t.controls?j((x(),p(`span`,{key:0,role:`button`,"aria-label":C(k)(`el.inputNumber.decrease`),class:b([C(M).e(`decrease`),C(M).is(`disabled`,C(R))]),onKeydown:N(Y,[`enter`])},[S(t.$slots,`decrease-icon`,{},()=>[m(C(n),null,{default:A(()=>[C(V)?(x(),d(C(s),{key:0})):(x(),d(C(te),{key:1}))]),_:1})])],42,de)),[[C(e),Y]]):f(`v-if`,!0),t.controls?j((x(),p(`span`,{key:1,role:`button`,"aria-label":C(k)(`el.inputNumber.increase`),class:b([C(M).e(`increase`),C(M).is(`disabled`,C(z))]),onKeydown:N(J,[`enter`])},[S(t.$slots,`increase-icon`,{},()=>[m(C(n),null,{default:A(()=>[C(V)?(x(),d(C(c),{key:0})):(x(),d(C(ie),{key:1}))]),_:1})])],42,fe)),[[C(e),J]]):f(`v-if`,!0),m(C(r),{id:t.id,ref_key:`input`,ref:F,type:`number`,step:t.step,"model-value":C(W),placeholder:t.placeholder,readonly:t.readonly,disabled:C(U),size:C(H),max:t.max,min:t.min,name:t.name,"aria-label":t.label||t.ariaLabel,"validate-event":!1,onKeydown:[N(P(J,[`prevent`]),[`up`]),N(P(Y,[`prevent`]),[`down`])],onBlur:Q,onFocus:_e,onInput:pe,onChange:me},null,8,[`id`,`step`,`model-value`,`placeholder`,`readonly`,`disabled`,`size`,`max`,`min`,`name`,`aria-label`,`onKeydown`])],34))}});var z=o(R,[[`__file`,`input-number.vue`]]);const B=M(z);export{B as ElInputNumber};