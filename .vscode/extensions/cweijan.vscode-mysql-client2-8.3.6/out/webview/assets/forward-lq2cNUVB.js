import"./isEqual-DUAGDpZY.js";import"./isArrayLikeObject-DWAcihF8.js";import"./merge-XDSJ7w6H.js";import"./_baseIteratee-t-25AuYs.js";import{ElTable as e,ElTableColumn as t}from"./table-Db0XwM4K.js";import{ElDialog as n}from"./dialog-BxcJDRn2.js";import"./click-outside-CeocQVdO.js";import"./checkbox-C8nKweXK.js";import{ElRadioButton as r,ElRadioGroup as i}from"./radio-DiiA3Vy3.js";import{$t as a,ElForm as o,ElFormItem as s,ElInput as c,Fragment as l,__plugin_vue_export_helper_default as u,computed as d,confirmEl as f,createBaseVNode as p,createBlock as m,createCommentVNode as h,createElementBlock as g,createTextVNode as _,createVNode as v,defineComponent as y,defineStore as b,handler as x,notify as S,onBeforeMount as C,onMounted as w,openBlock as T,reactive as E,ref as D,resolveComponent as O,success as k,toDisplayString as A,unref as j,watch as M,withCtx as N,withKeys as P}from"./app-ctFZFRv9.js";const F=b(`forward`,{state:()=>({panel:{visible:!1,loading:!1,edit:{id:null,name:null,autoStartUp:null,type:null,localHost:null,localPort:null,remoteHost:null,remotePort:null}}})});let I=function(e){return e[e.Stop=0]=`Stop`,e[e.Running=1]=`Running`,e[e.AlreadyUsed=2]=`AlreadyUsed`,e}({});const L={class:`mb-2 ml-20`},R={class:`flex flex-row items-center w-72`},z={class:`forward-arrow`},B={key:0,class:`el-icon-bottom`},V={key:1,class:`el-icon-top`},H={class:`flex flex-row items-center w-72`},U={class:`flex flex-row`};var W=y({__name:`ForwardDialog`,emits:[`save`],setup(e,{emit:t}){let u=E({host:null}),f=t,y=F(),b=d(()=>y.panel),S=d(()=>b.value.edit.type==`Dynamic`?`1080`:`port`),w=d(()=>{switch(b.value.edit.type){case`Local`:return a(`ssh.portForward.local`);case`Remote`:return a(`ssh.portForward.remote`)}return a(`ssh.portForward.dynamic`)});M(()=>b.value.edit.type,e=>{b.value.edit.id||(b.value.edit.remoteHost=e==`Remote`?u.host:`127.0.0.1`)}),C(()=>{x.on(`config`,e=>{Object.assign(u,e)})});let D=()=>{f(`save`,b.value.edit),b.value.loading=!0};return(e,t)=>{let u=O(`RedMark`),d=r,f=i,y=s,x=c,C=O(`vsc-switch`),E=o,k=O(`vsc-button`),M=n;return T(),m(M,{ref:`editDialog`,modelValue:b.value.visible,"onUpdate:modelValue":t[11]||=e=>b.value.visible=e,"show-close":!1,title:`Port Fowarding`,width:`550px`,top:`3vh`,closeOnClickModal:!1},{footer:N(()=>[v(k,{type:`secondary`,onClick:t[10]||=e=>b.value.visible=!1},{default:N(()=>[_(A(j(a)(`common.cancel`)),1)]),_:1}),v(k,{loading:b.value.loading,onClick:D},{default:N(()=>t[20]||=[_(`Save`)]),_:1},8,[`loading`])]),default:N(()=>[v(E,{ref:`infoForm`,model:b.value.edit,"label-width":`120px`},{default:N(()=>[p(`div`,L,A(w.value),1),v(y,null,{label:N(()=>[v(u),t[12]||=_(`Type `)]),default:N(()=>[v(f,{modelValue:b.value.edit.type,"onUpdate:modelValue":t[3]||=e=>b.value.edit.type=e,type:`relax`},{default:N(()=>[v(d,{modelValue:b.value.edit.type,"onUpdate:modelValue":t[0]||=e=>b.value.edit.type=e,value:`Local`},{default:N(()=>t[13]||=[_(`Local`)]),_:1},8,[`modelValue`]),v(d,{modelValue:b.value.edit.type,"onUpdate:modelValue":t[1]||=e=>b.value.edit.type=e,value:`Remote`},{default:N(()=>t[14]||=[_(`Remote`)]),_:1},8,[`modelValue`]),v(d,{modelValue:b.value.edit.type,"onUpdate:modelValue":t[2]||=e=>b.value.edit.type=e,value:`Dynamic`},{default:N(()=>t[15]||=[_(` Dynamic(Socks Proxy) `)]),_:1},8,[`modelValue`])]),_:1},8,[`modelValue`])]),_:1}),v(y,null,{label:N(()=>[v(u),t[16]||=_(`Local `)]),default:N(()=>[p(`div`,R,[v(x,{modelValue:b.value.edit.localHost,"onUpdate:modelValue":t[4]||=e=>b.value.edit.localHost=e,class:`basis-72`},null,8,[`modelValue`]),t[17]||=p(`span`,{class:`basis-14 text-center text-base`},`:`,-1),v(x,{modelValue:b.value.edit.localPort,"onUpdate:modelValue":t[5]||=e=>b.value.edit.localPort=e,placeholder:S.value,class:`basis-32`},null,8,[`modelValue`,`placeholder`])])]),_:1}),b.value.edit.type==`Dynamic`?h(``,!0):(T(),g(l,{key:0},[p(`div`,z,[b.value.edit.type==`Remote`?(T(),g(`i`,B)):(T(),g(`i`,V))]),v(y,null,{label:N(()=>[v(u),t[18]||=_(`Remote `)]),default:N(()=>[p(`div`,H,[v(x,{modelValue:b.value.edit.remoteHost,"onUpdate:modelValue":t[6]||=e=>b.value.edit.remoteHost=e,class:`basis-72`},null,8,[`modelValue`]),t[19]||=p(`span`,{class:`basis-14 text-center text-base`},`:`,-1),v(x,{modelValue:b.value.edit.remotePort,"onUpdate:modelValue":t[7]||=e=>b.value.edit.remotePort=e,placeholder:`port`,class:`basis-32`,onKeyup:P(D,[`enter`])},null,8,[`modelValue`])])]),_:1})],64)),p(`div`,U,[v(y,{label:`Name`,class:`w-64`},{default:N(()=>[v(x,{modelValue:b.value.edit.name,"onUpdate:modelValue":t[8]||=e=>b.value.edit.name=e},null,8,[`modelValue`])]),_:1}),v(y,{class:`auto-start-form-item`,label:`Auto Start`,title:`Auto start with VS Code startup`},{default:N(()=>[v(C,{modelValue:b.value.edit.autoStartUp,"onUpdate:modelValue":t[9]||=e=>b.value.edit.autoStartUp=e,class:`ml-2`},null,8,[`modelValue`])]),_:1})])]),_:1},8,[`model`])]),_:1},8,[`modelValue`])}}}),G=u(W,[[`__scopeId`,`data-v-78656478`]]);const K={class:`flex justify-start items-center mb-4`},q={class:`space-x-2`};var J=y({__name:`ForwardServerTable`,props:{serverList:Array},emits:[`selectServer`,`importConfig`,`exportConfig`],setup(n,{emit:r}){let i=r,a=()=>{x.emit(`importConfig`,{type:`merge`})},o=()=>{x.emit(`exportConfig`)};return(r,s)=>{let c=O(`vsc-button`),l=t,u=e;return T(),g(`div`,null,[p(`div`,K,[s[3]||=p(`h2`,{class:`text-xl font-semibold mr-4`},`Server Port Forwarding`,-1),p(`div`,q,[v(c,{type:`primary`,size:`micro`,style:{color:`var(--vscode-terminal-ansiBrightGreen)`},icon:`codicon-refresh`,onClick:s[0]||=e=>j(x).emit(`load`)}),v(c,{type:`primary`,size:`micro`,icon:`codicon-arrow-down`,onClick:o},{default:N(()=>s[1]||=[_(`Export`)]),_:1}),v(c,{type:`primary`,size:`micro`,icon:`codicon-arrow-up`,onClick:a},{default:N(()=>s[2]||=[_(`Import`)]),_:1})])]),v(u,{data:n.serverList,style:{width:`100%`},class:`rounded-md shadow-sm`},{default:N(()=>[v(l,{prop:`key`,label:`Key`,width:`150`,align:`center`}),v(l,{prop:`name`,label:`Name`,width:`350`,align:`center`}),v(l,{prop:`count`,label:`Count`,width:`70`,align:`center`}),v(l,{label:`Operation`,width:`120`,align:`center`},{default:N(({row:e})=>[v(c,{type:`icon`,icon:`codicon-edit`,title:`Edit Configuration`,class:`hover:opacity-80`,onClick:t=>i(`selectServer`,e)},null,8,[`onClick`])]),_:1})]),_:1},8,[`data`])])}}}),Y=J;const X={class:`p-3`},Z={class:`mb-3 text-base`},Q={class:`mr-5`};var $=y({__name:`forward`,setup(n){let r=D(``),i=D(null),o=D([]),s=D([]),c=D(!1),u=F(),y=d(()=>u.panel);w(()=>{x.on(`forwardList`,e=>{s.value=e,y.value.loading=!1,y.value.visible=!1}).on(`importResult`,e=>{e.success&&(k(e.message),x.emit(`load`))}).on(`serverList`,e=>{o.value=e}).on(`name`,e=>{r.value=e}).on(`success`,()=>{x.emit(`load`)}).on(`error`,({id:e,message:t})=>{for(let t of s.value)t.id==e&&(t.loading=!1);y.value.loading=!1,S({message:t,type:`error`})}).init()});let b=e=>{r.value=e.name,i.value=e.key,c.value=!1,x.emit(`selectServer`,e.key)},C=e=>{x.emit(`save`,{info:e,serverKey:i.value})},E=()=>{y.value.edit={type:`Local`,autoStartUp:!1,localHost:`127.0.0.1`,remoteHost:`127.0.0.1`},y.value.visible=!0},j=()=>{x.emit(`load`)},M=e=>{switch(e){case I.Running:return`Running`;case I.AlreadyUsed:return`AlreadyUsed`;default:return`Stop`}},P=e=>{e.loading=!0,x.emit(`start`,e.id)},L=e=>{x.emit(`stop`,e)},R=e=>{x.emit(`remove`,{id:e,serverKey:i.value})},z=e=>{y.value.edit={...e},y.value.visible=!0},B=e=>{f(a(`confirm.deleteForward`)).then(()=>{R(e)})};return(n,i)=>{let a=O(`vsc-button`),u=t,d=O(`vsc-switch`),f=e;return T(),g(`div`,X,[c.value?(T(),m(Y,{key:0,serverList:o.value,onSelectServer:b},null,8,[`serverList`])):(T(),g(l,{key:1},[p(`div`,Z,[p(`span`,Q,`Connection: `+A(r.value),1),v(a,{size:`micro`,icon:`codicon-refresh text-base`,style:{color:`var(--vscode-terminal-ansiBrightGreen)`},onClick:j}),v(a,{size:`micro`,icon:`codicon-add text-base`,style:{color:`var(--vscode-terminal-ansiCyan)`},onClick:E}),v(a,{size:`micro`,icon:`codicon-arrow-left`,onClick:i[0]||=e=>c.value=!0},{default:N(()=>i[1]||=[_(` Manager `)]),_:1})]),v(f,{data:s.value,style:{width:`100%`}},{default:N(()=>[v(u,{prop:`name`,label:`Name`}),v(u,{prop:`type`,label:`Type`}),v(u,{prop:`localPort`,label:`Local Port`}),v(u,{prop:`remoteHost`,label:`Remote Host`,width:`120`}),v(u,{prop:`remotePort`,label:`Remote Port`,width:`120`}),v(u,{prop:`keepAlive`,label:`KeepAlive`},{default:N(e=>[v(d,{modelValue:e.row.keepAlive,"onUpdate:modelValue":t=>e.row.keepAlive=t,onChange:t=>C(e.row)},null,8,[`modelValue`,`onUpdate:modelValue`,`onChange`])]),_:1}),v(u,{prop:`autoStartUp`,label:`AutoStart`},{default:N(e=>[v(d,{modelValue:e.row.autoStartUp,"onUpdate:modelValue":t=>e.row.autoStartUp=t,onChange:t=>C(e.row)},null,8,[`modelValue`,`onUpdate:modelValue`,`onChange`])]),_:1}),v(u,{prop:`state`,label:`State`},{default:N(e=>[e.row.state==0?(T(),m(a,{key:0,type:`icon`,icon:`el-icon-close text-base text-red`})):e.row.state==1?(T(),m(a,{key:1,type:`icon`,icon:`el-icon-check text-base text-green`})):(T(),m(a,{key:2,type:`icon`,icon:`el-icon-video-pause text-base text-yellow`})),_(` `+A(M(e.row.state)),1)]),_:1}),v(u,{fixed:`right`,width:`200`},{default:N(e=>[e.row.state==1?h(``,!0):(T(),m(a,{key:0,type:`success`,size:`mini`,title:`Start`,loading:e.row.loading,icon:`el-icon-video-play`,style:{color:`var(--vscode-terminal-ansiBrightGreen)`},circle:``,onClick:t=>{P(e.row)}},null,8,[`loading`,`onClick`])),e.row.state==1?(T(),m(a,{key:1,type:`danger`,size:`mini`,title:`Stop`,icon:`el-icon-switch-button`,circle:``,onClick:t=>{L(e.row.id)}},null,8,[`onClick`])):h(``,!0),v(a,{type:`primary`,size:`mini`,title:`Edit`,icon:`el-icon-edit`,style:{color:`var(--vscode-terminal-ansiCyan)`},circle:``,onClick:t=>{z(e.row)}},null,8,[`onClick`]),v(a,{title:`delete`,type:`danger`,size:`mini`,icon:`el-icon-delete`,style:{color:`#f56c6c`},circle:``,onClick:t=>B(e.row.id)},null,8,[`onClick`])]),_:1})]),_:1},8,[`data`])],64)),v(G,{onSave:C})])}}}),ee=$;export{ee as default};