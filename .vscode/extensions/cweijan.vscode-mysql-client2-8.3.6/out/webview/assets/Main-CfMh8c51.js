import{$t as e,Fragment as t,KeepAlive as n,Transition as r,__plugin_vue_export_helper_default as i,computed as a,createBaseVNode as o,createBlock as s,createCommentVNode as c,createElementBlock as l,createTextVNode as u,createVNode as d,defineComponent as f,error as p,handler as m,normalizeClass as h,onMounted as g,openBlock as _,ref as v,renderList as y,resolveComponent as b,resolveDynamicComponent as x,toDisplayString as S,unref as C,useCoreStore as w,useRouter as T,vShow as E,withCtx as D,withDirectives as O}from"./app-ctFZFRv9.js";import{vscode_default as k}from"./vscode-DI01oWlL.js";import{DatabaseType as A,isNoSQL as j}from"./constants-36FjBj35.js";import"./wrapper-D-Es_PY1.js";import"./objectUtil-DGxGSfnv.js";import"./arrayUtil-SL5L5q5A.js";import{useResultUIStore as M}from"./resultUIStore-D-ontmVt.js";const N={id:`tableTab`,class:`tab`},P=[`onClick`];var F=f({__name:`Main`,setup(i){let f=T(),F=M(),I=w(),L=v(null),R=v(!1),z=v(`result`),B=a(()=>[{id:`design`,i18n:`table.design`,icon:`codicon-edit`,disabled:()=>!R.value},{id:`result`,i18n:`table.data`,icon:`codicon-database blue`},{id:`log`,i18n:`common.log`,icon:`codicon-file`,hidden:()=>L.value==A.ES},{id:`erDiagram`,i18n:`table.erDiagram`,icon:`codicon-symbol-class yellow`,hidden:()=>j(L.value),disabled:()=>!R.value||j(L.value)},{id:`status`,i18n:`table.monitor`,icon:`codicon-graph-line`,disabled:()=>!F.monitorStatus.hasAnyMonitor,hidden:()=>j(L.value)},{id:`es-status`,i18n:`table.monitor`,icon:`codicon-graph-line`,hidden:()=>L.value!=A.ES}].filter(e=>{var t;return!(t=e.hidden)?.call(e)})),V=e=>{typeof e==`string`&&(e={id:e});let{id:t,disabled:n}=e;n?.()||z.value!==t&&(z.value=t,f.push(t),t==`log`&&m.emit(`initTerminal`))};g(()=>{z.value=f.currentRoute.value.name,window.addEventListener(`message`,({data:e})=>{[`RUN`,`DATA`].includes(e.type)&&(L.value=e.content.dbType,[`design`,`result`,`erDiagram`].includes(z.value)||V(`result`))}),m.on(`table_info`,({singleTable:e,dbType:t,monitorStatus:n})=>{L.value=t,R.value=e,Object.assign(F.monitorStatus,n),R.value||V(`result`)})});let H=()=>{m.emit(`editInVSCode`,F.toolbar.sql)},U=()=>{if(!I.isPay)return p(e(`plan.premiumNotice`));m.emit(`viewJSON`)};return(i,a)=>{let f=b(`vsc-tooltip`),p=b(`router-view`);return _(),l(`div`,null,[O(o(`ul`,N,[(_(!0),l(t,null,y(B.value,(t,n)=>{var r;return _(),l(`li`,{key:n,class:h([`tab__item`,{"tab__item--active":z.value==t.id,disabled:(r=t.disabled)?.call(t)}]),onClick:e=>V(t)},[t.icon?(_(),l(`i`,{key:0,type:`icon`,class:h(t.icon),style:{position:`relative`,top:`3px`}},null,2)):c(``,!0),u(` `+S(C(e)(t.i18n)),1)],10,P)}),128)),d(f,{title:C(e)(`table.editInVSCode`)},{default:D(()=>[o(`div`,{class:`panel-icon !pl-2`,style:{"border-left":`1px solid var(--border-color)`},onClick:H},a[1]||=[o(`img`,{src:k,alt:`VSCode Logo`},null,-1)])]),_:1},8,[`title`]),d(f,{title:C(e)(`table.viewAsJSON`)},{default:D(()=>[o(`div`,{class:`panel-icon`,onClick:U},a[2]||=[o(`i`,{class:`codicon-json text-yellow`},null,-1)])]),_:1},8,[`title`]),d(f,{title:C(e)(`table.history`)},{default:D(()=>[o(`div`,{class:`panel-icon`,onClick:a[0]||=e=>C(m).emit(`viewHistory`)},a[3]||=[o(`i`,{class:`codicon-history`},null,-1)])]),_:1},8,[`title`])],512),[[E,C(F).showSQLPanel]]),d(p,null,{default:D(({Component:e})=>[d(r,null,{default:D(()=>[(_(),s(n,null,[(_(),s(x(e)))],1024))]),_:2},1024)]),_:1})])}}}),I=i(F,[[`__scopeId`,`data-v-26cb6133`]]);export{I as default};