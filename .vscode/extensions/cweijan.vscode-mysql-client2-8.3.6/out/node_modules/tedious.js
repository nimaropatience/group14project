"use strict";var M=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Xe=M((Xr,wf)=>{"use strict";Object.defineProperty(Xr,"__esModule",{value:!0});Xr.default=void 0;var nw=65536*65536,mf=1/nw,rw=Buffer.from([254,255,255,255,255,255,255,255]),gf=Buffer.alloc(0),$r=class{constructor(e,r,a){this.initialSize=e,this.encoding=r||"ucs2",this.doubleSizeGrowth=a||!1,this.buffer=Buffer.alloc(this.initialSize,0),this.compositeBuffer=gf,this.position=0}get data(){return this.newBuffer(0),this.compositeBuffer}copyFrom(e){let r=e.length;this.makeRoomFor(r),e.copy(this.buffer,this.position),this.position+=r}makeRoomFor(e){if(this.buffer.length-this.position<e)if(this.doubleSizeGrowth){let r=Math.max(128,this.buffer.length*2);for(;r<e;)r*=2;this.newBuffer(r)}else this.newBuffer(e)}newBuffer(e){let r=this.buffer.slice(0,this.position);this.compositeBuffer=Buffer.concat([this.compositeBuffer,r]),this.buffer=e===0?gf:Buffer.alloc(e,0),this.position=0}writeUInt8(e){this.makeRoomFor(1),this.buffer.writeUInt8(e,this.position),this.position+=1}writeUInt16LE(e){this.makeRoomFor(2),this.buffer.writeUInt16LE(e,this.position),this.position+=2}writeUShort(e){this.writeUInt16LE(e)}writeUInt16BE(e){this.makeRoomFor(2),this.buffer.writeUInt16BE(e,this.position),this.position+=2}writeUInt24LE(e){this.makeRoomFor(3),this.buffer[this.position+2]=e>>>16&255,this.buffer[this.position+1]=e>>>8&255,this.buffer[this.position]=e&255,this.position+=3}writeUInt32LE(e){this.makeRoomFor(4),this.buffer.writeUInt32LE(e,this.position),this.position+=4}writeBigInt64LE(e){this.makeRoomFor(8),this.buffer.writeBigInt64LE(e,this.position),this.position+=8}writeInt64LE(e){this.writeBigInt64LE(BigInt(e))}writeUInt64LE(e){this.writeBigUInt64LE(BigInt(e))}writeBigUInt64LE(e){this.makeRoomFor(8),this.buffer.writeBigUInt64LE(e,this.position),this.position+=8}writeUInt32BE(e){this.makeRoomFor(4),this.buffer.writeUInt32BE(e,this.position),this.position+=4}writeUInt40LE(e){this.writeInt32LE(e&-1),this.writeUInt8(Math.floor(e*mf))}writeInt8(e){this.makeRoomFor(1),this.buffer.writeInt8(e,this.position),this.position+=1}writeInt16LE(e){this.makeRoomFor(2),this.buffer.writeInt16LE(e,this.position),this.position+=2}writeInt16BE(e){this.makeRoomFor(2),this.buffer.writeInt16BE(e,this.position),this.position+=2}writeInt32LE(e){this.makeRoomFor(4),this.buffer.writeInt32LE(e,this.position),this.position+=4}writeInt32BE(e){this.makeRoomFor(4),this.buffer.writeInt32BE(e,this.position),this.position+=4}writeFloatLE(e){this.makeRoomFor(4),this.buffer.writeFloatLE(e,this.position),this.position+=4}writeDoubleLE(e){this.makeRoomFor(8),this.buffer.writeDoubleLE(e,this.position),this.position+=8}writeString(e,r){r==null&&(r=this.encoding);let a=Buffer.byteLength(e,r);this.makeRoomFor(a),this.buffer.write(e,this.position,r),this.position+=a}writeBVarchar(e,r){this.writeUInt8(e.length),this.writeString(e,r)}writeUsVarchar(e,r){this.writeUInt16LE(e.length),this.writeString(e,r)}writeUsVarbyte(e,r){r==null&&(r=this.encoding);let a;e instanceof Buffer?a=e.length:(e=e.toString(),a=Buffer.byteLength(e,r)),this.writeUInt16LE(a),e instanceof Buffer?this.writeBuffer(e):(this.makeRoomFor(a),this.buffer.write(e,this.position,r),this.position+=a)}writePLPBody(e,r){r==null&&(r=this.encoding);let a;e instanceof Buffer?a=e.length:(e=e.toString(),a=Buffer.byteLength(e,r)),this.writeBuffer(rw),a>0&&(this.writeUInt32LE(a),e instanceof Buffer?this.writeBuffer(e):(this.makeRoomFor(a),this.buffer.write(e,this.position,r),this.position+=a)),this.writeUInt32LE(0)}writeBuffer(e){let r=e.length;this.makeRoomFor(r),e.copy(this.buffer,this.position),this.position+=r}writeMoney(e){this.writeInt32LE(Math.floor(e*mf)),this.writeInt32LE(e&-1)}},jb=Xr.default=$r;wf.exports=$r});var Ye=M(W=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});W.Token=W.TYPE=W.SSPIToken=W.RowToken=W.RoutingEnvChangeToken=W.RollbackTransactionEnvChangeToken=W.ReturnValueToken=W.ReturnStatusToken=W.ResetConnectionEnvChangeToken=W.PacketSizeEnvChangeToken=W.OrderToken=W.NBCRowToken=W.LoginAckToken=W.LanguageEnvChangeToken=W.InfoMessageToken=W.FedAuthInfoToken=W.FeatureExtAckToken=W.ErrorMessageToken=W.DoneToken=W.DoneProcToken=W.DoneInProcToken=W.DatabaseMirroringPartnerEnvChangeToken=W.DatabaseEnvChangeToken=W.CommitTransactionEnvChangeToken=W.CollationChangeToken=W.ColMetadataToken=W.CharsetEnvChangeToken=W.BeginTransactionEnvChangeToken=void 0;var zb=W.TYPE={ALTMETADATA:136,ALTROW:211,COLMETADATA:129,COLINFO:165,DONE:253,DONEPROC:254,DONEINPROC:255,ENVCHANGE:227,ERROR:170,FEATUREEXTACK:174,FEDAUTHINFO:238,INFO:171,LOGINACK:173,NBCROW:210,OFFSET:120,ORDER:169,RETURNSTATUS:121,RETURNVALUE:172,ROW:209,SSPI:237,TABNAME:164},_e=class{constructor(e,r){this.name=e,this.handlerName=r}};W.Token=_e;var ca=class extends _e{constructor(e){super("COLMETADATA","onColMetadata"),this.columns=e}};W.ColMetadataToken=ca;var fa=class extends _e{constructor({more:e,sqlError:r,attention:a,serverError:l,rowCount:c,curCmd:h}){super("DONE","onDone"),this.more=e,this.sqlError=r,this.attention=a,this.serverError=l,this.rowCount=c,this.curCmd=h}};W.DoneToken=fa;var ha=class extends _e{constructor({more:e,sqlError:r,attention:a,serverError:l,rowCount:c,curCmd:h}){super("DONEINPROC","onDoneInProc"),this.more=e,this.sqlError=r,this.attention=a,this.serverError=l,this.rowCount=c,this.curCmd=h}};W.DoneInProcToken=ha;var da=class extends _e{constructor({more:e,sqlError:r,attention:a,serverError:l,rowCount:c,curCmd:h}){super("DONEPROC","onDoneProc"),this.more=e,this.sqlError=r,this.attention=a,this.serverError=l,this.rowCount=c,this.curCmd=h}};W.DoneProcToken=da;var pa=class extends _e{constructor(e,r){super("ENVCHANGE","onDatabaseChange"),this.type="DATABASE",this.newValue=e,this.oldValue=r}};W.DatabaseEnvChangeToken=pa;var _a=class extends _e{constructor(e,r){super("ENVCHANGE","onLanguageChange"),this.type="LANGUAGE",this.newValue=e,this.oldValue=r}};W.LanguageEnvChangeToken=_a;var Ea=class extends _e{constructor(e,r){super("ENVCHANGE","onCharsetChange"),this.type="CHARSET",this.newValue=e,this.oldValue=r}};W.CharsetEnvChangeToken=Ea;var ma=class extends _e{constructor(e,r){super("ENVCHANGE","onPacketSizeChange"),this.type="PACKET_SIZE",this.newValue=e,this.oldValue=r}};W.PacketSizeEnvChangeToken=ma;var ga=class extends _e{constructor(e,r){super("ENVCHANGE","onBeginTransaction"),this.type="BEGIN_TXN",this.newValue=e,this.oldValue=r}};W.BeginTransactionEnvChangeToken=ga;var wa=class extends _e{constructor(e,r){super("ENVCHANGE","onCommitTransaction"),this.type="COMMIT_TXN",this.newValue=e,this.oldValue=r}};W.CommitTransactionEnvChangeToken=wa;var Ta=class extends _e{constructor(e,r){super("ENVCHANGE","onRollbackTransaction"),this.type="ROLLBACK_TXN",this.newValue=e,this.oldValue=r}};W.RollbackTransactionEnvChangeToken=Ta;var ya=class extends _e{constructor(e,r){super("ENVCHANGE","onDatabaseMirroringPartner"),this.type="DATABASE_MIRRORING_PARTNER",this.newValue=e,this.oldValue=r}};W.DatabaseMirroringPartnerEnvChangeToken=ya;var Sa=class extends _e{constructor(e,r){super("ENVCHANGE","onResetConnection"),this.type="RESET_CONNECTION",this.newValue=e,this.oldValue=r}};W.ResetConnectionEnvChangeToken=Sa;var va=class extends _e{constructor(e,r){super("ENVCHANGE","onSqlCollationChange"),this.type="SQL_COLLATION",this.newValue=e,this.oldValue=r}};W.CollationChangeToken=va;var Na=class extends _e{constructor(e,r){super("ENVCHANGE","onRoutingChange"),this.type="ROUTING_CHANGE",this.newValue=e,this.oldValue=r}};W.RoutingEnvChangeToken=Na;var Oa=class extends _e{constructor(e,r){super("FEATUREEXTACK","onFeatureExtAck"),this.fedAuth=e,this.utf8Support=r}};W.FeatureExtAckToken=Oa;var Aa=class extends _e{constructor(e,r){super("FEDAUTHINFO","onFedAuthInfo"),this.spn=e,this.stsurl=r}};W.FedAuthInfoToken=Aa;var Ia=class extends _e{constructor({number:e,state:r,class:a,message:l,serverName:c,procName:h,lineNumber:m}){super("INFO","onInfoMessage"),this.number=e,this.state=r,this.class=a,this.message=l,this.serverName=c,this.procName=h,this.lineNumber=m}};W.InfoMessageToken=Ia;var Da=class extends _e{constructor({number:e,state:r,class:a,message:l,serverName:c,procName:h,lineNumber:m}){super("ERROR","onErrorMessage"),this.number=e,this.state=r,this.class=a,this.message=l,this.serverName=c,this.procName=h,this.lineNumber=m}};W.ErrorMessageToken=Da;var ba=class extends _e{constructor({interface:e,tdsVersion:r,progName:a,progVersion:l}){super("LOGINACK","onLoginAck"),this.interface=e,this.tdsVersion=r,this.progName=a,this.progVersion=l}};W.LoginAckToken=ba;var Ra=class extends _e{constructor(e){super("NBCROW","onRow"),this.columns=e}};W.NBCRowToken=Ra;var La=class extends _e{constructor(e){super("ORDER","onOrder"),this.orderColumns=e}};W.OrderToken=La;var Ca=class extends _e{constructor(e){super("RETURNSTATUS","onReturnStatus"),this.value=e}};W.ReturnStatusToken=Ca;var Ma=class extends _e{constructor({paramOrdinal:e,paramName:r,metadata:a,value:l}){super("RETURNVALUE","onReturnValue"),this.paramOrdinal=e,this.paramName=r,this.metadata=a,this.value=l}};W.ReturnValueToken=Ma;var Pa=class extends _e{constructor(e){super("ROW","onRow"),this.columns=e}};W.RowToken=Pa;var Fa=class extends _e{constructor(e,r){super("SSPICHALLENGE","onSSPI"),this.ntlmpacket=e,this.ntlmpacketBuffer=r}};W.SSPIToken=Fa});var Ba=M((Qr,yf)=>{"use strict";Object.defineProperty(Qr,"__esModule",{value:!0});Qr.default=void 0;var iw=require("events"),Tf=sw(Xe()),ow=require("stream"),Ua=Ye();function sw(t){return t&&t.__esModule?t:{default:t}}var xa={nullable:1,caseSen:2,updateableReadWrite:4,updateableUnknown:8,identity:16,computed:32,fixedLenCLRType:256,sparseColumnSet:1024,hidden:8192,key:16384,nullableUnknown:32768},aw={FINAL:0,MORE:1,ERROR:2,INXACT:4,COUNT:16,ATTN:32,SRVERROR:256},uw=Buffer.from([Ua.TYPE.ROW]),lw=Buffer.from([16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),cw=Buffer.from([0]),ka=class extends ow.Transform{constructor(e){super({writableObjectMode:!0}),this.bulkLoad=e,this.mainOptions=e.options,this.columns=e.columns,this.columnMetadataWritten=!1}_transform(e,r,a){this.columnMetadataWritten||(this.push(this.bulkLoad.getColMetaData()),this.columnMetadataWritten=!0),this.push(uw);for(let l=0;l<this.columns.length;l++){let c=this.columns[l],h=Array.isArray(e)?e[l]:e[c.objName];if(!this.bulkLoad.firstRowWritten)try{h=c.type.validate(h,c.collation)}catch(g){return a(g)}let m={length:c.length,scale:c.scale,precision:c.precision,value:h};if(c.type.name==="Text"||c.type.name==="Image"||c.type.name==="NText"){if(h==null){this.push(cw);continue}this.push(lw)}try{this.push(c.type.generateParameterLength(m,this.mainOptions));for(let g of c.type.generateParameterData(m,this.mainOptions))this.push(g)}catch(g){return a(g)}}process.nextTick(a)}_flush(e){this.push(this.bulkLoad.createDoneToken()),process.nextTick(e)}},Jr=class extends iw.EventEmitter{constructor(e,r,a,{checkConstraints:l=!1,fireTriggers:c=!1,keepNulls:h=!1,lockTable:m=!1,order:g={}},v){if(typeof l!="boolean")throw new TypeError('The "options.checkConstraints" property must be of type boolean.');if(typeof c!="boolean")throw new TypeError('The "options.fireTriggers" property must be of type boolean.');if(typeof h!="boolean")throw new TypeError('The "options.keepNulls" property must be of type boolean.');if(typeof m!="boolean")throw new TypeError('The "options.lockTable" property must be of type boolean.');if(typeof g!="object"||g===null)throw new TypeError('The "options.order" property must be of type object.');for(let[N,O]of Object.entries(g))if(O!=="ASC"&&O!=="DESC")throw new TypeError('The value of the "'+N+'" key in the "options.order" object must be either "ASC" or "DESC".');super(),this.error=void 0,this.canceled=!1,this.executionStarted=!1,this.collation=r,this.table=e,this.options=a,this.callback=v,this.columns=[],this.columnsByName={},this.firstRowWritten=!1,this.streamingMode=!1,this.rowToPacketTransform=new ka(this),this.bulkOptions={checkConstraints:l,fireTriggers:c,keepNulls:h,lockTable:m,order:g}}addColumn(e,r,{output:a=!1,length:l,precision:c,scale:h,objName:m=e,nullable:g=!0}){if(this.firstRowWritten)throw new Error("Columns cannot be added to bulk insert after the first row has been written.");if(this.executionStarted)throw new Error("Columns cannot be added to bulk insert after execution has started.");let v={type:r,name:e,value:null,output:a,length:l,precision:c,scale:h,objName:m,nullable:g,collation:this.collation};(r.id&48)===32&&v.length==null&&r.resolveLength&&(v.length=r.resolveLength(v)),r.resolvePrecision&&v.precision==null&&(v.precision=r.resolvePrecision(v)),r.resolveScale&&v.scale==null&&(v.scale=r.resolveScale(v)),this.columns.push(v),this.columnsByName[e]=v}getOptionsSql(){let e=[];if(this.bulkOptions.checkConstraints&&e.push("CHECK_CONSTRAINTS"),this.bulkOptions.fireTriggers&&e.push("FIRE_TRIGGERS"),this.bulkOptions.keepNulls&&e.push("KEEP_NULLS"),this.bulkOptions.lockTable&&e.push("TABLOCK"),this.bulkOptions.order){let r=[];for(let[a,l]of Object.entries(this.bulkOptions.order))r.push(`${a} ${l}`);r.length&&e.push(`ORDER (${r.join(", ")})`)}return e.length>0?` WITH (${e.join(",")})`:""}getBulkInsertSql(){let e="insert bulk "+this.table+"(";for(let r=0,a=this.columns.length;r<a;r++){let l=this.columns[r];r!==0&&(e+=", "),e+="["+l.name+"] "+l.type.declaration(l)}return e+=")",e+=this.getOptionsSql(),e}getTableCreationSql(){let e="CREATE TABLE "+this.table+`(
`;for(let r=0,a=this.columns.length;r<a;r++){let l=this.columns[r];r!==0&&(e+=`,
`),e+="["+l.name+"] "+l.type.declaration(l),l.nullable!==void 0&&(e+=" "+(l.nullable?"NULL":"NOT NULL"))}return e+=`
)`,e}getColMetaData(){let e=new Tf.default(100,null,!0);e.writeUInt8(Ua.TYPE.COLMETADATA),e.writeUInt16LE(this.columns.length);for(let r=0,a=this.columns.length;r<a;r++){let l=this.columns[r];this.options.tdsVersion<"7_2"?e.writeUInt16LE(0):e.writeUInt32LE(0);let c=xa.updateableReadWrite;l.nullable?c|=xa.nullable:l.nullable===void 0&&this.options.tdsVersion>="7_2"&&(c|=xa.nullableUnknown),e.writeUInt16LE(c),e.writeBuffer(l.type.generateTypeInfo(l,this.options)),l.type.hasTableName&&e.writeUsVarchar(this.table,"ucs2"),e.writeBVarchar(l.name,"ucs2")}return e.data}setTimeout(e){this.timeout=e}createDoneToken(){let e=new Tf.default(this.options.tdsVersion<"7_2"?9:13);e.writeUInt8(Ua.TYPE.DONE);let r=aw.FINAL;return e.writeUInt16LE(r),e.writeUInt16LE(0),e.writeUInt32LE(0),this.options.tdsVersion>="7_2"&&e.writeUInt32LE(0),e.data}cancel(){this.canceled||(this.canceled=!0,this.emit("cancel"))}},Zb=Qr.default=Jr;yf.exports=Jr});var Ya=M(($b,Sf)=>{Sf.exports={}});var Of=M((ti,Nf)=>{"use strict";Object.defineProperty(ti,"__esModule",{value:!0});ti.default=void 0;var fw=require("events"),hw=dw(require("util"));function vf(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(vf=function(a){return a?r:e})(t)}function dw(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var r=vf(e);if(r&&r.has(t))return r.get(t);var a={__proto__:null},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in t)if(c!=="default"&&Object.prototype.hasOwnProperty.call(t,c)){var h=l?Object.getOwnPropertyDescriptor(t,c):null;h&&(h.get||h.set)?Object.defineProperty(a,c,h):a[c]=t[c]}return a.default=t,r&&r.set(t,a),a}var ei=class extends fw.EventEmitter{constructor({data:e=!1,payload:r=!1,packet:a=!1,token:l=!1}={}){super(),this.options={data:e,payload:r,packet:a,token:l},this.indent="  "}packet(e,r){this.haveListeners()&&this.options.packet&&(this.log(""),this.log(e),this.log(r.headerToString(this.indent)))}data(e){this.haveListeners()&&this.options.data&&this.log(e.dataToString(this.indent))}payload(e){this.haveListeners()&&this.options.payload&&this.log(e())}token(e){this.haveListeners()&&this.options.token&&this.log(hw.inspect(e,{showHidden:!1,depth:5,colors:!0}))}haveListeners(){return this.listeners("debug").length>0}log(e){this.emit("debug",e)}},Xb=ti.default=ei;Nf.exports=ei});var ri=M(ni=>{"use strict";Object.defineProperty(ni,"__esModule",{value:!0});ni.default=void 0;var qa=class extends Error{constructor(){super("The operation was aborted"),this.code="ABORT_ERR",this.name="AbortError"}};ni.default=qa});var Df=M(si=>{"use strict";Object.defineProperty(si,"__esModule",{value:!0});si.sendInParallel=If;si.sendMessage=Ew;var pw=oi(require("dgram")),Af=oi(require("net")),_w=oi(require("node:url")),ii=oi(ri());function oi(t){return t&&t.__esModule?t:{default:t}}async function If(t,e,r,a){if(a.aborted)throw new ii.default;return await new Promise((l,c)=>{let h=[],m=0,g=L=>{m++,m===t.length&&(a.removeEventListener("abort",N),O(),c(L))},v=L=>{a.removeEventListener("abort",N),O(),l(L)},N=()=>{O(),c(new ii.default)},O=()=>{for(let L of h)L.removeListener("error",g),L.removeListener("message",v),L.close()};a.addEventListener("abort",N,{once:!0});for(let L=0;L<t.length;L++){let x=t[L].family===6?"udp6":"udp4",F=pw.default.createSocket(x);h.push(F),F.on("error",g),F.on("message",v),F.send(r,0,r.length,e,t[L].address)}})}async function Ew(t,e,r,a,l){if(a.aborted)throw new ii.default;let c;return Af.default.isIP(t)?c=[{address:t,family:Af.default.isIPv6(t)?6:4}]:c=await new Promise((h,m)=>{let g=()=>{m(new ii.default)},v=_w.default.domainToASCII(t);r(v===""?t:v,{all:!0},(N,O)=>{a.removeEventListener("abort",g),N?m(N):h(O)})}),await If(c,e,l,a)}});var bf=M(ai=>{"use strict";Object.defineProperty(ai,"__esModule",{value:!0});ai.default=void 0;var Va=class extends Error{constructor(){super("The operation was aborted due to timeout"),this.code="TIMEOUT_ERR",this.name="TimeoutError"}};ai.default=Va});var Rf=M(Ha=>{"use strict";Object.defineProperty(Ha,"__esModule",{value:!0});Ha.withTimeout=ww;var mw=gw(bf());function gw(t){return t&&t.__esModule?t:{default:t}}async function ww(t,e,r){let a=new AbortController,l=()=>{a.abort()},c=setTimeout(l,t);r?.addEventListener("abort",l,{once:!0});try{return await e(a.signal)}catch(h){throw h instanceof Error&&h.name==="AbortError"&&!(r&&r.aborted)?new mw.default:h}finally{r?.removeEventListener("abort",l),clearTimeout(c)}}});var Mf=M(ui=>{"use strict";Object.defineProperty(ui,"__esModule",{value:!0});ui.instanceLookup=Dw;ui.parseBrowserResponse=Cf;var Tw=Lf(require("dns")),yw=Lf(ri()),Sw=Df(),vw=Rf();function Lf(t){return t&&t.__esModule?t:{default:t}}var Nw=1434,Ow=2*1e3,Aw=3,Iw=3;async function Dw(t){let e=t.server;if(typeof e!="string")throw new TypeError('Invalid arguments: "server" must be a string');let r=t.instanceName;if(typeof r!="string")throw new TypeError('Invalid arguments: "instanceName" must be a string');let a=t.timeout===void 0?Ow:t.timeout;if(typeof a!="number")throw new TypeError('Invalid arguments: "timeout" must be a number');let l=t.retries===void 0?Aw:t.retries;if(typeof l!="number")throw new TypeError('Invalid arguments: "retries" must be a number');if(t.lookup!==void 0&&typeof t.lookup!="function")throw new TypeError('Invalid arguments: "lookup" must be a function');let c=t.lookup??Tw.default.lookup;if(t.port!==void 0&&typeof t.port!="number")throw new TypeError('Invalid arguments: "port" must be a number');let h=t.port??Nw,m=t.signal;if(m.aborted)throw new yw.default;let g;for(let O=0;O<=l;O++)try{g=await(0,vw.withTimeout)(a,async L=>{let x=Buffer.from([2]);return await(0,Sw.sendMessage)(t.server,h,c,L,x)},m)}catch(L){if(!m.aborted&&L instanceof Error&&L.name==="TimeoutError")continue;throw L}if(!g)throw new Error("Failed to get response from SQL Server Browser on "+e);let v=g.toString("ascii",Iw),N=Cf(v,r);if(!N)throw new Error("Port for "+r+" not found in "+t.server);return N}function Cf(t,e){let r,a=t.split(";;");for(let l=0,c=a.length;l<c;l++){let m=a[l].split(";");for(let g=0,v=m.length;g<v;g+=2){let N=m[g],O=m[g+1];if(N==="tcp"&&r)return parseInt(O,10);N==="InstanceName"&&(O.toUpperCase()===e.toUpperCase()?r=!0:r=!1)}}}});var Pf=M(li=>{"use strict";Object.defineProperty(li,"__esModule",{value:!0});li.TransientErrorLookup=void 0;var Wa=class{isTransientError(e){return[4060,10928,10929,40197,40501,40613].indexOf(e)!==-1}};li.TransientErrorLookup=Wa});var Mn=M(ci=>{(function(){"use strict";var t={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function e(h){return a(c(h),arguments)}function r(h,m){return e.apply(null,[h].concat(m||[]))}function a(h,m){var g=1,v=h.length,N,O="",L,x,F,w,k,S,R,A;for(L=0;L<v;L++)if(typeof h[L]=="string")O+=h[L];else if(typeof h[L]=="object"){if(F=h[L],F.keys)for(N=m[g],x=0;x<F.keys.length;x++){if(N==null)throw new Error(e('[sprintf] Cannot access property "%s" of undefined value "%s"',F.keys[x],F.keys[x-1]));N=N[F.keys[x]]}else F.param_no?N=m[F.param_no]:N=m[g++];if(t.not_type.test(F.type)&&t.not_primitive.test(F.type)&&N instanceof Function&&(N=N()),t.numeric_arg.test(F.type)&&typeof N!="number"&&isNaN(N))throw new TypeError(e("[sprintf] expecting number but found %T",N));switch(t.number.test(F.type)&&(R=N>=0),F.type){case"b":N=parseInt(N,10).toString(2);break;case"c":N=String.fromCharCode(parseInt(N,10));break;case"d":case"i":N=parseInt(N,10);break;case"j":N=JSON.stringify(N,null,F.width?parseInt(F.width):0);break;case"e":N=F.precision?parseFloat(N).toExponential(F.precision):parseFloat(N).toExponential();break;case"f":N=F.precision?parseFloat(N).toFixed(F.precision):parseFloat(N);break;case"g":N=F.precision?String(Number(N.toPrecision(F.precision))):parseFloat(N);break;case"o":N=(parseInt(N,10)>>>0).toString(8);break;case"s":N=String(N),N=F.precision?N.substring(0,F.precision):N;break;case"t":N=String(!!N),N=F.precision?N.substring(0,F.precision):N;break;case"T":N=Object.prototype.toString.call(N).slice(8,-1).toLowerCase(),N=F.precision?N.substring(0,F.precision):N;break;case"u":N=parseInt(N,10)>>>0;break;case"v":N=N.valueOf(),N=F.precision?N.substring(0,F.precision):N;break;case"x":N=(parseInt(N,10)>>>0).toString(16);break;case"X":N=(parseInt(N,10)>>>0).toString(16).toUpperCase();break}t.json.test(F.type)?O+=N:(t.number.test(F.type)&&(!R||F.sign)?(A=R?"+":"-",N=N.toString().replace(t.sign,"")):A="",k=F.pad_char?F.pad_char==="0"?"0":F.pad_char.charAt(1):" ",S=F.width-(A+N).length,w=F.width&&S>0?k.repeat(S):"",O+=F.align?A+N+w:k==="0"?A+w+N:w+A+N)}return O}var l=Object.create(null);function c(h){if(l[h])return l[h];for(var m=h,g,v=[],N=0;m;){if((g=t.text.exec(m))!==null)v.push(g[0]);else if((g=t.modulo.exec(m))!==null)v.push("%");else if((g=t.placeholder.exec(m))!==null){if(g[2]){N|=1;var O=[],L=g[2],x=[];if((x=t.key.exec(L))!==null)for(O.push(x[1]);(L=L.substring(x[0].length))!=="";)if((x=t.key_access.exec(L))!==null)O.push(x[1]);else if((x=t.index_access.exec(L))!==null)O.push(x[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");g[2]=O}else N|=2;if(N===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");v.push({placeholder:g[0],param_no:g[1],keys:g[2],sign:g[3],pad_char:g[4],align:g[5],width:g[6],precision:g[7],type:g[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");m=m.substring(g[0].length)}return l[h]=v}typeof ci<"u"&&(ci.sprintf=e,ci.vsprintf=r),typeof window<"u"&&(window.sprintf=e,window.vsprintf=r,typeof define=="function"&&define.amd&&define(function(){return{sprintf:e,vsprintf:r}}))})()});var hr=M(lt=>{"use strict";Object.defineProperty(lt,"__esModule",{value:!0});lt.TYPE=lt.Packet=lt.OFFSET=lt.HEADER_LENGTH=void 0;lt.isPacketComplete=Mw;lt.packetLength=Pw;var Ga=Mn(),ja=lt.HEADER_LENGTH=8,Ff=lt.TYPE={SQL_BATCH:1,RPC_REQUEST:3,TABULAR_RESULT:4,ATTENTION:6,BULK_LOAD:7,TRANSACTION_MANAGER:14,LOGIN7:16,NTLMAUTH_PKT:17,PRELOGIN:18,FEDAUTH_TOKEN:8},xf={};for(let t in Ff)xf[Ff[t]]=t;var Lt={NORMAL:0,EOM:1,IGNORE:2,RESETCONNECTION:8,RESETCONNECTIONSKIPTRAN:16},me=lt.OFFSET={Type:0,Status:1,Length:2,SPID:4,PacketID:6,Window:7},bw=0,Rw=1,Lw=0,Cw=`
`,za=class{constructor(e){if(e instanceof Buffer)this.buffer=e;else{let r=e;this.buffer=Buffer.alloc(ja,0),this.buffer.writeUInt8(r,me.Type),this.buffer.writeUInt8(Lt.NORMAL,me.Status),this.buffer.writeUInt16BE(bw,me.SPID),this.buffer.writeUInt8(Rw,me.PacketID),this.buffer.writeUInt8(Lw,me.Window),this.setLength()}}setLength(){this.buffer.writeUInt16BE(this.buffer.length,me.Length)}length(){return this.buffer.readUInt16BE(me.Length)}resetConnection(e){let r=this.buffer.readUInt8(me.Status);e?r|=Lt.RESETCONNECTION:r&=255-Lt.RESETCONNECTION,this.buffer.writeUInt8(r,me.Status)}last(e){let r=this.buffer.readUInt8(me.Status);return arguments.length>0&&(e?r|=Lt.EOM:r&=255-Lt.EOM,this.buffer.writeUInt8(r,me.Status)),this.isLast()}ignore(e){let r=this.buffer.readUInt8(me.Status);e?r|=Lt.IGNORE:r&=255-Lt.IGNORE,this.buffer.writeUInt8(r,me.Status)}isLast(){return!!(this.buffer.readUInt8(me.Status)&Lt.EOM)}packetId(e){return e&&this.buffer.writeUInt8(e%256,me.PacketID),this.buffer.readUInt8(me.PacketID)}addData(e){return this.buffer=Buffer.concat([this.buffer,e]),this.setLength(),this}data(){return this.buffer.slice(ja)}type(){return this.buffer.readUInt8(me.Type)}statusAsString(){let e=this.buffer.readUInt8(me.Status),r=[];for(let a in Lt){let l=Lt[a];e&l?r.push(a):r.push(void 0)}return r.join(" ").trim()}headerToString(e=""){let r=(0,Ga.sprintf)("type:0x%02X(%s), status:0x%02X(%s), length:0x%04X, spid:0x%04X, packetId:0x%02X, window:0x%02X",this.buffer.readUInt8(me.Type),xf[this.buffer.readUInt8(me.Type)],this.buffer.readUInt8(me.Status),this.statusAsString(),this.buffer.readUInt16BE(me.Length),this.buffer.readUInt16BE(me.SPID),this.buffer.readUInt8(me.PacketID),this.buffer.readUInt8(me.Window));return e+r}dataToString(e=""){let c=this.data(),h="",m="";for(let g=0;g<c.length;g++)g%32===0&&(h+=e,h+=(0,Ga.sprintf)("%04X  ",g)),c[g]<32||c[g]>126?(m+=".",(g+1)%8===0&&(g+1)%32!==0&&(m+=" ")):m+=String.fromCharCode(c[g]),c[g]!=null&&(h+=(0,Ga.sprintf)("%02X",c[g])),(g+1)%4===0&&(g+1)%32!==0&&(h+=" "),(g+1)%32===0&&(h+="  "+m,m="",g<c.length-1&&(h+=Cw));return m.length&&(h+="  "+m),h}toString(e=""){return this.headerToString(e)+`
`+this.dataToString(e+e)}payloadString(){return""}};lt.Packet=za;function Mw(t){return t.length<ja?!1:t.length>=t.readUInt16BE(me.Length)}function Pw(t){return t.readUInt16BE(me.Length)}});var Yf=M((di,Bf)=>{"use strict";Object.defineProperty(di,"__esModule",{value:!0});di.default=void 0;var Fw=Mn(),Pn=xw(Xe());function xw(t){return t&&t.__esModule?t:{default:t}}var Fn=20,Je={VERSION:0,ENCRYPTION:1,INSTOPT:2,THREADID:3,MARS:4,FEDAUTHREQUIRED:6,TERMINATOR:255},fi={OFF:0,ON:1,NOT_SUP:2,REQ:3},Uf={};for(let t in fi){let e=fi[t];Uf[e]=t}var Ka={OFF:0,ON:1},kf={};for(let t in Ka){let e=Ka[t];kf[e]=t}var hi=class{constructor(e={encrypt:!1,version:{major:0,minor:0,build:0,subbuild:0}}){e instanceof Buffer?(this.data=e,this.options={encrypt:!1,version:{major:0,minor:0,build:0,subbuild:0}}):(this.options=e,this.createOptions()),this.extractOptions()}createOptions(){let e=[this.createVersionOption(),this.createEncryptionOption(),this.createInstanceOption(),this.createThreadIdOption(),this.createMarsOption(),this.createFedAuthOption()],r=0;for(let c=0,h=e.length;c<h;c++){let m=e[c];r+=5+m.data.length}r++,this.data=Buffer.alloc(r,0);let a=0,l=5*e.length+1;for(let c=0,h=e.length;c<h;c++){let m=e[c];this.data.writeUInt8(m.token,a+0),this.data.writeUInt16BE(l,a+1),this.data.writeUInt16BE(m.data.length,a+3),a+=5,m.data.copy(this.data,l),l+=m.data.length}this.data.writeUInt8(Je.TERMINATOR,a)}createVersionOption(){let e=new Pn.default(Fn);return e.writeUInt8(this.options.version.major),e.writeUInt8(this.options.version.minor),e.writeUInt16BE(this.options.version.build),e.writeUInt16BE(this.options.version.subbuild),{token:Je.VERSION,data:e.data}}createEncryptionOption(){let e=new Pn.default(Fn);return this.options.encrypt?e.writeUInt8(fi.ON):e.writeUInt8(fi.NOT_SUP),{token:Je.ENCRYPTION,data:e.data}}createInstanceOption(){let e=new Pn.default(Fn);return e.writeUInt8(0),{token:Je.INSTOPT,data:e.data}}createThreadIdOption(){let e=new Pn.default(Fn);return e.writeUInt32BE(0),{token:Je.THREADID,data:e.data}}createMarsOption(){let e=new Pn.default(Fn);return e.writeUInt8(Ka.OFF),{token:Je.MARS,data:e.data}}createFedAuthOption(){let e=new Pn.default(Fn);return e.writeUInt8(1),{token:Je.FEDAUTHREQUIRED,data:e.data}}extractOptions(){let e=0;for(;this.data[e]!==Je.TERMINATOR;){let r=this.data.readUInt16BE(e+1),a=this.data.readUInt16BE(e+3);switch(this.data[e]){case Je.VERSION:this.extractVersion(r);break;case Je.ENCRYPTION:this.extractEncryption(r);break;case Je.INSTOPT:this.extractInstance(r);break;case Je.THREADID:a>0&&this.extractThreadId(r);break;case Je.MARS:this.extractMars(r);break;case Je.FEDAUTHREQUIRED:this.extractFedAuth(r);break}e+=5,r+=a}}extractVersion(e){this.version={major:this.data.readUInt8(e+0),minor:this.data.readUInt8(e+1),build:this.data.readUInt16BE(e+2),subbuild:this.data.readUInt16BE(e+4)}}extractEncryption(e){this.encryption=this.data.readUInt8(e),this.encryptionString=Uf[this.encryption]}extractInstance(e){this.instance=this.data.readUInt8(e)}extractThreadId(e){this.threadId=this.data.readUInt32BE(e)}extractMars(e){this.mars=this.data.readUInt8(e),this.marsString=kf[this.mars]}extractFedAuth(e){this.fedAuthRequired=this.data.readUInt8(e)}toString(e=""){return e+"PreLogin - "+(0,Fw.sprintf)("version:%d.%d.%d.%d, encryption:0x%02X(%s), instopt:0x%02X, threadId:0x%08X, mars:0x%02X(%s)",this.version.major,this.version.minor,this.version.build,this.version.subbuild,this.encryption?this.encryption:0,this.encryptionString?this.encryptionString:"",this.instance?this.instance:0,this.threadId?this.threadId:0,this.mars?this.mars:0,this.marsString?this.marsString:"")}},sR=di.default=hi;Bf.exports=hi});var dr=M(xn=>{"use strict";Object.defineProperty(xn,"__esModule",{value:!0});xn.versionsByValue=xn.versions=void 0;var qf=xn.versions={"7_1":1895825409,"7_2":1913192450,"7_3_A":1930035203,"7_3_B":1930100739,"7_4":1946157060,"8_0":134217728},Uw=xn.versionsByValue={};for(let t in qf)Uw[qf[t]]=t});var Hf=M((mi,Vf)=>{"use strict";Object.defineProperty(mi,"__esModule",{value:!0});mi.default=void 0;var pi=Mn(),kw=dr(),Zt={ENDIAN_LITTLE:0,ENDIAN_BIG:1,CHARSET_ASCII:0,CHARSET_EBCDIC:2,FLOAT_IEEE_754:0,FLOAT_VAX:4,FLOAT_ND5000:8,BCP_DUMPLOAD_ON:0,BCP_DUMPLOAD_OFF:16,USE_DB_ON:0,USE_DB_OFF:32,INIT_DB_WARN:0,INIT_DB_FATAL:64,SET_LANG_WARN_OFF:0,SET_LANG_WARN_ON:128},pr={INIT_LANG_WARN:0,INIT_LANG_FATAL:1,ODBC_OFF:0,ODBC_ON:2,F_TRAN_BOUNDARY:4,F_CACHE_CONNECT:8,USER_NORMAL:0,USER_SERVER:16,USER_REMUSER:32,USER_SQLREPL:64,INTEGRATED_SECURITY_OFF:0,INTEGRATED_SECURITY_ON:128},_i={SQL_DFLT:0,SQL_TSQL:8,OLEDB_OFF:0,OLEDB_ON:16,READ_WRITE_INTENT:0,READ_ONLY_INTENT:32},Za={CHANGE_PASSWORD_NO:0,CHANGE_PASSWORD_YES:1,BINARY_XML:2,SPAWN_USER_INSTANCE:4,UNKNOWN_COLLATION_HANDLING:8,EXTENSION_USED:16},Wt={FEATURE_ID:2,LIBRARY_SECURITYTOKEN:1,LIBRARY_ADAL:2,FEDAUTH_YES_ECHO:1,FEDAUTH_NO_ECHO:0,ADAL_WORKFLOW_USER_PASS:1,ADAL_WORKFLOW_INTEGRATED:2},Bw=255,Ei=class{constructor({tdsVersion:e,packetSize:r,clientProgVer:a,clientPid:l,connectionId:c,clientTimeZone:h,clientLcid:m}){this.tdsVersion=e,this.packetSize=r,this.clientProgVer=a,this.clientPid=l,this.connectionId=c,this.clientTimeZone=h,this.clientLcid=m,this.readOnlyIntent=!1,this.initDbFatal=!1,this.fedAuth=void 0,this.userName=void 0,this.password=void 0,this.serverName=void 0,this.appName=void 0,this.hostname=void 0,this.libraryName=void 0,this.language=void 0,this.database=void 0,this.clientId=void 0,this.sspi=void 0,this.attachDbFile=void 0,this.changePassword=void 0}toBuffer(){let e=Buffer.alloc(94),r=[e],a=0,l=e.length;if(a=e.writeUInt32LE(0,a),a=e.writeUInt32LE(this.tdsVersion,a),a=e.writeUInt32LE(this.packetSize,a),a=e.writeUInt32LE(this.clientProgVer,a),a=e.writeUInt32LE(this.clientPid,a),a=e.writeUInt32LE(this.connectionId,a),a=e.writeUInt8(this.buildOptionFlags1(),a),a=e.writeUInt8(this.buildOptionFlags2(),a),a=e.writeUInt8(this.buildTypeFlags(),a),a=e.writeUInt8(this.buildOptionFlags3(),a),a=e.writeInt32LE(this.clientTimeZone,a),a=e.writeUInt32LE(this.clientLcid,a),a=e.writeUInt16LE(l,a),this.hostname){let g=Buffer.from(this.hostname,"ucs2");a=e.writeUInt16LE(g.length/2,a),l+=g.length,r.push(g)}else a=e.writeUInt16LE(l,a);if(a=e.writeUInt16LE(l,a),this.userName){let g=Buffer.from(this.userName,"ucs2");a=e.writeUInt16LE(g.length/2,a),l+=g.length,r.push(g)}else a=e.writeUInt16LE(0,a);if(a=e.writeUInt16LE(l,a),this.password){let g=Buffer.from(this.password,"ucs2");a=e.writeUInt16LE(g.length/2,a),l+=g.length,r.push(this.scramblePassword(g))}else a=e.writeUInt16LE(0,a);if(a=e.writeUInt16LE(l,a),this.appName){let g=Buffer.from(this.appName,"ucs2");a=e.writeUInt16LE(g.length/2,a),l+=g.length,r.push(g)}else a=e.writeUInt16LE(0,a);if(a=e.writeUInt16LE(l,a),this.serverName){let g=Buffer.from(this.serverName,"ucs2");a=e.writeUInt16LE(g.length/2,a),l+=g.length,r.push(g)}else a=e.writeUInt16LE(0,a);a=e.writeUInt16LE(l,a);let c=this.buildFeatureExt();a=e.writeUInt16LE(4,a);let h=Buffer.alloc(4);if(h.writeUInt32LE(l+=4,0),l+=c.length,r.push(h,c),a=e.writeUInt16LE(l,a),this.libraryName){let g=Buffer.from(this.libraryName,"ucs2");a=e.writeUInt16LE(g.length/2,a),l+=g.length,r.push(g)}else a=e.writeUInt16LE(0,a);if(a=e.writeUInt16LE(l,a),this.language){let g=Buffer.from(this.language,"ucs2");a=e.writeUInt16LE(g.length/2,a),l+=g.length,r.push(g)}else a=e.writeUInt16LE(0,a);if(a=e.writeUInt16LE(l,a),this.database){let g=Buffer.from(this.database,"ucs2");a=e.writeUInt16LE(g.length/2,a),l+=g.length,r.push(g)}else a=e.writeUInt16LE(0,a);if(this.clientId&&this.clientId.copy(e,a,0,6),a+=6,a=e.writeUInt16LE(l,a),this.sspi?(this.sspi.length>65535?a=e.writeUInt16LE(65535,a):a=e.writeUInt16LE(this.sspi.length,a),r.push(this.sspi)):a=e.writeUInt16LE(0,a),a=e.writeUInt16LE(l,a),this.attachDbFile){let g=Buffer.from(this.attachDbFile,"ucs2");a=e.writeUInt16LE(g.length/2,a),l+=g.length,r.push(g)}else a=e.writeUInt16LE(0,a);if(a=e.writeUInt16LE(l,a),this.changePassword){let g=Buffer.from(this.changePassword,"ucs2");a=e.writeUInt16LE(g.length/2,a),l+=g.length,r.push(g)}else a=e.writeUInt16LE(0,a);this.sspi&&this.sspi.length>65535?e.writeUInt32LE(this.sspi.length,a):e.writeUInt32LE(0,a);let m=Buffer.concat(r);return m.writeUInt32LE(m.length,0),m}buildOptionFlags1(){let e=Zt.ENDIAN_LITTLE|Zt.CHARSET_ASCII|Zt.FLOAT_IEEE_754|Zt.BCP_DUMPLOAD_OFF|Zt.USE_DB_OFF|Zt.SET_LANG_WARN_ON;return this.initDbFatal?e|=Zt.INIT_DB_FATAL:e|=Zt.INIT_DB_WARN,e}buildFeatureExt(){let e=[],r=this.fedAuth;if(r)switch(r.type){case"ADAL":let a=Buffer.alloc(7);a.writeUInt8(Wt.FEATURE_ID,0),a.writeUInt32LE(2,1),a.writeUInt8(Wt.LIBRARY_ADAL<<1|(r.echo?Wt.FEDAUTH_YES_ECHO:Wt.FEDAUTH_NO_ECHO),5),a.writeUInt8(r.workflow==="integrated"?2:Wt.ADAL_WORKFLOW_USER_PASS,6),e.push(a);break;case"SECURITYTOKEN":let l=Buffer.from(r.fedAuthToken,"ucs2"),c=Buffer.alloc(10),h=0;h=c.writeUInt8(Wt.FEATURE_ID,h),h=c.writeUInt32LE(l.length+4+1,h),h=c.writeUInt8(Wt.LIBRARY_SECURITYTOKEN<<1|(r.echo?Wt.FEDAUTH_YES_ECHO:Wt.FEDAUTH_NO_ECHO),h),c.writeInt32LE(l.length,h),e.push(c),e.push(l);break}if(this.tdsVersion>=kw.versions["7_4"]){let c=Buffer.alloc(6);c.writeUInt8(10,0),c.writeUInt32LE(1,1),c.writeUInt8(1,5),e.push(c)}return e.push(Buffer.from([Bw])),Buffer.concat(e)}buildOptionFlags2(){let e=pr.INIT_LANG_WARN|pr.ODBC_OFF|pr.USER_NORMAL;return this.sspi?e|=pr.INTEGRATED_SECURITY_ON:e|=pr.INTEGRATED_SECURITY_OFF,e}buildTypeFlags(){let e=_i.SQL_DFLT|_i.OLEDB_OFF;return this.readOnlyIntent?e|=_i.READ_ONLY_INTENT:e|=_i.READ_WRITE_INTENT,e}buildOptionFlags3(){return Za.CHANGE_PASSWORD_NO|Za.UNKNOWN_COLLATION_HANDLING|Za.EXTENSION_USED}scramblePassword(e){for(let r=0,a=e.length;r<a;r++){let l=e[r],c=l&15,h=l>>4;l=c<<4|h,l=l^165,e[r]=l}return e}toString(e=""){return e+"Login7 - "+(0,pi.sprintf)("TDS:0x%08X, PacketSize:0x%08X, ClientProgVer:0x%08X, ClientPID:0x%08X, ConnectionID:0x%08X",this.tdsVersion,this.packetSize,this.clientProgVer,this.clientPid,this.connectionId)+`
`+e+"         "+(0,pi.sprintf)("Flags1:0x%02X, Flags2:0x%02X, TypeFlags:0x%02X, Flags3:0x%02X, ClientTimezone:%d, ClientLCID:0x%08X",this.buildOptionFlags1(),this.buildOptionFlags2(),this.buildTypeFlags(),this.buildOptionFlags3(),this.clientTimeZone,this.clientLcid)+`
`+e+"         "+(0,pi.sprintf)("Hostname:'%s', Username:'%s', Password:'%s', AppName:'%s', ServerName:'%s', LibraryName:'%s'",this.hostname,this.userName,this.password,this.appName,this.serverName,this.libraryName)+`
`+e+"         "+(0,pi.sprintf)("Language:'%s', Database:'%s', SSPI:'%s', AttachDbFile:'%s', ChangePassword:'%s'",this.language,this.database,this.sspi,this.attachDbFile,this.changePassword)}},uR=mi.default=Ei;Vf.exports=Ei});var Wf=M((lR,gi)=>{(function(){"use strict";var t=typeof window=="object"?window:{},e=!t.JS_MD4_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;e&&(t=global);var r=!t.JS_MD4_NO_COMMON_JS&&typeof gi=="object"&&gi.exports,a=typeof define=="function"&&define.amd,l=!t.JS_MD4_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",c="0123456789abcdef".split(""),h=[128,32768,8388608,-2147483648],m=[0,8,16,24],g=["hex","array","digest","buffer","arrayBuffer"],v=[],N;if(l){var O=new ArrayBuffer(68);N=new Uint8Array(O),v=new Uint32Array(O)}var L=function(S){return function(R){return new w(!0).update(R)[S]()}},x=function(){var S=L("hex");e&&(S=F(S)),S.create=function(){return new w},S.update=function(D){return S.create().update(D)};for(var R=0;R<g.length;++R){var A=g[R];S[A]=L(A)}return S},F=function(S){var R=require("crypto"),A=require("buffer").Buffer,D=function(p){if(typeof p=="string")return R.createHash("md4").update(p,"utf8").digest("hex");if(l&&p instanceof ArrayBuffer)p=new Uint8Array(p);else if(p.length===void 0)return S(p);return R.createHash("md4").update(new A(p)).digest("hex")};return D};function w(S){if(S)v[0]=v[16]=v[1]=v[2]=v[3]=v[4]=v[5]=v[6]=v[7]=v[8]=v[9]=v[10]=v[11]=v[12]=v[13]=v[14]=v[15]=0,this.blocks=v,this.buffer8=N;else if(l){var R=new ArrayBuffer(68);this.buffer8=new Uint8Array(R),this.blocks=new Uint32Array(R)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=0,this.finalized=this.hashed=!1,this.first=!0}w.prototype.update=function(S){if(!this.finalized){var R=typeof S!="string";R&&l&&S instanceof ArrayBuffer&&(S=new Uint8Array(S));for(var A,D=0,p,J=S.length||0,V=this.blocks,G=this.buffer8;D<J;){if(this.hashed&&(this.hashed=!1,V[0]=V[16],V[16]=V[1]=V[2]=V[3]=V[4]=V[5]=V[6]=V[7]=V[8]=V[9]=V[10]=V[11]=V[12]=V[13]=V[14]=V[15]=0),R)if(l)for(p=this.start;D<J&&p<64;++D)G[p++]=S[D];else for(p=this.start;D<J&&p<64;++D)V[p>>2]|=S[D]<<m[p++&3];else if(l)for(p=this.start;D<J&&p<64;++D)A=S.charCodeAt(D),A<128?G[p++]=A:A<2048?(G[p++]=192|A>>6,G[p++]=128|A&63):A<55296||A>=57344?(G[p++]=224|A>>12,G[p++]=128|A>>6&63,G[p++]=128|A&63):(A=65536+((A&1023)<<10|S.charCodeAt(++D)&1023),G[p++]=240|A>>18,G[p++]=128|A>>12&63,G[p++]=128|A>>6&63,G[p++]=128|A&63);else for(p=this.start;D<J&&p<64;++D)A=S.charCodeAt(D),A<128?V[p>>2]|=A<<m[p++&3]:A<2048?(V[p>>2]|=(192|A>>6)<<m[p++&3],V[p>>2]|=(128|A&63)<<m[p++&3]):A<55296||A>=57344?(V[p>>2]|=(224|A>>12)<<m[p++&3],V[p>>2]|=(128|A>>6&63)<<m[p++&3],V[p>>2]|=(128|A&63)<<m[p++&3]):(A=65536+((A&1023)<<10|S.charCodeAt(++D)&1023),V[p>>2]|=(240|A>>18)<<m[p++&3],V[p>>2]|=(128|A>>12&63)<<m[p++&3],V[p>>2]|=(128|A>>6&63)<<m[p++&3],V[p>>2]|=(128|A&63)<<m[p++&3]);this.lastByteIndex=p,this.bytes+=p-this.start,p>=64?(this.start=p-64,this.hash(),this.hashed=!0):this.start=p}return this}},w.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var S=this.blocks,R=this.lastByteIndex;S[R>>2]|=h[R&3],R>=56&&(this.hashed||this.hash(),S[0]=S[16],S[16]=S[1]=S[2]=S[3]=S[4]=S[5]=S[6]=S[7]=S[8]=S[9]=S[10]=S[11]=S[12]=S[13]=S[14]=S[15]=0),S[14]=this.bytes<<3,this.hash()}},w.prototype.hash=function(){var S,R,A,D,p,J,V,G,Y=this.blocks;this.first?(S=Y[0]-1,S=S<<3|S>>>29,D=(S&4023233417|~S&2562383102)+Y[1]+271733878,D=D<<7|D>>>25,A=(D&S|~D&4023233417)+Y[2]-1732584194,A=A<<11|A>>>21,R=(A&D|~A&S)+Y[3]-271733879,R=R<<19|R>>>13):(S=this.h0,R=this.h1,A=this.h2,D=this.h3,S+=(R&A|~R&D)+Y[0],S=S<<3|S>>>29,D+=(S&R|~S&A)+Y[1],D=D<<7|D>>>25,A+=(D&S|~D&R)+Y[2],A=A<<11|A>>>21,R+=(A&D|~A&S)+Y[3],R=R<<19|R>>>13),S+=(R&A|~R&D)+Y[4],S=S<<3|S>>>29,D+=(S&R|~S&A)+Y[5],D=D<<7|D>>>25,A+=(D&S|~D&R)+Y[6],A=A<<11|A>>>21,R+=(A&D|~A&S)+Y[7],R=R<<19|R>>>13,S+=(R&A|~R&D)+Y[8],S=S<<3|S>>>29,D+=(S&R|~S&A)+Y[9],D=D<<7|D>>>25,A+=(D&S|~D&R)+Y[10],A=A<<11|A>>>21,R+=(A&D|~A&S)+Y[11],R=R<<19|R>>>13,S+=(R&A|~R&D)+Y[12],S=S<<3|S>>>29,D+=(S&R|~S&A)+Y[13],D=D<<7|D>>>25,A+=(D&S|~D&R)+Y[14],A=A<<11|A>>>21,R+=(A&D|~A&S)+Y[15],R=R<<19|R>>>13,J=R&A,S+=(J|R&D|A&D)+Y[0]+1518500249,S=S<<3|S>>>29,p=S&R,D+=(p|S&A|J)+Y[4]+1518500249,D=D<<5|D>>>27,G=D&S,A+=(G|D&R|p)+Y[8]+1518500249,A=A<<9|A>>>23,V=A&D,R+=(V|A&S|G)+Y[12]+1518500249,R=R<<13|R>>>19,J=R&A,S+=(J|R&D|V)+Y[1]+1518500249,S=S<<3|S>>>29,p=S&R,D+=(p|S&A|J)+Y[5]+1518500249,D=D<<5|D>>>27,G=D&S,A+=(G|D&R|p)+Y[9]+1518500249,A=A<<9|A>>>23,V=A&D,R+=(V|A&S|G)+Y[13]+1518500249,R=R<<13|R>>>19,J=R&A,S+=(J|R&D|V)+Y[2]+1518500249,S=S<<3|S>>>29,p=S&R,D+=(p|S&A|J)+Y[6]+1518500249,D=D<<5|D>>>27,G=D&S,A+=(G|D&R|p)+Y[10]+1518500249,A=A<<9|A>>>23,V=A&D,R+=(V|A&S|G)+Y[14]+1518500249,R=R<<13|R>>>19,J=R&A,S+=(J|R&D|V)+Y[3]+1518500249,S=S<<3|S>>>29,p=S&R,D+=(p|S&A|J)+Y[7]+1518500249,D=D<<5|D>>>27,G=D&S,A+=(G|D&R|p)+Y[11]+1518500249,A=A<<9|A>>>23,R+=(A&D|A&S|G)+Y[15]+1518500249,R=R<<13|R>>>19,J=R^A,S+=(J^D)+Y[0]+1859775393,S=S<<3|S>>>29,D+=(J^S)+Y[8]+1859775393,D=D<<9|D>>>23,G=D^S,A+=(G^R)+Y[4]+1859775393,A=A<<11|A>>>21,R+=(G^A)+Y[12]+1859775393,R=R<<15|R>>>17,J=R^A,S+=(J^D)+Y[2]+1859775393,S=S<<3|S>>>29,D+=(J^S)+Y[10]+1859775393,D=D<<9|D>>>23,G=D^S,A+=(G^R)+Y[6]+1859775393,A=A<<11|A>>>21,R+=(G^A)+Y[14]+1859775393,R=R<<15|R>>>17,J=R^A,S+=(J^D)+Y[1]+1859775393,S=S<<3|S>>>29,D+=(J^S)+Y[9]+1859775393,D=D<<9|D>>>23,G=D^S,A+=(G^R)+Y[5]+1859775393,A=A<<11|A>>>21,R+=(G^A)+Y[13]+1859775393,R=R<<15|R>>>17,J=R^A,S+=(J^D)+Y[3]+1859775393,S=S<<3|S>>>29,D+=(J^S)+Y[11]+1859775393,D=D<<9|D>>>23,G=D^S,A+=(G^R)+Y[7]+1859775393,A=A<<11|A>>>21,R+=(G^A)+Y[15]+1859775393,R=R<<15|R>>>17,this.first?(this.h0=S+1732584193<<0,this.h1=R-271733879<<0,this.h2=A-1732584194<<0,this.h3=D+271733878<<0,this.first=!1):(this.h0=this.h0+S<<0,this.h1=this.h1+R<<0,this.h2=this.h2+A<<0,this.h3=this.h3+D<<0)},w.prototype.hex=function(){this.finalize();var S=this.h0,R=this.h1,A=this.h2,D=this.h3;return c[S>>4&15]+c[S&15]+c[S>>12&15]+c[S>>8&15]+c[S>>20&15]+c[S>>16&15]+c[S>>28&15]+c[S>>24&15]+c[R>>4&15]+c[R&15]+c[R>>12&15]+c[R>>8&15]+c[R>>20&15]+c[R>>16&15]+c[R>>28&15]+c[R>>24&15]+c[A>>4&15]+c[A&15]+c[A>>12&15]+c[A>>8&15]+c[A>>20&15]+c[A>>16&15]+c[A>>28&15]+c[A>>24&15]+c[D>>4&15]+c[D&15]+c[D>>12&15]+c[D>>8&15]+c[D>>20&15]+c[D>>16&15]+c[D>>28&15]+c[D>>24&15]},w.prototype.toString=w.prototype.hex,w.prototype.digest=function(){this.finalize();var S=this.h0,R=this.h1,A=this.h2,D=this.h3;return[S&255,S>>8&255,S>>16&255,S>>24&255,R&255,R>>8&255,R>>16&255,R>>24&255,A&255,A>>8&255,A>>16&255,A>>24&255,D&255,D>>8&255,D>>16&255,D>>24&255]},w.prototype.array=w.prototype.digest,w.prototype.arrayBuffer=function(){this.finalize();var S=new ArrayBuffer(16),R=new Uint32Array(S);return R[0]=this.h0,R[1]=this.h1,R[2]=this.h2,R[3]=this.h3,S},w.prototype.buffer=w.prototype.arrayBuffer;var k=x();r?gi.exports=k:(t.md4=k,a&&define(function(){return k}))})()});var Kf=M((Ti,zf)=>{"use strict";Object.defineProperty(Ti,"__esModule",{value:!0});Ti.default=void 0;var Yw=jf(Xe()),qw=Hw(require("crypto")),Vw=jf(Wf());function Gf(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(Gf=function(a){return a?r:e})(t)}function Hw(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var r=Gf(e);if(r&&r.has(t))return r.get(t);var a={__proto__:null},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in t)if(c!=="default"&&Object.prototype.hasOwnProperty.call(t,c)){var h=l?Object.getOwnPropertyDescriptor(t,c):null;h&&(h.get||h.set)?Object.defineProperty(a,c,h):a[c]=t[c]}return a.default=t,r&&r.set(t,a),a}function jf(t){return t&&t.__esModule?t:{default:t}}var wi=class{constructor(e){this.data=this.createResponse(e)}toString(e=""){return e+"NTLM Auth"}createResponse(e){let r=this.createClientNonce(),a=24,l=16,c=e.domain,h=e.userName,m=e.password,g=e.ntlmpacket,v=g.target,N=g.nonce,O=64+c.length*2+h.length*2+a+l+8+8+8+4+v.length+4,L=new Yw.default(O);L.position=0,L.writeString("NTLMSSP\0","utf8"),L.writeUInt32LE(3);let x=64,F=x,w=F+c.length*2,k=w+h.length*2,S=k+a;L.writeUInt16LE(a),L.writeUInt16LE(a),L.writeUInt32LE(k),L.writeUInt16LE(l),L.writeUInt16LE(l),L.writeUInt32LE(S),L.writeUInt16LE(c.length*2),L.writeUInt16LE(c.length*2),L.writeUInt32LE(F),L.writeUInt16LE(h.length*2),L.writeUInt16LE(h.length*2),L.writeUInt32LE(w),L.writeUInt16LE(0),L.writeUInt16LE(0),L.writeUInt32LE(x),L.writeUInt16LE(0),L.writeUInt16LE(0),L.writeUInt32LE(x),L.writeUInt16LE(33281),L.writeUInt16LE(8),L.writeString(c,"ucs2"),L.writeString(h,"ucs2");let R=this.lmv2Response(c,h,m,N,r);L.copyFrom(R);let A=new Date().getTime(),D=this.ntlmv2Response(c,h,m,N,v,r,A);L.copyFrom(D),L.writeUInt32LE(257),L.writeUInt32LE(0);let p=this.createTimestamp(A);return L.copyFrom(p),L.copyFrom(r),L.writeUInt32LE(0),L.copyFrom(v),L.writeUInt32LE(0),L.data}createClientNonce(){let e=Buffer.alloc(8,0),r=0;for(;r<8;)e.writeUInt8(Math.ceil(Math.random()*255),r),r++;return e}ntlmv2Response(e,r,a,l,c,h,m){let g=this.createTimestamp(m),v=this.ntv2Hash(e,r,a),N=40+c.length,O=Buffer.alloc(N,0);return l.copy(O,0,0,8),O.writeUInt32LE(257,8),O.writeUInt32LE(0,12),g.copy(O,16,0,8),h.copy(O,24,0,8),O.writeUInt32LE(0,32),c.copy(O,36,0,c.length),O.writeUInt32LE(0,36+c.length),this.hmacMD5(O,v)}createTimestamp(e){let r=(BigInt(e)+BigInt(11644473600))*BigInt(1e7),a=Number(r&BigInt(4294967295)),l=Number(r>>BigInt(32)&BigInt(4294967295)),c=Buffer.alloc(8);return c.writeUInt32LE(a,0),c.writeUInt32LE(l,4),c}lmv2Response(e,r,a,l,c){let h=this.ntv2Hash(e,r,a),m=Buffer.alloc(l.length+c.length,0);l.copy(m),c.copy(m,l.length,0,c.length);let g=this.hmacMD5(m,h),v=Buffer.alloc(g.length+c.length,0);return g.copy(v),c.copy(v,g.length,0,c.length),v}ntv2Hash(e,r,a){let l=this.ntHash(a),c=Buffer.from(r.toUpperCase()+e.toUpperCase(),"ucs2");return this.hmacMD5(c,l)}ntHash(e){let r=Buffer.from(e,"ucs2");return Buffer.from(Vw.default.arrayBuffer(r))}hmacMD5(e,r){return qw.createHmac("MD5",r).update(e).digest()}},cR=Ti.default=wi;zf.exports=wi});var Xt=M($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});$t.RequestError=$t.InputError=$t.ConnectionError=void 0;var $a=class extends Error{constructor(e,r,a){super(e,a),this.code=r}};$t.ConnectionError=$a;var Xa=class extends Error{constructor(e,r,a){super(e,a),this.code=r}};$t.RequestError=Xa;var Ja=class extends TypeError{};$t.InputError=Ja});var Zf=M(Ct=>{"use strict";Object.defineProperty(Ct,"__esModule",{value:!0});Ct.SQLServerStatementColumnEncryptionSetting=Ct.SQLServerEncryptionType=Ct.DescribeParameterEncryptionResultSet2=Ct.DescribeParameterEncryptionResultSet1=void 0;var hR=Ct.SQLServerEncryptionType=function(t){return t[t.Deterministic=1]="Deterministic",t[t.Randomized=2]="Randomized",t[t.PlainText=0]="PlainText",t}({}),dR=Ct.DescribeParameterEncryptionResultSet1=function(t){return t[t.KeyOrdinal=0]="KeyOrdinal",t[t.DbId=1]="DbId",t[t.KeyId=2]="KeyId",t[t.KeyVersion=3]="KeyVersion",t[t.KeyMdVersion=4]="KeyMdVersion",t[t.EncryptedKey=5]="EncryptedKey",t[t.ProviderName=6]="ProviderName",t[t.KeyPath=7]="KeyPath",t[t.KeyEncryptionAlgorithm=8]="KeyEncryptionAlgorithm",t}({}),pR=Ct.DescribeParameterEncryptionResultSet2=function(t){return t[t.ParameterOrdinal=0]="ParameterOrdinal",t[t.ParameterName=1]="ParameterName",t[t.ColumnEncryptionAlgorithm=2]="ColumnEncryptionAlgorithm",t[t.ColumnEncrytionType=3]="ColumnEncrytionType",t[t.ColumnEncryptionKeyOrdinal=4]="ColumnEncryptionKeyOrdinal",t[t.NormalizationRuleVersion=5]="NormalizationRuleVersion",t}({}),_R=Ct.SQLServerStatementColumnEncryptionSetting=function(t){return t[t.UseConnectionSetting=0]="UseConnectionSetting",t[t.Enabled=1]="Enabled",t[t.ResultSetOnly=2]="ResultSetOnly",t[t.Disabled=3]="Disabled",t}({})});var vi=M((Si,$f)=>{"use strict";Object.defineProperty(Si,"__esModule",{value:!0});Si.default=void 0;var Ww=require("events"),Gw=Xt(),jw=Zf(),yi=class extends Ww.EventEmitter{on(e,r){return super.on(e,r)}emit(e,...r){return super.emit(e,...r)}constructor(e,r,a){super(),this.sqlTextOrProcedure=e,this.parameters=[],this.parametersByName={},this.preparing=!1,this.handle=void 0,this.canceled=!1,this.paused=!1,this.error=void 0,this.connection=void 0,this.timeout=void 0,this.userCallback=r,this.statementColumnEncryptionSetting=a&&a.statementColumnEncryptionSetting||jw.SQLServerStatementColumnEncryptionSetting.UseConnectionSetting,this.cryptoMetadataLoaded=!1,this.callback=function(l,c,h){this.preparing?(this.preparing=!1,l?this.emit("error",l):this.emit("prepared")):(this.userCallback(l,c,h),this.emit("requestCompleted"))}}addParameter(e,r,a,l){let{output:c=!1,length:h,precision:m,scale:g}=l??{},v={type:r,name:e,value:a,output:c,length:h,precision:m,scale:g};this.parameters.push(v),this.parametersByName[e]=v}addOutputParameter(e,r,a,l){this.addParameter(e,r,a,{...l,output:!0})}makeParamsParameter(e){let r="";for(let a=0,l=e.length;a<l;a++){let c=e[a];r.length>0&&(r+=", "),r+="@"+c.name+" ",r+=c.type.declaration(c),c.output&&(r+=" OUTPUT")}return r}validateParameters(e){for(let r=0,a=this.parameters.length;r<a;r++){let l=this.parameters[r];try{l.value=l.type.validate(l.value,e)}catch(c){throw new Gw.RequestError("Validation failed for parameter '"+l.name+"'. "+c.message,"EPARAM",{cause:c})}}}pause(){this.paused||(this.emit("pause"),this.paused=!0)}resume(){this.paused&&(this.paused=!1,this.emit("resume"))}cancel(){this.canceled||(this.canceled=!0,this.emit("cancel"))}setTimeout(e){this.timeout=e}},mR=Si.default=yi;$f.exports=yi});var Ni=M(Qa=>{"use strict";Object.defineProperty(Qa,"__esModule",{value:!0});Qa.writeToTrackingBuffer=$w;var zw={QUERY_NOTIFICATIONS:1,TXN_DESCRIPTOR:2,TRACE_ACTIVITY:3},Kw=12,Zw=6+Kw;function $w(t,e,r){t.writeUInt32LE(0),t.writeUInt32LE(Zw),t.writeUInt16LE(zw.TXN_DESCRIPTOR),t.writeBuffer(e),t.writeUInt32LE(r);let a=t.data;return a.writeUInt32LE(a.length,0),t}});var Qf=M((Ai,Jf)=>{"use strict";Object.defineProperty(Ai,"__esModule",{value:!0});Ai.default=void 0;var Xf=Qw(Xe()),Xw=Ni(),Jw=Xt();function Qw(t){return t&&t.__esModule?t:{default:t}}var eT={BY_REF_VALUE:1,DEFAULT_VALUE:2},Oi=class{constructor(e,r,a,l,c){this.procedure=e,this.parameters=r,this.options=l,this.txnDescriptor=a,this.collation=c}[Symbol.iterator](){return this.generateData()}*generateData(){let e=new Xf.default(500);this.options.tdsVersion>="7_2"&&(0,Xw.writeToTrackingBuffer)(e,this.txnDescriptor,1),typeof this.procedure=="string"?e.writeUsVarchar(this.procedure):(e.writeUShort(65535),e.writeUShort(this.procedure)),e.writeUInt16LE(0),yield e.data;let a=this.parameters.length;for(let l=0;l<a;l++)yield*this.generateParameterData(this.parameters[l])}toString(e=""){return e+("RPC Request - "+this.procedure)}*generateParameterData(e){let r=new Xf.default(3+Buffer.byteLength(e.name,"ucs-2")+1);e.name?r.writeBVarchar("@"+e.name):r.writeBVarchar("");let a=0;e.output&&(a|=eT.BY_REF_VALUE),r.writeUInt8(a),yield r.data;let l={value:e.value},c=e.type;(c.id&48)===32&&(e.length?l.length=e.length:c.resolveLength&&(l.length=c.resolveLength(e))),e.precision?l.precision=e.precision:c.resolvePrecision&&(l.precision=c.resolvePrecision(e)),e.scale?l.scale=e.scale:c.resolveScale&&(l.scale=c.resolveScale(e)),this.collation&&(l.collation=this.collation),yield c.generateTypeInfo(l,this.options),yield c.generateParameterLength(l,this.options);try{yield*c.generateParameterData(l,this.options)}catch(h){throw new Jw.InputError(`Input parameter '${e.name}' could not be validated`,{cause:h})}}},wR=Ai.default=Oi;Jf.exports=Oi});var th=M((Di,eh)=>{"use strict";Object.defineProperty(Di,"__esModule",{value:!0});Di.default=void 0;var tT=rT(Xe()),nT=Ni();function rT(t){return t&&t.__esModule?t:{default:t}}var Ii=class{constructor(e,r,a){this.sqlText=e,this.txnDescriptor=r,this.options=a}*[Symbol.iterator](){if(this.options.tdsVersion>="7_2"){let e=new tT.default(18,"ucs2");(0,nT.writeToTrackingBuffer)(e,this.txnDescriptor,1),yield e.data}yield Buffer.from(this.sqlText,"ucs2")}toString(e=""){return e+("SQL Batch - "+this.sqlText)}},TR=Di.default=Ii;eh.exports=Ii});var rh=M((yR,nh)=>{"use strict";var iT=require("stream").Duplex,bi=Symbol("Callback"),cn=Symbol("Other"),Ri=class extends iT{constructor(e){super(e),this[bi]=null,this[cn]=null}_read(){let e=this[bi];e&&(this[bi]=null,e())}_write(e,r,a){this[cn][bi]=a,this[cn].push(e)}_final(e){this[cn].on("end",e),this[cn].push(null)}},eu=class{constructor(e){this.socket1=new Ri(e),this.socket2=new Ri(e),this.socket1[cn]=this.socket2,this.socket2[cn]=this.socket1}};nh.exports=eu});var Mi=M((Ci,ih)=>{"use strict";Object.defineProperty(Ci,"__esModule",{value:!0});Ci.default=void 0;var oT=require("stream"),Li=class extends oT.PassThrough{constructor({type:e,resetConnection:r=!1}){super(),this.type=e,this.resetConnection=r,this.ignore=!1}},SR=Ci.default=Li;ih.exports=Li});var Oe=M((vR,oh)=>{"use strict";oh.exports={ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Boolean,Uint8Array}});var _h=M((mr,Er)=>{"use strict";Object.defineProperty(mr,"__esModule",{value:!0});var fh=new WeakMap,tu=new WeakMap;function ye(t){let e=fh.get(t);return console.assert(e!=null,"'this' is expected an Event object, but got",t),e}function sh(t){if(t.passiveListener!=null){typeof console<"u"&&typeof console.error=="function"&&console.error("Unable to preventDefault inside passive event listener invocation.",t.passiveListener);return}t.event.cancelable&&(t.canceled=!0,typeof t.event.preventDefault=="function"&&t.event.preventDefault())}function Un(t,e){fh.set(this,{eventTarget:t,event:e,eventPhase:2,currentTarget:t,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:e.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});let r=Object.keys(e);for(let a=0;a<r.length;++a){let l=r[a];l in this||Object.defineProperty(this,l,hh(l))}}Un.prototype={get type(){return ye(this).event.type},get target(){return ye(this).eventTarget},get currentTarget(){return ye(this).currentTarget},composedPath(){let t=ye(this).currentTarget;return t==null?[]:[t]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return ye(this).eventPhase},stopPropagation(){let t=ye(this);t.stopped=!0,typeof t.event.stopPropagation=="function"&&t.event.stopPropagation()},stopImmediatePropagation(){let t=ye(this);t.stopped=!0,t.immediateStopped=!0,typeof t.event.stopImmediatePropagation=="function"&&t.event.stopImmediatePropagation()},get bubbles(){return!!ye(this).event.bubbles},get cancelable(){return!!ye(this).event.cancelable},preventDefault(){sh(ye(this))},get defaultPrevented(){return ye(this).canceled},get composed(){return!!ye(this).event.composed},get timeStamp(){return ye(this).timeStamp},get srcElement(){return ye(this).eventTarget},get cancelBubble(){return ye(this).stopped},set cancelBubble(t){if(!t)return;let e=ye(this);e.stopped=!0,typeof e.event.cancelBubble=="boolean"&&(e.event.cancelBubble=!0)},get returnValue(){return!ye(this).canceled},set returnValue(t){t||sh(ye(this))},initEvent(){}};Object.defineProperty(Un.prototype,"constructor",{value:Un,configurable:!0,writable:!0});typeof window<"u"&&typeof window.Event<"u"&&(Object.setPrototypeOf(Un.prototype,window.Event.prototype),tu.set(window.Event.prototype,Un));function hh(t){return{get(){return ye(this).event[t]},set(e){ye(this).event[t]=e},configurable:!0,enumerable:!0}}function sT(t){return{value(){let e=ye(this).event;return e[t].apply(e,arguments)},configurable:!0,enumerable:!0}}function aT(t,e){let r=Object.keys(e);if(r.length===0)return t;function a(l,c){t.call(this,l,c)}a.prototype=Object.create(t.prototype,{constructor:{value:a,configurable:!0,writable:!0}});for(let l=0;l<r.length;++l){let c=r[l];if(!(c in t.prototype)){let m=typeof Object.getOwnPropertyDescriptor(e,c).value=="function";Object.defineProperty(a.prototype,c,m?sT(c):hh(c))}}return a}function dh(t){if(t==null||t===Object.prototype)return Un;let e=tu.get(t);return e==null&&(e=aT(dh(Object.getPrototypeOf(t)),t),tu.set(t,e)),e}function uT(t,e){let r=dh(Object.getPrototypeOf(e));return new r(t,e)}function lT(t){return ye(t).immediateStopped}function cT(t,e){ye(t).eventPhase=e}function fT(t,e){ye(t).currentTarget=e}function ah(t,e){ye(t).passiveListener=e}var ph=new WeakMap,uh=1,lh=2,Pi=3;function Fi(t){return t!==null&&typeof t=="object"}function _r(t){let e=ph.get(t);if(e==null)throw new TypeError("'this' is expected an EventTarget object, but got another value.");return e}function hT(t){return{get(){let r=_r(this).get(t);for(;r!=null;){if(r.listenerType===Pi)return r.listener;r=r.next}return null},set(e){typeof e!="function"&&!Fi(e)&&(e=null);let r=_r(this),a=null,l=r.get(t);for(;l!=null;)l.listenerType===Pi?a!==null?a.next=l.next:l.next!==null?r.set(t,l.next):r.delete(t):a=l,l=l.next;if(e!==null){let c={listener:e,listenerType:Pi,passive:!1,once:!1,next:null};a===null?r.set(t,c):a.next=c}},configurable:!0,enumerable:!0}}function nu(t,e){Object.defineProperty(t,`on${e}`,hT(e))}function ch(t){function e(){Tt.call(this)}e.prototype=Object.create(Tt.prototype,{constructor:{value:e,configurable:!0,writable:!0}});for(let r=0;r<t.length;++r)nu(e.prototype,t[r]);return e}function Tt(){if(this instanceof Tt){ph.set(this,new Map);return}if(arguments.length===1&&Array.isArray(arguments[0]))return ch(arguments[0]);if(arguments.length>0){let t=new Array(arguments.length);for(let e=0;e<arguments.length;++e)t[e]=arguments[e];return ch(t)}throw new TypeError("Cannot call a class as a function")}Tt.prototype={addEventListener(t,e,r){if(e==null)return;if(typeof e!="function"&&!Fi(e))throw new TypeError("'listener' should be a function or an object.");let a=_r(this),l=Fi(r),h=(l?!!r.capture:!!r)?uh:lh,m={listener:e,listenerType:h,passive:l&&!!r.passive,once:l&&!!r.once,next:null},g=a.get(t);if(g===void 0){a.set(t,m);return}let v=null;for(;g!=null;){if(g.listener===e&&g.listenerType===h)return;v=g,g=g.next}v.next=m},removeEventListener(t,e,r){if(e==null)return;let a=_r(this),c=(Fi(r)?!!r.capture:!!r)?uh:lh,h=null,m=a.get(t);for(;m!=null;){if(m.listener===e&&m.listenerType===c){h!==null?h.next=m.next:m.next!==null?a.set(t,m.next):a.delete(t);return}h=m,m=m.next}},dispatchEvent(t){if(t==null||typeof t.type!="string")throw new TypeError('"event.type" should be a string.');let e=_r(this),r=t.type,a=e.get(r);if(a==null)return!0;let l=uT(this,t),c=null;for(;a!=null;){if(a.once?c!==null?c.next=a.next:a.next!==null?e.set(r,a.next):e.delete(r):c=a,ah(l,a.passive?a.listener:null),typeof a.listener=="function")try{a.listener.call(this,l)}catch(h){typeof console<"u"&&typeof console.error=="function"&&console.error(h)}else a.listenerType!==Pi&&typeof a.listener.handleEvent=="function"&&a.listener.handleEvent(l);if(lT(l))break;a=a.next}return ah(l,null),cT(l,0),fT(l,null),!l.defaultPrevented}};Object.defineProperty(Tt.prototype,"constructor",{value:Tt,configurable:!0,writable:!0});typeof window<"u"&&typeof window.EventTarget<"u"&&Object.setPrototypeOf(Tt.prototype,window.EventTarget.prototype);mr.defineEventAttribute=nu;mr.EventTarget=Tt;mr.default=Tt;Er.exports=Tt;Er.exports.EventTarget=Er.exports.default=Tt;Er.exports.defineEventAttribute=nu});var kn=M((wr,gr)=>{"use strict";Object.defineProperty(wr,"__esModule",{value:!0});var ru=_h(),Jt=class extends ru.EventTarget{constructor(){throw super(),new TypeError("AbortSignal cannot be constructed directly")}get aborted(){let e=xi.get(this);if(typeof e!="boolean")throw new TypeError(`Expected 'this' to be an 'AbortSignal' object, but got ${this===null?"null":typeof this}`);return e}};ru.defineEventAttribute(Jt.prototype,"abort");function dT(){let t=Object.create(Jt.prototype);return ru.EventTarget.call(t),xi.set(t,!1),t}function pT(t){xi.get(t)===!1&&(xi.set(t,!0),t.dispatchEvent({type:"abort"}))}var xi=new WeakMap;Object.defineProperties(Jt.prototype,{aborted:{enumerable:!0}});typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Jt.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortSignal"});var Qt=class{constructor(){mh.set(this,dT())}get signal(){return Eh(this)}abort(){pT(Eh(this))}},mh=new WeakMap;function Eh(t){let e=mh.get(t);if(e==null)throw new TypeError(`Expected 'this' to be an 'AbortController' object, but got ${t===null?"null":typeof t}`);return e}Object.defineProperties(Qt.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}});typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Qt.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortController"});wr.AbortController=Qt;wr.AbortSignal=Jt;wr.default=Qt;gr.exports=Qt;gr.exports.AbortController=gr.exports.default=Qt;gr.exports.AbortSignal=Jt});var qe=M((NR,ou)=>{"use strict";var _T=require("buffer"),{kResistStopPropagation:ET,SymbolDispose:mT}=Oe(),gT=globalThis.AbortSignal||kn().AbortSignal,wT=globalThis.AbortController||kn().AbortController,TT=Object.getPrototypeOf(async function(){}).constructor,gh=globalThis.Blob||_T.Blob,yT=typeof gh<"u"?function(e){return e instanceof gh}:function(e){return!1},wh=(t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new ERR_INVALID_ARG_TYPE(e,"AbortSignal",t)},ST=(t,e)=>{if(typeof t!="function")throw new ERR_INVALID_ARG_TYPE(e,"Function",t)},iu=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let r="";for(let a=0;a<e.length;a++)r+=`    ${e[a].stack}
`;super(r),this.name="AggregateError",this.errors=e}};ou.exports={AggregateError:iu,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...r){e||(e=!0,t.apply(this,r))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((a,l)=>{t=a,e=l}),resolve:t,reject:e}},promisify(t){return new Promise((e,r)=>{t((a,...l)=>a?r(a):e(...l))})},debuglog(){return function(){}},format(t,...e){return t.replace(/%([sdifj])/g,function(...[r,a]){let l=e.shift();return a==="f"?l.toFixed(6):a==="j"?JSON.stringify(l):a==="s"&&typeof l=="object"?`${l.constructor!==Object?l.constructor.name:""} {}`.trim():l.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}},types:{isAsyncFunction(t){return t instanceof TT},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:yT,deprecate(t,e){return t},addAbortListener:require("events").addAbortListener||function(e,r){if(e===void 0)throw new ERR_INVALID_ARG_TYPE("signal","AbortSignal",e);wh(e,"signal"),ST(r,"listener");let a;return e.aborted?queueMicrotask(()=>r()):(e.addEventListener("abort",r,{__proto__:null,once:!0,[ET]:!0}),a=()=>{e.removeEventListener("abort",r)}),{__proto__:null,[mT](){var l;(l=a)===null||l===void 0||l()}}},AbortSignalAny:gT.any||function(e){if(e.length===1)return e[0];let r=new wT,a=()=>r.abort();return e.forEach(l=>{wh(l,"signals"),l.addEventListener("abort",a,{once:!0})}),r.signal.addEventListener("abort",()=>{e.forEach(l=>l.removeEventListener("abort",a))},{once:!0}),r.signal}};ou.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var Ze=M((OR,Sh)=>{"use strict";var{format:vT,inspect:Ui,AggregateError:NT}=qe(),OT=globalThis.AggregateError||NT,AT=Symbol("kIsNodeError"),IT=["string","function","number","object","Function","Object","boolean","bigint","symbol"],DT=/^([A-Z][a-z0-9]*)+$/,bT="__node_internal_",ki={};function fn(t,e){if(!t)throw new ki.ERR_INTERNAL_ASSERTION(e)}function Th(t){let e="",r=t.length,a=t[0]==="-"?1:0;for(;r>=a+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function RT(t,e,r){if(typeof e=="function")return fn(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);let a=(e.match(/%[dfijoOs]/g)||[]).length;return fn(a===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${a}).`),r.length===0?e:vT(e,...r)}function Ue(t,e,r){r||(r=Error);class a extends r{constructor(...c){super(RT(t,e,c))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(a.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),a.prototype.code=t,a.prototype[AT]=!0,ki[t]=a}function yh(t){let e=bT+t.name;return Object.defineProperty(t,"name",{value:e}),t}function LT(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let r=new OT([e,t],e.message);return r.code=e.code,r}return t||e}var su=class extends Error{constructor(e="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new ki.ERR_INVALID_ARG_TYPE("options","Object",r);super(e,r),this.code="ABORT_ERR",this.name="AbortError"}};Ue("ERR_ASSERTION","%s",Error);Ue("ERR_INVALID_ARG_TYPE",(t,e,r)=>{fn(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let a="The ";t.endsWith(" argument")?a+=`${t} `:a+=`"${t}" ${t.includes(".")?"property":"argument"} `,a+="must be ";let l=[],c=[],h=[];for(let g of e)fn(typeof g=="string","All expected entries have to be of type string"),IT.includes(g)?l.push(g.toLowerCase()):DT.test(g)?c.push(g):(fn(g!=="object",'The value "object" should be written as "Object"'),h.push(g));if(c.length>0){let g=l.indexOf("object");g!==-1&&(l.splice(l,g,1),c.push("Object"))}if(l.length>0){switch(l.length){case 1:a+=`of type ${l[0]}`;break;case 2:a+=`one of type ${l[0]} or ${l[1]}`;break;default:{let g=l.pop();a+=`one of type ${l.join(", ")}, or ${g}`}}(c.length>0||h.length>0)&&(a+=" or ")}if(c.length>0){switch(c.length){case 1:a+=`an instance of ${c[0]}`;break;case 2:a+=`an instance of ${c[0]} or ${c[1]}`;break;default:{let g=c.pop();a+=`an instance of ${c.join(", ")}, or ${g}`}}h.length>0&&(a+=" or ")}switch(h.length){case 0:break;case 1:h[0].toLowerCase()!==h[0]&&(a+="an "),a+=`${h[0]}`;break;case 2:a+=`one of ${h[0]} or ${h[1]}`;break;default:{let g=h.pop();a+=`one of ${h.join(", ")}, or ${g}`}}if(r==null)a+=`. Received ${r}`;else if(typeof r=="function"&&r.name)a+=`. Received function ${r.name}`;else if(typeof r=="object"){var m;if((m=r.constructor)!==null&&m!==void 0&&m.name)a+=`. Received an instance of ${r.constructor.name}`;else{let g=Ui(r,{depth:-1});a+=`. Received ${g}`}}else{let g=Ui(r,{colors:!1});g.length>25&&(g=`${g.slice(0,25)}...`),a+=`. Received type ${typeof r} (${g})`}return a},TypeError);Ue("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let a=Ui(e);return a.length>128&&(a=a.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${a}`},TypeError);Ue("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var a;let l=r!=null&&(a=r.constructor)!==null&&a!==void 0&&a.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${l}.`},TypeError);Ue("ERR_MISSING_ARGS",(...t)=>{fn(t.length>0,"At least one arg needs to be specified");let e,r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(a=>`"${a}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let a=t.pop();e+=`The ${t.join(", ")}, and ${a} arguments`}break}return`${e} must be specified`},TypeError);Ue("ERR_OUT_OF_RANGE",(t,e,r)=>{fn(e,'Missing "range" argument');let a;return Number.isInteger(r)&&Math.abs(r)>2**32?a=Th(String(r)):typeof r=="bigint"?(a=String(r),(r>2n**32n||r<-(2n**32n))&&(a=Th(a)),a+="n"):a=Ui(r),`The value of "${t}" is out of range. It must be ${e}. Received ${a}`},RangeError);Ue("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);Ue("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);Ue("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);Ue("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);Ue("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);Ue("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Ue("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);Ue("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);Ue("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);Ue("ERR_STREAM_WRITE_AFTER_END","write after end",Error);Ue("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);Sh.exports={AbortError:su,aggregateTwoErrors:yh(LT),hideStackFrames:yh,codes:ki}});var Yn=M((AR,Ch)=>{"use strict";var{ArrayIsArray:uu,ArrayPrototypeIncludes:Ah,ArrayPrototypeJoin:Ih,ArrayPrototypeMap:CT,NumberIsInteger:lu,NumberIsNaN:MT,NumberMAX_SAFE_INTEGER:PT,NumberMIN_SAFE_INTEGER:FT,NumberParseInt:xT,ObjectPrototypeHasOwnProperty:UT,RegExpPrototypeExec:Dh,String:kT,StringPrototypeToUpperCase:BT,StringPrototypeTrim:YT}=Oe(),{hideStackFrames:ct,codes:{ERR_SOCKET_BAD_PORT:qT,ERR_INVALID_ARG_TYPE:Ve,ERR_INVALID_ARG_VALUE:Bn,ERR_OUT_OF_RANGE:hn,ERR_UNKNOWN_SIGNAL:vh}}=Ze(),{normalizeEncoding:VT}=qe(),{isAsyncFunction:HT,isArrayBufferView:WT}=qe().types,Nh={};function GT(t){return t===(t|0)}function jT(t){return t===t>>>0}var zT=/^[0-7]+$/,KT="must be a 32-bit unsigned integer or an octal string";function ZT(t,e,r){if(typeof t>"u"&&(t=r),typeof t=="string"){if(Dh(zT,t)===null)throw new Bn(e,t,KT);t=xT(t,8)}return bh(t,e),t}var $T=ct((t,e,r=FT,a=PT)=>{if(typeof t!="number")throw new Ve(e,"number",t);if(!lu(t))throw new hn(e,"an integer",t);if(t<r||t>a)throw new hn(e,`>= ${r} && <= ${a}`,t)}),XT=ct((t,e,r=-2147483648,a=2147483647)=>{if(typeof t!="number")throw new Ve(e,"number",t);if(!lu(t))throw new hn(e,"an integer",t);if(t<r||t>a)throw new hn(e,`>= ${r} && <= ${a}`,t)}),bh=ct((t,e,r=!1)=>{if(typeof t!="number")throw new Ve(e,"number",t);if(!lu(t))throw new hn(e,"an integer",t);let a=r?1:0,l=4294967295;if(t<a||t>l)throw new hn(e,`>= ${a} && <= ${l}`,t)});function cu(t,e){if(typeof t!="string")throw new Ve(e,"string",t)}function JT(t,e,r=void 0,a){if(typeof t!="number")throw new Ve(e,"number",t);if(r!=null&&t<r||a!=null&&t>a||(r!=null||a!=null)&&MT(t))throw new hn(e,`${r!=null?`>= ${r}`:""}${r!=null&&a!=null?" && ":""}${a!=null?`<= ${a}`:""}`,t)}var QT=ct((t,e,r)=>{if(!Ah(r,t)){let l="must be one of: "+Ih(CT(r,c=>typeof c=="string"?`'${c}'`:kT(c)),", ");throw new Bn(e,t,l)}});function Rh(t,e){if(typeof t!="boolean")throw new Ve(e,"boolean",t)}function au(t,e,r){return t==null||!UT(t,e)?r:t[e]}var ey=ct((t,e,r=null)=>{let a=au(r,"allowArray",!1),l=au(r,"allowFunction",!1);if(!au(r,"nullable",!1)&&t===null||!a&&uu(t)||typeof t!="object"&&(!l||typeof t!="function"))throw new Ve(e,"Object",t)}),ty=ct((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new Ve(e,"a dictionary",t)}),Bi=ct((t,e,r=0)=>{if(!uu(t))throw new Ve(e,"Array",t);if(t.length<r){let a=`must be longer than ${r}`;throw new Bn(e,t,a)}});function ny(t,e){Bi(t,e);for(let r=0;r<t.length;r++)cu(t[r],`${e}[${r}]`)}function ry(t,e){Bi(t,e);for(let r=0;r<t.length;r++)Rh(t[r],`${e}[${r}]`)}function iy(t,e){Bi(t,e);for(let r=0;r<t.length;r++){let a=t[r],l=`${e}[${r}]`;if(a==null)throw new Ve(l,"AbortSignal",a);Lh(a,l)}}function oy(t,e="signal"){if(cu(t,e),Nh[t]===void 0)throw Nh[BT(t)]!==void 0?new vh(t+" (signals must use all capital letters)"):new vh(t)}var sy=ct((t,e="buffer")=>{if(!WT(t))throw new Ve(e,["Buffer","TypedArray","DataView"],t)});function ay(t,e){let r=VT(e),a=t.length;if(r==="hex"&&a%2!==0)throw new Bn("encoding",e,`is invalid for data of length ${a}`)}function uy(t,e="Port",r=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&YT(t).length===0||+t!==+t>>>0||t>65535||t===0&&!r)throw new qT(e,t,r);return t|0}var Lh=ct((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new Ve(e,"AbortSignal",t)}),ly=ct((t,e)=>{if(typeof t!="function")throw new Ve(e,"Function",t)}),cy=ct((t,e)=>{if(typeof t!="function"||HT(t))throw new Ve(e,"Function",t)}),fy=ct((t,e)=>{if(t!==void 0)throw new Ve(e,"undefined",t)});function hy(t,e,r){if(!Ah(r,t))throw new Ve(e,`('${Ih(r,"|")}')`,t)}var dy=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function Oh(t,e){if(typeof t>"u"||!Dh(dy,t))throw new Bn(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function py(t){if(typeof t=="string")return Oh(t,"hints"),t;if(uu(t)){let e=t.length,r="";if(e===0)return r;for(let a=0;a<e;a++){let l=t[a];Oh(l,"hints"),r+=l,a!==e-1&&(r+=", ")}return r}throw new Bn("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}Ch.exports={isInt32:GT,isUint32:jT,parseFileMode:ZT,validateArray:Bi,validateStringArray:ny,validateBooleanArray:ry,validateAbortSignalArray:iy,validateBoolean:Rh,validateBuffer:sy,validateDictionary:ty,validateEncoding:ay,validateFunction:ly,validateInt32:XT,validateInteger:$T,validateNumber:JT,validateObject:ey,validateOneOf:QT,validatePlainFunction:cy,validatePort:uy,validateSignalName:oy,validateString:cu,validateUint32:bh,validateUndefined:fy,validateUnion:hy,validateAbortSignal:Lh,validateLinkHeaderValue:py}});var en=M((IR,Mh)=>{Mh.exports=global.process});var Pt=M((DR,Kh)=>{"use strict";var{SymbolAsyncIterator:Ph,SymbolIterator:Fh,SymbolFor:dn}=Oe(),xh=dn("nodejs.stream.destroyed"),Uh=dn("nodejs.stream.errored"),fu=dn("nodejs.stream.readable"),hu=dn("nodejs.stream.writable"),kh=dn("nodejs.stream.disturbed"),_y=dn("nodejs.webstream.isClosedPromise"),Ey=dn("nodejs.webstream.controllerErrorFunction");function Yi(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function qi(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function my(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function Mt(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function Bh(t){return!!(t&&!Mt(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function Yh(t){return!!(t&&!Mt(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function qh(t){return!!(t&&!Mt(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function gy(t){return Bh(t)||Yh(t)||qh(t)}function wy(t,e){return t==null?!1:e===!0?typeof t[Ph]=="function":e===!1?typeof t[Fh]=="function":typeof t[Ph]=="function"||typeof t[Fh]=="function"}function Vi(t){if(!Mt(t))return null;let e=t._writableState,r=t._readableState,a=e||r;return!!(t.destroyed||t[xh]||a!=null&&a.destroyed)}function Vh(t){if(!qi(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function Ty(t,e){if(!qi(t))return null;if(t.writableFinished===!0)return!0;let r=t._writableState;return r!=null&&r.errored?!1:typeof r?.finished!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function yy(t){if(!Yi(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function Hh(t,e){if(!Yi(t))return null;let r=t._readableState;return r!=null&&r.errored?!1:typeof r?.endEmitted!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function Wh(t){return t&&t[fu]!=null?t[fu]:typeof t?.readable!="boolean"?null:Vi(t)?!1:Yi(t)&&t.readable&&!Hh(t)}function Gh(t){return t&&t[hu]!=null?t[hu]:typeof t?.writable!="boolean"?null:Vi(t)?!1:qi(t)&&t.writable&&!Vh(t)}function Sy(t,e){return Mt(t)?Vi(t)?!0:!(e?.readable!==!1&&Wh(t)||e?.writable!==!1&&Gh(t)):null}function vy(t){var e,r;return Mt(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function Ny(t){var e,r;return Mt(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function Oy(t){if(!Mt(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,r=t._readableState;return typeof e?.closed=="boolean"||typeof r?.closed=="boolean"?e?.closed||r?.closed:typeof t._closed=="boolean"&&jh(t)?t._closed:null}function jh(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function zh(t){return typeof t._sent100=="boolean"&&jh(t)}function Ay(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function Iy(t){if(!Mt(t))return null;let e=t._writableState,r=t._readableState,a=e||r;return!a&&zh(t)||!!(a&&a.autoDestroy&&a.emitClose&&a.closed===!1)}function Dy(t){var e;return!!(t&&((e=t[kh])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function by(t){var e,r,a,l,c,h,m,g,v,N;return!!(t&&((e=(r=(a=(l=(c=(h=t[Uh])!==null&&h!==void 0?h:t.readableErrored)!==null&&c!==void 0?c:t.writableErrored)!==null&&l!==void 0?l:(m=t._readableState)===null||m===void 0?void 0:m.errorEmitted)!==null&&a!==void 0?a:(g=t._writableState)===null||g===void 0?void 0:g.errorEmitted)!==null&&r!==void 0?r:(v=t._readableState)===null||v===void 0?void 0:v.errored)!==null&&e!==void 0?e:!((N=t._writableState)===null||N===void 0)&&N.errored))}Kh.exports={isDestroyed:Vi,kIsDestroyed:xh,isDisturbed:Dy,kIsDisturbed:kh,isErrored:by,kIsErrored:Uh,isReadable:Wh,kIsReadable:fu,kIsClosedPromise:_y,kControllerErrorFunction:Ey,kIsWritable:hu,isClosed:Oy,isDuplexNodeStream:my,isFinished:Sy,isIterable:wy,isReadableNodeStream:Yi,isReadableStream:Bh,isReadableEnded:yy,isReadableFinished:Hh,isReadableErrored:Ny,isNodeStream:Mt,isWebStream:gy,isWritable:Gh,isWritableNodeStream:qi,isWritableStream:Yh,isWritableEnded:Vh,isWritableFinished:Ty,isWritableErrored:vy,isServerRequest:Ay,isServerResponse:zh,willEmitClose:Iy,isTransformStream:qh}});var Gt=M((bR,mu)=>{var tn=en(),{AbortError:rd,codes:Ry}=Ze(),{ERR_INVALID_ARG_TYPE:Ly,ERR_STREAM_PREMATURE_CLOSE:Zh}=Ry,{kEmptyObject:pu,once:_u}=qe(),{validateAbortSignal:Cy,validateFunction:My,validateObject:Py,validateBoolean:Fy}=Yn(),{Promise:xy,PromisePrototypeThen:Uy,SymbolDispose:id}=Oe(),{isClosed:ky,isReadable:$h,isReadableNodeStream:du,isReadableStream:By,isReadableFinished:Xh,isReadableErrored:Jh,isWritable:Qh,isWritableNodeStream:ed,isWritableStream:Yy,isWritableFinished:td,isWritableErrored:nd,isNodeStream:qy,willEmitClose:Vy,kIsClosedPromise:Hy}=Pt(),qn;function Wy(t){return t.setHeader&&typeof t.abort=="function"}var Eu=()=>{};function od(t,e,r){var a,l;if(arguments.length===2?(r=e,e=pu):e==null?e=pu:Py(e,"options"),My(r,"callback"),Cy(e.signal,"options.signal"),r=_u(r),By(t)||Yy(t))return Gy(t,e,r);if(!qy(t))throw new Ly("stream",["ReadableStream","WritableStream","Stream"],t);let c=(a=e.readable)!==null&&a!==void 0?a:du(t),h=(l=e.writable)!==null&&l!==void 0?l:ed(t),m=t._writableState,g=t._readableState,v=()=>{t.writable||L()},N=Vy(t)&&du(t)===c&&ed(t)===h,O=td(t,!1),L=()=>{O=!0,t.destroyed&&(N=!1),!(N&&(!t.readable||c))&&(!c||x)&&r.call(t)},x=Xh(t,!1),F=()=>{x=!0,t.destroyed&&(N=!1),!(N&&(!t.writable||h))&&(!h||O)&&r.call(t)},w=p=>{r.call(t,p)},k=ky(t),S=()=>{k=!0;let p=nd(t)||Jh(t);if(p&&typeof p!="boolean")return r.call(t,p);if(c&&!x&&du(t,!0)&&!Xh(t,!1))return r.call(t,new Zh);if(h&&!O&&!td(t,!1))return r.call(t,new Zh);r.call(t)},R=()=>{k=!0;let p=nd(t)||Jh(t);if(p&&typeof p!="boolean")return r.call(t,p);r.call(t)},A=()=>{t.req.on("finish",L)};Wy(t)?(t.on("complete",L),N||t.on("abort",S),t.req?A():t.on("request",A)):h&&!m&&(t.on("end",v),t.on("close",v)),!N&&typeof t.aborted=="boolean"&&t.on("aborted",S),t.on("end",F),t.on("finish",L),e.error!==!1&&t.on("error",w),t.on("close",S),k?tn.nextTick(S):m!=null&&m.errorEmitted||g!=null&&g.errorEmitted?N||tn.nextTick(R):(!c&&(!N||$h(t))&&(O||Qh(t)===!1)||!h&&(!N||Qh(t))&&(x||$h(t)===!1)||g&&t.req&&t.aborted)&&tn.nextTick(R);let D=()=>{r=Eu,t.removeListener("aborted",S),t.removeListener("complete",L),t.removeListener("abort",S),t.removeListener("request",A),t.req&&t.req.removeListener("finish",L),t.removeListener("end",v),t.removeListener("close",v),t.removeListener("finish",L),t.removeListener("end",F),t.removeListener("error",w),t.removeListener("close",S)};if(e.signal&&!k){let p=()=>{let J=r;D(),J.call(t,new rd(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)tn.nextTick(p);else{qn=qn||qe().addAbortListener;let J=qn(e.signal,p),V=r;r=_u((...G)=>{J[id](),V.apply(t,G)})}}return D}function Gy(t,e,r){let a=!1,l=Eu;if(e.signal)if(l=()=>{a=!0,r.call(t,new rd(void 0,{cause:e.signal.reason}))},e.signal.aborted)tn.nextTick(l);else{qn=qn||qe().addAbortListener;let h=qn(e.signal,l),m=r;r=_u((...g)=>{h[id](),m.apply(t,g)})}let c=(...h)=>{a||tn.nextTick(()=>r.apply(t,h))};return Uy(t[Hy].promise,c,c),Eu}function jy(t,e){var r;let a=!1;return e===null&&(e=pu),(r=e)!==null&&r!==void 0&&r.cleanup&&(Fy(e.cleanup,"cleanup"),a=e.cleanup),new xy((l,c)=>{let h=od(t,e,m=>{a&&h(),m?c(m):l()})})}mu.exports=od;mu.exports.finished=jy});var pn=M((RR,dd)=>{"use strict";var Ft=en(),{aggregateTwoErrors:zy,codes:{ERR_MULTIPLE_CALLBACK:Ky},AbortError:Zy}=Ze(),{Symbol:ud}=Oe(),{kIsDestroyed:$y,isDestroyed:Xy,isFinished:Jy,isServerRequest:Qy}=Pt(),ld=ud("kDestroy"),gu=ud("kConstruct");function cd(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function eS(t,e){let r=this._readableState,a=this._writableState,l=a||r;return a!=null&&a.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(cd(t,a,r),a&&(a.destroyed=!0),r&&(r.destroyed=!0),l.constructed?sd(this,t,e):this.once(ld,function(c){sd(this,zy(c,t),e)}),this)}function sd(t,e,r){let a=!1;function l(c){if(a)return;a=!0;let h=t._readableState,m=t._writableState;cd(c,m,h),m&&(m.closed=!0),h&&(h.closed=!0),typeof r=="function"&&r(c),c?Ft.nextTick(tS,t,c):Ft.nextTick(fd,t)}try{t._destroy(e||null,l)}catch(c){l(c)}}function tS(t,e){wu(t,e),fd(t)}function fd(t){let e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function wu(t,e){let r=t._readableState,a=t._writableState;a!=null&&a.errorEmitted||r!=null&&r.errorEmitted||(a&&(a.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function nS(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function Tu(t,e,r){let a=t._readableState,l=t._writableState;if(l!=null&&l.destroyed||a!=null&&a.destroyed)return this;a!=null&&a.autoDestroy||l!=null&&l.autoDestroy?t.destroy(e):e&&(e.stack,l&&!l.errored&&(l.errored=e),a&&!a.errored&&(a.errored=e),r?Ft.nextTick(wu,t,e):wu(t,e))}function rS(t,e){if(typeof t._construct!="function")return;let r=t._readableState,a=t._writableState;r&&(r.constructed=!1),a&&(a.constructed=!1),t.once(gu,e),!(t.listenerCount(gu)>1)&&Ft.nextTick(iS,t)}function iS(t){let e=!1;function r(a){if(e){Tu(t,a??new Ky);return}e=!0;let l=t._readableState,c=t._writableState,h=c||l;l&&(l.constructed=!0),c&&(c.constructed=!0),h.destroyed?t.emit(ld,a):a?Tu(t,a,!0):Ft.nextTick(oS,t)}try{t._construct(a=>{Ft.nextTick(r,a)})}catch(a){Ft.nextTick(r,a)}}function oS(t){t.emit(gu)}function ad(t){return t?.setHeader&&typeof t.abort=="function"}function hd(t){t.emit("close")}function sS(t,e){t.emit("error",e),Ft.nextTick(hd,t)}function aS(t,e){!t||Xy(t)||(!e&&!Jy(t)&&(e=new Zy),Qy(t)?(t.socket=null,t.destroy(e)):ad(t)?t.abort():ad(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?Ft.nextTick(sS,t,e):Ft.nextTick(hd,t),t.destroyed||(t[$y]=!0))}dd.exports={construct:rS,destroyer:aS,destroy:eS,undestroy:nS,errorOrDestroy:Tu}});var Gi=M((LR,_d)=>{"use strict";var{ArrayIsArray:uS,ObjectSetPrototypeOf:pd}=Oe(),{EventEmitter:Hi}=require("events");function Wi(t){Hi.call(this,t)}pd(Wi.prototype,Hi.prototype);pd(Wi,Hi);Wi.prototype.pipe=function(t,e){let r=this;function a(N){t.writable&&t.write(N)===!1&&r.pause&&r.pause()}r.on("data",a);function l(){r.readable&&r.resume&&r.resume()}t.on("drain",l),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",h),r.on("close",m));let c=!1;function h(){c||(c=!0,t.end())}function m(){c||(c=!0,typeof t.destroy=="function"&&t.destroy())}function g(N){v(),Hi.listenerCount(this,"error")===0&&this.emit("error",N)}yu(r,"error",g),yu(t,"error",g);function v(){r.removeListener("data",a),t.removeListener("drain",l),r.removeListener("end",h),r.removeListener("close",m),r.removeListener("error",g),t.removeListener("error",g),r.removeListener("end",v),r.removeListener("close",v),t.removeListener("close",v)}return r.on("end",v),r.on("close",v),t.on("close",v),t.emit("pipe",r),t};function yu(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):uS(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}_d.exports={Stream:Wi,prependListener:yu}});var Tr=M((CR,ji)=>{"use strict";var{SymbolDispose:lS}=Oe(),{AbortError:Ed,codes:cS}=Ze(),{isNodeStream:md,isWebStream:fS,kControllerErrorFunction:hS}=Pt(),dS=Gt(),{ERR_INVALID_ARG_TYPE:gd}=cS,Su,pS=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new gd(e,"AbortSignal",t)};ji.exports.addAbortSignal=function(e,r){if(pS(e,"signal"),!md(r)&&!fS(r))throw new gd("stream",["ReadableStream","WritableStream","Stream"],r);return ji.exports.addAbortSignalNoValidate(e,r)};ji.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let r=md(e)?()=>{e.destroy(new Ed(void 0,{cause:t.reason}))}:()=>{e[hS](new Ed(void 0,{cause:t.reason}))};if(t.aborted)r();else{Su=Su||qe().addAbortListener;let a=Su(t,r);dS(e,a[lS])}return e}});var yd=M((PR,Td)=>{"use strict";var{StringPrototypeSlice:wd,SymbolIterator:_S,TypedArrayPrototypeSet:zi,Uint8Array:ES}=Oe(),{Buffer:vu}=require("buffer"),{inspect:mS}=qe();Td.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(e){let r={data:e,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let r=this.head,a=""+r.data;for(;(r=r.next)!==null;)a+=e+r.data;return a}concat(e){if(this.length===0)return vu.alloc(0);let r=vu.allocUnsafe(e>>>0),a=this.head,l=0;for(;a;)zi(r,a.data,l),l+=a.data.length,a=a.next;return r}consume(e,r){let a=this.head.data;if(e<a.length){let l=a.slice(0,e);return this.head.data=a.slice(e),l}return e===a.length?this.shift():r?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[_S](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="",a=this.head,l=0;do{let c=a.data;if(e>c.length)r+=c,e-=c.length;else{e===c.length?(r+=c,++l,a.next?this.head=a.next:this.head=this.tail=null):(r+=wd(c,0,e),this.head=a,a.data=wd(c,e));break}++l}while((a=a.next)!==null);return this.length-=l,r}_getBuffer(e){let r=vu.allocUnsafe(e),a=e,l=this.head,c=0;do{let h=l.data;if(e>h.length)zi(r,h,a-e),e-=h.length;else{e===h.length?(zi(r,h,a-e),++c,l.next?this.head=l.next:this.head=this.tail=null):(zi(r,new ES(h.buffer,h.byteOffset,e),a-e),this.head=l,l.data=h.slice(e));break}++c}while((l=l.next)!==null);return this.length-=c,r}[Symbol.for("nodejs.util.inspect.custom")](e,r){return mS(this,{...r,depth:0,customInspect:!1})}}});var yr=M((FR,Od)=>{"use strict";var{MathFloor:gS,NumberIsInteger:wS}=Oe(),{validateInteger:TS}=Yn(),{ERR_INVALID_ARG_VALUE:yS}=Ze().codes,Sd=16*1024,vd=16;function SS(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function Nd(t){return t?vd:Sd}function vS(t,e){TS(e,"value",0),t?vd=e:Sd=e}function NS(t,e,r,a){let l=SS(e,a,r);if(l!=null){if(!wS(l)||l<0){let c=a?`options.${r}`:"options.highWaterMark";throw new yS(c,l)}return gS(l)}return Nd(t.objectMode)}Od.exports={getHighWaterMark:NS,getDefaultHighWaterMark:Nd,setDefaultHighWaterMark:vS}});var Nu=M((xR,bd)=>{"use strict";var Ad=en(),{PromisePrototypeThen:OS,SymbolAsyncIterator:Id,SymbolIterator:Dd}=Oe(),{Buffer:AS}=require("buffer"),{ERR_INVALID_ARG_TYPE:IS,ERR_STREAM_NULL_VALUES:DS}=Ze().codes;function bS(t,e,r){let a;if(typeof e=="string"||e instanceof AS)return new t({objectMode:!0,...r,read(){this.push(e),this.push(null)}});let l;if(e&&e[Id])l=!0,a=e[Id]();else if(e&&e[Dd])l=!1,a=e[Dd]();else throw new IS("iterable",["Iterable"],e);let c=new t({objectMode:!0,highWaterMark:1,...r}),h=!1;c._read=function(){h||(h=!0,g())},c._destroy=function(v,N){OS(m(v),()=>Ad.nextTick(N,v),O=>Ad.nextTick(N,O||v))};async function m(v){let N=v!=null,O=typeof a.throw=="function";if(N&&O){let{value:L,done:x}=await a.throw(v);if(await L,x)return}if(typeof a.return=="function"){let{value:L}=await a.return();await L}}async function g(){for(;;){try{let{value:v,done:N}=l?await a.next():a.next();if(N)c.push(null);else{let O=v&&typeof v.then=="function"?await v:v;if(O===null)throw h=!1,new DS;if(c.push(O))continue;h=!1}}catch(v){c.destroy(v)}break}}return c}bd.exports=bS});var vr=M((UR,zd)=>{var yt=en(),{ArrayPrototypeIndexOf:RS,NumberIsInteger:LS,NumberIsNaN:CS,NumberParseInt:MS,ObjectDefineProperties:Cu,ObjectKeys:PS,ObjectSetPrototypeOf:Cd,Promise:Md,SafeSet:FS,SymbolAsyncDispose:xS,SymbolAsyncIterator:US,Symbol:kS}=Oe();zd.exports=ee;ee.ReadableState=Xi;var{EventEmitter:BS}=require("events"),{Stream:nn,prependListener:YS}=Gi(),{Buffer:Ou}=require("buffer"),{addAbortSignal:qS}=Tr(),Pd=Gt(),oe=qe().debuglog("stream",t=>{oe=t}),VS=yd(),Wn=pn(),{getHighWaterMark:HS,getDefaultHighWaterMark:WS}=yr(),{aggregateTwoErrors:Rd,codes:{ERR_INVALID_ARG_TYPE:GS,ERR_METHOD_NOT_IMPLEMENTED:jS,ERR_OUT_OF_RANGE:zS,ERR_STREAM_PUSH_AFTER_EOF:KS,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:ZS},AbortError:$S}=Ze(),{validateObject:XS}=Yn(),_n=kS("kPaused"),{StringDecoder:Fd}=require("string_decoder"),JS=Nu();Cd(ee.prototype,nn.prototype);Cd(ee,nn);var Au=()=>{},{errorOrDestroy:Vn}=Wn,Hn=1,QS=2,xd=4,Sr=8,Ud=16,Ki=32,Zi=64,kd=128,ev=256,tv=512,nv=1024,Ru=2048,Lu=4096,rv=8192,iv=16384,ov=32768,Bd=65536,sv=1<<17,av=1<<18;function Me(t){return{enumerable:!1,get(){return(this.state&t)!==0},set(e){e?this.state|=t:this.state&=~t}}}Cu(Xi.prototype,{objectMode:Me(Hn),ended:Me(QS),endEmitted:Me(xd),reading:Me(Sr),constructed:Me(Ud),sync:Me(Ki),needReadable:Me(Zi),emittedReadable:Me(kd),readableListening:Me(ev),resumeScheduled:Me(tv),errorEmitted:Me(nv),emitClose:Me(Ru),autoDestroy:Me(Lu),destroyed:Me(rv),closed:Me(iv),closeEmitted:Me(ov),multiAwaitDrain:Me(Bd),readingMore:Me(sv),dataEmitted:Me(av)});function Xi(t,e,r){typeof r!="boolean"&&(r=e instanceof xt()),this.state=Ru|Lu|Ud|Ki,t&&t.objectMode&&(this.state|=Hn),r&&t&&t.readableObjectMode&&(this.state|=Hn),this.highWaterMark=t?HS(this,t,"readableHighWaterMark",r):WS(!1),this.buffer=new VS,this.length=0,this.pipes=[],this.flowing=null,this[_n]=null,t&&t.emitClose===!1&&(this.state&=~Ru),t&&t.autoDestroy===!1&&(this.state&=~Lu),this.errored=null,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new Fd(t.encoding),this.encoding=t.encoding)}function ee(t){if(!(this instanceof ee))return new ee(t);let e=this instanceof xt();this._readableState=new Xi(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&qS(t.signal,this)),nn.call(this,t),Wn.construct(this,()=>{this._readableState.needReadable&&$i(this,this._readableState)})}ee.prototype.destroy=Wn.destroy;ee.prototype._undestroy=Wn.undestroy;ee.prototype._destroy=function(t,e){e(t)};ee.prototype[BS.captureRejectionSymbol]=function(t){this.destroy(t)};ee.prototype[xS]=function(){let t;return this.destroyed||(t=this.readableEnded?null:new $S,this.destroy(t)),new Md((e,r)=>Pd(this,a=>a&&a!==t?r(a):e(null)))};ee.prototype.push=function(t,e){return Yd(this,t,e,!1)};ee.prototype.unshift=function(t,e){return Yd(this,t,e,!0)};function Yd(t,e,r,a){oe("readableAddChunk",e);let l=t._readableState,c;if((l.state&Hn)===0&&(typeof e=="string"?(r=r||l.defaultEncoding,l.encoding!==r&&(a&&l.encoding?e=Ou.from(e,r).toString(l.encoding):(e=Ou.from(e,r),r=""))):e instanceof Ou?r="":nn._isUint8Array(e)?(e=nn._uint8ArrayToBuffer(e),r=""):e!=null&&(c=new GS("chunk",["string","Buffer","Uint8Array"],e))),c)Vn(t,c);else if(e===null)l.state&=~Sr,cv(t,l);else if((l.state&Hn)!==0||e&&e.length>0)if(a)if((l.state&xd)!==0)Vn(t,new ZS);else{if(l.destroyed||l.errored)return!1;Iu(t,l,e,!0)}else if(l.ended)Vn(t,new KS);else{if(l.destroyed||l.errored)return!1;l.state&=~Sr,l.decoder&&!r?(e=l.decoder.write(e),l.objectMode||e.length!==0?Iu(t,l,e,!1):$i(t,l)):Iu(t,l,e,!1)}else a||(l.state&=~Sr,$i(t,l));return!l.ended&&(l.length<l.highWaterMark||l.length===0)}function Iu(t,e,r,a){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?((e.state&Bd)!==0?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,a?e.buffer.unshift(r):e.buffer.push(r),(e.state&Zi)!==0&&Ji(t)),$i(t,e)}ee.prototype.isPaused=function(){let t=this._readableState;return t[_n]===!0||t.flowing===!1};ee.prototype.setEncoding=function(t){let e=new Fd(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,a="";for(let l of r)a+=e.write(l);return r.clear(),a!==""&&r.push(a),this._readableState.length=a.length,this};var uv=1073741824;function lv(t){if(t>uv)throw new zS("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function Ld(t,e){return t<=0||e.length===0&&e.ended?0:(e.state&Hn)!==0?1:CS(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}ee.prototype.read=function(t){oe("read",t),t===void 0?t=NaN:LS(t)||(t=MS(t,10));let e=this._readableState,r=t;if(t>e.highWaterMark&&(e.highWaterMark=lv(t)),t!==0&&(e.state&=~kd),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return oe("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?Du(this):Ji(this),null;if(t=Ld(t,e),t===0&&e.ended)return e.length===0&&Du(this),null;let a=(e.state&Zi)!==0;if(oe("need readable",a),(e.length===0||e.length-t<e.highWaterMark)&&(a=!0,oe("length less than watermark",a)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)a=!1,oe("reading, ended or constructing",a);else if(a){oe("do read"),e.state|=Sr|Ki,e.length===0&&(e.state|=Zi);try{this._read(e.highWaterMark)}catch(c){Vn(this,c)}e.state&=~Ki,e.reading||(t=Ld(r,e))}let l;return t>0?l=Gd(t,e):l=null,l===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&Du(this)),l!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",l)),l};function cv(t,e){if(oe("onEofChunk"),!e.ended){if(e.decoder){let r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?Ji(t):(e.needReadable=!1,e.emittedReadable=!0,qd(t))}}function Ji(t){let e=t._readableState;oe("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(oe("emitReadable",e.flowing),e.emittedReadable=!0,yt.nextTick(qd,t))}function qd(t){let e=t._readableState;oe("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,Hd(t)}function $i(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,yt.nextTick(fv,t,e))}function fv(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let r=e.length;if(oe("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}ee.prototype._read=function(t){throw new jS("_read()")};ee.prototype.pipe=function(t,e){let r=this,a=this._readableState;a.pipes.length===1&&(a.multiAwaitDrain||(a.multiAwaitDrain=!0,a.awaitDrainWriters=new FS(a.awaitDrainWriters?[a.awaitDrainWriters]:[]))),a.pipes.push(t),oe("pipe count=%d opts=%j",a.pipes.length,e);let c=(!e||e.end!==!1)&&t!==yt.stdout&&t!==yt.stderr?m:k;a.endEmitted?yt.nextTick(c):r.once("end",c),t.on("unpipe",h);function h(S,R){oe("onunpipe"),S===r&&R&&R.hasUnpiped===!1&&(R.hasUnpiped=!0,N())}function m(){oe("onend"),t.end()}let g,v=!1;function N(){oe("cleanup"),t.removeListener("close",F),t.removeListener("finish",w),g&&t.removeListener("drain",g),t.removeListener("error",x),t.removeListener("unpipe",h),r.removeListener("end",m),r.removeListener("end",k),r.removeListener("data",L),v=!0,g&&a.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&g()}function O(){v||(a.pipes.length===1&&a.pipes[0]===t?(oe("false write response, pause",0),a.awaitDrainWriters=t,a.multiAwaitDrain=!1):a.pipes.length>1&&a.pipes.includes(t)&&(oe("false write response, pause",a.awaitDrainWriters.size),a.awaitDrainWriters.add(t)),r.pause()),g||(g=hv(r,t),t.on("drain",g))}r.on("data",L);function L(S){oe("ondata");let R=t.write(S);oe("dest.write",R),R===!1&&O()}function x(S){if(oe("onerror",S),k(),t.removeListener("error",x),t.listenerCount("error")===0){let R=t._writableState||t._readableState;R&&!R.errorEmitted?Vn(t,S):t.emit("error",S)}}YS(t,"error",x);function F(){t.removeListener("finish",w),k()}t.once("close",F);function w(){oe("onfinish"),t.removeListener("close",F),k()}t.once("finish",w);function k(){oe("unpipe"),r.unpipe(t)}return t.emit("pipe",r),t.writableNeedDrain===!0?O():a.flowing||(oe("pipe resume"),r.resume()),t};function hv(t,e){return function(){let a=t._readableState;a.awaitDrainWriters===e?(oe("pipeOnDrain",1),a.awaitDrainWriters=null):a.multiAwaitDrain&&(oe("pipeOnDrain",a.awaitDrainWriters.size),a.awaitDrainWriters.delete(e)),(!a.awaitDrainWriters||a.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}ee.prototype.unpipe=function(t){let e=this._readableState,r={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let l=e.pipes;e.pipes=[],this.pause();for(let c=0;c<l.length;c++)l[c].emit("unpipe",this,{hasUnpiped:!1});return this}let a=RS(e.pipes,t);return a===-1?this:(e.pipes.splice(a,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,r),this)};ee.prototype.on=function(t,e){let r=nn.prototype.on.call(this,t,e),a=this._readableState;return t==="data"?(a.readableListening=this.listenerCount("readable")>0,a.flowing!==!1&&this.resume()):t==="readable"&&!a.endEmitted&&!a.readableListening&&(a.readableListening=a.needReadable=!0,a.flowing=!1,a.emittedReadable=!1,oe("on readable",a.length,a.reading),a.length?Ji(this):a.reading||yt.nextTick(dv,this)),r};ee.prototype.addListener=ee.prototype.on;ee.prototype.removeListener=function(t,e){let r=nn.prototype.removeListener.call(this,t,e);return t==="readable"&&yt.nextTick(Vd,this),r};ee.prototype.off=ee.prototype.removeListener;ee.prototype.removeAllListeners=function(t){let e=nn.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&yt.nextTick(Vd,this),e};function Vd(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[_n]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function dv(t){oe("readable nexttick read 0"),t.read(0)}ee.prototype.resume=function(){let t=this._readableState;return t.flowing||(oe("resume"),t.flowing=!t.readableListening,pv(this,t)),t[_n]=!1,this};function pv(t,e){e.resumeScheduled||(e.resumeScheduled=!0,yt.nextTick(_v,t,e))}function _v(t,e){oe("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),Hd(t),e.flowing&&!e.reading&&t.read(0)}ee.prototype.pause=function(){return oe("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(oe("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[_n]=!0,this};function Hd(t){let e=t._readableState;for(oe("flow",e.flowing);e.flowing&&t.read()!==null;);}ee.prototype.wrap=function(t){let e=!1;t.on("data",a=>{!this.push(a)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",a=>{Vn(this,a)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let r=PS(t);for(let a=1;a<r.length;a++){let l=r[a];this[l]===void 0&&typeof t[l]=="function"&&(this[l]=t[l].bind(t))}return this};ee.prototype[US]=function(){return Wd(this)};ee.prototype.iterator=function(t){return t!==void 0&&XS(t,"options"),Wd(this,t)};function Wd(t,e){typeof t.read!="function"&&(t=ee.wrap(t,{objectMode:!0}));let r=Ev(t,e);return r.stream=t,r}async function*Ev(t,e){let r=Au;function a(h){this===t?(r(),r=Au):r=h}t.on("readable",a);let l,c=Pd(t,{writable:!1},h=>{l=h?Rd(l,h):null,r(),r=Au});try{for(;;){let h=t.destroyed?null:t.read();if(h!==null)yield h;else{if(l)throw l;if(l===null)return;await new Md(a)}}}catch(h){throw l=Rd(l,h),l}finally{(l||e?.destroyOnReturn!==!1)&&(l===void 0||t._readableState.autoDestroy)?Wn.destroyer(t,null):(t.off("readable",a),c())}}Cu(ee.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});Cu(Xi.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[_n]!==!1},set(t){this[_n]=!!t}}});ee._fromList=Gd;function Gd(t,e){if(e.length===0)return null;let r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function Du(t){let e=t._readableState;oe("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,yt.nextTick(mv,e,t))}function mv(t,e){if(oe("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)yt.nextTick(gv,e);else if(t.autoDestroy){let r=e._writableState;(!r||r.autoDestroy&&(r.finished||r.writable===!1))&&e.destroy()}}}function gv(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}ee.from=function(t,e){return JS(ee,t,e)};var bu;function jd(){return bu===void 0&&(bu={}),bu}ee.fromWeb=function(t,e){return jd().newStreamReadableFromReadableStream(t,e)};ee.toWeb=function(t,e){return jd().newReadableStreamFromStreamReadable(t,e)};ee.wrap=function(t,e){var r,a;return new ee({objectMode:(r=(a=t.readableObjectMode)!==null&&a!==void 0?a:t.objectMode)!==null&&r!==void 0?r:!0,...e,destroy(l,c){Wn.destroyer(t,l),c(l)}}).wrap(t)}});var ro=M((kR,op)=>{var En=en(),{ArrayPrototypeSlice:$d,Error:wv,FunctionPrototypeSymbolHasInstance:Xd,ObjectDefineProperty:Jd,ObjectDefineProperties:Tv,ObjectSetPrototypeOf:Qd,StringPrototypeToLowerCase:yv,Symbol:Sv,SymbolHasInstance:vv}=Oe();op.exports=Ae;Ae.WritableState=Ar;var{EventEmitter:Nv}=require("events"),Nr=Gi().Stream,{Buffer:Qi}=require("buffer"),no=pn(),{addAbortSignal:Ov}=Tr(),{getHighWaterMark:Av,getDefaultHighWaterMark:Iv}=yr(),{ERR_INVALID_ARG_TYPE:Dv,ERR_METHOD_NOT_IMPLEMENTED:bv,ERR_MULTIPLE_CALLBACK:ep,ERR_STREAM_CANNOT_PIPE:Rv,ERR_STREAM_DESTROYED:Or,ERR_STREAM_ALREADY_FINISHED:Lv,ERR_STREAM_NULL_VALUES:Cv,ERR_STREAM_WRITE_AFTER_END:Mv,ERR_UNKNOWN_ENCODING:tp}=Ze().codes,{errorOrDestroy:Gn}=no;Qd(Ae.prototype,Nr.prototype);Qd(Ae,Nr);function Fu(){}var jn=Sv("kOnFinished");function Ar(t,e,r){typeof r!="boolean"&&(r=e instanceof xt()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?Av(this,t,"writableHighWaterMark",r):Iv(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let a=!!(t&&t.decodeStrings===!1);this.decodeStrings=!a,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=Fv.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,to(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[jn]=[]}function to(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}Ar.prototype.getBuffer=function(){return $d(this.buffered,this.bufferedIndex)};Jd(Ar.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function Ae(t){let e=this instanceof xt();if(!e&&!Xd(Ae,this))return new Ae(t);this._writableState=new Ar(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&Ov(t.signal,this)),Nr.call(this,t),no.construct(this,()=>{let r=this._writableState;r.writing||Uu(this,r),ku(this,r)})}Jd(Ae,vv,{__proto__:null,value:function(t){return Xd(this,t)?!0:this!==Ae?!1:t&&t._writableState instanceof Ar}});Ae.prototype.pipe=function(){Gn(this,new Rv)};function np(t,e,r,a){let l=t._writableState;if(typeof r=="function")a=r,r=l.defaultEncoding;else{if(!r)r=l.defaultEncoding;else if(r!=="buffer"&&!Qi.isEncoding(r))throw new tp(r);typeof a!="function"&&(a=Fu)}if(e===null)throw new Cv;if(!l.objectMode)if(typeof e=="string")l.decodeStrings!==!1&&(e=Qi.from(e,r),r="buffer");else if(e instanceof Qi)r="buffer";else if(Nr._isUint8Array(e))e=Nr._uint8ArrayToBuffer(e),r="buffer";else throw new Dv("chunk",["string","Buffer","Uint8Array"],e);let c;return l.ending?c=new Mv:l.destroyed&&(c=new Or("write")),c?(En.nextTick(a,c),Gn(t,c,!0),c):(l.pendingcb++,Pv(t,l,e,r,a))}Ae.prototype.write=function(t,e,r){return np(this,t,e,r)===!0};Ae.prototype.cork=function(){this._writableState.corked++};Ae.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||Uu(this,t))};Ae.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=yv(e)),!Qi.isEncoding(e))throw new tp(e);return this._writableState.defaultEncoding=e,this};function Pv(t,e,r,a,l){let c=e.objectMode?1:r.length;e.length+=c;let h=e.length<e.highWaterMark;return h||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:r,encoding:a,callback:l}),e.allBuffers&&a!=="buffer"&&(e.allBuffers=!1),e.allNoop&&l!==Fu&&(e.allNoop=!1)):(e.writelen=c,e.writecb=l,e.writing=!0,e.sync=!0,t._write(r,a,e.onwrite),e.sync=!1),h&&!e.errored&&!e.destroyed}function Kd(t,e,r,a,l,c,h){e.writelen=a,e.writecb=h,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new Or("write")):r?t._writev(l,e.onwrite):t._write(l,c,e.onwrite),e.sync=!1}function Zd(t,e,r,a){--e.pendingcb,a(r),xu(e),Gn(t,r)}function Fv(t,e){let r=t._writableState,a=r.sync,l=r.writecb;if(typeof l!="function"){Gn(t,new ep);return}r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,e?(e.stack,r.errored||(r.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),a?En.nextTick(Zd,t,r,e,l):Zd(t,r,e,l)):(r.buffered.length>r.bufferedIndex&&Uu(t,r),a?r.afterWriteTickInfo!==null&&r.afterWriteTickInfo.cb===l?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:l,stream:t,state:r},En.nextTick(xv,r.afterWriteTickInfo)):rp(t,r,1,l))}function xv({stream:t,state:e,count:r,cb:a}){return e.afterWriteTickInfo=null,rp(t,e,r,a)}function rp(t,e,r,a){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));r-- >0;)e.pendingcb--,a();e.destroyed&&xu(e),ku(t,e)}function xu(t){if(t.writing)return;for(let l=t.bufferedIndex;l<t.buffered.length;++l){var e;let{chunk:c,callback:h}=t.buffered[l],m=t.objectMode?1:c.length;t.length-=m,h((e=t.errored)!==null&&e!==void 0?e:new Or("write"))}let r=t[jn].splice(0);for(let l=0;l<r.length;l++){var a;r[l]((a=t.errored)!==null&&a!==void 0?a:new Or("end"))}to(t)}function Uu(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:r,bufferedIndex:a,objectMode:l}=e,c=r.length-a;if(!c)return;let h=a;if(e.bufferProcessing=!0,c>1&&t._writev){e.pendingcb-=c-1;let m=e.allNoop?Fu:v=>{for(let N=h;N<r.length;++N)r[N].callback(v)},g=e.allNoop&&h===0?r:$d(r,h);g.allBuffers=e.allBuffers,Kd(t,e,!0,e.length,g,"",m),to(e)}else{do{let{chunk:m,encoding:g,callback:v}=r[h];r[h++]=null;let N=l?1:m.length;Kd(t,e,!1,N,m,g,v)}while(h<r.length&&!e.writing);h===r.length?to(e):h>256?(r.splice(0,h),e.bufferedIndex=0):e.bufferedIndex=h}e.bufferProcessing=!1}Ae.prototype._write=function(t,e,r){if(this._writev)this._writev([{chunk:t,encoding:e}],r);else throw new bv("_write()")};Ae.prototype._writev=null;Ae.prototype.end=function(t,e,r){let a=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null);let l;if(t!=null){let c=np(this,t,e);c instanceof wv&&(l=c)}return a.corked&&(a.corked=1,this.uncork()),l||(!a.errored&&!a.ending?(a.ending=!0,ku(this,a,!0),a.ended=!0):a.finished?l=new Lv("end"):a.destroyed&&(l=new Or("end"))),typeof r=="function"&&(l||a.finished?En.nextTick(r,l):a[jn].push(r)),this};function eo(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function Uv(t,e){let r=!1;function a(l){if(r){Gn(t,l??ep());return}if(r=!0,e.pendingcb--,l){let c=e[jn].splice(0);for(let h=0;h<c.length;h++)c[h](l);Gn(t,l,e.sync)}else eo(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,En.nextTick(Pu,t,e))}e.sync=!0,e.pendingcb++;try{t._final(a)}catch(l){a(l)}e.sync=!1}function kv(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,Uv(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function ku(t,e,r){eo(e)&&(kv(t,e),e.pendingcb===0&&(r?(e.pendingcb++,En.nextTick((a,l)=>{eo(l)?Pu(a,l):l.pendingcb--},t,e)):eo(e)&&(e.pendingcb++,Pu(t,e))))}function Pu(t,e){e.pendingcb--,e.finished=!0;let r=e[jn].splice(0);for(let a=0;a<r.length;a++)r[a]();if(t.emit("finish"),e.autoDestroy){let a=t._readableState;(!a||a.autoDestroy&&(a.endEmitted||a.readable===!1))&&t.destroy()}}Tv(Ae.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var Bv=no.destroy;Ae.prototype.destroy=function(t,e){let r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[jn].length)&&En.nextTick(xu,r),Bv.call(this,t,e),this};Ae.prototype._undestroy=no.undestroy;Ae.prototype._destroy=function(t,e){e(t)};Ae.prototype[Nv.captureRejectionSymbol]=function(t){this.destroy(t)};var Mu;function ip(){return Mu===void 0&&(Mu={}),Mu}Ae.fromWeb=function(t,e){return ip().newStreamWritableFromWritableStream(t,e)};Ae.toWeb=function(t){return ip().newWritableStreamFromStreamWritable(t)}});var Tp=M((BR,wp)=>{var Bu=en(),Yv=require("buffer"),{isReadable:qv,isWritable:Vv,isIterable:sp,isNodeStream:Hv,isReadableNodeStream:ap,isWritableNodeStream:up,isDuplexNodeStream:Wv,isReadableStream:lp,isWritableStream:cp}=Pt(),fp=Gt(),{AbortError:mp,codes:{ERR_INVALID_ARG_TYPE:Gv,ERR_INVALID_RETURN_VALUE:hp}}=Ze(),{destroyer:Kn}=pn(),jv=xt(),gp=vr(),zv=ro(),{createDeferredPromise:dp}=qe(),pp=Nu(),_p=globalThis.Blob||Yv.Blob,Kv=typeof _p<"u"?function(e){return e instanceof _p}:function(e){return!1},Zv=globalThis.AbortController||kn().AbortController,{FunctionPrototypeCall:Ep}=Oe(),rn=class extends jv{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};wp.exports=function t(e,r){if(Wv(e))return e;if(ap(e))return zn({readable:e});if(up(e))return zn({writable:e});if(Hv(e))return zn({writable:!1,readable:!1});if(lp(e))return zn({readable:gp.fromWeb(e)});if(cp(e))return zn({writable:zv.fromWeb(e)});if(typeof e=="function"){let{value:l,write:c,final:h,destroy:m}=$v(e);if(sp(l))return pp(rn,l,{objectMode:!0,write:c,final:h,destroy:m});let g=l?.then;if(typeof g=="function"){let v,N=Ep(g,l,O=>{if(O!=null)throw new hp("nully","body",O)},O=>{Kn(v,O)});return v=new rn({objectMode:!0,readable:!1,write:c,final(O){h(async()=>{try{await N,Bu.nextTick(O,null)}catch(L){Bu.nextTick(O,L)}})},destroy:m})}throw new hp("Iterable, AsyncIterable or AsyncFunction",r,l)}if(Kv(e))return t(e.arrayBuffer());if(sp(e))return pp(rn,e,{objectMode:!0,writable:!1});if(lp(e?.readable)&&cp(e?.writable))return rn.fromWeb(e);if(typeof e?.writable=="object"||typeof e?.readable=="object"){let l=e!=null&&e.readable?ap(e?.readable)?e?.readable:t(e.readable):void 0,c=e!=null&&e.writable?up(e?.writable)?e?.writable:t(e.writable):void 0;return zn({readable:l,writable:c})}let a=e?.then;if(typeof a=="function"){let l;return Ep(a,e,c=>{c!=null&&l.push(c),l.push(null)},c=>{Kn(l,c)}),l=new rn({objectMode:!0,writable:!1,read(){}})}throw new Gv(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function $v(t){let{promise:e,resolve:r}=dp(),a=new Zv,l=a.signal;return{value:t(async function*(){for(;;){let h=e;e=null;let{chunk:m,done:g,cb:v}=await h;if(Bu.nextTick(v),g)return;if(l.aborted)throw new mp(void 0,{cause:l.reason});({promise:e,resolve:r}=dp()),yield m}}(),{signal:l}),write(h,m,g){let v=r;r=null,v({chunk:h,done:!1,cb:g})},final(h){let m=r;r=null,m({done:!0,cb:h})},destroy(h,m){a.abort(),m(h)}}}function zn(t){let e=t.readable&&typeof t.readable.read!="function"?gp.wrap(t.readable):t.readable,r=t.writable,a=!!qv(e),l=!!Vv(r),c,h,m,g,v;function N(O){let L=g;g=null,L?L(O):O&&v.destroy(O)}return v=new rn({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(r!=null&&r.writableObjectMode),readable:a,writable:l}),l&&(fp(r,O=>{l=!1,O&&Kn(e,O),N(O)}),v._write=function(O,L,x){r.write(O,L)?x():c=x},v._final=function(O){r.end(),h=O},r.on("drain",function(){if(c){let O=c;c=null,O()}}),r.on("finish",function(){if(h){let O=h;h=null,O()}})),a&&(fp(e,O=>{a=!1,O&&Kn(e,O),N(O)}),e.on("readable",function(){if(m){let O=m;m=null,O()}}),e.on("end",function(){v.push(null)}),v._read=function(){for(;;){let O=e.read();if(O===null){m=v._read;return}if(!v.push(O))return}}),v._destroy=function(O,L){!O&&g!==null&&(O=new mp),m=null,c=null,h=null,g===null?L(O):(g=L,Kn(r,O),Kn(e,O))},v}});var xt=M((YR,vp)=>{"use strict";var{ObjectDefineProperties:Xv,ObjectGetOwnPropertyDescriptor:jt,ObjectKeys:Jv,ObjectSetPrototypeOf:yp}=Oe();vp.exports=St;var Vu=vr(),ft=ro();yp(St.prototype,Vu.prototype);yp(St,Vu);{let t=Jv(ft.prototype);for(let e=0;e<t.length;e++){let r=t[e];St.prototype[r]||(St.prototype[r]=ft.prototype[r])}}function St(t){if(!(this instanceof St))return new St(t);Vu.call(this,t),ft.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}Xv(St.prototype,{writable:{__proto__:null,...jt(ft.prototype,"writable")},writableHighWaterMark:{__proto__:null,...jt(ft.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...jt(ft.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...jt(ft.prototype,"writableBuffer")},writableLength:{__proto__:null,...jt(ft.prototype,"writableLength")},writableFinished:{__proto__:null,...jt(ft.prototype,"writableFinished")},writableCorked:{__proto__:null,...jt(ft.prototype,"writableCorked")},writableEnded:{__proto__:null,...jt(ft.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...jt(ft.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var Yu;function Sp(){return Yu===void 0&&(Yu={}),Yu}St.fromWeb=function(t,e){return Sp().newStreamDuplexFromReadableWritablePair(t,e)};St.toWeb=function(t){return Sp().newReadableWritablePairFromDuplex(t)};var qu;St.from=function(t){return qu||(qu=Tp()),qu(t,"body")}});var Gu=M((qR,Op)=>{"use strict";var{ObjectSetPrototypeOf:Np,Symbol:Qv}=Oe();Op.exports=zt;var{ERR_METHOD_NOT_IMPLEMENTED:eN}=Ze().codes,Wu=xt(),{getHighWaterMark:tN}=yr();Np(zt.prototype,Wu.prototype);Np(zt,Wu);var Ir=Qv("kCallback");function zt(t){if(!(this instanceof zt))return new zt(t);let e=t?tN(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),Wu.call(this,t),this._readableState.sync=!1,this[Ir]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",nN)}function Hu(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function nN(){this._final!==Hu&&Hu.call(this)}zt.prototype._final=Hu;zt.prototype._transform=function(t,e,r){throw new eN("_transform()")};zt.prototype._write=function(t,e,r){let a=this._readableState,l=this._writableState,c=a.length;this._transform(t,e,(h,m)=>{if(h){r(h);return}m!=null&&this.push(m),l.ended||c===a.length||a.length<a.highWaterMark?r():this[Ir]=r})};zt.prototype._read=function(){if(this[Ir]){let t=this[Ir];this[Ir]=null,t()}}});var zu=M((VR,Ip)=>{"use strict";var{ObjectSetPrototypeOf:Ap}=Oe();Ip.exports=Zn;var ju=Gu();Ap(Zn.prototype,ju.prototype);Ap(Zn,ju);function Zn(t){if(!(this instanceof Zn))return new Zn(t);ju.call(this,t)}Zn.prototype._transform=function(t,e,r){r(null,t)}});var ao=M((HR,Cp)=>{var Dr=en(),{ArrayIsArray:rN,Promise:iN,SymbolAsyncIterator:oN,SymbolDispose:sN}=Oe(),so=Gt(),{once:aN}=qe(),uN=pn(),Dp=xt(),{aggregateTwoErrors:lN,codes:{ERR_INVALID_ARG_TYPE:nl,ERR_INVALID_RETURN_VALUE:Ku,ERR_MISSING_ARGS:cN,ERR_STREAM_DESTROYED:fN,ERR_STREAM_PREMATURE_CLOSE:hN},AbortError:dN}=Ze(),{validateFunction:pN,validateAbortSignal:_N}=Yn(),{isIterable:mn,isReadable:Zu,isReadableNodeStream:oo,isNodeStream:bp,isTransformStream:$n,isWebStream:EN,isReadableStream:$u,isReadableFinished:mN}=Pt(),gN=globalThis.AbortController||kn().AbortController,Xu,Ju,Qu;function Rp(t,e,r){let a=!1;t.on("close",()=>{a=!0});let l=so(t,{readable:e,writable:r},c=>{a=!c});return{destroy:c=>{a||(a=!0,uN.destroyer(t,c||new fN("pipe")))},cleanup:l}}function wN(t){return pN(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function el(t){if(mn(t))return t;if(oo(t))return TN(t);throw new nl("val",["Readable","Iterable","AsyncIterable"],t)}async function*TN(t){Ju||(Ju=vr()),yield*Ju.prototype[oN].call(t)}async function io(t,e,r,{end:a}){let l,c=null,h=v=>{if(v&&(l=v),c){let N=c;c=null,N()}},m=()=>new iN((v,N)=>{l?N(l):c=()=>{l?N(l):v()}});e.on("drain",h);let g=so(e,{readable:!1},h);try{e.writableNeedDrain&&await m();for await(let v of t)e.write(v)||await m();a&&(e.end(),await m()),r()}catch(v){r(l!==v?lN(l,v):v)}finally{g(),e.off("drain",h)}}async function tl(t,e,r,{end:a}){$n(e)&&(e=e.writable);let l=e.getWriter();try{for await(let c of t)await l.ready,l.write(c).catch(()=>{});await l.ready,a&&await l.close(),r()}catch(c){try{await l.abort(c),r(c)}catch(h){r(h)}}}function yN(...t){return Lp(t,aN(wN(t)))}function Lp(t,e,r){if(t.length===1&&rN(t[0])&&(t=t[0]),t.length<2)throw new cN("streams");let a=new gN,l=a.signal,c=r?.signal,h=[];_N(c,"options.signal");function m(){F(new dN)}Qu=Qu||qe().addAbortListener;let g;c&&(g=Qu(c,m));let v,N,O=[],L=0;function x(A){F(A,--L===0)}function F(A,D){var p;if(A&&(!v||v.code==="ERR_STREAM_PREMATURE_CLOSE")&&(v=A),!(!v&&!D)){for(;O.length;)O.shift()(v);(p=g)===null||p===void 0||p[sN](),a.abort(),D&&(v||h.forEach(J=>J()),Dr.nextTick(e,v,N))}}let w;for(let A=0;A<t.length;A++){let D=t[A],p=A<t.length-1,J=A>0,V=p||r?.end!==!1,G=A===t.length-1;if(bp(D)){let Y=function(pt){pt&&pt.name!=="AbortError"&&pt.code!=="ERR_STREAM_PREMATURE_CLOSE"&&x(pt)};var R=Y;if(V){let{destroy:pt,cleanup:Ce}=Rp(D,p,J);O.push(pt),Zu(D)&&G&&h.push(Ce)}D.on("error",Y),Zu(D)&&G&&h.push(()=>{D.removeListener("error",Y)})}if(A===0)if(typeof D=="function"){if(w=D({signal:l}),!mn(w))throw new Ku("Iterable, AsyncIterable or Stream","source",w)}else mn(D)||oo(D)||$n(D)?w=D:w=Dp.from(D);else if(typeof D=="function"){if($n(w)){var k;w=el((k=w)===null||k===void 0?void 0:k.readable)}else w=el(w);if(w=D(w,{signal:l}),p){if(!mn(w,!0))throw new Ku("AsyncIterable",`transform[${A-1}]`,w)}else{var S;Xu||(Xu=zu());let Y=new Xu({objectMode:!0}),pt=(S=w)===null||S===void 0?void 0:S.then;if(typeof pt=="function")L++,pt.call(w,y=>{N=y,y!=null&&Y.write(y),V&&Y.end(),Dr.nextTick(x)},y=>{Y.destroy(y),Dr.nextTick(x,y)});else if(mn(w,!0))L++,io(w,Y,x,{end:V});else if($u(w)||$n(w)){let y=w.readable||w;L++,io(y,Y,x,{end:V})}else throw new Ku("AsyncIterable or Promise","destination",w);w=Y;let{destroy:Ce,cleanup:zs}=Rp(w,!1,!0);O.push(Ce),G&&h.push(zs)}}else if(bp(D)){if(oo(w)){L+=2;let Y=SN(w,D,x,{end:V});Zu(D)&&G&&h.push(Y)}else if($n(w)||$u(w)){let Y=w.readable||w;L++,io(Y,D,x,{end:V})}else if(mn(w))L++,io(w,D,x,{end:V});else throw new nl("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],w);w=D}else if(EN(D)){if(oo(w))L++,tl(el(w),D,x,{end:V});else if($u(w)||mn(w))L++,tl(w,D,x,{end:V});else if($n(w))L++,tl(w.readable,D,x,{end:V});else throw new nl("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],w);w=D}else w=Dp.from(D)}return(l!=null&&l.aborted||c!=null&&c.aborted)&&Dr.nextTick(m),w}function SN(t,e,r,{end:a}){let l=!1;if(e.on("close",()=>{l||r(new hN)}),t.pipe(e,{end:!1}),a){let h=function(){l=!0,e.end()};var c=h;mN(t)?Dr.nextTick(h):t.once("end",h)}else r();return so(t,{readable:!0,writable:!1},h=>{let m=t._readableState;h&&h.code==="ERR_STREAM_PREMATURE_CLOSE"&&m&&m.ended&&!m.errored&&!m.errorEmitted?t.once("end",r).once("error",r):r(h)}),so(e,{readable:!1,writable:!0},r)}Cp.exports={pipelineImpl:Lp,pipeline:yN}});var il=M((WR,kp)=>{"use strict";var{pipeline:vN}=ao(),uo=xt(),{destroyer:NN}=pn(),{isNodeStream:lo,isReadable:Mp,isWritable:Pp,isWebStream:rl,isTransformStream:gn,isWritableStream:Fp,isReadableStream:xp}=Pt(),{AbortError:ON,codes:{ERR_INVALID_ARG_VALUE:Up,ERR_MISSING_ARGS:AN}}=Ze(),IN=Gt();kp.exports=function(...e){if(e.length===0)throw new AN("streams");if(e.length===1)return uo.from(e[0]);let r=[...e];if(typeof e[0]=="function"&&(e[0]=uo.from(e[0])),typeof e[e.length-1]=="function"){let x=e.length-1;e[x]=uo.from(e[x])}for(let x=0;x<e.length;++x)if(!(!lo(e[x])&&!rl(e[x]))){if(x<e.length-1&&!(Mp(e[x])||xp(e[x])||gn(e[x])))throw new Up(`streams[${x}]`,r[x],"must be readable");if(x>0&&!(Pp(e[x])||Fp(e[x])||gn(e[x])))throw new Up(`streams[${x}]`,r[x],"must be writable")}let a,l,c,h,m;function g(x){let F=h;h=null,F?F(x):x?m.destroy(x):!L&&!O&&m.destroy()}let v=e[0],N=vN(e,g),O=!!(Pp(v)||Fp(v)||gn(v)),L=!!(Mp(N)||xp(N)||gn(N));if(m=new uo({writableObjectMode:!!(v!=null&&v.writableObjectMode),readableObjectMode:!!(N!=null&&N.readableObjectMode),writable:O,readable:L}),O){if(lo(v))m._write=function(F,w,k){v.write(F,w)?k():a=k},m._final=function(F){v.end(),l=F},v.on("drain",function(){if(a){let F=a;a=null,F()}});else if(rl(v)){let w=(gn(v)?v.writable:v).getWriter();m._write=async function(k,S,R){try{await w.ready,w.write(k).catch(()=>{}),R()}catch(A){R(A)}},m._final=async function(k){try{await w.ready,w.close().catch(()=>{}),l=k}catch(S){k(S)}}}let x=gn(N)?N.readable:N;IN(x,()=>{if(l){let F=l;l=null,F()}})}if(L){if(lo(N))N.on("readable",function(){if(c){let x=c;c=null,x()}}),N.on("end",function(){m.push(null)}),m._read=function(){for(;;){let x=N.read();if(x===null){c=m._read;return}if(!m.push(x))return}};else if(rl(N)){let F=(gn(N)?N.readable:N).getReader();m._read=async function(){for(;;)try{let{value:w,done:k}=await F.read();if(!m.push(w))return;if(k){m.push(null);return}}catch{return}}}}return m._destroy=function(x,F){!x&&h!==null&&(x=new ON),c=null,a=null,l=null,h===null?F(x):(h=F,lo(N)&&NN(N,x))},m}});var Kp=M((GR,al)=>{"use strict";var DN=globalThis.AbortController||kn().AbortController,{codes:{ERR_INVALID_ARG_VALUE:bN,ERR_INVALID_ARG_TYPE:br,ERR_MISSING_ARGS:RN,ERR_OUT_OF_RANGE:LN},AbortError:Ut}=Ze(),{validateAbortSignal:wn,validateInteger:Bp,validateObject:Tn}=Yn(),CN=Oe().Symbol("kWeak"),MN=Oe().Symbol("kResistStopPropagation"),{finished:PN}=Gt(),FN=il(),{addAbortSignalNoValidate:xN}=Tr(),{isWritable:UN,isNodeStream:kN}=Pt(),{deprecate:BN}=qe(),{ArrayPrototypePush:YN,Boolean:qN,MathFloor:Yp,Number:VN,NumberIsNaN:HN,Promise:qp,PromiseReject:Vp,PromiseResolve:WN,PromisePrototypeThen:Hp,Symbol:Gp}=Oe(),co=Gp("kEmpty"),Wp=Gp("kEof");function GN(t,e){if(e!=null&&Tn(e,"options"),e?.signal!=null&&wn(e.signal,"options.signal"),kN(t)&&!UN(t))throw new bN("stream",t,"must be writable");let r=FN(this,t);return e!=null&&e.signal&&xN(e.signal,r),r}function fo(t,e){if(typeof t!="function")throw new br("fn",["Function","AsyncFunction"],t);e!=null&&Tn(e,"options"),e?.signal!=null&&wn(e.signal,"options.signal");let r=1;e?.concurrency!=null&&(r=Yp(e.concurrency));let a=r-1;return e?.highWaterMark!=null&&(a=Yp(e.highWaterMark)),Bp(r,"options.concurrency",1),Bp(a,"options.highWaterMark",0),a+=r,async function*(){let c=qe().AbortSignalAny([e?.signal].filter(qN)),h=this,m=[],g={signal:c},v,N,O=!1,L=0;function x(){O=!0,F()}function F(){L-=1,w()}function w(){N&&!O&&L<r&&m.length<a&&(N(),N=null)}async function k(){try{for await(let S of h){if(O)return;if(c.aborted)throw new Ut;try{if(S=t(S,g),S===co)continue;S=WN(S)}catch(R){S=Vp(R)}L+=1,Hp(S,F,x),m.push(S),v&&(v(),v=null),!O&&(m.length>=a||L>=r)&&await new qp(R=>{N=R})}m.push(Wp)}catch(S){let R=Vp(S);Hp(R,F,x),m.push(R)}finally{O=!0,v&&(v(),v=null)}}k();try{for(;;){for(;m.length>0;){let S=await m[0];if(S===Wp)return;if(c.aborted)throw new Ut;S!==co&&(yield S),m.shift(),w()}await new qp(S=>{v=S})}}finally{O=!0,N&&(N(),N=null)}}.call(this)}function jN(t=void 0){return t!=null&&Tn(t,"options"),t?.signal!=null&&wn(t.signal,"options.signal"),async function*(){let r=0;for await(let l of this){var a;if(t!=null&&(a=t.signal)!==null&&a!==void 0&&a.aborted)throw new Ut({cause:t.signal.reason});yield[r++,l]}}.call(this)}async function jp(t,e=void 0){for await(let r of sl.call(this,t,e))return!0;return!1}async function zN(t,e=void 0){if(typeof t!="function")throw new br("fn",["Function","AsyncFunction"],t);return!await jp.call(this,async(...r)=>!await t(...r),e)}async function KN(t,e){for await(let r of sl.call(this,t,e))return r}async function ZN(t,e){if(typeof t!="function")throw new br("fn",["Function","AsyncFunction"],t);async function r(a,l){return await t(a,l),co}for await(let a of fo.call(this,r,e));}function sl(t,e){if(typeof t!="function")throw new br("fn",["Function","AsyncFunction"],t);async function r(a,l){return await t(a,l)?a:co}return fo.call(this,r,e)}var ol=class extends RN{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function $N(t,e,r){var a;if(typeof t!="function")throw new br("reducer",["Function","AsyncFunction"],t);r!=null&&Tn(r,"options"),r?.signal!=null&&wn(r.signal,"options.signal");let l=arguments.length>1;if(r!=null&&(a=r.signal)!==null&&a!==void 0&&a.aborted){let v=new Ut(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await PN(this.destroy(v)),v}let c=new DN,h=c.signal;if(r!=null&&r.signal){let v={once:!0,[CN]:this,[MN]:!0};r.signal.addEventListener("abort",()=>c.abort(),v)}let m=!1;try{for await(let v of this){var g;if(m=!0,r!=null&&(g=r.signal)!==null&&g!==void 0&&g.aborted)throw new Ut;l?e=await t(e,v,{signal:h}):(e=v,l=!0)}if(!m&&!l)throw new ol}finally{c.abort()}return e}async function XN(t){t!=null&&Tn(t,"options"),t?.signal!=null&&wn(t.signal,"options.signal");let e=[];for await(let a of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new Ut(void 0,{cause:t.signal.reason});YN(e,a)}return e}function JN(t,e){let r=fo.call(this,t,e);return async function*(){for await(let l of r)yield*l}.call(this)}function zp(t){if(t=VN(t),HN(t))return 0;if(t<0)throw new LN("number",">= 0",t);return t}function QN(t,e=void 0){return e!=null&&Tn(e,"options"),e?.signal!=null&&wn(e.signal,"options.signal"),t=zp(t),async function*(){var a;if(e!=null&&(a=e.signal)!==null&&a!==void 0&&a.aborted)throw new Ut;for await(let c of this){var l;if(e!=null&&(l=e.signal)!==null&&l!==void 0&&l.aborted)throw new Ut;t--<=0&&(yield c)}}.call(this)}function eO(t,e=void 0){return e!=null&&Tn(e,"options"),e?.signal!=null&&wn(e.signal,"options.signal"),t=zp(t),async function*(){var a;if(e!=null&&(a=e.signal)!==null&&a!==void 0&&a.aborted)throw new Ut;for await(let c of this){var l;if(e!=null&&(l=e.signal)!==null&&l!==void 0&&l.aborted)throw new Ut;if(t-- >0&&(yield c),t<=0)return}}.call(this)}al.exports.streamReturningOperators={asIndexedPairs:BN(jN,"readable.asIndexedPairs will be removed in a future version."),drop:QN,filter:sl,flatMap:JN,map:fo,take:eO,compose:GN};al.exports.promiseReturningOperators={every:zN,forEach:ZN,reduce:$N,toArray:XN,some:jp,find:KN}});var ul=M((jR,Zp)=>{"use strict";var{ArrayPrototypePop:tO,Promise:nO}=Oe(),{isIterable:rO,isNodeStream:iO,isWebStream:oO}=Pt(),{pipelineImpl:sO}=ao(),{finished:aO}=Gt();ll();function uO(...t){return new nO((e,r)=>{let a,l,c=t[t.length-1];if(c&&typeof c=="object"&&!iO(c)&&!rO(c)&&!oO(c)){let h=tO(t);a=h.signal,l=h.end}sO(t,(h,m)=>{h?r(h):e(m)},{signal:a,end:l})})}Zp.exports={finished:aO,pipeline:uO}});var ll=M((zR,i_)=>{var{Buffer:lO}=require("buffer"),{ObjectDefineProperty:Kt,ObjectKeys:Jp,ReflectApply:Qp}=Oe(),{promisify:{custom:e_}}=qe(),{streamReturningOperators:$p,promiseReturningOperators:Xp}=Kp(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:t_}}=Ze(),cO=il(),{setDefaultHighWaterMark:fO,getDefaultHighWaterMark:hO}=yr(),{pipeline:n_}=ao(),{destroyer:dO}=pn(),r_=Gt(),cl=ul(),Rr=Pt(),Se=i_.exports=Gi().Stream;Se.isDestroyed=Rr.isDestroyed;Se.isDisturbed=Rr.isDisturbed;Se.isErrored=Rr.isErrored;Se.isReadable=Rr.isReadable;Se.isWritable=Rr.isWritable;Se.Readable=vr();for(let t of Jp($p)){let r=function(...a){if(new.target)throw t_();return Se.Readable.from(Qp(e,this,a))};fl=r;let e=$p[t];Kt(r,"name",{__proto__:null,value:e.name}),Kt(r,"length",{__proto__:null,value:e.length}),Kt(Se.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}var fl;for(let t of Jp(Xp)){let r=function(...l){if(new.target)throw t_();return Qp(e,this,l)};fl=r;let e=Xp[t];Kt(r,"name",{__proto__:null,value:e.name}),Kt(r,"length",{__proto__:null,value:e.length}),Kt(Se.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}var fl;Se.Writable=ro();Se.Duplex=xt();Se.Transform=Gu();Se.PassThrough=zu();Se.pipeline=n_;var{addAbortSignal:pO}=Tr();Se.addAbortSignal=pO;Se.finished=r_;Se.destroy=dO;Se.compose=cO;Se.setDefaultHighWaterMark=fO;Se.getDefaultHighWaterMark=hO;Kt(Se,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return cl}});Kt(n_,e_,{__proto__:null,enumerable:!0,get(){return cl.pipeline}});Kt(r_,e_,{__proto__:null,enumerable:!0,get(){return cl.finished}});Se.Stream=Se;Se._isUint8Array=function(e){return e instanceof Uint8Array};Se._uint8ArrayToBuffer=function(e){return lO.from(e.buffer,e.byteOffset,e.byteLength)}});var o_=M((KR,re)=>{"use strict";var Pe=require("stream");if(Pe&&process.env.READABLE_STREAM==="disable"){let t=Pe.promises;re.exports._uint8ArrayToBuffer=Pe._uint8ArrayToBuffer,re.exports._isUint8Array=Pe._isUint8Array,re.exports.isDisturbed=Pe.isDisturbed,re.exports.isErrored=Pe.isErrored,re.exports.isReadable=Pe.isReadable,re.exports.Readable=Pe.Readable,re.exports.Writable=Pe.Writable,re.exports.Duplex=Pe.Duplex,re.exports.Transform=Pe.Transform,re.exports.PassThrough=Pe.PassThrough,re.exports.addAbortSignal=Pe.addAbortSignal,re.exports.finished=Pe.finished,re.exports.destroy=Pe.destroy,re.exports.pipeline=Pe.pipeline,re.exports.compose=Pe.compose,Object.defineProperty(Pe,"promises",{configurable:!0,enumerable:!0,get(){return t}}),re.exports.Stream=Pe.Stream}else{let t=ll(),e=ul(),r=t.Readable.destroy;re.exports=t.Readable,re.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,re.exports._isUint8Array=t._isUint8Array,re.exports.isDisturbed=t.isDisturbed,re.exports.isErrored=t.isErrored,re.exports.isReadable=t.isReadable,re.exports.Readable=t.Readable,re.exports.Writable=t.Writable,re.exports.Duplex=t.Duplex,re.exports.Transform=t.Transform,re.exports.PassThrough=t.PassThrough,re.exports.addAbortSignal=t.addAbortSignal,re.exports.finished=t.finished,re.exports.destroy=t.destroy,re.exports.destroy=r,re.exports.pipeline=t.pipeline,re.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return e}}),re.exports.Stream=t.Stream}re.exports.default=re.exports});var s_=M((ZR,hl)=>{typeof Object.create=="function"?hl.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:hl.exports=function(e,r){if(r){e.super_=r;var a=function(){};a.prototype=r.prototype,e.prototype=new a,e.prototype.constructor=e}}});var a_=M(($R,pl)=>{try{if(dl=require("util"),typeof dl.inherits!="function")throw"";pl.exports=dl.inherits}catch{pl.exports=s_()}var dl});var c_=M((XR,l_)=>{"use strict";var{Buffer:vt}=require("buffer"),u_=Symbol.for("BufferList");function ge(t){if(!(this instanceof ge))return new ge(t);ge._init.call(this,t)}ge._init=function(e){Object.defineProperty(this,u_,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)};ge.prototype._new=function(e){return new ge(e)};ge.prototype._offset=function(e){if(e===0)return[0,0];let r=0;for(let a=0;a<this._bufs.length;a++){let l=r+this._bufs[a].length;if(e<l||a===this._bufs.length-1)return[a,e-r];r=l}};ge.prototype._reverseOffset=function(t){let e=t[0],r=t[1];for(let a=0;a<e;a++)r+=this._bufs[a].length;return r};ge.prototype.get=function(e){if(e>this.length||e<0)return;let r=this._offset(e);return this._bufs[r[0]][r[1]]};ge.prototype.slice=function(e,r){return typeof e=="number"&&e<0&&(e+=this.length),typeof r=="number"&&r<0&&(r+=this.length),this.copy(null,0,e,r)};ge.prototype.copy=function(e,r,a,l){if((typeof a!="number"||a<0)&&(a=0),(typeof l!="number"||l>this.length)&&(l=this.length),a>=this.length||l<=0)return e||vt.alloc(0);let c=!!e,h=this._offset(a),m=l-a,g=m,v=c&&r||0,N=h[1];if(a===0&&l===this.length){if(!c)return this._bufs.length===1?this._bufs[0]:vt.concat(this._bufs,this.length);for(let O=0;O<this._bufs.length;O++)this._bufs[O].copy(e,v),v+=this._bufs[O].length;return e}if(g<=this._bufs[h[0]].length-N)return c?this._bufs[h[0]].copy(e,r,N,N+g):this._bufs[h[0]].slice(N,N+g);c||(e=vt.allocUnsafe(m));for(let O=h[0];O<this._bufs.length;O++){let L=this._bufs[O].length-N;if(g>L)this._bufs[O].copy(e,v,N),v+=L;else{this._bufs[O].copy(e,v,N,N+g),v+=L;break}g-=L,N&&(N=0)}return e.length>v?e.slice(0,v):e};ge.prototype.shallowSlice=function(e,r){if(e=e||0,r=typeof r!="number"?this.length:r,e<0&&(e+=this.length),r<0&&(r+=this.length),e===r)return this._new();let a=this._offset(e),l=this._offset(r),c=this._bufs.slice(a[0],l[0]+1);return l[1]===0?c.pop():c[c.length-1]=c[c.length-1].slice(0,l[1]),a[1]!==0&&(c[0]=c[0].slice(a[1])),this._new(c)};ge.prototype.toString=function(e,r,a){return this.slice(r,a).toString(e)};ge.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;)if(e>=this._bufs[0].length)e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}return this};ge.prototype.duplicate=function(){let e=this._new();for(let r=0;r<this._bufs.length;r++)e.append(this._bufs[r]);return e};ge.prototype.append=function(e){if(e==null)return this;if(e.buffer)this._appendBuffer(vt.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e))for(let r=0;r<e.length;r++)this.append(e[r]);else if(this._isBufferList(e))for(let r=0;r<e._bufs.length;r++)this.append(e._bufs[r]);else typeof e=="number"&&(e=e.toString()),this._appendBuffer(vt.from(e));return this};ge.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length};ge.prototype.indexOf=function(t,e,r){if(r===void 0&&typeof e=="string"&&(r=e,e=void 0),typeof t=="function"||Array.isArray(t))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof t=="number"?t=vt.from([t]):typeof t=="string"?t=vt.from(t,r):this._isBufferList(t)?t=t.slice():Array.isArray(t.buffer)?t=vt.from(t.buffer,t.byteOffset,t.byteLength):vt.isBuffer(t)||(t=vt.from(t)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),t.length===0)return e>this.length?this.length:e;let a=this._offset(e),l=a[0],c=a[1];for(;l<this._bufs.length;l++){let h=this._bufs[l];for(;c<h.length;)if(h.length-c>=t.length){let g=h.indexOf(t,c);if(g!==-1)return this._reverseOffset([l,g]);c=h.length-t.length+1}else{let g=this._reverseOffset([l,c]);if(this._match(g,t))return g;c++}c=0}return-1};ge.prototype._match=function(t,e){if(this.length-t<e.length)return!1;for(let r=0;r<e.length;r++)if(this.get(t+r)!==e[r])return!1;return!0};(function(){let t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let e in t)(function(r){t[r]===null?ge.prototype[r]=function(a,l){return this.slice(a,a+l)[r](0,l)}:ge.prototype[r]=function(a=0){return this.slice(a,a+t[r])[r](0)}})(e)})();ge.prototype._isBufferList=function(e){return e instanceof ge||ge.isBufferList(e)};ge.isBufferList=function(e){return e!=null&&e[u_]};l_.exports=ge});var El=M((JR,ho)=>{"use strict";var _l=o_().Duplex,_O=a_(),Lr=c_();function He(t){if(!(this instanceof He))return new He(t);if(typeof t=="function"){this._callback=t;let e=function(a){this._callback&&(this._callback(a),this._callback=null)}.bind(this);this.on("pipe",function(a){a.on("error",e)}),this.on("unpipe",function(a){a.removeListener("error",e)}),t=null}Lr._init.call(this,t),_l.call(this)}_O(He,_l);Object.assign(He.prototype,Lr.prototype);He.prototype._new=function(e){return new He(e)};He.prototype._write=function(e,r,a){this._appendBuffer(e),typeof a=="function"&&a()};He.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)};He.prototype.end=function(e){_l.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)};He.prototype._destroy=function(e,r){this._bufs.length=0,this.length=0,r(e)};He.prototype._isBufferList=function(e){return e instanceof He||e instanceof Lr||He.isBufferList(e)};He.isBufferList=Lr.isBufferList;ho.exports=He;ho.exports.BufferListStream=He;ho.exports.BufferList=Lr});var d_=M((_o,h_)=>{"use strict";Object.defineProperty(_o,"__esModule",{value:!0});_o.default=void 0;var EO=f_(El()),mO=require("stream"),gO=f_(Mi()),ml=hr(),wO=Xt();function f_(t){return t&&t.__esModule?t:{default:t}}var po=class extends mO.Transform{constructor(e){super({readableObjectMode:!0}),this.debug=e,this.currentMessage=void 0,this.bl=new EO.default}pause(){return super.pause(),this.currentMessage&&this.currentMessage.pause(),this}resume(){return super.resume(),this.currentMessage&&this.currentMessage.resume(),this}processBufferedData(e){for(;this.bl.length>=ml.HEADER_LENGTH;){let r=this.bl.readUInt16BE(2);if(r<ml.HEADER_LENGTH)return e(new wO.ConnectionError("Unable to process incoming packet"));if(this.bl.length>=r){let a=this.bl.slice(0,r);this.bl.consume(r);let l=new ml.Packet(a);this.debug.packet("Received",l),this.debug.data(l);let c=this.currentMessage;if(c===void 0&&(this.currentMessage=c=new gO.default({type:l.type(),resetConnection:!1}),this.push(c)),l.isLast()){c.once("end",()=>{this.currentMessage=void 0,this.processBufferedData(e)}),c.end(l.data());return}else if(!c.write(l.data())){c.once("drain",()=>{this.processBufferedData(e)});return}}else break}e()}_transform(e,r,a){this.bl.append(e),this.processBufferedData(a)}},QR=_o.default=po;h_.exports=po});var __=M((mo,p_)=>{"use strict";Object.defineProperty(mo,"__esModule",{value:!0});mo.default=void 0;var TO=SO(El()),yO=require("stream"),gl=hr();function SO(t){return t&&t.__esModule?t:{default:t}}var Eo=class extends yO.Duplex{constructor(e,{packetSize:r}){super({writableObjectMode:!0}),this.packetSize=r,this.debug=e,this.bl=new TO.default,this.on("finish",()=>{this.push(null)})}_write(e,r,a){let l=this.packetSize-gl.HEADER_LENGTH,c=0;this.currentMessage=e,this.currentMessage.on("data",h=>{if(!e.ignore)for(this.bl.append(h);this.bl.length>l;){let m=this.bl.slice(0,l);this.bl.consume(l);let g=new gl.Packet(e.type);g.packetId(c+=1),g.resetConnection(e.resetConnection),g.addData(m),this.debug.packet("Sent",g),this.debug.data(g),this.push(g.buffer)===!1&&e.pause()}}),this.currentMessage.on("end",()=>{let h=this.bl.slice();this.bl.consume(h.length);let m=new gl.Packet(e.type);m.packetId(c+=1),m.resetConnection(e.resetConnection),m.last(!0),m.ignore(e.ignore),m.addData(h),this.debug.packet("Sent",m),this.debug.data(m),this.push(m.buffer),this.currentMessage=void 0,a()})}_read(e){this.currentMessage&&this.currentMessage.resume()}},eL=mo.default=Eo;p_.exports=Eo});var T_=M((To,w_)=>{"use strict";Object.defineProperty(To,"__esModule",{value:!0});To.default=void 0;var vO=wo(rh()),E_=DO(require("tls")),NO=require("events"),m_=wo(Mi()),OO=hr(),AO=wo(d_()),IO=wo(__());function g_(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(g_=function(a){return a?r:e})(t)}function DO(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var r=g_(e);if(r&&r.has(t))return r.get(t);var a={__proto__:null},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in t)if(c!=="default"&&Object.prototype.hasOwnProperty.call(t,c)){var h=l?Object.getOwnPropertyDescriptor(t,c):null;h&&(h.get||h.set)?Object.defineProperty(a,c,h):a[c]=t[c]}return a.default=t,r&&r.set(t,a),a}function wo(t){return t&&t.__esModule?t:{default:t}}var go=class extends NO.EventEmitter{constructor(e,r,a){super(),this.socket=e,this.debug=a,this.tlsNegotiationComplete=!1,this.incomingMessageStream=new AO.default(this.debug),this.incomingMessageIterator=this.incomingMessageStream[Symbol.asyncIterator](),this.outgoingMessageStream=new IO.default(this.debug,{packetSize:r}),this.socket.pipe(this.incomingMessageStream),this.outgoingMessageStream.pipe(this.socket)}packetSize(...e){if(e.length>0){let r=e[0];this.debug.log("Packet size changed from "+this.outgoingMessageStream.packetSize+" to "+r),this.outgoingMessageStream.packetSize=r}return this.securePair&&this.securePair.cleartext.setMaxSendFragment(this.outgoingMessageStream.packetSize),this.outgoingMessageStream.packetSize}startTls(e,r,a){(!e.maxVersion||!["TLSv1.2","TLSv1.1","TLSv1"].includes(e.maxVersion))&&(e.maxVersion="TLSv1.2");let l=E_.createSecureContext(e);return new Promise((c,h)=>{let m=new vO.default,g=this.securePair={cleartext:E_.connect({socket:m.socket1,servername:r,secureContext:l,rejectUnauthorized:!a}),encrypted:m.socket2},v=()=>{g.encrypted.removeListener("readable",O),g.cleartext.removeListener("error",N),g.cleartext.removeListener("secureConnect",v),g.cleartext.once("error",x=>{this.socket.destroy(x)});let L=g.cleartext.getCipher();L&&this.debug.log("TLS negotiated ("+L.name+", "+L.version+")"),this.emit("secure",g.cleartext),g.cleartext.setMaxSendFragment(this.outgoingMessageStream.packetSize),this.outgoingMessageStream.unpipe(this.socket),this.socket.unpipe(this.incomingMessageStream),this.socket.pipe(g.encrypted),g.encrypted.pipe(this.socket),g.cleartext.pipe(this.incomingMessageStream),this.outgoingMessageStream.pipe(g.cleartext),this.tlsNegotiationComplete=!0,c()},N=L=>{g.encrypted.removeListener("readable",O),g.cleartext.removeListener("error",N),g.cleartext.removeListener("secureConnect",v),g.cleartext.destroy(),g.encrypted.destroy(),h(L)},O=()=>{let L=new m_.default({type:OO.TYPE.PRELOGIN,resetConnection:!1}),x;for(;x=g.encrypted.read();)L.write(x);this.outgoingMessageStream.write(L),L.end(),this.readMessage().then(async F=>{g.encrypted.once("readable",O);for await(let w of F)g.encrypted.write(w)}).catch(N)};g.cleartext.once("error",N),g.cleartext.once("secureConnect",v),g.encrypted.once("readable",O)})}sendMessage(e,r,a){let l=new m_.default({type:e,resetConnection:a});return l.end(r),this.outgoingMessageStream.write(l),l}async readMessage(){let e=await this.incomingMessageIterator.next();if(e.done)throw new Error("unexpected end of message stream");return e.value}},tL=To.default=go;w_.exports=go});var Tl=M(kt=>{"use strict";Object.defineProperty(kt,"__esModule",{value:!0});kt.codepageBySortId=kt.codepageByLanguageId=kt.Flags=kt.Collation=void 0;var bO=kt.codepageByLanguageId={1025:"CP1256",1028:"CP950",1029:"CP1250",1030:"CP1252",1032:"CP1253",1033:"CP1252",1034:"CP1252",1035:"CP1252",1036:"CP1252",1037:"CP1255",1038:"CP1250",1039:"CP1252",1041:"CP932",1042:"CP949",1044:"CP1252",1045:"CP1250",1047:"CP1252",1048:"CP1250",1049:"CP1251",1050:"CP1250",1051:"CP1250",1052:"CP1250",1054:"CP874",1055:"CP1254",1056:"CP1256",1058:"CP1251",1060:"CP1250",1061:"CP1257",1062:"CP1257",1063:"CP1257",1065:"CP1256",1066:"CP1258",1068:"CP1254",1070:"CP1252",1071:"CP1251",1083:"CP1252",1087:"CP1251",1090:"CP1250",1091:"CP1254",1092:"CP1251",1106:"CP1252",1122:"CP1252",1133:"CP1251",1146:"CP1252",1148:"CP1252",1150:"CP1252",1152:"CP1256",1155:"CP1252",1157:"CP1251",1164:"CP1256",2052:"CP936",2074:"CP1250",2092:"CP1251",2107:"CP1252",2143:"CP1252",3076:"CP950",3082:"CP1252",3098:"CP1251",5124:"CP950",5146:"CP1250",8218:"CP1251",1031:"CP1252",1079:"CP1252"},RO=kt.codepageBySortId={30:"CP437",31:"CP437",32:"CP437",33:"CP437",34:"CP437",40:"CP850",41:"CP850",42:"CP850",43:"CP850",44:"CP850",49:"CP850",51:"CP1252",52:"CP1252",53:"CP1252",54:"CP1252",55:"CP850",56:"CP850",57:"CP850",58:"CP850",59:"CP850",60:"CP850",61:"CP850",80:"CP1250",81:"CP1250",82:"CP1250",83:"CP1250",84:"CP1250",85:"CP1250",86:"CP1250",87:"CP1250",88:"CP1250",89:"CP1250",90:"CP1250",91:"CP1250",92:"CP1250",93:"CP1250",94:"CP1250",95:"CP1250",96:"CP1250",104:"CP1251",105:"CP1251",106:"CP1251",107:"CP1251",108:"CP1251",112:"CP1253",113:"CP1253",114:"CP1253",120:"CP1253",121:"CP1253",122:"CP1253",124:"CP1253",128:"CP1254",129:"CP1254",130:"CP1254",136:"CP1255",137:"CP1255",138:"CP1255",144:"CP1256",145:"CP1256",146:"CP1256",152:"CP1257",153:"CP1257",154:"CP1257",155:"CP1257",156:"CP1257",157:"CP1257",158:"CP1257",159:"CP1257",160:"CP1257",183:"CP1252",184:"CP1252",185:"CP1252",186:"CP1252"},LO=kt.Flags={IGNORE_CASE:1,IGNORE_ACCENT:2,IGNORE_KANA:4,IGNORE_WIDTH:8,BINARY:16,BINARY2:32,UTF8:64},wl=class{static fromBuffer(e,r=0){let a=(e[r+2]&15)<<16;a|=e[r+1]<<8,a|=e[r+0];let l=(e[r+3]&15)<<4;l|=(e[r+2]&240)>>>4;let c=(e[r+3]&240)>>>4,h=e[r+4];return new this(a,l,c,h)}constructor(e,r,a,l){if(this.buffer=void 0,this.lcid=e,this.flags=r,this.version=a,this.sortId=l,this.flags&LO.UTF8)this.codepage="utf-8";else if(this.sortId)this.codepage=RO[this.sortId];else{let c=this.lcid&65535;this.codepage=bO[c]}}toBuffer(){return this.buffer?this.buffer:(this.buffer=Buffer.alloc(5),this.buffer[0]=this.lcid&255,this.buffer[1]=this.lcid>>>8&255,this.buffer[2]=this.lcid>>>16&15|(this.flags&15)<<4,this.buffer[3]=(this.flags&240)>>>4|(this.version&15)<<4,this.buffer[4]=this.sortId&255,this.buffer)}};kt.Collation=wl});var v_=M((yo,S_)=>{"use strict";Object.defineProperty(yo,"__esModule",{value:!0});yo.default=void 0;var y_={id:31,type:"NULL",name:"Null",declaration(){throw new Error("not implemented")},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}},rL=yo.default=y_;S_.exports=y_});var Xn=M((So,O_)=>{"use strict";Object.defineProperty(So,"__esModule",{value:!0});So.default=void 0;var N_={id:38,type:"INTN",name:"IntN",declaration(){throw new Error("not implemented")},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}},iL=So.default=N_;O_.exports=N_});var D_=M((vo,I_)=>{"use strict";Object.defineProperty(vo,"__esModule",{value:!0});vo.default=void 0;var CO=MO(Xn());function MO(t){return t&&t.__esModule?t:{default:t}}var PO=Buffer.from([1]),FO=Buffer.from([0]),A_={id:48,type:"INT1",name:"TinyInt",declaration:function(){return"tinyint"},generateTypeInfo(){return Buffer.from([CO.default.id,1])},generateParameterLength(t,e){return t.value==null?FO:PO},*generateParameterData(t,e){if(t.value==null)return;let r=Buffer.alloc(1);r.writeUInt8(Number(t.value),0),yield r},validate:function(t){if(t==null)return null;if(typeof t!="number"&&(t=Number(t)),isNaN(t))throw new TypeError("Invalid number.");if(t<0||t>255)throw new TypeError("Value must be between 0 and 255, inclusive.");return t|0}},oL=vo.default=A_;I_.exports=A_});var yl=M((No,R_)=>{"use strict";Object.defineProperty(No,"__esModule",{value:!0});No.default=void 0;var b_={id:104,type:"BITN",name:"BitN",declaration(){throw new Error("not implemented")},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},*generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}},sL=No.default=b_;R_.exports=b_});var M_=M((Oo,C_)=>{"use strict";Object.defineProperty(Oo,"__esModule",{value:!0});Oo.default=void 0;var xO=UO(yl());function UO(t){return t&&t.__esModule?t:{default:t}}var kO=Buffer.from([1]),BO=Buffer.from([0]),L_={id:50,type:"BIT",name:"Bit",declaration:function(){return"bit"},generateTypeInfo(){return Buffer.from([xO.default.id,1])},generateParameterLength(t,e){return t.value==null?BO:kO},*generateParameterData(t,e){t.value!=null&&(yield t.value?Buffer.from([1]):Buffer.from([0]))},validate:function(t){return t==null?null:!!t}},aL=Oo.default=L_;C_.exports=L_});var x_=M((Ao,F_)=>{"use strict";Object.defineProperty(Ao,"__esModule",{value:!0});Ao.default=void 0;var YO=qO(Xn());function qO(t){return t&&t.__esModule?t:{default:t}}var VO=Buffer.from([2]),HO=Buffer.from([0]),P_={id:52,type:"INT2",name:"SmallInt",declaration:function(){return"smallint"},generateTypeInfo(){return Buffer.from([YO.default.id,2])},generateParameterLength(t,e){return t.value==null?HO:VO},*generateParameterData(t,e){if(t.value==null)return;let r=Buffer.alloc(2);r.writeInt16LE(Number(t.value),0),yield r},validate:function(t){if(t==null)return null;if(typeof t!="number"&&(t=Number(t)),isNaN(t))throw new TypeError("Invalid number.");if(t<-32768||t>32767)throw new TypeError("Value must be between -32768 and 32767, inclusive.");return t|0}},uL=Ao.default=P_;F_.exports=P_});var B_=M((Io,k_)=>{"use strict";Object.defineProperty(Io,"__esModule",{value:!0});Io.default=void 0;var WO=GO(Xn());function GO(t){return t&&t.__esModule?t:{default:t}}var jO=Buffer.from([0]),zO=Buffer.from([4]),U_={id:56,type:"INT4",name:"Int",declaration:function(){return"int"},generateTypeInfo(){return Buffer.from([WO.default.id,4])},generateParameterLength(t,e){return t.value==null?jO:zO},*generateParameterData(t,e){if(t.value==null)return;let r=Buffer.alloc(4);r.writeInt32LE(Number(t.value),0),yield r},validate:function(t){if(t==null)return null;if(typeof t!="number"&&(t=Number(t)),isNaN(t))throw new TypeError("Invalid number.");if(t<-2147483648||t>2147483647)throw new TypeError("Value must be between -2147483648 and 2147483647, inclusive.");return t|0}},lL=Io.default=U_;k_.exports=U_});var bo=M((Do,q_)=>{"use strict";Object.defineProperty(Do,"__esModule",{value:!0});Do.default=void 0;var Y_={id:111,type:"DATETIMN",name:"DateTimeN",declaration(){throw new Error("not implemented")},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}},cL=Do.default=Y_;q_.exports=Y_});var G_=M((Ro,W_)=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});Ro.default=void 0;var KO=ZO(bo());function ZO(t){return t&&t.__esModule?t:{default:t}}var V_=new Date(1900,0,1),$O=new Date(Date.UTC(1900,0,1)),XO=Buffer.from([4]),JO=Buffer.from([0]),H_={id:58,type:"DATETIM4",name:"SmallDateTime",declaration:function(){return"smalldatetime"},generateTypeInfo(){return Buffer.from([KO.default.id,4])},generateParameterLength(t,e){return t.value==null?JO:XO},generateParameterData:function*(t,e){if(t.value==null)return;let r=Buffer.alloc(4),a,l,c;e.useUTC?(a=Math.floor((t.value.getTime()-$O.getTime())/(1e3*60*60*24)),c=t.value.getUTCHours()*60+t.value.getUTCMinutes()):(l=-(t.value.getTimezoneOffset()-V_.getTimezoneOffset())*60*1e3,a=Math.floor((t.value.getTime()-V_.getTime()+l)/(1e3*60*60*24)),c=t.value.getHours()*60+t.value.getMinutes()),r.writeUInt16LE(a,0),r.writeUInt16LE(c,2),yield r},validate:function(t,e,r){if(t==null)return null;t instanceof Date||(t=new Date(Date.parse(t))),t=t;let a,l,c;if(r&&r.useUTC?(a=t.getUTCFullYear(),l=t.getUTCMonth(),c=t.getUTCDate()):(a=t.getFullYear(),l=t.getMonth(),c=t.getDate()),a<1900||a>2079)throw new TypeError("Out of range.");if(a===2079&&(l>5||l===5&&c>6))throw new TypeError("Out of range.");if(isNaN(t))throw new TypeError("Invalid date.");return t}},fL=Ro.default=H_;W_.exports=H_});var Co=M((Lo,z_)=>{"use strict";Object.defineProperty(Lo,"__esModule",{value:!0});Lo.default=void 0;var j_={id:109,type:"FLTN",name:"FloatN",declaration(){throw new Error("not implemented")},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}},hL=Lo.default=j_;z_.exports=j_});var $_=M((Mo,Z_)=>{"use strict";Object.defineProperty(Mo,"__esModule",{value:!0});Mo.default=void 0;var QO=eA(Co());function eA(t){return t&&t.__esModule?t:{default:t}}var tA=Buffer.from([0]),nA=Buffer.from([4]),K_={id:59,type:"FLT4",name:"Real",declaration:function(){return"real"},generateTypeInfo(){return Buffer.from([QO.default.id,4])},generateParameterLength(t,e){return t.value==null?tA:nA},*generateParameterData(t,e){if(t.value==null)return;let r=Buffer.alloc(4);r.writeFloatLE(parseFloat(t.value),0),yield r},validate:function(t){if(t==null)return null;if(t=parseFloat(t),isNaN(t))throw new TypeError("Invalid number.");return t}},dL=Mo.default=K_;Z_.exports=K_});var Fo=M((Po,J_)=>{"use strict";Object.defineProperty(Po,"__esModule",{value:!0});Po.default=void 0;var X_={id:110,type:"MONEYN",name:"MoneyN",declaration(){throw new Error("not implemented")},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}},pL=Po.default=X_;J_.exports=X_});var t0=M((xo,e0)=>{"use strict";Object.defineProperty(xo,"__esModule",{value:!0});xo.default=void 0;var rA=iA(Fo());function iA(t){return t&&t.__esModule?t:{default:t}}var oA=65536*65536,sA=1/oA,aA=Buffer.from([0]),uA=Buffer.from([8]),Q_={id:60,type:"MONEY",name:"Money",declaration:function(){return"money"},generateTypeInfo:function(){return Buffer.from([rA.default.id,8])},generateParameterLength(t,e){return t.value==null?aA:uA},*generateParameterData(t,e){if(t.value==null)return;let r=t.value*1e4,a=Buffer.alloc(8);a.writeInt32LE(Math.floor(r*sA),0),a.writeInt32LE(r&-1,4),yield a},validate:function(t){if(t==null)return null;if(t=parseFloat(t),isNaN(t))throw new TypeError("Invalid number.");if(t<-9223372036854776e-1||t>9223372036854776e-1)throw new TypeError("Value must be between -922337203685477.5808 and 922337203685477.5807, inclusive.");return t}},_L=xo.default=Q_;e0.exports=Q_});var Cr=M((Uo,n0)=>{(function(t,e){typeof Uo=="object"&&typeof n0<"u"?e(Uo):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.JSJoda={}))})(Uo,function(t){"use strict";function e(_,u,s){s===void 0&&(s=Error);function i(n){Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,u&&u.apply(this,arguments),this.toString=function(){return this.name+": "+this.message}}return i.prototype=Object.create(s.prototype),i.prototype.name=_,i.prototype.constructor=i,i}var r=e("DateTimeException",v),a=e("DateTimeParseException",N),l=e("UnsupportedTemporalTypeException",null,r),c=e("ArithmeticException"),h=e("IllegalArgumentException"),m=e("IllegalStateException"),g=e("NullPointerException");function v(_,u){u===void 0&&(u=null);var s=_||this.name;u!==null&&u instanceof Error&&(s+=`
-------
Caused by: `+u.stack+`
-------
`),this.message=s}function N(_,u,s,i){u===void 0&&(u=""),s===void 0&&(s=0),i===void 0&&(i=null);var n=_||this.name;n+=": "+u+", at index: "+s,i!==null&&i instanceof Error&&(n+=`
-------
Caused by: `+i.stack+`
-------
`),this.message=n,this.parsedString=function(){return u},this.errorIndex=function(){return s}}function O(_,u){_.prototype=Object.create(u.prototype),_.prototype.constructor=_,L(_,u)}function L(_,u){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},L(_,u)}function x(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function F(_,u,s){if(!_)throw s?new s(u):new Error(u)}function w(_,u){if(_==null)throw new g(u+" must not be null");return _}function k(_,u,s){if(!(_ instanceof u))throw new h(s+" must be an instance of "+(u.name?u.name:u)+(_&&_.constructor&&_.constructor.name?", but is "+_.constructor.name:""));return _}function S(_){throw new TypeError('abstract method "'+_+'" is not implemented')}var R=Object.freeze({__proto__:null,assert:F,requireNonNull:w,requireInstance:k,abstractMethodFail:S});var A=9007199254740991,D=-9007199254740991,p=function(){function _(){}return _.intDiv=function(s,i){var n=s/i;return n=_.roundDown(n),_.safeZero(n)},_.intMod=function(s,i){var n=s-_.intDiv(s,i)*i;return n=_.roundDown(n),_.safeZero(n)},_.roundDown=function(s){return s<0?Math.ceil(s):Math.floor(s)},_.floorDiv=function(s,i){var n=Math.floor(s/i);return _.safeZero(n)},_.floorMod=function(s,i){var n=s-_.floorDiv(s,i)*i;return _.safeZero(n)},_.safeAdd=function(s,i){if(_.verifyInt(s),_.verifyInt(i),s===0)return _.safeZero(i);if(i===0)return _.safeZero(s);var n=_.safeToInt(s+i);if(n===s||n===i)throw new c("Invalid addition beyond MAX_SAFE_INTEGER!");return n},_.safeSubtract=function(s,i){return _.verifyInt(s),_.verifyInt(i),s===0&&i===0?0:s===0?_.safeZero(-1*i):i===0?_.safeZero(s):_.safeToInt(s-i)},_.safeMultiply=function(s,i){if(_.verifyInt(s),_.verifyInt(i),s===1)return _.safeZero(i);if(i===1)return _.safeZero(s);if(s===0||i===0)return 0;var n=_.safeToInt(s*i);if(n/i!==s||s===D&&i===-1||i===D&&s===-1)throw new c("Multiplication overflows: "+s+" * "+i);return n},_.parseInt=function(u){function s(i){return u.apply(this,arguments)}return s.toString=function(){return u.toString()},s}(function(u){var s=parseInt(u);return _.safeToInt(s)}),_.safeToInt=function(s){return _.verifyInt(s),_.safeZero(s)},_.verifyInt=function(s){if(s==null)throw new c("Invalid value: '"+s+"', using null or undefined as argument");if(isNaN(s))throw new c("Invalid int value, using NaN as argument");if(s%1!==0)throw new c("Invalid value: '"+s+"' is a float");if(s>A||s<D)throw new c("Calculation overflows an int: "+s)},_.safeZero=function(s){return s===0?0:+s},_.compareNumbers=function(s,i){return s<i?-1:s>i?1:0},_.smi=function(s){return s>>>1&1073741824|s&3221225471},_.hash=function(s){if(s!==s||s===1/0)return 0;for(var i=s;s>4294967295;)s/=4294967295,i^=s;return _.smi(i)},_.hashCode=function(){for(var s=17,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];for(var f=0,E=n;f<E.length;f++){var T=E[f];s=(s<<5)-s+_.hash(T)}return _.hash(s)},_}();p.MAX_SAFE_INTEGER=A,p.MIN_SAFE_INTEGER=D;var J=function(){function _(s){this._name=s}var u=_.prototype;return u.equals=function(i){return this===i},u.toString=function(){return this._name},u.toJSON=function(){return this.toString()},_}();var V=function(){function _(){}var u=_.prototype;return u.get=function(i){S("get")},u.units=function(){S("units")},u.addTo=function(i){S("addTo")},u.subtractFrom=function(i){S("subtractFrom")},_}();typeof Symbol<"u"&&Symbol.toPrimitive&&(V.prototype[Symbol.toPrimitive]=function(_){if(_!=="number")return this.toString();throw new TypeError("A conversion from TemporalAmount to a number is not allowed. To compare use the methods .equals(), .compareTo(), .isBefore() or one that is more suitable to your use case.")});var G=function(){function _(){}var u=_.prototype;return u.duration=function(){S("duration")},u.isDurationEstimated=function(){S("isDurationEstimated")},u.isDateBased=function(){S("isDateBased")},u.isTimeBased=function(){S("isTimeBased")},u.isSupportedBy=function(i){S("isSupportedBy")},u.addTo=function(i,n){S("addTo")},u.between=function(i,n){S("between")},_}(),Y=function(_){O(u,_);function u(i,n){var o;return o=_.call(this)||this,o._seconds=p.safeToInt(i),o._nanos=p.safeToInt(n),o}u.ofDays=function(n){return u._create(p.safeMultiply(n,b.SECONDS_PER_DAY),0)},u.ofHours=function(n){return u._create(p.safeMultiply(n,b.SECONDS_PER_HOUR),0)},u.ofMinutes=function(n){return u._create(p.safeMultiply(n,b.SECONDS_PER_MINUTE),0)},u.ofSeconds=function(n,o){o===void 0&&(o=0);var f=p.safeAdd(n,p.floorDiv(o,b.NANOS_PER_SECOND)),E=p.floorMod(o,b.NANOS_PER_SECOND);return u._create(f,E)},u.ofMillis=function(n){var o=p.intDiv(n,1e3),f=p.intMod(n,1e3);return f<0&&(f+=1e3,o--),u._create(o,f*1e6)},u.ofNanos=function(n){var o=p.intDiv(n,b.NANOS_PER_SECOND),f=p.intMod(n,b.NANOS_PER_SECOND);return f<0&&(f+=b.NANOS_PER_SECOND,o--),this._create(o,f)},u.of=function(n,o){return u.ZERO.plus(n,o)},u.from=function(n){w(n,"amount"),k(n,V);var o=u.ZERO;return n.units().forEach(function(f){o=o.plus(n.get(f),f)}),o},u.between=function(n,o){w(n,"startInclusive"),w(o,"endExclusive");var f=n.until(o,y.SECONDS),E=0;if(n.isSupported(d.NANO_OF_SECOND)&&o.isSupported(d.NANO_OF_SECOND))try{var T=n.getLong(d.NANO_OF_SECOND);if(E=o.getLong(d.NANO_OF_SECOND)-T,f>0&&E<0)E+=b.NANOS_PER_SECOND;else if(f<0&&E>0)E-=b.NANOS_PER_SECOND;else if(f===0&&E!==0){var I=o.with(d.NANO_OF_SECOND,T);f=n.until(I,y.SECONDS)}}catch{}return this.ofSeconds(f,E)},u.parse=function(n){w(n,"text");var o=new RegExp("([-+]?)P(?:([-+]?[0-9]+)D)?(T(?:([-+]?[0-9]+)H)?(?:([-+]?[0-9]+)M)?(?:([-+]?[0-9]+)(?:[.,]([0-9]{0,9}))?S)?)?","i"),f=o.exec(n);if(f!==null&&f[3]!=="T"){var E=f[1]==="-",T=f[2],I=f[4],C=f[5],U=f[6],q=f[7];if(T!=null||I!=null||C!=null||U!=null){var j=u._parseNumber(n,T,b.SECONDS_PER_DAY,"days"),z=u._parseNumber(n,I,b.SECONDS_PER_HOUR,"hours"),fe=u._parseNumber(n,C,b.SECONDS_PER_MINUTE,"minutes"),Ne=u._parseNumber(n,U,1,"seconds"),we=U!=null&&U.charAt(0)==="-",Te=u._parseFraction(n,q,we?-1:1);try{return u._create(E,j,z,fe,Ne,Te)}catch(Ke){throw new a("Text cannot be parsed to a Duration: overflow",n,0,Ke)}}}throw new a("Text cannot be parsed to a Duration",n,0)},u._parseNumber=function(n,o,f,E){if(o==null)return 0;try{return o[0]==="+"&&(o=o.substring(1)),p.safeMultiply(parseFloat(o),f)}catch(T){throw new a("Text cannot be parsed to a Duration: "+E,n,0,T)}},u._parseFraction=function(n,o,f){return o==null||o.length===0?0:(o=(o+"000000000").substring(0,9),parseFloat(o)*f)},u._create=function(){return arguments.length<=2?u._createSecondsNanos(arguments[0],arguments[1]):u._createNegateDaysHoursMinutesSecondsNanos(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])},u._createNegateDaysHoursMinutesSecondsNanos=function(n,o,f,E,T,I){var C=p.safeAdd(o,p.safeAdd(f,p.safeAdd(E,T)));return n?u.ofSeconds(C,I).negated():u.ofSeconds(C,I)},u._createSecondsNanos=function(n,o){return n===void 0&&(n=0),o===void 0&&(o=0),n===0&&o===0?u.ZERO:new u(n,o)};var s=u.prototype;return s.get=function(n){if(n===y.SECONDS)return this._seconds;if(n===y.NANOS)return this._nanos;throw new l("Unsupported unit: "+n)},s.units=function(){return[y.SECONDS,y.NANOS]},s.isZero=function(){return this._seconds===0&&this._nanos===0},s.isNegative=function(){return this._seconds<0},s.seconds=function(){return this._seconds},s.nano=function(){return this._nanos},s.withSeconds=function(n){return u._create(n,this._nanos)},s.withNanos=function(n){return d.NANO_OF_SECOND.checkValidIntValue(n),u._create(this._seconds,n)},s.plusDuration=function(n){return w(n,"duration"),this.plus(n.seconds(),n.nano())},s.plus=function(n,o){return arguments.length===1?this.plusDuration(n):arguments.length===2&&o instanceof G?this.plusAmountUnit(n,o):this.plusSecondsNanos(n,o)},s.plusAmountUnit=function(n,o){if(w(n,"amountToAdd"),w(o,"unit"),o===y.DAYS)return this.plusSecondsNanos(p.safeMultiply(n,b.SECONDS_PER_DAY),0);if(o.isDurationEstimated())throw new l("Unit must not have an estimated duration");if(n===0)return this;if(o instanceof y){switch(o){case y.NANOS:return this.plusNanos(n);case y.MICROS:return this.plusSecondsNanos(p.intDiv(n,1e6*1e3)*1e3,p.intMod(n,1e6*1e3)*1e3);case y.MILLIS:return this.plusMillis(n);case y.SECONDS:return this.plusSeconds(n)}return this.plusSecondsNanos(p.safeMultiply(o.duration().seconds(),n),0)}var f=o.duration().multipliedBy(n);return this.plusSecondsNanos(f.seconds(),f.nano())},s.plusDays=function(n){return this.plusSecondsNanos(p.safeMultiply(n,b.SECONDS_PER_DAY),0)},s.plusHours=function(n){return this.plusSecondsNanos(p.safeMultiply(n,b.SECONDS_PER_HOUR),0)},s.plusMinutes=function(n){return this.plusSecondsNanos(p.safeMultiply(n,b.SECONDS_PER_MINUTE),0)},s.plusSeconds=function(n){return this.plusSecondsNanos(n,0)},s.plusMillis=function(n){return this.plusSecondsNanos(p.intDiv(n,1e3),p.intMod(n,1e3)*1e6)},s.plusNanos=function(n){return this.plusSecondsNanos(0,n)},s.plusSecondsNanos=function(n,o){if(w(n,"secondsToAdd"),w(o,"nanosToAdd"),n===0&&o===0)return this;var f=p.safeAdd(this._seconds,n);f=p.safeAdd(f,p.intDiv(o,b.NANOS_PER_SECOND)),o=p.intMod(o,b.NANOS_PER_SECOND);var E=p.safeAdd(this._nanos,o);return u.ofSeconds(f,E)},s.minus=function(n,o){return arguments.length===1?this.minusDuration(n):this.minusAmountUnit(n,o)},s.minusDuration=function(n){w(n,"duration");var o=n.seconds(),f=n.nano();return o===D?this.plus(A,-f):this.plus(-o,-f)},s.minusAmountUnit=function(n,o){return w(n,"amountToSubtract"),w(o,"unit"),n===D?this.plusAmountUnit(A,o):this.plusAmountUnit(-n,o)},s.minusDays=function(n){return n===D?this.plusDays(A):this.plusDays(-n)},s.minusHours=function(n){return n===D?this.plusHours(A):this.plusHours(-n)},s.minusMinutes=function(n){return n===D?this.plusMinutes(A):this.plusMinutes(-n)},s.minusSeconds=function(n){return n===D?this.plusSeconds(A):this.plusSeconds(-n)},s.minusMillis=function(n){return n===D?this.plusMillis(A):this.plusMillis(-n)},s.minusNanos=function(n){return n===D?this.plusNanos(A):this.plusNanos(-n)},s.multipliedBy=function(n){if(n===0)return u.ZERO;if(n===1)return this;var o=p.safeMultiply(this._seconds,n),f=p.safeMultiply(this._nanos,n);return o=o+p.intDiv(f,b.NANOS_PER_SECOND),f=p.intMod(f,b.NANOS_PER_SECOND),u.ofSeconds(o,f)},s.dividedBy=function(n){if(n===0)throw new c("Cannot divide by zero");if(n===1)return this;var o=p.intDiv(this._seconds,n),f=p.roundDown((this._seconds/n-o)*b.NANOS_PER_SECOND),E=p.intDiv(this._nanos,n);return E=f+E,u.ofSeconds(o,E)},s.negated=function(){return this.multipliedBy(-1)},s.abs=function(){return this.isNegative()?this.negated():this},s.addTo=function(n){return w(n,"temporal"),this._seconds!==0&&(n=n.plus(this._seconds,y.SECONDS)),this._nanos!==0&&(n=n.plus(this._nanos,y.NANOS)),n},s.subtractFrom=function(n){return w(n,"temporal"),this._seconds!==0&&(n=n.minus(this._seconds,y.SECONDS)),this._nanos!==0&&(n=n.minus(this._nanos,y.NANOS)),n},s.toDays=function(){return p.intDiv(this._seconds,b.SECONDS_PER_DAY)},s.toHours=function(){return p.intDiv(this._seconds,b.SECONDS_PER_HOUR)},s.toMinutes=function(){return p.intDiv(this._seconds,b.SECONDS_PER_MINUTE)},s.toMillis=function(){var n=Math.round(p.safeMultiply(this._seconds,1e3));return n=p.safeAdd(n,p.intDiv(this._nanos,1e6)),n},s.toNanos=function(){var n=p.safeMultiply(this._seconds,b.NANOS_PER_SECOND);return n=p.safeAdd(n,this._nanos),n},s.compareTo=function(n){w(n,"otherDuration"),k(n,u,"otherDuration");var o=p.compareNumbers(this._seconds,n.seconds());return o!==0?o:this._nanos-n.nano()},s.equals=function(n){return this===n?!0:n instanceof u?this.seconds()===n.seconds()&&this.nano()===n.nano():!1},s.toString=function(){if(this===u.ZERO)return"PT0S";var n=p.intDiv(this._seconds,b.SECONDS_PER_HOUR),o=p.intDiv(p.intMod(this._seconds,b.SECONDS_PER_HOUR),b.SECONDS_PER_MINUTE),f=p.intMod(this._seconds,b.SECONDS_PER_MINUTE),E="PT";if(n!==0&&(E+=n+"H"),o!==0&&(E+=o+"M"),f===0&&this._nanos===0&&E.length>2)return E;if(f<0&&this._nanos>0?f===-1?E+="-0":E+=f+1:E+=f,this._nanos>0){E+=".";var T;for(f<0?T=""+(2*b.NANOS_PER_SECOND-this._nanos):T=""+(b.NANOS_PER_SECOND+this._nanos),T=T.slice(1,T.length),E+=T;E.charAt(E.length-1)==="0";)E=E.slice(0,E.length-1)}return E+="S",E},s.toJSON=function(){return this.toString()},u}(V);function pt(){Y.ZERO=new Y(0,0)}var Ce=function(){};function zs(){Ce.MIN_VALUE=-999999,Ce.MAX_VALUE=999999}var y=function(_){O(u,_);function u(i,n){var o;return o=_.call(this)||this,o._name=i,o._duration=n,o}var s=u.prototype;return s.duration=function(){return this._duration},s.isDurationEstimated=function(){return this.isDateBased()||this===u.FOREVER},s.isDateBased=function(){return this.compareTo(u.DAYS)>=0&&this!==u.FOREVER},s.isTimeBased=function(){return this.compareTo(u.DAYS)<0},s.isSupportedBy=function(n){if(this===u.FOREVER)return!1;try{return n.plus(1,this),!0}catch{try{return n.plus(-1,this),!0}catch{return!1}}},s.addTo=function(n,o){return n.plus(o,this)},s.between=function(n,o){return n.until(o,this)},s.toString=function(){return this._name},s.compareTo=function(n){return this.duration().compareTo(n.duration())},u}(G);function dg(){y.NANOS=new y("Nanos",Y.ofNanos(1)),y.MICROS=new y("Micros",Y.ofNanos(1e3)),y.MILLIS=new y("Millis",Y.ofNanos(1e6)),y.SECONDS=new y("Seconds",Y.ofSeconds(1)),y.MINUTES=new y("Minutes",Y.ofSeconds(60)),y.HOURS=new y("Hours",Y.ofSeconds(3600)),y.HALF_DAYS=new y("HalfDays",Y.ofSeconds(43200)),y.DAYS=new y("Days",Y.ofSeconds(86400)),y.WEEKS=new y("Weeks",Y.ofSeconds(7*86400)),y.MONTHS=new y("Months",Y.ofSeconds(31556952/12)),y.YEARS=new y("Years",Y.ofSeconds(31556952)),y.DECADES=new y("Decades",Y.ofSeconds(31556952*10)),y.CENTURIES=new y("Centuries",Y.ofSeconds(31556952*100)),y.MILLENNIA=new y("Millennia",Y.ofSeconds(31556952*1e3)),y.ERAS=new y("Eras",Y.ofSeconds(31556952*(Ce.MAX_VALUE+1))),y.FOREVER=new y("Forever",Y.ofSeconds(p.MAX_SAFE_INTEGER,999999999))}var _t=function(){function _(){}var u=_.prototype;return u.isDateBased=function(){S("isDateBased")},u.isTimeBased=function(){S("isTimeBased")},u.baseUnit=function(){S("baseUnit")},u.rangeUnit=function(){S("rangeUnit")},u.range=function(){S("range")},u.rangeRefinedBy=function(i){S("rangeRefinedBy")},u.getFrom=function(i){S("getFrom")},u.adjustInto=function(i,n){S("adjustInto")},u.isSupportedBy=function(i){S("isSupportedBy")},u.displayName=function(){S("displayName")},u.equals=function(i){S("equals")},u.name=function(){S("name")},_}();var X=function(){function _(s,i,n,o){F(!(s>i),"Smallest minimum value '"+s+"' must be less than largest minimum value '"+i+"'",h),F(!(n>o),"Smallest maximum value '"+n+"' must be less than largest maximum value '"+o+"'",h),F(!(i>o),"Minimum value '"+i+"' must be less than maximum value '"+o+"'",h),this._minSmallest=s,this._minLargest=i,this._maxLargest=o,this._maxSmallest=n}var u=_.prototype;return u.isFixed=function(){return this._minSmallest===this._minLargest&&this._maxSmallest===this._maxLargest},u.minimum=function(){return this._minSmallest},u.largestMinimum=function(){return this._minLargest},u.maximum=function(){return this._maxLargest},u.smallestMaximum=function(){return this._maxSmallest},u.isValidValue=function(i){return this.minimum()<=i&&i<=this.maximum()},u.checkValidValue=function(i,n){var o;return this.isValidValue(i)?i:(n!=null?o="Invalid value for "+n+" (valid values "+this.toString()+"): "+i:o="Invalid value (valid values "+this.toString()+"): "+i,F(!1,o,r))},u.checkValidIntValue=function(i,n){if(this.isValidIntValue(i)===!1)throw new r("Invalid int value for "+n+": "+i);return i},u.isValidIntValue=function(i){return this.isIntValue()&&this.isValidValue(i)},u.isIntValue=function(){return this.minimum()>=p.MIN_SAFE_INTEGER&&this.maximum()<=p.MAX_SAFE_INTEGER},u.equals=function(i){return i===this?!0:i instanceof _?this._minSmallest===i._minSmallest&&this._minLargest===i._minLargest&&this._maxSmallest===i._maxSmallest&&this._maxLargest===i._maxLargest:!1},u.hashCode=function(){return p.hashCode(this._minSmallest,this._minLargest,this._maxSmallest,this._maxLargest)},u.toString=function(){var i=this.minimum()+(this.minimum()!==this.largestMinimum()?"/"+this.largestMinimum():"");return i+=" - ",i+=this.smallestMaximum()+(this.smallestMaximum()!==this.maximum()?"/"+this.maximum():""),i},_.of=function(){return arguments.length===2?new _(arguments[0],arguments[0],arguments[1],arguments[1]):arguments.length===3?new _(arguments[0],arguments[0],arguments[1],arguments[2]):arguments.length===4?new _(arguments[0],arguments[1],arguments[2],arguments[3]):F(!1,"Invalid number of arguments "+arguments.length,h)},_}(),d=function(_){O(u,_),u.byName=function(n){for(var o in u)if(u[o]&&u[o]instanceof u&&u[o].name()===n)return u[o]};function u(i,n,o,f){var E;return E=_.call(this)||this,E._name=i,E._baseUnit=n,E._rangeUnit=o,E._range=f,E}var s=u.prototype;return s.name=function(){return this._name},s.baseUnit=function(){return this._baseUnit},s.rangeUnit=function(){return this._rangeUnit},s.range=function(){return this._range},s.displayName=function(){return this.toString()},s.checkValidValue=function(n){return this.range().checkValidValue(n,this)},s.checkValidIntValue=function(n){return this.range().checkValidIntValue(n,this)},s.isDateBased=function(){var n=this===u.DAY_OF_WEEK||this===u.ALIGNED_DAY_OF_WEEK_IN_MONTH||this===u.ALIGNED_DAY_OF_WEEK_IN_YEAR||this===u.DAY_OF_MONTH||this===u.DAY_OF_YEAR||this===u.EPOCH_DAY||this===u.ALIGNED_WEEK_OF_MONTH||this===u.ALIGNED_WEEK_OF_YEAR||this===u.MONTH_OF_YEAR||this===u.PROLEPTIC_MONTH||this===u.YEAR_OF_ERA||this===u.YEAR||this===u.ERA;return n},s.isTimeBased=function(){var n=this===u.NANO_OF_SECOND||this===u.NANO_OF_DAY||this===u.MICRO_OF_SECOND||this===u.MICRO_OF_DAY||this===u.MILLI_OF_SECOND||this===u.MILLI_OF_DAY||this===u.SECOND_OF_MINUTE||this===u.SECOND_OF_DAY||this===u.MINUTE_OF_HOUR||this===u.MINUTE_OF_DAY||this===u.HOUR_OF_AMPM||this===u.CLOCK_HOUR_OF_AMPM||this===u.HOUR_OF_DAY||this===u.CLOCK_HOUR_OF_DAY||this===u.AMPM_OF_DAY;return n},s.rangeRefinedBy=function(n){return n.range(this)},s.getFrom=function(n){return n.getLong(this)},s.toString=function(){return this.name()},s.equals=function(n){return this===n},s.adjustInto=function(n,o){return n.with(this,o)},s.isSupportedBy=function(n){return n.isSupported(this)},u}(_t);function pg(){d.NANO_OF_SECOND=new d("NanoOfSecond",y.NANOS,y.SECONDS,X.of(0,999999999)),d.NANO_OF_DAY=new d("NanoOfDay",y.NANOS,y.DAYS,X.of(0,86400*1e9-1)),d.MICRO_OF_SECOND=new d("MicroOfSecond",y.MICROS,y.SECONDS,X.of(0,999999)),d.MICRO_OF_DAY=new d("MicroOfDay",y.MICROS,y.DAYS,X.of(0,86400*1e6-1)),d.MILLI_OF_SECOND=new d("MilliOfSecond",y.MILLIS,y.SECONDS,X.of(0,999)),d.MILLI_OF_DAY=new d("MilliOfDay",y.MILLIS,y.DAYS,X.of(0,86400*1e3-1)),d.SECOND_OF_MINUTE=new d("SecondOfMinute",y.SECONDS,y.MINUTES,X.of(0,59)),d.SECOND_OF_DAY=new d("SecondOfDay",y.SECONDS,y.DAYS,X.of(0,86399)),d.MINUTE_OF_HOUR=new d("MinuteOfHour",y.MINUTES,y.HOURS,X.of(0,59)),d.MINUTE_OF_DAY=new d("MinuteOfDay",y.MINUTES,y.DAYS,X.of(0,24*60-1)),d.HOUR_OF_AMPM=new d("HourOfAmPm",y.HOURS,y.HALF_DAYS,X.of(0,11)),d.CLOCK_HOUR_OF_AMPM=new d("ClockHourOfAmPm",y.HOURS,y.HALF_DAYS,X.of(1,12)),d.HOUR_OF_DAY=new d("HourOfDay",y.HOURS,y.DAYS,X.of(0,23)),d.CLOCK_HOUR_OF_DAY=new d("ClockHourOfDay",y.HOURS,y.DAYS,X.of(1,24)),d.AMPM_OF_DAY=new d("AmPmOfDay",y.HALF_DAYS,y.DAYS,X.of(0,1)),d.DAY_OF_WEEK=new d("DayOfWeek",y.DAYS,y.WEEKS,X.of(1,7)),d.ALIGNED_DAY_OF_WEEK_IN_MONTH=new d("AlignedDayOfWeekInMonth",y.DAYS,y.WEEKS,X.of(1,7)),d.ALIGNED_DAY_OF_WEEK_IN_YEAR=new d("AlignedDayOfWeekInYear",y.DAYS,y.WEEKS,X.of(1,7)),d.DAY_OF_MONTH=new d("DayOfMonth",y.DAYS,y.MONTHS,X.of(1,28,31),"day"),d.DAY_OF_YEAR=new d("DayOfYear",y.DAYS,y.YEARS,X.of(1,365,366)),d.EPOCH_DAY=new d("EpochDay",y.DAYS,y.FOREVER,X.of(-365961662,364522971)),d.ALIGNED_WEEK_OF_MONTH=new d("AlignedWeekOfMonth",y.WEEKS,y.MONTHS,X.of(1,4,5)),d.ALIGNED_WEEK_OF_YEAR=new d("AlignedWeekOfYear",y.WEEKS,y.YEARS,X.of(1,53)),d.MONTH_OF_YEAR=new d("MonthOfYear",y.MONTHS,y.YEARS,X.of(1,12),"month"),d.PROLEPTIC_MONTH=new d("ProlepticMonth",y.MONTHS,y.FOREVER,X.of(Ce.MIN_VALUE*12,Ce.MAX_VALUE*12+11)),d.YEAR_OF_ERA=new d("YearOfEra",y.YEARS,y.FOREVER,X.of(1,Ce.MAX_VALUE,Ce.MAX_VALUE+1)),d.YEAR=new d("Year",y.YEARS,y.FOREVER,X.of(Ce.MIN_VALUE,Ce.MAX_VALUE),"year"),d.ERA=new d("Era",y.ERAS,y.FOREVER,X.of(0,1)),d.INSTANT_SECONDS=new d("InstantSeconds",y.SECONDS,y.FOREVER,X.of(D,A)),d.OFFSET_SECONDS=new d("OffsetSeconds",y.SECONDS,y.FOREVER,X.of(-18*3600,18*3600))}var P=function(){function _(){}return _.zoneId=function(){return _.ZONE_ID},_.chronology=function(){return _.CHRONO},_.precision=function(){return _.PRECISION},_.zone=function(){return _.ZONE},_.offset=function(){return _.OFFSET},_.localDate=function(){return _.LOCAL_DATE},_.localTime=function(){return _.LOCAL_TIME},_}();var Vt=function(){function _(){}var u=_.prototype;return u.query=function(i){return i===P.zoneId()||i===P.chronology()||i===P.precision()?null:i.queryFrom(this)},u.get=function(i){return this.range(i).checkValidIntValue(this.getLong(i),i)},u.getLong=function(i){S("getLong")},u.range=function(i){if(i instanceof d){if(this.isSupported(i))return i.range();throw new l("Unsupported field: "+i)}return i.rangeRefinedBy(this)},u.isSupported=function(i){S("isSupported")},_}(),vn=function(_){O(u,_);function u(){return _.apply(this,arguments)||this}var s=u.prototype;return s.queryFrom=function(n){S("queryFrom")},u}(J);function Le(_,u){var s=function(i){O(n,i);function n(){return i.apply(this,arguments)||this}return n}(vn);return s.prototype.queryFrom=u,new s(_)}var de=function(_){O(u,_);function u(i,n){var o;return o=_.call(this)||this,o._ordinal=i,o._name=n,o}var s=u.prototype;return s.ordinal=function(){return this._ordinal},s.name=function(){return this._name},u.values=function(){return Nn.slice()},u.valueOf=function(n){var o=0;for(o;o<Nn.length&&Nn[o].name()!==n;o++);return u.of(o+1)},u.of=function(n){if(n<1||n>7)throw new r("Invalid value for DayOfWeek: "+n);return Nn[n-1]},u.from=function(n){if(F(n!=null,"temporal",g),n instanceof u)return n;try{return u.of(n.get(d.DAY_OF_WEEK))}catch(o){throw o instanceof r?new r("Unable to obtain DayOfWeek from TemporalAccessor: "+n+", type "+(n.constructor!=null?n.constructor.name:""),o):o}},s.value=function(){return this._ordinal+1},s.displayName=function(n,o){throw new h("Pattern using (localized) text not implemented yet!")},s.isSupported=function(n){return n instanceof d?n===d.DAY_OF_WEEK:n!=null&&n.isSupportedBy(this)},s.range=function(n){if(n===d.DAY_OF_WEEK)return n.range();if(n instanceof d)throw new l("Unsupported field: "+n);return n.rangeRefinedBy(this)},s.get=function(n){return n===d.DAY_OF_WEEK?this.value():this.range(n).checkValidIntValue(this.getLong(n),n)},s.getLong=function(n){if(n===d.DAY_OF_WEEK)return this.value();if(n instanceof d)throw new l("Unsupported field: "+n);return n.getFrom(this)},s.plus=function(n){var o=p.floorMod(n,7);return Nn[p.floorMod(this._ordinal+(o+7),7)]},s.minus=function(n){return this.plus(-1*p.floorMod(n,7))},s.query=function(n){return n===P.precision()?y.DAYS:n===P.localDate()||n===P.localTime()||n===P.chronology()||n===P.zone()||n===P.zoneId()||n===P.offset()?null:(F(n!=null,"query",g),n.queryFrom(this))},s.adjustInto=function(n){return w(n,"temporal"),n.with(d.DAY_OF_WEEK,this.value())},s.equals=function(n){return this===n},s.toString=function(){return this._name},s.compareTo=function(n){return w(n,"other"),k(n,u,"other"),this._ordinal-n._ordinal},s.toJSON=function(){return this.toString()},u}(Vt),Nn;function _g(){de.MONDAY=new de(0,"MONDAY"),de.TUESDAY=new de(1,"TUESDAY"),de.WEDNESDAY=new de(2,"WEDNESDAY"),de.THURSDAY=new de(3,"THURSDAY"),de.FRIDAY=new de(4,"FRIDAY"),de.SATURDAY=new de(5,"SATURDAY"),de.SUNDAY=new de(6,"SUNDAY"),de.FROM=Le("DayOfWeek.FROM",function(_){return de.from(_)}),Nn=[de.MONDAY,de.TUESDAY,de.WEDNESDAY,de.THURSDAY,de.FRIDAY,de.SATURDAY,de.SUNDAY]}var K=function(_){O(u,_);function u(i,n){var o;return o=_.call(this)||this,o._value=p.safeToInt(i),o._name=n,o}var s=u.prototype;return s.value=function(){return this._value},s.ordinal=function(){return this._value-1},s.name=function(){return this._name},s.displayName=function(n,o){throw new h("Pattern using (localized) text not implemented yet!")},s.isSupported=function(n){return n===null?!1:n instanceof d?n===d.MONTH_OF_YEAR:n!=null&&n.isSupportedBy(this)},s.get=function(n){return n===d.MONTH_OF_YEAR?this.value():this.range(n).checkValidIntValue(this.getLong(n),n)},s.getLong=function(n){if(n===d.MONTH_OF_YEAR)return this.value();if(n instanceof d)throw new l("Unsupported field: "+n);return n.getFrom(this)},s.plus=function(n){var o=p.intMod(n,12)+12,f=p.intMod(this.value()+o,12);return f=f===0?12:f,u.of(f)},s.minus=function(n){return this.plus(-1*p.intMod(n,12))},s.length=function(n){switch(this){case u.FEBRUARY:return n?29:28;case u.APRIL:case u.JUNE:case u.SEPTEMBER:case u.NOVEMBER:return 30;default:return 31}},s.minLength=function(){switch(this){case u.FEBRUARY:return 28;case u.APRIL:case u.JUNE:case u.SEPTEMBER:case u.NOVEMBER:return 30;default:return 31}},s.maxLength=function(){switch(this){case u.FEBRUARY:return 29;case u.APRIL:case u.JUNE:case u.SEPTEMBER:case u.NOVEMBER:return 30;default:return 31}},s.firstDayOfYear=function(n){var o=n?1:0;switch(this){case u.JANUARY:return 1;case u.FEBRUARY:return 32;case u.MARCH:return 60+o;case u.APRIL:return 91+o;case u.MAY:return 121+o;case u.JUNE:return 152+o;case u.JULY:return 182+o;case u.AUGUST:return 213+o;case u.SEPTEMBER:return 244+o;case u.OCTOBER:return 274+o;case u.NOVEMBER:return 305+o;case u.DECEMBER:default:return 335+o}},s.firstMonthOfQuarter=function(){switch(this){case u.JANUARY:case u.FEBRUARY:case u.MARCH:return u.JANUARY;case u.APRIL:case u.MAY:case u.JUNE:return u.APRIL;case u.JULY:case u.AUGUST:case u.SEPTEMBER:return u.JULY;case u.OCTOBER:case u.NOVEMBER:case u.DECEMBER:default:return u.OCTOBER}},s.query=function(n){return F(n!=null,"query() parameter must not be null",r),n===P.chronology()?ue.INSTANCE:n===P.precision()?y.MONTHS:_.prototype.query.call(this,n)},s.toString=function(){switch(this){case u.JANUARY:return"JANUARY";case u.FEBRUARY:return"FEBRUARY";case u.MARCH:return"MARCH";case u.APRIL:return"APRIL";case u.MAY:return"MAY";case u.JUNE:return"JUNE";case u.JULY:return"JULY";case u.AUGUST:return"AUGUST";case u.SEPTEMBER:return"SEPTEMBER";case u.OCTOBER:return"OCTOBER";case u.NOVEMBER:return"NOVEMBER";case u.DECEMBER:return"DECEMBER";default:return"unknown Month, value: "+this.value()}},s.toJSON=function(){return this.toString()},s.adjustInto=function(n){return n.with(d.MONTH_OF_YEAR,this.value())},s.compareTo=function(n){return w(n,"other"),k(n,u,"other"),this._value-n._value},s.equals=function(n){return this===n},u.valueOf=function(n){var o=0;for(o;o<rr.length&&rr[o].name()!==n;o++);return u.of(o+1)},u.values=function(){return rr.slice()},u.of=function(n){return(n<1||n>12)&&F(!1,"Invalid value for MonthOfYear: "+n,r),rr[n-1]},u.from=function(n){if(n instanceof u)return n;try{return u.of(n.get(d.MONTH_OF_YEAR))}catch(o){throw new r("Unable to obtain Month from TemporalAccessor: "+n+" of type "+(n&&n.constructor!=null?n.constructor.name:""),o)}},u}(Vt),rr;function Eg(){K.JANUARY=new K(1,"JANUARY"),K.FEBRUARY=new K(2,"FEBRUARY"),K.MARCH=new K(3,"MARCH"),K.APRIL=new K(4,"APRIL"),K.MAY=new K(5,"MAY"),K.JUNE=new K(6,"JUNE"),K.JULY=new K(7,"JULY"),K.AUGUST=new K(8,"AUGUST"),K.SEPTEMBER=new K(9,"SEPTEMBER"),K.OCTOBER=new K(10,"OCTOBER"),K.NOVEMBER=new K(11,"NOVEMBER"),K.DECEMBER=new K(12,"DECEMBER"),rr=[K.JANUARY,K.FEBRUARY,K.MARCH,K.APRIL,K.MAY,K.JUNE,K.JULY,K.AUGUST,K.SEPTEMBER,K.OCTOBER,K.NOVEMBER,K.DECEMBER]}var mg=/([-+]?)P(?:([-+]?[0-9]+)Y)?(?:([-+]?[0-9]+)M)?(?:([-+]?[0-9]+)W)?(?:([-+]?[0-9]+)D)?/,It=function(_){O(u,_);function u(i,n,o){var f;f=_.call(this)||this;var E=p.safeToInt(i),T=p.safeToInt(n),I=p.safeToInt(o);return E===0&&T===0&&I===0?(u.ZERO||(f._years=E,f._months=T,f._days=I,u.ZERO=x(f)),u.ZERO||x(f)):(f._years=E,f._months=T,f._days=I,f)}u.ofYears=function(n){return u.create(n,0,0)},u.ofMonths=function(n){return u.create(0,n,0)},u.ofWeeks=function(n){return u.create(0,0,p.safeMultiply(n,7))},u.ofDays=function(n){return u.create(0,0,n)},u.of=function(n,o,f){return u.create(n,o,f)},u.from=function(n){if(n instanceof u)return n;w(n,"amount");for(var o=0,f=0,E=0,T=n.units(),I=0;I<T.length;I++){var C=T[I],U=n.get(C);if(C===y.YEARS)o=p.safeToInt(U);else if(C===y.MONTHS)f=p.safeToInt(U);else if(C===y.DAYS)E=p.safeToInt(U);else throw new r("Unit must be Years, Months or Days, but was "+C)}return u.create(o,f,E)},u.between=function(n,o){return w(n,"startDate"),w(o,"endDate"),k(n,H,"startDate"),k(o,H,"endDate"),n.until(o)},u.parse=function(n){w(n,"text");try{return u._parse(n)}catch(o){throw o instanceof c?new a("Text cannot be parsed to a Period",n,0,o):o}},u._parse=function(n){var o=mg.exec(n);if(o!=null){var f=o[1]==="-"?-1:1,E=o[2],T=o[3],I=o[4],C=o[5];if(E!=null||T!=null||I!=null||C!=null){var U=u._parseNumber(n,E,f),q=u._parseNumber(n,T,f),j=u._parseNumber(n,I,f),z=u._parseNumber(n,C,f);return z=p.safeAdd(z,p.safeMultiply(j,7)),u.create(U,q,z)}}throw new a("Text cannot be parsed to a Period",n,0)},u._parseNumber=function(n,o,f){if(o==null)return 0;var E=p.parseInt(o);return p.safeMultiply(E,f)},u.create=function(n,o,f){return new u(n,o,f)};var s=u.prototype;return s.units=function(){return[y.YEARS,y.MONTHS,y.DAYS]},s.chronology=function(){return ue.INSTANCE},s.get=function(n){if(n===y.YEARS)return this._years;if(n===y.MONTHS)return this._months;if(n===y.DAYS)return this._days;throw new l("Unsupported unit: "+n)},s.isZero=function(){return this===u.ZERO},s.isNegative=function(){return this._years<0||this._months<0||this._days<0},s.years=function(){return this._years},s.months=function(){return this._months},s.days=function(){return this._days},s.withYears=function(n){return n===this._years?this:u.create(n,this._months,this._days)},s.withMonths=function(n){return n===this._months?this:u.create(this._years,n,this._days)},s.withDays=function(n){return n===this._days?this:u.create(this._years,this._months,n)},s.plus=function(n){var o=u.from(n);return u.create(p.safeAdd(this._years,o._years),p.safeAdd(this._months,o._months),p.safeAdd(this._days,o._days))},s.plusYears=function(n){return n===0?this:u.create(p.safeToInt(p.safeAdd(this._years,n)),this._months,this._days)},s.plusMonths=function(n){return n===0?this:u.create(this._years,p.safeToInt(p.safeAdd(this._months,n)),this._days)},s.plusDays=function(n){return n===0?this:u.create(this._years,this._months,p.safeToInt(p.safeAdd(this._days,n)))},s.minus=function(n){var o=u.from(n);return u.create(p.safeSubtract(this._years,o._years),p.safeSubtract(this._months,o._months),p.safeSubtract(this._days,o._days))},s.minusYears=function(n){return this.plusYears(-1*n)},s.minusMonths=function(n){return this.plusMonths(-1*n)},s.minusDays=function(n){return this.plusDays(-1*n)},s.multipliedBy=function(n){return this===u.ZERO||n===1?this:u.create(p.safeMultiply(this._years,n),p.safeMultiply(this._months,n),p.safeMultiply(this._days,n))},s.negated=function(){return this.multipliedBy(-1)},s.normalized=function(){var n=this.toTotalMonths(),o=p.intDiv(n,12),f=p.intMod(n,12);return o===this._years&&f===this._months?this:u.create(p.safeToInt(o),f,this._days)},s.toTotalMonths=function(){return this._years*12+this._months},s.addTo=function(n){return w(n,"temporal"),this._years!==0?this._months!==0?n=n.plus(this.toTotalMonths(),y.MONTHS):n=n.plus(this._years,y.YEARS):this._months!==0&&(n=n.plus(this._months,y.MONTHS)),this._days!==0&&(n=n.plus(this._days,y.DAYS)),n},s.subtractFrom=function(n){return w(n,"temporal"),this._years!==0?this._months!==0?n=n.minus(this.toTotalMonths(),y.MONTHS):n=n.minus(this._years,y.YEARS):this._months!==0&&(n=n.minus(this._months,y.MONTHS)),this._days!==0&&(n=n.minus(this._days,y.DAYS)),n},s.equals=function(n){if(this===n)return!0;if(n instanceof u){var o=n;return this._years===o._years&&this._months===o._months&&this._days===o._days}return!1},s.hashCode=function(){return p.hashCode(this._years,this._months,this._days)},s.toString=function(){if(this===u.ZERO)return"P0D";var n="P";return this._years!==0&&(n+=this._years+"Y"),this._months!==0&&(n+=this._months+"M"),this._days!==0&&(n+=this._days+"D"),n},s.toJSON=function(){return this.toString()},u}(V);function gg(){It.ofDays(0)}var Ks=function(){function _(s){this._index=s,this._errorIndex=-1}var u=_.prototype;return u.getIndex=function(){return this._index},u.setIndex=function(i){this._index=i},u.getErrorIndex=function(){return this._errorIndex},u.setErrorIndex=function(i){this._errorIndex=i},_}();var zc=function(){function _(){this._map={}}var u=_.prototype;return u.putAll=function(i){for(var n in i._map)this._map[n]=i._map[n];return this},u.containsKey=function(i){return this._map.hasOwnProperty(i.name())&&this.get(i)!==void 0},u.get=function(i){return this._map[i.name()]},u.put=function(i,n){return this.set(i,n)},u.set=function(i,n){return this._map[i.name()]=n,this},u.retainAll=function(i){for(var n={},o=0;o<i.length;o++){var f=i[o].name();n[f]=this._map[f]}return this._map=n,this},u.remove=function(i){var n=i.name(),o=this._map[n];return this._map[n]=void 0,o},u.keySet=function(){return this._map},u.clear=function(){this._map={}},_}(),$=function(_){O(u,_);function u(){return _.apply(this,arguments)||this}return u}(J);$.STRICT=new $("STRICT"),$.SMART=new $("SMART"),$.LENIENT=new $("LENIENT");var ze=function(_){O(u,_);function u(){return _.apply(this,arguments)||this}var s=u.prototype;return s.isSupported=function(n){S("isSupported")},s.minus=function(n,o){return arguments.length<2?this._minusAmount(n):this._minusUnit(n,o)},s._minusAmount=function(n){return w(n,"amount"),k(n,V,"amount"),n.subtractFrom(this)},s._minusUnit=function(n,o){return w(n,"amountToSubtract"),w(o,"unit"),k(o,G,"unit"),this._plusUnit(-n,o)},s.plus=function(n,o){return arguments.length<2?this._plusAmount(n):this._plusUnit(n,o)},s._plusAmount=function(n){return w(n,"amount"),k(n,V,"amount"),n.addTo(this)},s._plusUnit=function(n,o){S("_plusUnit")},s.until=function(n,o){S("until")},s.with=function(n,o){return arguments.length<2?this._withAdjuster(n):this._withField(n,o)},s._withAdjuster=function(n){return w(n,"adjuster"),F(typeof n.adjustInto=="function","adjuster must be a TemporalAdjuster",h),n.adjustInto(this)},s._withField=function(n,o){S("_withField")},u}(Vt);typeof Symbol<"u"&&Symbol.toPrimitive&&(ze.prototype[Symbol.toPrimitive]=function(_){if(_!=="number")return this.toString();throw new TypeError("A conversion from Temporal to a number is not allowed. To compare use the methods .equals(), .compareTo(), .isBefore() or one that is more suitable to your use case.")});var On=function(_){O(u,_);function u(){return _.apply(this,arguments)||this}var s=u.prototype;return s.isSupported=function(n){return n instanceof d||n instanceof y?n.isDateBased():n!=null&&n.isSupportedBy(this)},s.query=function(n){return n===P.chronology()?this.chronology():n===P.precision()?y.DAYS:n===P.localDate()?H.ofEpochDay(this.toEpochDay()):n===P.localTime()||n===P.zone()||n===P.zoneId()||n===P.offset()?null:_.prototype.query.call(this,n)},s.adjustInto=function(n){return n.with(d.EPOCH_DAY,this.toEpochDay())},s.format=function(n){return w(n,"formatter"),k(n,Q,"formatter"),n.format(this)},u}(ze);var Dt=function(){function _(){}return _.startsWith=function(s,i){return s.indexOf(i)===0},_.hashCode=function(s){var i=s.length;if(i===0)return 0;for(var n=0,o=0;o<i;o++){var f=s.charCodeAt(o);n=(n<<5)-n+f,n|=0}return p.smi(n)},_}();var ae=function(){function _(){}_.systemDefault=function(){throw new r("not supported operation")},_.getAvailableZoneIds=function(){throw new r("not supported operation")},_.of=function(i){throw new r("not supported operation"+i)},_.ofOffset=function(i,n){throw new r("not supported operation"+i+n)},_.from=function(i){throw new r("not supported operation"+i)};var u=_.prototype;return u.id=function(){S("ZoneId.id")},u.rules=function(){S("ZoneId.rules")},u.normalized=function(){var i=this.rules();return i.isFixedOffset()?i.offset(pe.EPOCH):this},u.equals=function(i){return this===i?!0:i instanceof _?this.id()===i.id():!1},u.hashCode=function(){return Dt.hashCode(this.id())},u.toString=function(){return this.id()},u.toJSON=function(){return this.toString()},_}(),ir=function(){function _(){}_.of=function(i){return w(i,"offset"),new wg(i)};var u=_.prototype;return u.isFixedOffset=function(){S("ZoneRules.isFixedOffset")},u.offset=function(i){return i instanceof pe?this.offsetOfInstant(i):this.offsetOfLocalDateTime(i)},u.offsetOfInstant=function(i){S("ZoneRules.offsetInstant")},u.offsetOfEpochMilli=function(i){S("ZoneRules.offsetOfEpochMilli")},u.offsetOfLocalDateTime=function(i){S("ZoneRules.offsetLocalDateTime")},u.validOffsets=function(i){S("ZoneRules.validOffsets")},u.transition=function(i){S("ZoneRules.transition")},u.standardOffset=function(i){S("ZoneRules.standardOffset")},u.daylightSavings=function(i){S("ZoneRules.daylightSavings")},u.isDaylightSavings=function(i){S("ZoneRules.isDaylightSavings")},u.isValidOffset=function(i,n){S("ZoneRules.isValidOffset")},u.nextTransition=function(i){S("ZoneRules.nextTransition")},u.previousTransition=function(i){S("ZoneRules.previousTransition")},u.transitions=function(){S("ZoneRules.transitions")},u.transitionRules=function(){S("ZoneRules.transitionRules")},u.toString=function(){S("ZoneRules.toString")},u.toJSON=function(){return this.toString()},_}(),wg=function(_){O(u,_);function u(i){var n;return n=_.call(this)||this,n._offset=i,n}var s=u.prototype;return s.isFixedOffset=function(){return!0},s.offsetOfInstant=function(){return this._offset},s.offsetOfEpochMilli=function(){return this._offset},s.offsetOfLocalDateTime=function(){return this._offset},s.validOffsets=function(){return[this._offset]},s.transition=function(){return null},s.standardOffset=function(){return this._offset},s.daylightSavings=function(){return Y.ZERO},s.isDaylightSavings=function(){return!1},s.isValidOffset=function(n,o){return this._offset.equals(o)},s.nextTransition=function(){return null},s.previousTransition=function(){return null},s.transitions=function(){return[]},s.transitionRules=function(){return[]},s.equals=function(n){return this===n?!0:n instanceof u?this._offset.equals(n._offset):!1},s.toString=function(){return"FixedRules:"+this._offset.toString()},u}(ir),Kc={},Zc={},Z=function(_){O(u,_);function u(i){var n;return n=_.call(this)||this,u._validateTotalSeconds(i),n._totalSeconds=p.safeToInt(i),n._rules=ir.of(x(n)),n._id=u._buildId(i),n}var s=u.prototype;return s.totalSeconds=function(){return this._totalSeconds},s.id=function(){return this._id},u._buildId=function(n){if(n===0)return"Z";var o=Math.abs(n),f=p.intDiv(o,b.SECONDS_PER_HOUR),E=p.intMod(p.intDiv(o,b.SECONDS_PER_MINUTE),b.MINUTES_PER_HOUR),T=(n<0?"-":"+")+(f<10?"0":"")+f+(E<10?":0":":")+E,I=p.intMod(o,b.SECONDS_PER_MINUTE);return I!==0&&(T+=(I<10?":0":":")+I),T},u._validateTotalSeconds=function(n){if(Math.abs(n)>u.MAX_SECONDS)throw new r("Zone offset not in valid range: -18:00 to +18:00")},u._validate=function(n,o,f){if(n<-18||n>18)throw new r("Zone offset hours not in valid range: value "+n+" is not in the range -18 to 18");if(n>0){if(o<0||f<0)throw new r("Zone offset minutes and seconds must be positive because hours is positive")}else if(n<0){if(o>0||f>0)throw new r("Zone offset minutes and seconds must be negative because hours is negative")}else if(o>0&&f<0||o<0&&f>0)throw new r("Zone offset minutes and seconds must have the same sign");if(Math.abs(o)>59)throw new r("Zone offset minutes not in valid range: abs(value) "+Math.abs(o)+" is not in the range 0 to 59");if(Math.abs(f)>59)throw new r("Zone offset seconds not in valid range: abs(value) "+Math.abs(f)+" is not in the range 0 to 59");if(Math.abs(n)===18&&(Math.abs(o)>0||Math.abs(f)>0))throw new r("Zone offset not in valid range: -18:00 to +18:00")},u.of=function(n){w(n,"offsetId");var o=Zc[n];if(o!=null)return o;var f,E,T;switch(n.length){case 2:n=n[0]+"0"+n[1];case 3:f=u._parseNumber(n,1,!1),E=0,T=0;break;case 5:f=u._parseNumber(n,1,!1),E=u._parseNumber(n,3,!1),T=0;break;case 6:f=u._parseNumber(n,1,!1),E=u._parseNumber(n,4,!0),T=0;break;case 7:f=u._parseNumber(n,1,!1),E=u._parseNumber(n,3,!1),T=u._parseNumber(n,5,!1);break;case 9:f=u._parseNumber(n,1,!1),E=u._parseNumber(n,4,!0),T=u._parseNumber(n,7,!0);break;default:throw new r("Invalid ID for ZoneOffset, invalid format: "+n)}var I=n[0];if(I!=="+"&&I!=="-")throw new r("Invalid ID for ZoneOffset, plus/minus not found when expected: "+n);return I==="-"?u.ofHoursMinutesSeconds(-f,-E,-T):u.ofHoursMinutesSeconds(f,E,T)},u._parseNumber=function(n,o,f){if(f&&n[o-1]!==":")throw new r("Invalid ID for ZoneOffset, colon not found when expected: "+n);var E=n[o],T=n[o+1];if(E<"0"||E>"9"||T<"0"||T>"9")throw new r("Invalid ID for ZoneOffset, non numeric characters found: "+n);return(E.charCodeAt(0)-48)*10+(T.charCodeAt(0)-48)},u.ofHours=function(n){return u.ofHoursMinutesSeconds(n,0,0)},u.ofHoursMinutes=function(n,o){return u.ofHoursMinutesSeconds(n,o,0)},u.ofHoursMinutesSeconds=function(n,o,f){u._validate(n,o,f);var E=n*b.SECONDS_PER_HOUR+o*b.SECONDS_PER_MINUTE+f;return u.ofTotalSeconds(E)},u.ofTotalMinutes=function(n){var o=n*b.SECONDS_PER_MINUTE;return u.ofTotalSeconds(o)},u.ofTotalSeconds=function(n){if(n%(15*b.SECONDS_PER_MINUTE)===0){var o=n,f=Kc[o];return f==null&&(f=new u(n),Kc[o]=f,Zc[f.id()]=f),f}else return new u(n)},s.rules=function(){return this._rules},s.get=function(n){return this.getLong(n)},s.getLong=function(n){if(n===d.OFFSET_SECONDS)return this._totalSeconds;if(n instanceof d)throw new r("Unsupported field: "+n);return n.getFrom(this)},s.query=function(n){return w(n,"query"),n===P.offset()||n===P.zone()?this:n===P.localDate()||n===P.localTime()||n===P.precision()||n===P.chronology()||n===P.zoneId()?null:n.queryFrom(this)},s.adjustInto=function(n){return n.with(d.OFFSET_SECONDS,this._totalSeconds)},s.compareTo=function(n){return w(n,"other"),n._totalSeconds-this._totalSeconds},s.equals=function(n){return this===n?!0:n instanceof u?this._totalSeconds===n._totalSeconds:!1},s.hashCode=function(){return this._totalSeconds},s.toString=function(){return this._id},u}(ae);function Tg(){Z.MAX_SECONDS=18*b.SECONDS_PER_HOUR,Z.UTC=Z.ofTotalSeconds(0),Z.MIN=Z.ofTotalSeconds(-Z.MAX_SECONDS),Z.MAX=Z.ofTotalSeconds(Z.MAX_SECONDS)}var Hr=function(_){O(u,_),u.create=function(n,o){var f=new u;return f._addFieldValue(n,o),f};function u(){var i;return i=_.call(this)||this,i.fieldValues=new zc,i.chrono=null,i.zone=null,i.date=null,i.time=null,i.leapSecond=!1,i.excessDays=null,i}var s=u.prototype;return s.getFieldValue0=function(n){return this.fieldValues.get(n)},s._addFieldValue=function(n,o){w(n,"field");var f=this.getFieldValue0(n);if(f!=null&&f!==o)throw new r("Conflict found: "+n+" "+f+" differs from "+n+" "+o+": "+this);return this._putFieldValue0(n,o)},s._putFieldValue0=function(n,o){return this.fieldValues.put(n,o),this},s.resolve=function(n,o){return o!=null&&this.fieldValues.retainAll(o),this._mergeDate(n),this._mergeTime(n),this._resolveTimeInferZeroes(n),this.excessDays!=null&&this.excessDays.isZero()===!1&&this.date!=null&&this.time!=null&&(this.date=this.date.plus(this.excessDays),this.excessDays=It.ZERO),this._resolveInstant(),this},s._mergeDate=function(n){this._checkDate(ue.INSTANCE.resolveDate(this.fieldValues,n))},s._checkDate=function(n){if(n!=null){this._addObject(n);for(var o in this.fieldValues.keySet()){var f=d.byName(o);if(f&&this.fieldValues.get(f)!==void 0&&f.isDateBased()){var E=void 0;try{E=n.getLong(f)}catch(I){if(I instanceof r)continue;throw I}var T=this.fieldValues.get(f);if(E!==T)throw new r("Conflict found: Field "+f+" "+E+" differs from "+f+" "+T+" derived from "+n)}}}},s._mergeTime=function(n){if(this.fieldValues.containsKey(d.CLOCK_HOUR_OF_DAY)){var o=this.fieldValues.remove(d.CLOCK_HOUR_OF_DAY);n!==$.LENIENT&&(n===$.SMART&&o===0||d.CLOCK_HOUR_OF_DAY.checkValidValue(o)),this._addFieldValue(d.HOUR_OF_DAY,o===24?0:o)}if(this.fieldValues.containsKey(d.CLOCK_HOUR_OF_AMPM)){var f=this.fieldValues.remove(d.CLOCK_HOUR_OF_AMPM);n!==$.LENIENT&&(n===$.SMART&&f===0||d.CLOCK_HOUR_OF_AMPM.checkValidValue(f)),this._addFieldValue(d.HOUR_OF_AMPM,f===12?0:f)}if(n!==$.LENIENT&&(this.fieldValues.containsKey(d.AMPM_OF_DAY)&&d.AMPM_OF_DAY.checkValidValue(this.fieldValues.get(d.AMPM_OF_DAY)),this.fieldValues.containsKey(d.HOUR_OF_AMPM)&&d.HOUR_OF_AMPM.checkValidValue(this.fieldValues.get(d.HOUR_OF_AMPM))),this.fieldValues.containsKey(d.AMPM_OF_DAY)&&this.fieldValues.containsKey(d.HOUR_OF_AMPM)){var E=this.fieldValues.remove(d.AMPM_OF_DAY),T=this.fieldValues.remove(d.HOUR_OF_AMPM);this._addFieldValue(d.HOUR_OF_DAY,E*12+T)}if(this.fieldValues.containsKey(d.NANO_OF_DAY)){var I=this.fieldValues.remove(d.NANO_OF_DAY);n!==$.LENIENT&&d.NANO_OF_DAY.checkValidValue(I),this._addFieldValue(d.SECOND_OF_DAY,p.intDiv(I,1e9)),this._addFieldValue(d.NANO_OF_SECOND,p.intMod(I,1e9))}if(this.fieldValues.containsKey(d.MICRO_OF_DAY)){var C=this.fieldValues.remove(d.MICRO_OF_DAY);n!==$.LENIENT&&d.MICRO_OF_DAY.checkValidValue(C),this._addFieldValue(d.SECOND_OF_DAY,p.intDiv(C,1e6)),this._addFieldValue(d.MICRO_OF_SECOND,p.intMod(C,1e6))}if(this.fieldValues.containsKey(d.MILLI_OF_DAY)){var U=this.fieldValues.remove(d.MILLI_OF_DAY);n!==$.LENIENT&&d.MILLI_OF_DAY.checkValidValue(U),this._addFieldValue(d.SECOND_OF_DAY,p.intDiv(U,1e3)),this._addFieldValue(d.MILLI_OF_SECOND,p.intMod(U,1e3))}if(this.fieldValues.containsKey(d.SECOND_OF_DAY)){var q=this.fieldValues.remove(d.SECOND_OF_DAY);n!==$.LENIENT&&d.SECOND_OF_DAY.checkValidValue(q),this._addFieldValue(d.HOUR_OF_DAY,p.intDiv(q,3600)),this._addFieldValue(d.MINUTE_OF_HOUR,p.intMod(p.intDiv(q,60),60)),this._addFieldValue(d.SECOND_OF_MINUTE,p.intMod(q,60))}if(this.fieldValues.containsKey(d.MINUTE_OF_DAY)){var j=this.fieldValues.remove(d.MINUTE_OF_DAY);n!==$.LENIENT&&d.MINUTE_OF_DAY.checkValidValue(j),this._addFieldValue(d.HOUR_OF_DAY,p.intDiv(j,60)),this._addFieldValue(d.MINUTE_OF_HOUR,p.intMod(j,60))}if(n!==$.LENIENT&&(this.fieldValues.containsKey(d.MILLI_OF_SECOND)&&d.MILLI_OF_SECOND.checkValidValue(this.fieldValues.get(d.MILLI_OF_SECOND)),this.fieldValues.containsKey(d.MICRO_OF_SECOND)&&d.MICRO_OF_SECOND.checkValidValue(this.fieldValues.get(d.MICRO_OF_SECOND))),this.fieldValues.containsKey(d.MILLI_OF_SECOND)&&this.fieldValues.containsKey(d.MICRO_OF_SECOND)){var z=this.fieldValues.remove(d.MILLI_OF_SECOND),fe=this.fieldValues.get(d.MICRO_OF_SECOND);this._putFieldValue0(d.MICRO_OF_SECOND,z*1e3+p.intMod(fe,1e3))}if(this.fieldValues.containsKey(d.MICRO_OF_SECOND)&&this.fieldValues.containsKey(d.NANO_OF_SECOND)){var Ne=this.fieldValues.get(d.NANO_OF_SECOND);this._putFieldValue0(d.MICRO_OF_SECOND,p.intDiv(Ne,1e3)),this.fieldValues.remove(d.MICRO_OF_SECOND)}if(this.fieldValues.containsKey(d.MILLI_OF_SECOND)&&this.fieldValues.containsKey(d.NANO_OF_SECOND)){var we=this.fieldValues.get(d.NANO_OF_SECOND);this._putFieldValue0(d.MILLI_OF_SECOND,p.intDiv(we,1e6)),this.fieldValues.remove(d.MILLI_OF_SECOND)}if(this.fieldValues.containsKey(d.MICRO_OF_SECOND)){var Te=this.fieldValues.remove(d.MICRO_OF_SECOND);this._putFieldValue0(d.NANO_OF_SECOND,Te*1e3)}else if(this.fieldValues.containsKey(d.MILLI_OF_SECOND)){var Ke=this.fieldValues.remove(d.MILLI_OF_SECOND);this._putFieldValue0(d.NANO_OF_SECOND,Ke*1e6)}},s._resolveTimeInferZeroes=function(n){var o=this.fieldValues.get(d.HOUR_OF_DAY),f=this.fieldValues.get(d.MINUTE_OF_HOUR),E=this.fieldValues.get(d.SECOND_OF_MINUTE),T=this.fieldValues.get(d.NANO_OF_SECOND);if(o!=null&&!(f==null&&(E!=null||T!=null))&&!(f!=null&&E==null&&T!=null)){if(n!==$.LENIENT){if(o!=null){n===$.SMART&&o===24&&(f==null||f===0)&&(E==null||E===0)&&(T==null||T===0)&&(o=0,this.excessDays=It.ofDays(1));var I=d.HOUR_OF_DAY.checkValidIntValue(o);if(f!=null){var C=d.MINUTE_OF_HOUR.checkValidIntValue(f);if(E!=null){var U=d.SECOND_OF_MINUTE.checkValidIntValue(E);if(T!=null){var q=d.NANO_OF_SECOND.checkValidIntValue(T);this._addObject(b.of(I,C,U,q))}else this._addObject(b.of(I,C,U))}else T==null&&this._addObject(b.of(I,C))}else E==null&&T==null&&this._addObject(b.of(I,0))}}else if(o!=null){var j=o;if(f!=null)if(E!=null){T==null&&(T=0);var z=p.safeMultiply(j,36e11);z=p.safeAdd(z,p.safeMultiply(f,6e10)),z=p.safeAdd(z,p.safeMultiply(E,1e9)),z=p.safeAdd(z,T);var fe=p.floorDiv(z,864e11),Ne=p.floorMod(z,864e11);this._addObject(b.ofNanoOfDay(Ne)),this.excessDays=It.ofDays(fe)}else{var we=p.safeMultiply(j,3600);we=p.safeAdd(we,p.safeMultiply(f,60));var Te=p.floorDiv(we,86400),Ke=p.floorMod(we,86400);this._addObject(b.ofSecondOfDay(Ke)),this.excessDays=It.ofDays(Te)}else{var wt=p.safeToInt(p.floorDiv(j,24));j=p.floorMod(j,24),this._addObject(b.of(j,0)),this.excessDays=It.ofDays(wt)}}this.fieldValues.remove(d.HOUR_OF_DAY),this.fieldValues.remove(d.MINUTE_OF_HOUR),this.fieldValues.remove(d.SECOND_OF_MINUTE),this.fieldValues.remove(d.NANO_OF_SECOND)}},s._addObject=function(n){n instanceof On?this.date=n:n instanceof b&&(this.time=n)},s._resolveInstant=function(){if(this.date!=null&&this.time!=null){var n=this.fieldValues.get(d.OFFSET_SECONDS);if(n!=null){var o=Z.ofTotalSeconds(n),f=this.date.atTime(this.time).atZone(o).getLong(d.INSTANT_SECONDS);this.fieldValues.put(d.INSTANT_SECONDS,f)}else if(this.zone!=null){var E=this.date.atTime(this.time).atZone(this.zone).getLong(d.INSTANT_SECONDS);this.fieldValues.put(d.INSTANT_SECONDS,E)}}},s.build=function(n){return n.queryFrom(this)},s.isSupported=function(n){return n==null?!1:this.fieldValues.containsKey(n)&&this.fieldValues.get(n)!==void 0||this.date!=null&&this.date.isSupported(n)||this.time!=null&&this.time.isSupported(n)},s.getLong=function(n){w(n,"field");var o=this.getFieldValue0(n);if(o==null){if(this.date!=null&&this.date.isSupported(n))return this.date.getLong(n);if(this.time!=null&&this.time.isSupported(n))return this.time.getLong(n);throw new r("Field not found: "+n)}return o},s.query=function(n){return n===P.zoneId()?this.zone:n===P.chronology()?this.chrono:n===P.localDate()?this.date!=null?H.from(this.date):null:n===P.localTime()?this.time:n===P.zone()||n===P.offset()?n.queryFrom(this):n===P.precision()?null:n.queryFrom(this)},u}(Vt),$c=function(){function _(){if(arguments.length===1)if(arguments[0]instanceof _){this._constructorSelf.apply(this,arguments);return}else this._constructorFormatter.apply(this,arguments);else this._constructorParam.apply(this,arguments);this._caseSensitive=!0,this._strict=!0,this._parsed=[new Xc(this)]}var u=_.prototype;return u._constructorParam=function(i,n,o){this._locale=i,this._symbols=n,this._overrideChronology=o},u._constructorFormatter=function(i){this._locale=i.locale(),this._symbols=i.decimalStyle(),this._overrideChronology=i.chronology()},u._constructorSelf=function(i){this._locale=i._locale,this._symbols=i._symbols,this._overrideChronology=i._overrideChronology,this._overrideZone=i._overrideZone,this._caseSensitive=i._caseSensitive,this._strict=i._strict,this._parsed=[new Xc(this)]},u.copy=function(){return new _(this)},u.symbols=function(){return this._symbols},u.isStrict=function(){return this._strict},u.setStrict=function(i){this._strict=i},u.locale=function(){return this._locale},u.setLocale=function(i){this._locale=i},u.startOptional=function(){this._parsed.push(this.currentParsed().copy())},u.endOptional=function(i){i?this._parsed.splice(this._parsed.length-2,1):this._parsed.splice(this._parsed.length-1,1)},u.isCaseSensitive=function(){return this._caseSensitive},u.setCaseSensitive=function(i){this._caseSensitive=i},u.subSequenceEquals=function(i,n,o,f,E){if(n+E>i.length||f+E>o.length)return!1;this.isCaseSensitive()||(i=i.toLowerCase(),o=o.toLowerCase());for(var T=0;T<E;T++){var I=i[n+T],C=o[f+T];if(I!==C)return!1}return!0},u.charEquals=function(i,n){return this.isCaseSensitive()?i===n:this.charEqualsIgnoreCase(i,n)},u.charEqualsIgnoreCase=function(i,n){return i===n||i.toLowerCase()===n.toLowerCase()},u.setParsedField=function(i,n,o,f){var E=this.currentParsed().fieldValues,T=E.get(i);return E.set(i,n),T!=null&&T!==n?~o:f},u.setParsedZone=function(i){w(i,"zone"),this.currentParsed().zone=i},u.getParsed=function(i){return this.currentParsed().fieldValues.get(i)},u.toParsed=function(){return this.currentParsed()},u.currentParsed=function(){return this._parsed[this._parsed.length-1]},u.setParsedLeapSecond=function(){this.currentParsed().leapSecond=!0},u.getEffectiveChronology=function(){var i=this.currentParsed().chrono;return i==null&&(i=this._overrideChronology,i==null&&(i=ue.INSTANCE)),i},_}(),Xc=function(_){O(u,_);function u(i){var n;return n=_.call(this)||this,n.chrono=null,n.zone=null,n.fieldValues=new zc,n.leapSecond=!1,n.dateTimeParseContext=i,n}var s=u.prototype;return s.copy=function(){var n=new u;return n.chrono=this.chrono,n.zone=this.zone,n.fieldValues.putAll(this.fieldValues),n.leapSecond=this.leapSecond,n.dateTimeParseContext=this.dateTimeParseContext,n},s.toString=function(){return this.fieldValues+", "+this.chrono+", "+this.zone},s.isSupported=function(n){return this.fieldValues.containsKey(n)},s.get=function(n){var o=this.fieldValues.get(n);return F(o!=null),o},s.query=function(n){return n===P.chronology()?this.chrono:n===P.zoneId()||n===P.zone()?this.zone:_.prototype.query.call(this,n)},s.toBuilder=function(){var n=new Hr;return n.fieldValues.putAll(this.fieldValues),n.chrono=this.dateTimeParseContext.getEffectiveChronology(),this.zone!=null?n.zone=this.zone:n.zone=this.overrideZone,n.leapSecond=this.leapSecond,n.excessDays=this.excessDays,n},u}(ze);var Jc=function(){function _(s,i,n){arguments.length===2&&arguments[1]instanceof Q?(this._temporal=_.adjust(s,i),this._locale=i.locale(),this._symbols=i.decimalStyle()):(this._temporal=s,this._locale=i,this._symbols=n),this._optional=0}_.adjust=function(i,n){return i};var u=_.prototype;return u.symbols=function(){return this._symbols},u.startOptional=function(){this._optional++},u.endOptional=function(){this._optional--},u.getValueQuery=function(i){var n=this._temporal.query(i);if(n==null&&this._optional===0)throw new r("Unable to extract value: "+this._temporal);return n},u.getValue=function(i){try{return this._temporal.getLong(i)}catch(n){if(n instanceof r&&this._optional>0)return null;throw n}},u.temporal=function(){return this._temporal},u.locale=function(){return this._locale},u.setDateTime=function(i){this._temporal=i},u.setLocale=function(i){this._locale=i},_}(),ot={},yg=[0,90,181,273,0,91,182,274],bt=function(_){O(u,_);function u(){return _.apply(this,arguments)||this}var s=u.prototype;return s.isDateBased=function(){return!0},s.isTimeBased=function(){return!1},s._isIso=function(){return!0},u._getWeekRangeByLocalDate=function(n){var o=u._getWeekBasedYear(n);return X.of(1,u._getWeekRangeByYear(o))},u._getWeekRangeByYear=function(n){var o=H.of(n,1,1);return o.dayOfWeek()===de.THURSDAY||o.dayOfWeek()===de.WEDNESDAY&&o.isLeapYear()?53:52},u._getWeek=function(n){var o=n.dayOfWeek().ordinal(),f=n.dayOfYear()-1,E=f+(3-o),T=p.intDiv(E,7),I=E-T*7,C=I-3;if(C<-3&&(C+=7),f<C)return u._getWeekRangeByLocalDate(n.withDayOfYear(180).minusYears(1)).maximum();var U=p.intDiv(f-C,7)+1;return U===53&&(C===-3||C===-2&&n.isLeapYear())===!1&&(U=1),U},u._getWeekBasedYear=function(n){var o=n.year(),f=n.dayOfYear();if(f<=3){var E=n.dayOfWeek().ordinal();f-E<-2&&o--}else if(f>=363){var T=n.dayOfWeek().ordinal();f=f-363-(n.isLeapYear()?1:0),f-T>=0&&o++}return o},s.displayName=function(){return this.toString()},s.resolve=function(){return null},s.name=function(){return this.toString()},u}(_t),Sg=function(_){O(u,_);function u(){return _.apply(this,arguments)||this}var s=u.prototype;return s.toString=function(){return"DayOfQuarter"},s.baseUnit=function(){return y.DAYS},s.rangeUnit=function(){return In},s.range=function(){return X.of(1,90,92)},s.isSupportedBy=function(n){return n.isSupported(d.DAY_OF_YEAR)&&n.isSupported(d.MONTH_OF_YEAR)&&n.isSupported(d.YEAR)&&this._isIso(n)},s.rangeRefinedBy=function(n){if(n.isSupported(this)===!1)throw new l("Unsupported field: DayOfQuarter");var o=n.getLong(un);if(o===1){var f=n.getLong(d.YEAR);return ue.isLeapYear(f)?X.of(1,91):X.of(1,90)}else{if(o===2)return X.of(1,91);if(o===3||o===4)return X.of(1,92)}return this.range()},s.getFrom=function(n){if(n.isSupported(this)===!1)throw new l("Unsupported field: DayOfQuarter");var o=n.get(d.DAY_OF_YEAR),f=n.get(d.MONTH_OF_YEAR),E=n.getLong(d.YEAR);return o-yg[p.intDiv(f-1,3)+(ue.isLeapYear(E)?4:0)]},s.adjustInto=function(n,o){var f=this.getFrom(n);return this.range().checkValidValue(o,this),n.with(d.DAY_OF_YEAR,n.getLong(d.DAY_OF_YEAR)+(o-f))},s.resolve=function(n,o,f){var E=n.get(d.YEAR),T=n.get(un);if(E==null||T==null)return null;var I=d.YEAR.checkValidIntValue(E),C=n.get(Zs),U;if(f===$.LENIENT){var q=T;U=H.of(I,1,1),U=U.plusMonths(p.safeMultiply(p.safeSubtract(q,1),3)),U=U.plusDays(p.safeSubtract(C,1))}else{var j=un.range().checkValidIntValue(T,un);if(f===$.STRICT){var z=92;j===1?z=ue.isLeapYear(I)?91:90:j===2&&(z=91),X.of(1,z).checkValidValue(C,this)}else this.range().checkValidValue(C,this);U=H.of(I,(j-1)*3+1,1).plusDays(C-1)}return n.remove(this),n.remove(d.YEAR),n.remove(un),U},u}(bt),vg=function(_){O(u,_);function u(){return _.apply(this,arguments)||this}var s=u.prototype;return s.toString=function(){return"QuarterOfYear"},s.baseUnit=function(){return In},s.rangeUnit=function(){return y.YEARS},s.range=function(){return X.of(1,4)},s.isSupportedBy=function(n){return n.isSupported(d.MONTH_OF_YEAR)&&this._isIso(n)},s.rangeRefinedBy=function(n){return this.range()},s.getFrom=function(n){if(n.isSupported(this)===!1)throw new l("Unsupported field: QuarterOfYear");var o=n.getLong(d.MONTH_OF_YEAR);return p.intDiv(o+2,3)},s.adjustInto=function(n,o){var f=this.getFrom(n);return this.range().checkValidValue(o,this),n.with(d.MONTH_OF_YEAR,n.getLong(d.MONTH_OF_YEAR)+(o-f)*3)},u}(bt),Ng=function(_){O(u,_);function u(){return _.apply(this,arguments)||this}var s=u.prototype;return s.toString=function(){return"WeekOfWeekBasedYear"},s.baseUnit=function(){return y.WEEKS},s.rangeUnit=function(){return An},s.range=function(){return X.of(1,52,53)},s.isSupportedBy=function(n){return n.isSupported(d.EPOCH_DAY)&&this._isIso(n)},s.rangeRefinedBy=function(n){if(n.isSupported(this)===!1)throw new l("Unsupported field: WeekOfWeekBasedYear");return bt._getWeekRangeByLocalDate(H.from(n))},s.getFrom=function(n){if(n.isSupported(this)===!1)throw new l("Unsupported field: WeekOfWeekBasedYear");return bt._getWeek(H.from(n))},s.adjustInto=function(n,o){return this.range().checkValidValue(o,this),n.plus(p.safeSubtract(o,this.getFrom(n)),y.WEEKS)},s.resolve=function(n,o,f){var E=n.get(Et),T=n.get(d.DAY_OF_WEEK);if(E==null||T==null)return null;var I=Et.range().checkValidIntValue(E,Et),C=n.get($s),U;if(f===$.LENIENT){var q=T,j=0;q>7?(j=p.intDiv(q-1,7),q=p.intMod(q-1,7)+1):q<1&&(j=p.intDiv(q,7)-1,q=p.intMod(q,7)+7),U=H.of(I,1,4).plusWeeks(C-1).plusWeeks(j).with(d.DAY_OF_WEEK,q)}else{var z=d.DAY_OF_WEEK.checkValidIntValue(T);if(f===$.STRICT){var fe=H.of(I,1,4),Ne=bt._getWeekRangeByLocalDate(fe);Ne.checkValidValue(C,this)}else this.range().checkValidValue(C,this);U=H.of(I,1,4).plusWeeks(C-1).with(d.DAY_OF_WEEK,z)}return n.remove(this),n.remove(Et),n.remove(d.DAY_OF_WEEK),U},s.displayName=function(){return"Week"},u}(bt),Og=function(_){O(u,_);function u(){return _.apply(this,arguments)||this}var s=u.prototype;return s.toString=function(){return"WeekBasedYear"},s.baseUnit=function(){return An},s.rangeUnit=function(){return y.FOREVER},s.range=function(){return d.YEAR.range()},s.isSupportedBy=function(n){return n.isSupported(d.EPOCH_DAY)&&this._isIso(n)},s.rangeRefinedBy=function(n){return d.YEAR.range()},s.getFrom=function(n){if(n.isSupported(this)===!1)throw new l("Unsupported field: WeekBasedYear");return bt._getWeekBasedYear(H.from(n))},s.adjustInto=function(n,o){if(this.isSupportedBy(n)===!1)throw new l("Unsupported field: WeekBasedYear");var f=this.range().checkValidIntValue(o,Et),E=H.from(n),T=E.get(d.DAY_OF_WEEK),I=bt._getWeek(E);I===53&&bt._getWeekRangeByYear(f)===52&&(I=52);var C=H.of(f,1,4),U=T-C.get(d.DAY_OF_WEEK)+(I-1)*7;return C=C.plusDays(U),n.with(C)},u}(bt),Qc=function(_){O(u,_);function u(i,n){var o;return o=_.call(this)||this,o._name=i,o._duration=n,o}var s=u.prototype;return s.duration=function(){return this._duration},s.isDurationEstimated=function(){return!0},s.isDateBased=function(){return!0},s.isTimeBased=function(){return!1},s.isSupportedBy=function(n){return n.isSupported(d.EPOCH_DAY)},s.addTo=function(n,o){switch(this){case An:{var f=p.safeAdd(n.get(Et),o);return n.with(Et,f)}case In:return n.plus(p.intDiv(o,256),y.YEARS).plus(p.intMod(o,256)*3,y.MONTHS);default:throw new m("Unreachable")}},s.between=function(n,o){switch(this){case An:return p.safeSubtract(o.getLong(Et),n.getLong(Et));case In:return p.intDiv(n.until(o,y.MONTHS),3);default:throw new m("Unreachable")}},s.toString=function(){return this._name},u}(G),Zs=null,un=null,$s=null,Et=null,An=null,In=null;function Ag(){Zs=new Sg,un=new vg,$s=new Ng,Et=new Og,An=new Qc("WeekBasedYears",Y.ofSeconds(31556952)),In=new Qc("QuarterYears",Y.ofSeconds(31556952/4)),ot.DAY_OF_QUARTER=Zs,ot.QUARTER_OF_YEAR=un,ot.WEEK_OF_WEEK_BASED_YEAR=$s,ot.WEEK_BASED_YEAR=Et,ot.WEEK_BASED_YEARS=An,ot.QUARTER_YEARS=In,H.prototype.isoWeekOfWeekyear=function(){return this.get(ot.WEEK_OF_WEEK_BASED_YEAR)},H.prototype.isoWeekyear=function(){return this.get(ot.WEEK_BASED_YEAR)}}var or=function(){function _(s,i,n,o){this._zeroDigit=s,this._zeroDigitCharCode=s.charCodeAt(0),this._positiveSign=i,this._negativeSign=n,this._decimalSeparator=o}var u=_.prototype;return u.positiveSign=function(){return this._positiveSign},u.withPositiveSign=function(i){return i===this._positiveSign?this:new _(this._zeroDigit,i,this._negativeSign,this._decimalSeparator)},u.negativeSign=function(){return this._negativeSign},u.withNegativeSign=function(i){return i===this._negativeSign?this:new _(this._zeroDigit,this._positiveSign,i,this._decimalSeparator)},u.zeroDigit=function(){return this._zeroDigit},u.withZeroDigit=function(i){return i===this._zeroDigit?this:new _(i,this._positiveSign,this._negativeSign,this._decimalSeparator)},u.decimalSeparator=function(){return this._decimalSeparator},u.withDecimalSeparator=function(i){return i===this._decimalSeparator?this:new _(this._zeroDigit,this._positiveSign,this._negativeSign,i)},u.convertToDigit=function(i){var n=i.charCodeAt(0)-this._zeroDigitCharCode;return n>=0&&n<=9?n:-1},u.convertNumberToI18N=function(i){if(this._zeroDigit==="0")return i;for(var n=this._zeroDigitCharCode-48,o="",f=0;f<i.length;f++)o+=String.fromCharCode(i.charCodeAt(f)+n);return o},u.equals=function(i){return this===i?!0:i instanceof _?this._zeroDigit===i._zeroDigit&&this._positiveSign===i._positiveSign&&this._negativeSign===i._negativeSign&&this._decimalSeparator===i._decimalSeparator:!1},u.hashCode=function(){return this._zeroDigit+this._positiveSign+this._negativeSign+this._decimalSeparator},u.toString=function(){return"DecimalStyle["+this._zeroDigit+this._positiveSign+this._negativeSign+this._decimalSeparator+"]"},_.of=function(){throw new Error("not yet supported")},_.availableLocales=function(){throw new Error("not yet supported")},_}();or.STANDARD=new or("0","+","-",".");var ie=function(_){O(u,_);function u(){return _.apply(this,arguments)||this}var s=u.prototype;return s.parse=function(n,o,f){switch(this){case u.NORMAL:return!n||!o;case u.ALWAYS:case u.EXCEEDS_PAD:return!0;default:return!o&&!f}},u}(J);ie.NORMAL=new ie("NORMAL"),ie.NEVER=new ie("NEVER"),ie.ALWAYS=new ie("ALWAYS"),ie.EXCEEDS_PAD=new ie("EXCEEDS_PAD"),ie.NOT_NEGATIVE=new ie("NOT_NEGATIVE");var se=function(_){O(u,_);function u(){return _.apply(this,arguments)||this}var s=u.prototype;return s.isStandalone=function(){switch(this){case u.FULL_STANDALONE:case u.SHORT_STANDALONE:case u.NARROW_STANDALONE:return!0;default:return!1}},s.asStandalone=function(){switch(this){case u.FULL:return u.FULL_STANDALONE;case u.SHORT:return u.SHORT_STANDALONE;case u.NARROW:return u.NARROW_STANDALONE;default:return this}},s.asNormal=function(){switch(this){case u.FULL_STANDALONE:return u.FULL;case u.SHORT_STANDALONE:return u.SHORT;case u.NARROW_STANDALONE:return u.NARROW;default:return this}},u}(J);se.FULL=new se("FULL"),se.FULL_STANDALONE=new se("FULL_STANDALONE"),se.SHORT=new se("SHORT"),se.SHORT_STANDALONE=new se("SHORT_STANDALONE"),se.NARROW=new se("NARROW"),se.NARROW_STANDALONE=new se("NARROW_STANDALONE");var ef=function(){function _(s){if(s.length>1)throw new h('invalid literal, too long: "'+s+'"');this._literal=s}var u=_.prototype;return u.print=function(i,n){return n.append(this._literal),!0},u.parse=function(i,n,o){var f=n.length;if(o===f)return~o;var E=n.charAt(o);return i.charEquals(this._literal,E)===!1?~o:o+this._literal.length},u.toString=function(){return this._literal==="'"?"''":"'"+this._literal+"'"},_}();var Xs=function(){function _(s,i){this._printerParsers=s,this._optional=i}var u=_.prototype;return u.withOptional=function(i){return i===this._optional?this:new _(this._printerParsers,i)},u.print=function(i,n){var o=n.length();this._optional&&i.startOptional();try{for(var f=0;f<this._printerParsers.length;f++){var E=this._printerParsers[f];if(E.print(i,n)===!1)return n.setLength(o),!0}}finally{this._optional&&i.endOptional()}return!0},u.parse=function(i,n,o){if(this._optional){i.startOptional();for(var f=o,E=0;E<this._printerParsers.length;E++){var T=this._printerParsers[E];if(f=T.parse(i,n,f),f<0)return i.endOptional(!1),o}return i.endOptional(!0),f}else{for(var I=0;I<this._printerParsers.length;I++){var C=this._printerParsers[I];if(o=C.parse(i,n,o),o<0)break}return o}},u.toString=function(){var i="";if(this._printerParsers!=null){i+=this._optional?"[":"(";for(var n=0;n<this._printerParsers.length;n++){var o=this._printerParsers[n];i+=o.toString()}i+=this._optional?"]":")"}return i},_}();var tf=function(){function _(s,i,n,o){if(w(s,"field"),s.range().isFixed()===!1)throw new h("Field must have a fixed set of values: "+s);if(i<0||i>9)throw new h("Minimum width must be from 0 to 9 inclusive but was "+i);if(n<1||n>9)throw new h("Maximum width must be from 1 to 9 inclusive but was "+n);if(n<i)throw new h("Maximum width must exceed or equal the minimum width but "+n+" < "+i);this.field=s,this.minWidth=i,this.maxWidth=n,this.decimalPoint=o}var u=_.prototype;return u.print=function(i,n){var o=i.getValue(this.field);if(o===null)return!1;var f=i.symbols();if(o===0){if(this.minWidth>0){this.decimalPoint&&n.append(f.decimalSeparator());for(var E=0;E<this.minWidth;E++)n.append(f.zeroDigit())}}else{var T=this.convertToFraction(o,f.zeroDigit()),I=Math.min(Math.max(T.length,this.minWidth),this.maxWidth);if(T=T.substr(0,I),T*1>0)for(;T.length>this.minWidth&&T[T.length-1]==="0";)T=T.substr(0,T.length-1);var C=T;C=f.convertNumberToI18N(C),this.decimalPoint&&n.append(f.decimalSeparator()),n.append(C)}return!0},u.parse=function(i,n,o){var f=i.isStrict()?this.minWidth:0,E=i.isStrict()?this.maxWidth:9,T=n.length;if(o===T)return f>0?~o:o;if(this.decimalPoint){if(n[o]!==i.symbols().decimalSeparator())return f>0?~o:o;o++}var I=o+f;if(I>T)return~o;for(var C=Math.min(o+E,T),U=0,q=o;q<C;){var j=n.charAt(q++),z=i.symbols().convertToDigit(j);if(z<0){if(q<I)return~o;q--;break}U=U*10+z}var fe=q-o,Ne=Math.pow(10,fe),we=this.convertFromFraction(U,Ne);return i.setParsedField(this.field,we,o,q)},u.convertToFraction=function(i,n){var o=this.field.range();o.checkValidValue(i,this.field);for(var f=o.minimum(),E=o.maximum()-f+1,T=i-f,I=p.intDiv(T*1e9,E),C=""+I;C.length<9;)C=n+C;return C},u.convertFromFraction=function(i,n){var o=this.field.range(),f=o.minimum(),E=o.maximum()-f+1,T=p.intDiv(i*E,n);return T},u.toString=function(){var i=this.decimalPoint?",DecimalPoint":"";return"Fraction("+this.field+","+this.minWidth+","+this.maxWidth+i+")"},_}(),Js=15,Dn=[0,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9],bn=function(){function _(s,i,n,o,f){f===void 0&&(f=0),this._field=s,this._minWidth=i,this._maxWidth=n,this._signStyle=o,this._subsequentWidth=f}var u=_.prototype;return u.field=function(){return this._field},u.minWidth=function(){return this._minWidth},u.maxWidth=function(){return this._maxWidth},u.signStyle=function(){return this._signStyle},u.withFixedWidth=function(){return this._subsequentWidth===-1?this:new _(this._field,this._minWidth,this._maxWidth,this._signStyle,-1)},u.withSubsequentWidth=function(i){return new _(this._field,this._minWidth,this._maxWidth,this._signStyle,this._subsequentWidth+i)},u._isFixedWidth=function(){return this._subsequentWidth===-1||this._subsequentWidth>0&&this._minWidth===this._maxWidth&&this._signStyle===ie.NOT_NEGATIVE},u.print=function(i,n){var o=i.getValue(this._field);if(o==null)return!1;var f=this._getValue(i,o),E=i.symbols(),T=""+Math.abs(f);if(T.length>this._maxWidth)throw new r("Field "+this._field+" cannot be printed as the value "+f+" exceeds the maximum print width of "+this._maxWidth);if(T=E.convertNumberToI18N(T),f>=0)switch(this._signStyle){case ie.EXCEEDS_PAD:this._minWidth<Js&&f>=Dn[this._minWidth]&&n.append(E.positiveSign());break;case ie.ALWAYS:n.append(E.positiveSign());break}else switch(this._signStyle){case ie.NORMAL:case ie.EXCEEDS_PAD:case ie.ALWAYS:n.append(E.negativeSign());break;case ie.NOT_NEGATIVE:throw new r("Field "+this._field+" cannot be printed as the value "+f+" cannot be negative according to the SignStyle")}for(var I=0;I<this._minWidth-T.length;I++)n.append(E.zeroDigit());return n.append(T),!0},u.parse=function(i,n,o){var f=n.length;if(o===f)return~o;F(o>=0&&o<f);var E=n.charAt(o),T=!1,I=!1;if(E===i.symbols().positiveSign()){if(this._signStyle.parse(!0,i.isStrict(),this._minWidth===this._maxWidth)===!1)return~o;I=!0,o++}else if(E===i.symbols().negativeSign()){if(this._signStyle.parse(!1,i.isStrict(),this._minWidth===this._maxWidth)===!1)return~o;T=!0,o++}else if(this._signStyle===ie.ALWAYS&&i.isStrict())return~o;var C=i.isStrict()||this._isFixedWidth()?this._minWidth:1,U=o+C;if(U>f)return~o;for(var q=(i.isStrict()||this._isFixedWidth()?this._maxWidth:9)+Math.max(this._subsequentWidth,0),j=0,z=o,fe=0;fe<2;fe++){for(var Ne=Math.min(z+q,f);z<Ne;){var we=n.charAt(z++),Te=i.symbols().convertToDigit(we);if(Te<0){if(z--,z<U)return~o;break}if(z-o>Js)throw new c("number text exceeds length");j=j*10+Te}if(this._subsequentWidth>0&&fe===0){var Ke=z-o;q=Math.max(C,Ke-this._subsequentWidth),z=o,j=0}else break}if(T){if(j===0&&i.isStrict())return~(o-1);j!==0&&(j=-j)}else if(this._signStyle===ie.EXCEEDS_PAD&&i.isStrict()){var wt=z-o;if(I){if(wt<=this._minWidth)return~(o-1)}else if(wt>this._minWidth)return~o}return this._setValue(i,j,o,z)},u._getValue=function(i,n){return n},u._setValue=function(i,n,o,f){return i.setParsedField(this._field,n,o,f)},u.toString=function(){return this._minWidth===1&&this._maxWidth===Js&&this._signStyle===ie.NORMAL?"Value("+this._field+")":this._minWidth===this._maxWidth&&this._signStyle===ie.NOT_NEGATIVE?"Value("+this._field+","+this._minWidth+")":"Value("+this._field+","+this._minWidth+","+this._maxWidth+","+this._signStyle+")"},_}(),sr=function(_){O(u,_);function u(i,n,o,f,E){var T;if(T=_.call(this,i,n,o,ie.NOT_NEGATIVE)||this,n<1||n>10)throw new h("The width must be from 1 to 10 inclusive but was "+n);if(o<1||o>10)throw new h("The maxWidth must be from 1 to 10 inclusive but was "+o);if(o<n)throw new h("The maxWidth must be greater than the width");if(E===null){if(i.range().isValidValue(f)===!1)throw new h("The base value must be within the range of the field");if(f+Dn[n]>p.MAX_SAFE_INTEGER)throw new r("Unable to add printer-parser as the range exceeds the capacity of an int")}return T._baseValue=f,T._baseDate=E,T}var s=u.prototype;return s._getValue=function(n,o){var f=Math.abs(o),E=this._baseValue;if(this._baseDate!==null){n.temporal();var T=ue.INSTANCE;E=T.date(this._baseDate).get(this._field)}return o>=E&&o<E+Dn[this._minWidth]?f%Dn[this._minWidth]:f%Dn[this._maxWidth]},s._setValue=function(n,o,f,E){var T=this._baseValue;if(this._baseDate!=null){var I=n.getEffectiveChronology();T=I.date(this._baseDate).get(this._field)}var C=E-f;if(C===this._minWidth&&o>=0){var U=Dn[this._minWidth],q=T%U,j=T-q;T>0?o=j+o:o=j-o,o<T&&(o+=U)}return n.setParsedField(this._field,o,f,E)},s.withFixedWidth=function(){return this._subsequentWidth===-1?this:new u(this._field,this._minWidth,this._maxWidth,this._baseValue,this._baseDate)},s.withSubsequentWidth=function(n){return new u(this._field,this._minWidth,this._maxWidth,this._baseValue,this._baseDate,this._subsequentWidth+n)},s.isFixedWidth=function(n){return n.isStrict()===!1?!1:_.prototype.isFixedWidth.call(this,n)},s.toString=function(){return"ReducedValue("+this._field+","+this._minWidth+","+this._maxWidth+","+(this._baseDate!=null?this._baseDate:this._baseValue)+")"},u}(bn);var Wr=["+HH","+HHmm","+HH:mm","+HHMM","+HH:MM","+HHMMss","+HH:MM:ss","+HHMMSS","+HH:MM:SS"],Rt=function(){function _(s,i){w(s,"noOffsetText"),w(i,"pattern"),this.noOffsetText=s,this.type=this._checkPattern(i)}var u=_.prototype;return u._checkPattern=function(i){for(var n=0;n<Wr.length;n++)if(Wr[n]===i)return n;throw new h("Invalid zone offset pattern: "+i)},u.print=function(i,n){var o=i.getValue(d.OFFSET_SECONDS);if(o==null)return!1;var f=p.safeToInt(o);if(f===0)n.append(this.noOffsetText);else{var E=Math.abs(p.intMod(p.intDiv(f,3600),100)),T=Math.abs(p.intMod(p.intDiv(f,60),60)),I=Math.abs(p.intMod(f,60)),C=n.length(),U=E;n.append(f<0?"-":"+").appendChar(p.intDiv(E,10)+"0").appendChar(p.intMod(E,10)+"0"),(this.type>=3||this.type>=1&&T>0)&&(n.append(this.type%2===0?":":"").appendChar(p.intDiv(T,10)+"0").appendChar(T%10+"0"),U+=T,(this.type>=7||this.type>=5&&I>0)&&(n.append(this.type%2===0?":":"").appendChar(p.intDiv(I,10)+"0").appendChar(I%10+"0"),U+=I)),U===0&&(n.setLength(C),n.append(this.noOffsetText))}return!0},u.parse=function(i,n,o){var f=n.length,E=this.noOffsetText.length;if(E===0){if(o===f)return i.setParsedField(d.OFFSET_SECONDS,0,o,o)}else{if(o===f)return~o;if(i.subSequenceEquals(n,o,this.noOffsetText,0,E))return i.setParsedField(d.OFFSET_SECONDS,0,o,o+E)}var T=n[o];if(T==="+"||T==="-"){var I=T==="-"?-1:1,C=[0,0,0,0];if(C[0]=o+1,(this._parseNumber(C,1,n,!0)||this._parseNumber(C,2,n,this.type>=3)||this._parseNumber(C,3,n,!1))===!1){var U=p.safeZero(I*(C[1]*3600+C[2]*60+C[3]));return i.setParsedField(d.OFFSET_SECONDS,U,o,C[0])}}return E===0?i.setParsedField(d.OFFSET_SECONDS,0,o,o+E):~o},u._parseNumber=function(i,n,o,f){if((this.type+3)/2<n)return!1;var E=i[0];if(this.type%2===0&&n>1){if(E+1>o.length||o[E]!==":")return f;E++}if(E+2>o.length)return f;var T=o[E++],I=o[E++];if(T<"0"||T>"9"||I<"0"||I>"9")return f;var C=(T.charCodeAt(0)-48)*10+(I.charCodeAt(0)-48);return C<0||C>59?f:(i[n]=C,i[0]=E,!1)},u.toString=function(){var i=this.noOffsetText.replace("'","''");return"Offset("+Wr[this.type]+",'"+i+"')"},_}();Rt.INSTANCE_ID=new Rt("Z","+HH:MM:ss"),Rt.PATTERNS=Wr;var Qs=function(){function _(s,i,n){this._printerParser=s,this._padWidth=i,this._padChar=n}var u=_.prototype;return u.print=function(i,n){var o=n.length();if(this._printerParser.print(i,n)===!1)return!1;var f=n.length()-o;if(f>this._padWidth)throw new r("Cannot print as output of "+f+" characters exceeds pad width of "+this._padWidth);for(var E=0;E<this._padWidth-f;E++)n.insert(o,this._padChar);return!0},u.parse=function(i,n,o){var f=i.isStrict(),E=i.isCaseSensitive();if(F(!(o>n.length)),F(o>=0),o===n.length)return~o;var T=o+this._padWidth;if(T>n.length){if(f)return~o;T=n.length}for(var I=o;I<T&&(E?n[I]===this._padChar:i.charEquals(n[I],this._padChar));)I++;n=n.substring(0,T);var C=this._printerParser.parse(i,n,I);return C!==T&&f?~(o+I):C},u.toString=function(){return"Pad("+this._printerParser+","+this._padWidth+(this._padChar===" "?")":",'"+this._padChar+"')")},_}(),tt=function(_){O(u,_);function u(){return _.apply(this,arguments)||this}var s=u.prototype;return s.print=function(){return!0},s.parse=function(n,o,f){switch(this){case u.SENSITIVE:n.setCaseSensitive(!0);break;case u.INSENSITIVE:n.setCaseSensitive(!1);break;case u.STRICT:n.setStrict(!0);break;case u.LENIENT:n.setStrict(!1);break}return f},s.toString=function(){switch(this){case u.SENSITIVE:return"ParseCaseSensitive(true)";case u.INSENSITIVE:return"ParseCaseSensitive(false)";case u.STRICT:return"ParseStrict(true)";case u.LENIENT:return"ParseStrict(false)"}},u}(J);tt.SENSITIVE=new tt("SENSITIVE"),tt.INSENSITIVE=new tt("INSENSITIVE"),tt.STRICT=new tt("STRICT"),tt.LENIENT=new tt("LENIENT");var ea=function(){function _(s){this._literal=s}var u=_.prototype;return u.print=function(i,n){return n.append(this._literal),!0},u.parse=function(i,n,o){var f=n.length;return F(!(o>f||o<0)),i.subSequenceEquals(n,o,this._literal,0,this._literal.length)===!1?~o:o+this._literal.length},u.toString=function(){var i=this._literal.replace("'","''");return"'"+i+"'"},_}();var ar=function(){function _(){}return _.getRules=function(s){throw new r("unsupported ZoneId:"+s)},_.getAvailableZoneIds=function(){return[]},_}(),mt=function(_){O(u,_),u.ofId=function(n){var o=ar.getRules(n);return new u(n,o)};function u(i,n){var o;return o=_.call(this)||this,o._id=i,o._rules=n,o}var s=u.prototype;return s.id=function(){return this._id},s.rules=function(){return this._rules},u}(ae);var nf=function(){function _(s,i){this.query=s,this.description=i}var u=_.prototype;return u.print=function(i,n){var o=i.getValueQuery(this.query);return o==null?!1:(n.append(o.id()),!0)},u.parse=function(i,n,o){var f=n.length;if(o>f||o===f)return~o;var E=n.charAt(o);if(E==="+"||E==="-"){var T=i.copy(),I=Rt.INSTANCE_ID.parse(T,n,o);if(I<0)return I;var C=T.getParsed(d.OFFSET_SECONDS),U=Z.ofTotalSeconds(C);return i.setParsedZone(U),I}else if(f>=o+2){var q=n.charAt(o+1);if(i.charEquals(E,"U")&&i.charEquals(q,"T"))return f>=o+3&&i.charEquals(n.charAt(o+2),"C")?this._parsePrefixedOffset(i,n,o,o+3):this._parsePrefixedOffset(i,n,o,o+2);if(i.charEquals(E,"G")&&f>=o+3&&i.charEquals(q,"M")&&i.charEquals(n.charAt(o+2),"T"))return this._parsePrefixedOffset(i,n,o,o+3)}if(n.substr(o,6)==="SYSTEM")return i.setParsedZone(ae.systemDefault()),o+6;if(i.charEquals(E,"Z"))return i.setParsedZone(Z.UTC),o+1;var j=ar.getAvailableZoneIds();ta.size!==j.length&&(ta=rf.createTreeMap(j));for(var z=f-o,fe=ta.treeMap,Ne=null,we=0;fe!=null;){var Te=n.substr(o,Math.min(fe.length,z));fe=fe.get(Te),fe!=null&&fe.isLeaf&&(Ne=Te,we=fe.length)}return Ne!=null?(i.setParsedZone(mt.ofId(Ne)),o+we):~o},u._parsePrefixedOffset=function(i,n,o,f){var E=n.substring(o,f).toUpperCase(),T=i.copy();if(f<n.length&&i.charEquals(n.charAt(f),"Z"))return i.setParsedZone(ae.ofOffset(E,Z.UTC)),f;var I=Rt.INSTANCE_ID.parse(T,n,f);if(I<0)return i.setParsedZone(ae.ofOffset(E,Z.UTC)),f;var C=T.getParsed(d.OFFSET_SECONDS),U=Z.ofTotalSeconds(C);return i.setParsedZone(ae.ofOffset(E,U)),I},u.toString=function(){return this.description},_}(),rf=function(){_.createTreeMap=function(s){for(var i=s.sort(function(f,E){return f.length-E.length}),n=new Ig(i[0].length,!1),o=0;o<i.length;o++)n.add(i[o]);return new _(i.length,n)};function _(u,s){this.size=u,this.treeMap=s}return _}(),Ig=function(){function _(s,i){s===void 0&&(s=0),i===void 0&&(i=!1),this.length=s,this.isLeaf=i,this._treeMap={}}var u=_.prototype;return u.add=function(i){var n=i.length;if(n===this.length)this._treeMap[i]=new _(n,!0);else if(n>this.length){var o=i.substr(0,this.length),f=this._treeMap[o];f==null&&(f=new _(n,!1),this._treeMap[o]=f),f.add(i)}},u.get=function(i){return this._treeMap[i]},_}(),ta=new rf([]);var Ht=15,ce=function(){function _(){this._active=this,this._parent=null,this._printerParsers=[],this._optional=!1,this._padNextWidth=0,this._padNextChar=null,this._valueParserIndex=-1}_._of=function(i,n){w(i,"parent"),w(n,"optional");var o=new _;return o._parent=i,o._optional=n,o};var u=_.prototype;return u.parseCaseSensitive=function(){return this._appendInternalPrinterParser(tt.SENSITIVE),this},u.parseCaseInsensitive=function(){return this._appendInternalPrinterParser(tt.INSENSITIVE),this},u.parseStrict=function(){return this._appendInternalPrinterParser(tt.STRICT),this},u.parseLenient=function(){return this._appendInternalPrinterParser(tt.LENIENT),this},u.parseDefaulting=function(i,n){return w(i),this._appendInternal(new bg(i,n)),this},u.appendValue=function(){return arguments.length===1?this._appendValue1.apply(this,arguments):arguments.length===2?this._appendValue2.apply(this,arguments):this._appendValue4.apply(this,arguments)},u._appendValue1=function(i){return w(i),this._appendValuePrinterParser(new bn(i,1,Ht,ie.NORMAL)),this},u._appendValue2=function(i,n){if(w(i),n<1||n>Ht)throw new h("The width must be from 1 to "+Ht+" inclusive but was "+n);var o=new bn(i,n,n,ie.NOT_NEGATIVE);return this._appendValuePrinterParser(o),this},u._appendValue4=function(i,n,o,f){if(w(i),w(f),n===o&&f===ie.NOT_NEGATIVE)return this._appendValue2(i,o);if(n<1||n>Ht)throw new h("The minimum width must be from 1 to "+Ht+" inclusive but was "+n);if(o<1||o>Ht)throw new h("The minimum width must be from 1 to "+Ht+" inclusive but was "+o);if(o<n)throw new h("The maximum width must exceed or equal the minimum width but "+o+" < "+n);var E=new bn(i,n,o,f);return this._appendValuePrinterParser(E),this},u.appendValueReduced=function(){return arguments.length===4&&arguments[3]instanceof On?this._appendValueReducedFieldWidthMaxWidthBaseDate.apply(this,arguments):this._appendValueReducedFieldWidthMaxWidthBaseValue.apply(this,arguments)},u._appendValueReducedFieldWidthMaxWidthBaseValue=function(i,n,o,f){w(i,"field");var E=new sr(i,n,o,f,null);return this._appendValuePrinterParser(E),this},u._appendValueReducedFieldWidthMaxWidthBaseDate=function(i,n,o,f){w(i,"field"),w(f,"baseDate"),k(f,On,"baseDate");var E=new sr(i,n,o,0,f);return this._appendValuePrinterParser(E),this},u._appendValuePrinterParser=function(i){if(F(i!=null),this._active._valueParserIndex>=0&&this._active._printerParsers[this._active._valueParserIndex]instanceof bn){var n=this._active._valueParserIndex,o=this._active._printerParsers[n];i.minWidth()===i.maxWidth()&&i.signStyle()===ie.NOT_NEGATIVE?(o=o.withSubsequentWidth(i.maxWidth()),this._appendInternal(i.withFixedWidth()),this._active._valueParserIndex=n):(o=o.withFixedWidth(),this._active._valueParserIndex=this._appendInternal(i)),this._active._printerParsers[n]=o}else this._active._valueParserIndex=this._appendInternal(i);return this},u.appendFraction=function(i,n,o,f){return this._appendInternal(new tf(i,n,o,f)),this},u.appendInstant=function(i){if(i===void 0&&(i=-2),i<-2||i>9)throw new h("Invalid fractional digits: "+i);return this._appendInternal(new Dg(i)),this},u.appendOffsetId=function(){return this._appendInternal(Rt.INSTANCE_ID),this},u.appendOffset=function(i,n){return this._appendInternalPrinterParser(new Rt(n,i)),this},u.appendZoneId=function(){return this._appendInternal(new nf(P.zoneId(),"ZoneId()")),this},u.appendPattern=function(i){return w(i,"pattern"),this._parsePattern(i),this},u.appendZoneText=function(){throw new h("Pattern using (localized) text not implemented, use @js-joda/locale plugin!")},u.appendText=function(){throw new h("Pattern using (localized) text not implemented, use @js-joda/locale plugin!")},u.appendLocalizedOffset=function(){throw new h("Pattern using (localized) text not implemented, use @js-joda/locale plugin!")},u.appendWeekField=function(){throw new h("Pattern using (localized) text not implemented, use @js-joda/locale plugin!")},u._parsePattern=function(i){for(var n={G:d.ERA,y:d.YEAR_OF_ERA,u:d.YEAR,Q:ot.QUARTER_OF_YEAR,q:ot.QUARTER_OF_YEAR,M:d.MONTH_OF_YEAR,L:d.MONTH_OF_YEAR,D:d.DAY_OF_YEAR,d:d.DAY_OF_MONTH,F:d.ALIGNED_DAY_OF_WEEK_IN_MONTH,E:d.DAY_OF_WEEK,c:d.DAY_OF_WEEK,e:d.DAY_OF_WEEK,a:d.AMPM_OF_DAY,H:d.HOUR_OF_DAY,k:d.CLOCK_HOUR_OF_DAY,K:d.HOUR_OF_AMPM,h:d.CLOCK_HOUR_OF_AMPM,m:d.MINUTE_OF_HOUR,s:d.SECOND_OF_MINUTE,S:d.NANO_OF_SECOND,A:d.MILLI_OF_DAY,n:d.NANO_OF_SECOND,N:d.NANO_OF_DAY},o=0;o<i.length;o++){var f=i.charAt(o);if(f>="A"&&f<="Z"||f>="a"&&f<="z"){for(var E=o++;o<i.length&&i.charAt(o)===f;o++);var T=o-E;if(f==="p"){var I=0;if(o<i.length&&(f=i.charAt(o),f>="A"&&f<="Z"||f>="a"&&f<="z")){for(I=T,E=o++;o<i.length&&i.charAt(o)===f;o++);T=o-E}if(I===0)throw new h("Pad letter 'p' must be followed by valid pad pattern: "+i);this.padNext(I)}var C=n[f];if(C!=null)this._parseField(f,T,C);else if(f==="z"){if(T>4)throw new h("Too many pattern letters: "+f);T===4?this.appendZoneText(se.FULL):this.appendZoneText(se.SHORT)}else if(f==="V"){if(T!==2)throw new h("Pattern letter count must be 2: "+f);this.appendZoneId()}else if(f==="Z")if(T<4)this.appendOffset("+HHMM","+0000");else if(T===4)this.appendLocalizedOffset(se.FULL);else if(T===5)this.appendOffset("+HH:MM:ss","Z");else throw new h("Too many pattern letters: "+f);else if(f==="O")if(T===1)this.appendLocalizedOffset(se.SHORT);else if(T===4)this.appendLocalizedOffset(se.FULL);else throw new h("Pattern letter count must be 1 or 4: "+f);else if(f==="X"){if(T>5)throw new h("Too many pattern letters: "+f);this.appendOffset(Rt.PATTERNS[T+(T===1?0:1)],"Z")}else if(f==="x"){if(T>5)throw new h("Too many pattern letters: "+f);var U=T===1?"+00":T%2===0?"+0000":"+00:00";this.appendOffset(Rt.PATTERNS[T+(T===1?0:1)],U)}else if(f==="W"){if(T>1)throw new h("Too many pattern letters: "+f);this.appendWeekField("W",T)}else if(f==="w"){if(T>2)throw new h("Too many pattern letters: "+f);this.appendWeekField("w",T)}else if(f==="Y")this.appendWeekField("Y",T);else throw new h("Unknown pattern letter: "+f);o--}else if(f==="'"){for(var q=o++;o<i.length;o++)if(i.charAt(o)==="'")if(o+1<i.length&&i.charAt(o+1)==="'")o++;else break;if(o>=i.length)throw new h("Pattern ends with an incomplete string literal: "+i);var j=i.substring(q+1,o);j.length===0?this.appendLiteral("'"):this.appendLiteral(j.replace("''","'"))}else if(f==="[")this.optionalStart();else if(f==="]"){if(this._active._parent===null)throw new h("Pattern invalid as it contains ] without previous [");this.optionalEnd()}else{if(f==="{"||f==="}"||f==="#")throw new h("Pattern includes reserved character: '"+f+"'");this.appendLiteral(f)}}},u._parseField=function(i,n,o){switch(i){case"u":case"y":n===2?this.appendValueReduced(o,2,2,sr.BASE_DATE):n<4?this.appendValue(o,n,Ht,ie.NORMAL):this.appendValue(o,n,Ht,ie.EXCEEDS_PAD);break;case"M":case"Q":switch(n){case 1:this.appendValue(o);break;case 2:this.appendValue(o,2);break;case 3:this.appendText(o,se.SHORT);break;case 4:this.appendText(o,se.FULL);break;case 5:this.appendText(o,se.NARROW);break;default:throw new h("Too many pattern letters: "+i)}break;case"L":case"q":switch(n){case 1:this.appendValue(o);break;case 2:this.appendValue(o,2);break;case 3:this.appendText(o,se.SHORT_STANDALONE);break;case 4:this.appendText(o,se.FULL_STANDALONE);break;case 5:this.appendText(o,se.NARROW_STANDALONE);break;default:throw new h("Too many pattern letters: "+i)}break;case"e":switch(n){case 1:case 2:this.appendWeekField("e",n);break;case 3:this.appendText(o,se.SHORT);break;case 4:this.appendText(o,se.FULL);break;case 5:this.appendText(o,se.NARROW);break;default:throw new h("Too many pattern letters: "+i)}break;case"c":switch(n){case 1:this.appendWeekField("c",n);break;case 2:throw new h("Invalid number of pattern letters: "+i);case 3:this.appendText(o,se.SHORT_STANDALONE);break;case 4:this.appendText(o,se.FULL_STANDALONE);break;case 5:this.appendText(o,se.NARROW_STANDALONE);break;default:throw new h("Too many pattern letters: "+i)}break;case"a":if(n===1)this.appendText(o,se.SHORT);else throw new h("Too many pattern letters: "+i);break;case"E":case"G":switch(n){case 1:case 2:case 3:this.appendText(o,se.SHORT);break;case 4:this.appendText(o,se.FULL);break;case 5:this.appendText(o,se.NARROW);break;default:throw new h("Too many pattern letters: "+i)}break;case"S":this.appendFraction(d.NANO_OF_SECOND,n,n,!1);break;case"F":if(n===1)this.appendValue(o);else throw new h("Too many pattern letters: "+i);break;case"d":case"h":case"H":case"k":case"K":case"m":case"s":if(n===1)this.appendValue(o);else if(n===2)this.appendValue(o,n);else throw new h("Too many pattern letters: "+i);break;case"D":if(n===1)this.appendValue(o);else if(n<=3)this.appendValue(o,n);else throw new h("Too many pattern letters: "+i);break;default:n===1?this.appendValue(o):this.appendValue(o,n);break}},u.padNext=function(){return arguments.length===1?this._padNext1.apply(this,arguments):this._padNext2.apply(this,arguments)},u._padNext1=function(i){return this._padNext2(i," ")},u._padNext2=function(i,n){if(i<1)throw new h("The pad width must be at least one but was "+i);return this._active._padNextWidth=i,this._active._padNextChar=n,this._active._valueParserIndex=-1,this},u.optionalStart=function(){return this._active._valueParserIndex=-1,this._active=_._of(this._active,!0),this},u.optionalEnd=function(){if(this._active._parent==null)throw new m("Cannot call optionalEnd() as there was no previous call to optionalStart()");if(this._active._printerParsers.length>0){var i=new Xs(this._active._printerParsers,this._active._optional);this._active=this._active._parent,this._appendInternal(i)}else this._active=this._active._parent;return this},u._appendInternal=function(i){return F(i!=null),this._active._padNextWidth>0&&(i!=null&&(i=new Qs(i,this._active._padNextWidth,this._active._padNextChar)),this._active._padNextWidth=0,this._active._padNextChar=0),this._active._printerParsers.push(i),this._active._valueParserIndex=-1,this._active._printerParsers.length-1},u.appendLiteral=function(i){return F(i!=null),i.length>0&&(i.length===1?this._appendInternalPrinterParser(new ef(i.charAt(0))):this._appendInternalPrinterParser(new ea(i))),this},u._appendInternalPrinterParser=function(i){return F(i!=null),this._active._padNextWidth>0&&(i!=null&&(i=new Qs(i,this._active._padNextWidth,this._active._padNextChar)),this._active._padNextWidth=0,this._active._padNextChar=0),this._active._printerParsers.push(i),this._active._valueParserIndex=-1,this._active._printerParsers.length-1},u.append=function(i){return w(i,"formatter"),this._appendInternal(i._toPrinterParser(!1)),this},u.toFormatter=function(i){for(i===void 0&&(i=$.SMART);this._active._parent!=null;)this.optionalEnd();var n=new Xs(this._printerParsers,!1);return new Q(n,null,or.STANDARD,i,null,null,null)},_}(),Rn=146097*25*86400,ur=(146097*5-(30*365+7))*86400,Dg=function(){function _(s){this.fractionalDigits=s}var u=_.prototype;return u.print=function(i,n){var o=i.getValue(d.INSTANT_SECONDS),f=0;if(i.temporal().isSupported(d.NANO_OF_SECOND)&&(f=i.temporal().getLong(d.NANO_OF_SECOND)),o==null)return!1;var E=o,T=d.NANO_OF_SECOND.checkValidIntValue(f);if(E>=-ur){var I=E-Rn+ur,C=p.floorDiv(I,Rn)+1,U=p.floorMod(I,Rn),q=le.ofEpochSecond(U-ur,0,Z.UTC);C>0&&n.append("+").append(C),n.append(q.toString()),q.second()===0&&n.append(":00")}else{var j=E+ur,z=p.intDiv(j,Rn),fe=p.intMod(j,Rn),Ne=le.ofEpochSecond(fe-ur,0,Z.UTC),we=n.length();n.append(Ne.toString()),Ne.second()===0&&n.append(":00"),z<0&&(Ne.year()===-1e4?n.replace(we,we+2,""+(z-1)):fe===0?n.insert(we,z):n.insert(we+1,Math.abs(z)))}if(this.fractionalDigits===-2)T!==0&&(n.append("."),p.intMod(T,1e6)===0?n.append((""+(p.intDiv(T,1e6)+1e3)).substring(1)):p.intMod(T,1e3)===0?n.append((""+(p.intDiv(T,1e3)+1e6)).substring(1)):n.append((""+(T+1e9)).substring(1)));else if(this.fractionalDigits>0||this.fractionalDigits===-1&&T>0){n.append(".");for(var Te=1e8,Ke=0;this.fractionalDigits===-1&&T>0||Ke<this.fractionalDigits;Ke++){var wt=p.intDiv(T,Te);n.append(wt),T=T-wt*Te,Te=p.intDiv(Te,10)}}return n.append("Z"),!0},u.parse=function(i,n,o){var f=i.copy(),E=this.fractionalDigits<0?0:this.fractionalDigits,T=this.fractionalDigits<0?9:this.fractionalDigits,I=new ce().append(Q.ISO_LOCAL_DATE).appendLiteral("T").appendValue(d.HOUR_OF_DAY,2).appendLiteral(":").appendValue(d.MINUTE_OF_HOUR,2).appendLiteral(":").appendValue(d.SECOND_OF_MINUTE,2).appendFraction(d.NANO_OF_SECOND,E,T,!0).appendLiteral("Z").toFormatter()._toPrinterParser(!1),C=I.parse(f,n,o);if(C<0)return C;var U=f.getParsed(d.YEAR),q=f.getParsed(d.MONTH_OF_YEAR),j=f.getParsed(d.DAY_OF_MONTH),z=f.getParsed(d.HOUR_OF_DAY),fe=f.getParsed(d.MINUTE_OF_HOUR),Ne=f.getParsed(d.SECOND_OF_MINUTE),we=f.getParsed(d.NANO_OF_SECOND),Te=Ne??0,Ke=we??0,wt=p.intMod(U,1e4),Kr=0;z===24&&fe===0&&Te===0&&Ke===0?(z=0,Kr=1):z===23&&fe===59&&Te===60&&(i.setParsedLeapSecond(),Te=59);var fr;try{var Zr=le.of(wt,q,j,z,fe,Te,0).plusDays(Kr);fr=Zr.toEpochSecond(Z.UTC),fr+=p.safeMultiply(p.intDiv(U,1e4),Rn)}catch{return~o}var ln=C;return ln=i.setParsedField(d.INSTANT_SECONDS,fr,o,ln),i.setParsedField(d.NANO_OF_SECOND,Ke,o,ln)},u.toString=function(){return"Instant()"},_}(),bg=function(){function _(s,i){this._field=s,this._value=i}var u=_.prototype;return u.print=function(){return!0},u.parse=function(i,n,o){return i.getParsed(this._field)==null&&i.setParsedField(this._field,this._value,o,o),o},_}();function Rg(){sr.BASE_DATE=H.of(2e3,1,1),ce.CompositePrinterParser=Xs,ce.PadPrinterParserDecorator=Qs,ce.SettingsParser=tt,ce.CharLiteralPrinterParser=ea,ce.StringLiteralPrinterParser=ea,ce.CharLiteralPrinterParser=ef,ce.NumberPrinterParser=bn,ce.ReducedPrinterParser=sr,ce.FractionPrinterParser=tf,ce.OffsetIdPrinterParser=Rt,ce.ZoneIdPrinterParser=nf}var of=function(){function _(){this._str=""}var u=_.prototype;return u.append=function(i){return this._str+=i,this},u.appendChar=function(i){return this._str+=i[0],this},u.insert=function(i,n){return this._str=this._str.slice(0,i)+n+this._str.slice(i),this},u.replace=function(i,n,o){return this._str=this._str.slice(0,i)+o+this._str.slice(n),this},u.length=function(){return this._str.length},u.setLength=function(i){return this._str=this._str.slice(0,i),this},u.toString=function(){return this._str},_}();var Q=function(){_.parsedExcessDays=function(){return _.PARSED_EXCESS_DAYS},_.parsedLeapSecond=function(){return _.PARSED_LEAP_SECOND},_.ofPattern=function(i){return new ce().appendPattern(i).toFormatter()};function _(s,i,n,o,f,E,T){E===void 0&&(E=ue.INSTANCE),F(s!=null),F(n!=null),F(o!=null),this._printerParser=s,this._locale=i,this._decimalStyle=n,this._resolverStyle=o,this._resolverFields=f,this._chrono=E,this._zone=T}var u=_.prototype;return u.locale=function(){return this._locale},u.decimalStyle=function(){return this._decimalStyle},u.chronology=function(){return this._chrono},u.withChronology=function(i){return this._chrono!=null&&this._chrono.equals(i)?this:new _(this._printerParser,this._locale,this._decimalStyle,this._resolverStyle,this._resolverFields,i,this._zone)},u.withLocale=function(){return this},u.withResolverStyle=function(i){return w(i,"resolverStyle"),i.equals(this._resolverStyle)?this:new _(this._printerParser,this._locale,this._decimalStyle,i,this._resolverFields,this._chrono,this._zone)},u.format=function(i){var n=new of(32);return this._formatTo(i,n),n.toString()},u._formatTo=function(i,n){w(i,"temporal"),w(n,"appendable");var o=new Jc(i,this);this._printerParser.print(o,n)},u.parse=function(i,n){return arguments.length===1?this.parse1(i):this.parse2(i,n)},u.parse1=function(i){w(i,"text");try{return this._parseToBuilder(i,null).resolve(this._resolverStyle,this._resolverFields)}catch(n){throw n instanceof a?n:this._createError(i,n)}},u.parse2=function(i,n){w(i,"text"),w(n,"type");try{var o=this._parseToBuilder(i,null).resolve(this._resolverStyle,this._resolverFields);return o.build(n)}catch(f){throw f instanceof a?f:this._createError(i,f)}},u._createError=function(i,n){var o="";return i.length>64?o=i.substring(0,64)+"...":o=i,new a("Text '"+o+"' could not be parsed: "+n.message,i,0,n)},u._parseToBuilder=function(i,n){var o=n??new Ks(0),f=this._parseUnresolved0(i,o);if(f==null||o.getErrorIndex()>=0||n==null&&o.getIndex()<i.length){var E="";throw i.length>64?E=i.substr(0,64).toString()+"...":E=i,o.getErrorIndex()>=0?new a("Text '"+E+"' could not be parsed at index "+o.getErrorIndex(),i,o.getErrorIndex()):new a("Text '"+E+"' could not be parsed, unparsed text found at index "+o.getIndex(),i,o.getIndex())}return f.toBuilder()},u.parseUnresolved=function(i,n){return this._parseUnresolved0(i,n)},u._parseUnresolved0=function(i,n){F(i!=null,"text",g),F(n!=null,"position",g);var o=new $c(this),f=n.getIndex();return f=this._printerParser.parse(o,i,f),f<0?(n.setErrorIndex(~f),null):(n.setIndex(f),o.toParsed())},u._toPrinterParser=function(i){return this._printerParser.withOptional(i)},u.toString=function(){var i=this._printerParser.toString();return i.indexOf("[")===0?i:i.substring(1,i.length-1)},_}();function Lg(){Q.ISO_LOCAL_DATE=new ce().appendValue(d.YEAR,4,10,ie.EXCEEDS_PAD).appendLiteral("-").appendValue(d.MONTH_OF_YEAR,2).appendLiteral("-").appendValue(d.DAY_OF_MONTH,2).toFormatter($.STRICT).withChronology(ue.INSTANCE),Q.ISO_LOCAL_TIME=new ce().appendValue(d.HOUR_OF_DAY,2).appendLiteral(":").appendValue(d.MINUTE_OF_HOUR,2).optionalStart().appendLiteral(":").appendValue(d.SECOND_OF_MINUTE,2).optionalStart().appendFraction(d.NANO_OF_SECOND,0,9,!0).toFormatter($.STRICT),Q.ISO_LOCAL_DATE_TIME=new ce().parseCaseInsensitive().append(Q.ISO_LOCAL_DATE).appendLiteral("T").append(Q.ISO_LOCAL_TIME).toFormatter($.STRICT).withChronology(ue.INSTANCE),Q.ISO_INSTANT=new ce().parseCaseInsensitive().appendInstant().toFormatter($.STRICT),Q.ISO_OFFSET_DATE_TIME=new ce().parseCaseInsensitive().append(Q.ISO_LOCAL_DATE_TIME).appendOffsetId().toFormatter($.STRICT).withChronology(ue.INSTANCE),Q.ISO_ZONED_DATE_TIME=new ce().append(Q.ISO_OFFSET_DATE_TIME).optionalStart().appendLiteral("[").parseCaseSensitive().appendZoneId().appendLiteral("]").toFormatter($.STRICT).withChronology(ue.INSTANCE),Q.BASIC_ISO_DATE=new ce().appendValue(d.YEAR,4,10,ie.EXCEEDS_PAD).appendValue(d.MONTH_OF_YEAR,2).appendValue(d.DAY_OF_MONTH,2).toFormatter($.STRICT).withChronology(ue.INSTANCE),Q.ISO_OFFSET_DATE=new ce().parseCaseInsensitive().append(Q.ISO_LOCAL_DATE).appendOffsetId().toFormatter($.STRICT).withChronology(ue.INSTANCE),Q.ISO_OFFSET_TIME=new ce().parseCaseInsensitive().append(Q.ISO_LOCAL_TIME).appendOffsetId().toFormatter($.STRICT).withChronology(ue.INSTANCE),Q.ISO_ORDINAL_DATE=new ce().appendValue(d.YEAR,4,10,ie.EXCEEDS_PAD).appendLiteral("-").appendValue(d.DAY_OF_YEAR).toFormatter($.STRICT),Q.ISO_WEEK_DATE=new ce().appendValue(d.YEAR,4,10,ie.EXCEEDS_PAD).appendLiteral("-W").appendValue(d.ALIGNED_WEEK_OF_YEAR).appendLiteral("-").appendValue(d.DAY_OF_WEEK).toFormatter($.STRICT),Q.ISO_DATE=new ce().parseCaseInsensitive().append(Q.ISO_LOCAL_DATE).optionalStart().appendOffsetId().optionalEnd().toFormatter($.STRICT).withChronology(ue.INSTANCE),Q.ISO_TIME=new ce().parseCaseInsensitive().append(Q.ISO_LOCAL_TIME).optionalStart().appendOffsetId().optionalEnd().toFormatter($.STRICT),Q.ISO_DATE_TIME=new ce().append(Q.ISO_LOCAL_DATE_TIME).optionalStart().appendOffsetId().optionalEnd().toFormatter($.STRICT).withChronology(ue.INSTANCE),Q.PARSED_EXCESS_DAYS=Le("PARSED_EXCESS_DAYS",function(_){return _ instanceof Hr?_.excessDays:It.ZERO}),Q.PARSED_LEAP_SECOND=Le("PARSED_LEAP_SECOND",function(_){return _ instanceof Hr?_.leapSecond:!1})}var lr=function(_){O(u,_),u.now=function(n){return arguments.length===0?u.now0():arguments.length===1&&n instanceof ae?u.nowZoneId(n):u.nowClock(n)},u.now0=function(){return this.nowClock(he.systemDefaultZone())},u.nowZoneId=function(n){return w(n,"zone"),this.nowClock(he.system(n))},u.nowClock=function(n){w(n,"clock");var o=H.now(n);return u.of(o.month(),o.dayOfMonth())},u.of=function(n,o){return arguments.length===2&&n instanceof K?u.ofMonthNumber(n,o):u.ofNumberNumber(n,o)},u.ofMonthNumber=function(n,o){if(w(n,"month"),d.DAY_OF_MONTH.checkValidValue(o),o>n.maxLength())throw new r("Illegal value for DayOfMonth field, value "+o+" is not valid for month "+n.toString());return new u(n.value(),o)},u.ofNumberNumber=function(n,o){return w(n,"month"),w(o,"dayOfMonth"),u.of(K.of(n),o)},u.from=function(n){if(w(n,"temporal"),k(n,Vt,"temporal"),n instanceof u)return n;try{return u.of(n.get(d.MONTH_OF_YEAR),n.get(d.DAY_OF_MONTH))}catch{throw new r("Unable to obtain MonthDay from TemporalAccessor: "+n+", type "+(n&&n.constructor!=null?n.constructor.name:""))}},u.parse=function(n,o){return arguments.length===1?u.parseString(n):u.parseStringFormatter(n,o)},u.parseString=function(n){return u.parseStringFormatter(n,sf)},u.parseStringFormatter=function(n,o){return w(n,"text"),w(o,"formatter"),k(o,Q,"formatter"),o.parse(n,u.FROM)};function u(i,n){var o;return o=_.call(this)||this,o._month=p.safeToInt(i),o._day=p.safeToInt(n),o}var s=u.prototype;return s.monthValue=function(){return this._month},s.month=function(){return K.of(this._month)},s.dayOfMonth=function(){return this._day},s.isSupported=function(n){return n instanceof d?n===d.MONTH_OF_YEAR||n===d.DAY_OF_MONTH:n!=null&&n.isSupportedBy(this)},s.range=function(n){return n===d.MONTH_OF_YEAR?n.range():n===d.DAY_OF_MONTH?X.of(1,this.month().minLength(),this.month().maxLength()):_.prototype.range.call(this,n)},s.get=function(n){return this.range(n).checkValidIntValue(this.getLong(n),n)},s.getLong=function(n){if(w(n,"field"),n instanceof d){switch(n){case d.DAY_OF_MONTH:return this._day;case d.MONTH_OF_YEAR:return this._month}throw new l("Unsupported field: "+n)}return n.getFrom(this)},s.isValidYear=function(n){return!(this._day===29&&this._month===2&&st.isLeap(n)===!1)},s.withMonth=function(n){return this.with(K.of(n))},s.with=function(n){if(w(n,"month"),n.value()===this._month)return this;var o=Math.min(this._day,n.maxLength());return new u(n.value(),o)},s.withDayOfMonth=function(n){return n===this._day?this:u.of(this._month,n)},s.query=function(n){return w(n,"query"),k(n,vn,"query"),n===P.chronology()?ue.INSTANCE:_.prototype.query.call(this,n)},s.adjustInto=function(n){return w(n,"temporal"),n=n.with(d.MONTH_OF_YEAR,this._month),n.with(d.DAY_OF_MONTH,Math.min(n.range(d.DAY_OF_MONTH).maximum(),this._day))},s.atYear=function(n){return H.of(n,this._month,this.isValidYear(n)?this._day:28)},s.compareTo=function(n){w(n,"other"),k(n,u,"other");var o=this._month-n.monthValue();return o===0&&(o=this._day-n.dayOfMonth()),o},s.isAfter=function(n){return w(n,"other"),k(n,u,"other"),this.compareTo(n)>0},s.isBefore=function(n){return w(n,"other"),k(n,u,"other"),this.compareTo(n)<0},s.equals=function(n){if(this===n)return!0;if(n instanceof u){var o=n;return this.monthValue()===o.monthValue()&&this.dayOfMonth()===o.dayOfMonth()}return!1},s.toString=function(){return"--"+(this._month<10?"0":"")+this._month+(this._day<10?"-0":"-")+this._day},s.toJSON=function(){return this.toString()},s.format=function(n){return w(n,"formatter"),k(n,Q,"formatter"),n.format(this)},u}(Vt),sf;function Cg(){sf=new ce().appendLiteral("--").appendValue(d.MONTH_OF_YEAR,2).appendLiteral("-").appendValue(d.DAY_OF_MONTH,2).toFormatter(),lr.FROM=Le("MonthDay.FROM",function(_){return lr.from(_)})}var Ln=function(_){O(u,_),u.now=function(n){return arguments.length===0?u.now0():arguments.length===1&&n instanceof ae?u.nowZoneId(n):u.nowClock(n)},u.now0=function(){return u.nowClock(he.systemDefaultZone())},u.nowZoneId=function(n){return u.nowClock(he.system(n))},u.nowClock=function(n){var o=H.now(n);return u.of(o.year(),o.month())},u.of=function(n,o){return arguments.length===2&&o instanceof K?u.ofNumberMonth(n,o):u.ofNumberNumber(n,o)},u.ofNumberMonth=function(n,o){return w(o,"month"),k(o,K,"month"),u.ofNumberNumber(n,o.value())},u.ofNumberNumber=function(n,o){return w(n,"year"),w(o,"month"),d.YEAR.checkValidValue(n),d.MONTH_OF_YEAR.checkValidValue(o),new u(n,o)},u.from=function(n){if(w(n,"temporal"),n instanceof u)return n;try{return u.of(n.get(d.YEAR),n.get(d.MONTH_OF_YEAR))}catch{throw new r("Unable to obtain YearMonth from TemporalAccessor: "+n+", type "+(n&&n.constructor!=null?n.constructor.name:""))}},u.parse=function(n,o){return arguments.length===1?u.parseString(n):u.parseStringFormatter(n,o)},u.parseString=function(n){return u.parseStringFormatter(n,na)},u.parseStringFormatter=function(n,o){return w(o,"formatter"),o.parse(n,u.FROM)};function u(i,n){var o;return o=_.call(this)||this,o._year=p.safeToInt(i),o._month=p.safeToInt(n),o}var s=u.prototype;return s.isSupported=function(n){return arguments.length===1&&n instanceof _t?this.isSupportedField(n):this.isSupportedUnit(n)},s.isSupportedField=function(n){return n instanceof d?n===d.YEAR||n===d.MONTH_OF_YEAR||n===d.PROLEPTIC_MONTH||n===d.YEAR_OF_ERA||n===d.ERA:n!=null&&n.isSupportedBy(this)},s.isSupportedUnit=function(n){return n instanceof y?n===y.MONTHS||n===y.YEARS||n===y.DECADES||n===y.CENTURIES||n===y.MILLENNIA||n===y.ERAS:n!=null&&n.isSupportedBy(this)},s.range=function(n){return n===d.YEAR_OF_ERA?this.year()<=0?X.of(1,st.MAX_VALUE+1):X.of(1,st.MAX_VALUE):_.prototype.range.call(this,n)},s.get=function(n){return w(n,"field"),k(n,_t,"field"),this.range(n).checkValidIntValue(this.getLong(n),n)},s.getLong=function(n){if(w(n,"field"),k(n,_t,"field"),n instanceof d){switch(n){case d.MONTH_OF_YEAR:return this._month;case d.PROLEPTIC_MONTH:return this._getProlepticMonth();case d.YEAR_OF_ERA:return this._year<1?1-this._year:this._year;case d.YEAR:return this._year;case d.ERA:return this._year<1?0:1}throw new l("Unsupported field: "+n)}return n.getFrom(this)},s._getProlepticMonth=function(){return p.safeAdd(p.safeMultiply(this._year,12),this._month-1)},s.year=function(){return this._year},s.monthValue=function(){return this._month},s.month=function(){return K.of(this._month)},s.isLeapYear=function(){return ue.isLeapYear(this._year)},s.isValidDay=function(n){return n>=1&&n<=this.lengthOfMonth()},s.lengthOfMonth=function(){return this.month().length(this.isLeapYear())},s.lengthOfYear=function(){return this.isLeapYear()?366:365},s.with=function(n,o){return arguments.length===1?this._withAdjuster(n):this._withField(n,o)},s._withField=function(n,o){if(w(n,"field"),k(n,_t,"field"),n instanceof d){var f=n;switch(f.checkValidValue(o),f){case d.MONTH_OF_YEAR:return this.withMonth(o);case d.PROLEPTIC_MONTH:return this.plusMonths(o-this.getLong(d.PROLEPTIC_MONTH));case d.YEAR_OF_ERA:return this.withYear(this._year<1?1-o:o);case d.YEAR:return this.withYear(o);case d.ERA:return this.getLong(d.ERA)===o?this:this.withYear(1-this._year)}throw new l("Unsupported field: "+n)}return n.adjustInto(this,o)},s.withYear=function(n){return d.YEAR.checkValidValue(n),new u(n,this._month)},s.withMonth=function(n){return d.MONTH_OF_YEAR.checkValidValue(n),new u(this._year,n)},s._plusUnit=function(n,o){if(w(o,"unit"),k(o,G,"unit"),o instanceof y){switch(o){case y.MONTHS:return this.plusMonths(n);case y.YEARS:return this.plusYears(n);case y.DECADES:return this.plusYears(p.safeMultiply(n,10));case y.CENTURIES:return this.plusYears(p.safeMultiply(n,100));case y.MILLENNIA:return this.plusYears(p.safeMultiply(n,1e3));case y.ERAS:return this.with(d.ERA,p.safeAdd(this.getLong(d.ERA),n))}throw new l("Unsupported unit: "+o)}return o.addTo(this,n)},s.plusYears=function(n){if(n===0)return this;var o=d.YEAR.checkValidIntValue(this._year+n);return this.withYear(o)},s.plusMonths=function(n){if(n===0)return this;var o=this._year*12+(this._month-1),f=o+n,E=d.YEAR.checkValidIntValue(p.floorDiv(f,12)),T=p.floorMod(f,12)+1;return new u(E,T)},s.minusYears=function(n){return n===p.MIN_SAFE_INTEGER?this.plusYears(p.MIN_SAFE_INTEGER).plusYears(1):this.plusYears(-n)},s.minusMonths=function(n){return n===p.MIN_SAFE_INTEGER?this.plusMonths(Math.MAX_SAFE_INTEGER).plusMonths(1):this.plusMonths(-n)},s.query=function(n){return w(n,"query"),k(n,vn,"query"),n===P.chronology()?ue.INSTANCE:n===P.precision()?y.MONTHS:n===P.localDate()||n===P.localTime()||n===P.zone()||n===P.zoneId()||n===P.offset()?null:_.prototype.query.call(this,n)},s.adjustInto=function(n){return w(n,"temporal"),k(n,ze,"temporal"),n.with(d.PROLEPTIC_MONTH,this._getProlepticMonth())},s.until=function(n,o){w(n,"endExclusive"),w(o,"unit"),k(n,ze,"endExclusive"),k(o,G,"unit");var f=u.from(n);if(o instanceof y){var E=f._getProlepticMonth()-this._getProlepticMonth();switch(o){case y.MONTHS:return E;case y.YEARS:return p.intDiv(E,12);case y.DECADES:return p.intDiv(E,120);case y.CENTURIES:return p.intDiv(E,1200);case y.MILLENNIA:return p.intDiv(E,12e3);case y.ERAS:return f.getLong(d.ERA)-this.getLong(d.ERA)}throw new l("Unsupported unit: "+o)}return o.between(this,f)},s.atDay=function(n){return w(n,"dayOfMonth"),H.of(this._year,this._month,n)},s.atEndOfMonth=function(){return H.of(this._year,this._month,this.lengthOfMonth())},s.compareTo=function(n){w(n,"other"),k(n,u,"other");var o=this._year-n.year();return o===0&&(o=this._month-n.monthValue()),o},s.isAfter=function(n){return this.compareTo(n)>0},s.isBefore=function(n){return this.compareTo(n)<0},s.equals=function(n){if(this===n)return!0;if(n instanceof u){var o=n;return this.year()===o.year()&&this.monthValue()===o.monthValue()}return!1},s.toString=function(){return na.format(this)},s.toJSON=function(){return this.toString()},s.format=function(n){return w(n,"formatter"),n.format(this)},u}(ze),na;function Mg(){na=new ce().appendValue(d.YEAR,4,10,ie.EXCEEDS_PAD).appendLiteral("-").appendValue(d.MONTH_OF_YEAR,2).toFormatter(),Ln.FROM=Le("YearMonth.FROM",function(_){return Ln.from(_)})}var st=function(_){O(u,_);function u(i){var n;return n=_.call(this)||this,n._year=p.safeToInt(i),n}var s=u.prototype;return s.value=function(){return this._year},u.now=function(n){return n===void 0&&(n=void 0),n===void 0?u.now0():n instanceof ae?u.nowZoneId(n):u.nowClock(n)},u.now0=function(){return u.nowClock(he.systemDefaultZone())},u.nowZoneId=function(n){return w(n,"zone"),k(n,ae,"zone"),u.nowClock(he.system(n))},u.nowClock=function(n){w(n,"clock"),k(n,he,"clock");var o=H.now(n);return u.of(o.year())},u.of=function(n){return w(n,"isoYear"),d.YEAR.checkValidValue(n),new u(n)},u.from=function(n){if(w(n,"temporal"),k(n,Vt,"temporal"),n instanceof u)return n;try{return u.of(n.get(d.YEAR))}catch{throw new r("Unable to obtain Year from TemporalAccessor: "+n+", type "+(n&&n.constructor!=null?n.constructor.name:""))}},u.parse=function(n,o){return arguments.length<=1?u.parseText(n):u.parseTextFormatter(n,o)},u.parseText=function(n){return w(n,"text"),u.parse(n,ra)},u.parseTextFormatter=function(n,o){return o===void 0&&(o=ra),w(n,"text"),w(o,"formatter"),k(o,Q,"formatter"),o.parse(n,u.FROM)},u.isLeap=function(n){return p.intMod(n,4)===0&&(p.intMod(n,100)!==0||p.intMod(n,400)===0)},s.isSupported=function(n){return arguments.length===1&&n instanceof _t?this.isSupportedField(n):this.isSupportedUnit(n)},s.isSupportedField=function(n){return n instanceof d?n===d.YEAR||n===d.YEAR_OF_ERA||n===d.ERA:n!=null&&n.isSupportedBy(this)},s.isSupportedUnit=function(n){return n instanceof y?n===y.YEARS||n===y.DECADES||n===y.CENTURIES||n===y.MILLENNIA||n===y.ERAS:n!=null&&n.isSupportedBy(this)},s.range=function(n){if(this.isSupported(n))return n.range();if(n instanceof d)throw new l("Unsupported field: "+n);return _.prototype.range.call(this,n)},s.get=function(n){return this.range(n).checkValidIntValue(this.getLong(n),n)},s.getLong=function(n){if(w(n,"field"),n instanceof d){switch(n){case d.YEAR_OF_ERA:return this._year<1?1-this._year:this._year;case d.YEAR:return this._year;case d.ERA:return this._year<1?0:1}throw new l("Unsupported field: "+n)}return n.getFrom(this)},s.isLeap=function(){return u.isLeap(this._year)},s._withField=function(n,o){if(w(n,"field"),k(n,_t,"field"),n instanceof d){switch(n.checkValidValue(o),n){case d.YEAR_OF_ERA:return u.of(this._year<1?1-o:o);case d.YEAR:return u.of(o);case d.ERA:return this.getLong(d.ERA)===o?this:u.of(1-this._year)}throw new l("Unsupported field: "+n)}return n.adjustInto(this,o)},s._plusUnit=function(n,o){if(w(n,"amountToAdd"),w(o,"unit"),k(o,G,"unit"),o instanceof y){switch(o){case y.YEARS:return this.plusYears(n);case y.DECADES:return this.plusYears(p.safeMultiply(n,10));case y.CENTURIES:return this.plusYears(p.safeMultiply(n,100));case y.MILLENNIA:return this.plusYears(p.safeMultiply(n,1e3));case y.ERAS:return this.with(d.ERA,p.safeAdd(this.getLong(d.ERA),n))}throw new l("Unsupported unit: "+o)}return o.addTo(this,n)},s.plusYears=function(n){return n===0?this:u.of(d.YEAR.checkValidIntValue(p.safeAdd(this._year,n)))},s.minusYears=function(n){return n===p.MIN_SAFE_INTEGER?this.plusYears(p.MAX_SAFE_INTEGER).plusYears(1):this.plusYears(-n)},s.adjustInto=function(n){return w(n,"temporal"),n.with(d.YEAR,this._year)},s.isValidMonthDay=function(n){return n!=null&&n.isValidYear(this._year)},s.length=function(){return this.isLeap()?366:365},s.atDay=function(n){return H.ofYearDay(this._year,n)},s.atMonth=function(n){return arguments.length===1&&n instanceof K?this.atMonthMonth(n):this.atMonthNumber(n)},s.atMonthMonth=function(n){return w(n,"month"),k(n,K,"month"),Ln.of(this._year,n)},s.atMonthNumber=function(n){return w(n,"month"),Ln.of(this._year,n)},s.atMonthDay=function(n){return w(n,"monthDay"),k(n,lr,"monthDay"),n.atYear(this._year)},s.query=function(n){return w(n,"query()"),k(n,vn,"query()"),n===P.chronology()?ue.INSTANCE:n===P.precision()?y.YEARS:n===P.localDate()||n===P.localTime()||n===P.zone()||n===P.zoneId()||n===P.offset()?null:_.prototype.query.call(this,n)},s.compareTo=function(n){return w(n,"other"),k(n,u,"other"),this._year-n._year},s.isAfter=function(n){return w(n,"other"),k(n,u,"other"),this._year>n._year},s.isBefore=function(n){return w(n,"other"),k(n,u,"other"),this._year<n._year},s.format=function(n){return w(n,"formatter"),k(n,Q,"formatter"),n.format(this)},s.equals=function(n){return this===n?!0:n instanceof u?this.value()===n.value():!1},s.toString=function(){return""+this._year},s.toJSON=function(){return this.toString()},s.until=function(n,o){var f=u.from(n);if(o instanceof y){var E=f.value()-this.value();switch(o){case y.YEARS:return E;case y.DECADES:return p.intDiv(E,10);case y.CENTURIES:return p.intDiv(E,100);case y.MILLENNIA:return p.intDiv(E,1e3);case y.ERAS:return f.getLong(d.ERA)-this.getLong(d.ERA)}throw new l("Unsupported unit: "+o)}return o.between(this,f)},u}(ze),ra;function Pg(){st.MIN_VALUE=Ce.MIN_VALUE,st.MAX_VALUE=Ce.MAX_VALUE,ra=new ce().appendValue(d.YEAR,4,10,ie.EXCEEDS_PAD).toFormatter(),st.FROM=Le("Year.FROM",function(_){return st.from(_)})}var cr=function(){function _(){}var u=_.prototype;return u.adjustInto=function(i){S("adjustInto")},_}(),ia=function(){function _(){}return _.firstDayOfMonth=function(){return Fe.FIRST_DAY_OF_MONTH},_.lastDayOfMonth=function(){return Fe.LAST_DAY_OF_MONTH},_.firstDayOfNextMonth=function(){return Fe.FIRST_DAY_OF_NEXT_MONTH},_.firstDayOfYear=function(){return Fe.FIRST_DAY_OF_YEAR},_.lastDayOfYear=function(){return Fe.LAST_DAY_OF_YEAR},_.firstDayOfNextYear=function(){return Fe.FIRST_DAY_OF_NEXT_YEAR},_.firstInMonth=function(s){return w(s,"dayOfWeek"),new oa(1,s)},_.lastInMonth=function(s){return w(s,"dayOfWeek"),new oa(-1,s)},_.dayOfWeekInMonth=function(s,i){return w(i,"dayOfWeek"),new oa(s,i)},_.next=function(s){return new Gr(2,s)},_.nextOrSame=function(s){return new Gr(0,s)},_.previous=function(s){return new Gr(3,s)},_.previousOrSame=function(s){return new Gr(1,s)},_}(),Fe=function(_){O(u,_);function u(i){var n;return n=_.call(this)||this,n._ordinal=i,n}var s=u.prototype;return s.adjustInto=function(n){switch(this._ordinal){case 0:return n.with(d.DAY_OF_MONTH,1);case 1:return n.with(d.DAY_OF_MONTH,n.range(d.DAY_OF_MONTH).maximum());case 2:return n.with(d.DAY_OF_MONTH,1).plus(1,y.MONTHS);case 3:return n.with(d.DAY_OF_YEAR,1);case 4:return n.with(d.DAY_OF_YEAR,n.range(d.DAY_OF_YEAR).maximum());case 5:return n.with(d.DAY_OF_YEAR,1).plus(1,y.YEARS)}throw new m("Unreachable")},u}(cr);Fe.FIRST_DAY_OF_MONTH=new Fe(0),Fe.LAST_DAY_OF_MONTH=new Fe(1),Fe.FIRST_DAY_OF_NEXT_MONTH=new Fe(2),Fe.FIRST_DAY_OF_YEAR=new Fe(3),Fe.LAST_DAY_OF_YEAR=new Fe(4),Fe.FIRST_DAY_OF_NEXT_YEAR=new Fe(5);var oa=function(_){O(u,_);function u(i,n){var o;return o=_.call(this)||this,o._ordinal=i,o._dowValue=n.value(),o}var s=u.prototype;return s.adjustInto=function(n){if(this._ordinal>=0){var o=n.with(d.DAY_OF_MONTH,1),f=o.get(d.DAY_OF_WEEK),E=p.intMod(this._dowValue-f+7,7);return E+=(this._ordinal-1)*7,o.plus(E,y.DAYS)}else{var T=n.with(d.DAY_OF_MONTH,n.range(d.DAY_OF_MONTH).maximum()),I=T.get(d.DAY_OF_WEEK),C=this._dowValue-I;return C=C===0?0:C>0?C-7:C,C-=(-this._ordinal-1)*7,T.plus(C,y.DAYS)}},u}(cr),Gr=function(_){O(u,_);function u(i,n){var o;return o=_.call(this)||this,w(n,"dayOfWeek"),o._relative=i,o._dowValue=n.value(),o}var s=u.prototype;return s.adjustInto=function(n){var o=n.get(d.DAY_OF_WEEK);if(this._relative<2&&o===this._dowValue)return n;if((this._relative&1)===0){var f=o-this._dowValue;return n.plus(f>=0?7-f:-f,y.DAYS)}else{var E=this._dowValue-o;return n.minus(E>=0?7-E:-E,y.DAYS)}},u}(cr),ue=function(_){O(u,_);function u(){return _.apply(this,arguments)||this}u.isLeapYear=function(n){return(n&3)===0&&(n%100!==0||n%400===0)};var s=u.prototype;return s._updateResolveMap=function(n,o,f){w(n,"fieldValues"),w(o,"field");var E=n.get(o);if(E!=null&&E!==f)throw new r("Invalid state, field: "+o+" "+E+" conflicts with "+o+" "+f);n.put(o,f)},s.resolveDate=function(n,o){if(n.containsKey(d.EPOCH_DAY))return H.ofEpochDay(n.remove(d.EPOCH_DAY));var f=n.remove(d.PROLEPTIC_MONTH);f!=null&&(o!==$.LENIENT&&d.PROLEPTIC_MONTH.checkValidValue(f),this._updateResolveMap(n,d.MONTH_OF_YEAR,p.floorMod(f,12)+1),this._updateResolveMap(n,d.YEAR,p.floorDiv(f,12)));var E=n.remove(d.YEAR_OF_ERA);if(E!=null){o!==$.LENIENT&&d.YEAR_OF_ERA.checkValidValue(E);var T=n.remove(d.ERA);if(T==null){var I=n.get(d.YEAR);o===$.STRICT?I!=null?this._updateResolveMap(n,d.YEAR,I>0?E:p.safeSubtract(1,E)):n.put(d.YEAR_OF_ERA,E):this._updateResolveMap(n,d.YEAR,I==null||I>0?E:p.safeSubtract(1,E))}else if(T===1)this._updateResolveMap(n,d.YEAR,E);else if(T===0)this._updateResolveMap(n,d.YEAR,p.safeSubtract(1,E));else throw new r("Invalid value for era: "+T)}else n.containsKey(d.ERA)&&d.ERA.checkValidValue(n.get(d.ERA));if(n.containsKey(d.YEAR)){if(n.containsKey(d.MONTH_OF_YEAR)&&n.containsKey(d.DAY_OF_MONTH)){var C=d.YEAR.checkValidIntValue(n.remove(d.YEAR)),U=n.remove(d.MONTH_OF_YEAR),q=n.remove(d.DAY_OF_MONTH);if(o===$.LENIENT){var j=U-1,z=q-1;return H.of(C,1,1).plusMonths(j).plusDays(z)}else return o===$.SMART&&(d.DAY_OF_MONTH.checkValidValue(q),U===4||U===6||U===9||U===11?q=Math.min(q,30):U===2&&(q=Math.min(q,K.FEBRUARY.length(st.isLeap(C))))),H.of(C,U,q)}if(n.containsKey(d.DAY_OF_YEAR)){var fe=d.YEAR.checkValidIntValue(n.remove(d.YEAR));if(o===$.LENIENT){var Ne=p.safeSubtract(n.remove(d.DAY_OF_YEAR),1);return H.ofYearDay(fe,1).plusDays(Ne)}var we=d.DAY_OF_YEAR.checkValidIntValue(n.remove(d.DAY_OF_YEAR));return H.ofYearDay(fe,we)}if(n.containsKey(d.ALIGNED_WEEK_OF_YEAR)){if(n.containsKey(d.ALIGNED_DAY_OF_WEEK_IN_YEAR)){var Te=d.YEAR.checkValidIntValue(n.remove(d.YEAR));if(o===$.LENIENT){var Ke=p.safeSubtract(n.remove(d.ALIGNED_WEEK_OF_YEAR),1),wt=p.safeSubtract(n.remove(d.ALIGNED_DAY_OF_WEEK_IN_YEAR),1);return H.of(Te,1,1).plusWeeks(Ke).plusDays(wt)}var Kr=d.ALIGNED_WEEK_OF_YEAR.checkValidIntValue(n.remove(d.ALIGNED_WEEK_OF_YEAR)),fr=d.ALIGNED_DAY_OF_WEEK_IN_YEAR.checkValidIntValue(n.remove(d.ALIGNED_DAY_OF_WEEK_IN_YEAR)),Zr=H.of(Te,1,1).plusDays((Kr-1)*7+(fr-1));if(o===$.STRICT&&Zr.get(d.YEAR)!==Te)throw new r("Strict mode rejected date parsed to a different year");return Zr}if(n.containsKey(d.DAY_OF_WEEK)){var ln=d.YEAR.checkValidIntValue(n.remove(d.YEAR));if(o===$.LENIENT){var _f=p.safeSubtract(n.remove(d.ALIGNED_WEEK_OF_YEAR),1),Qg=p.safeSubtract(n.remove(d.DAY_OF_WEEK),1);return H.of(ln,1,1).plusWeeks(_f).plusDays(Qg)}var ew=d.ALIGNED_WEEK_OF_YEAR.checkValidIntValue(n.remove(d.ALIGNED_WEEK_OF_YEAR)),tw=d.DAY_OF_WEEK.checkValidIntValue(n.remove(d.DAY_OF_WEEK)),Ef=H.of(ln,1,1).plusWeeks(ew-1).with(ia.nextOrSame(de.of(tw)));if(o===$.STRICT&&Ef.get(d.YEAR)!==ln)throw new r("Strict mode rejected date parsed to a different month");return Ef}}}return null},s.date=function(n){return H.from(n)},u}(J);function Fg(){ue.INSTANCE=new ue("IsoChronology")}var gt=function(_){O(u,_),u.from=function(n){if(w(n,"temporal"),n instanceof u)return n;if(n instanceof ut)return n.toOffsetTime();try{var o=b.from(n),f=Z.from(n);return new u(o,f)}catch{throw new r("Unable to obtain OffsetTime TemporalAccessor: "+n+", type "+(n.constructor!=null?n.constructor.name:""))}},u.now=function(n){return arguments.length===0?u._now(he.systemDefaultZone()):n instanceof he?u._now(n):u._now(he.system(n))},u._now=function(n){w(n,"clock");var o=n.instant();return u.ofInstant(o,n.zone().rules().offset(o))},u.of=function(){return arguments.length<=2?u.ofTimeAndOffset.apply(this,arguments):u.ofNumbers.apply(this,arguments)},u.ofNumbers=function(n,o,f,E,T){var I=b.of(n,o,f,E);return new u(I,T)},u.ofTimeAndOffset=function(n,o){return new u(n,o)},u.ofInstant=function(n,o){w(n,"instant"),k(n,pe,"instant"),w(o,"zone"),k(o,ae,"zone");var f=o.rules(),E=f.offset(n),T=n.epochSecond()%b.SECONDS_PER_DAY;T=(T+E.totalSeconds())%b.SECONDS_PER_DAY,T<0&&(T+=b.SECONDS_PER_DAY);var I=b.ofSecondOfDay(T,n.nano());return new u(I,E)},u.parse=function(n,o){return o===void 0&&(o=Q.ISO_OFFSET_TIME),w(o,"formatter"),o.parse(n,u.FROM)};function u(i,n){var o;return o=_.call(this)||this,w(i,"time"),k(i,b,"time"),w(n,"offset"),k(n,Z,"offset"),o._time=i,o._offset=n,o}var s=u.prototype;return s.adjustInto=function(n){return n.with(d.NANO_OF_DAY,this._time.toNanoOfDay()).with(d.OFFSET_SECONDS,this.offset().totalSeconds())},s.atDate=function(n){return ut.of(n,this._time,this._offset)},s.format=function(n){return w(n,"formatter"),n.format(this,u.FROM)},s.get=function(n){return _.prototype.get.call(this,n)},s.getLong=function(n){return n instanceof d?n===d.OFFSET_SECONDS?this._offset.totalSeconds():this._time.getLong(n):n.getFrom(this)},s.hour=function(){return this._time.hour()},s.minute=function(){return this._time.minute()},s.second=function(){return this._time.second()},s.nano=function(){return this._time.nano()},s.offset=function(){return this._offset},s.isAfter=function(n){return w(n,"other"),this._toEpochNano()>n._toEpochNano()},s.isBefore=function(n){return w(n,"other"),this._toEpochNano()<n._toEpochNano()},s.isEqual=function(n){return w(n,"other"),this._toEpochNano()===n._toEpochNano()},s.isSupported=function(n){return n instanceof d?n.isTimeBased()||n===d.OFFSET_SECONDS:n instanceof y?n.isTimeBased():n!=null&&n.isSupportedBy(this)},s.minusHours=function(n){return this._withLocalTimeOffset(this._time.minusHours(n),this._offset)},s.minusMinutes=function(n){return this._withLocalTimeOffset(this._time.minusMinutes(n),this._offset)},s.minusSeconds=function(n){return this._withLocalTimeOffset(this._time.minusSeconds(n),this._offset)},s.minusNanos=function(n){return this._withLocalTimeOffset(this._time.minusNanos(n),this._offset)},s._minusAmount=function(n){return w(n),n.subtractFrom(this)},s._minusUnit=function(n,o){return this.plus(-1*n,o)},s._plusAmount=function(n){return w(n),n.addTo(this)},s._plusUnit=function(n,o){return o instanceof y?this._withLocalTimeOffset(this._time.plus(n,o),this._offset):o.addTo(this,n)},s.plusHours=function(n){return this._withLocalTimeOffset(this._time.plusHours(n),this._offset)},s.plusMinutes=function(n){return this._withLocalTimeOffset(this._time.plusMinutes(n),this._offset)},s.plusSeconds=function(n){return this._withLocalTimeOffset(this._time.plusSeconds(n),this._offset)},s.plusNanos=function(n){return this._withLocalTimeOffset(this._time.plusNanos(n),this._offset)},s.query=function(n){return w(n,"query"),n===P.precision()?y.NANOS:n===P.offset()||n===P.zone()?this.offset():n===P.localTime()?this._time:n===P.chronology()||n===P.localDate()||n===P.zoneId()?null:_.prototype.query.call(this,n)},s.range=function(n){return n instanceof d?n===d.OFFSET_SECONDS?n.range():this._time.range(n):n.rangeRefinedBy(this)},s.toLocalTime=function(){return this._time},s.truncatedTo=function(n){return this._withLocalTimeOffset(this._time.truncatedTo(n),this._offset)},s.until=function(n,o){w(n,"endExclusive"),w(o,"unit");var f=u.from(n);if(o instanceof y){var E=f._toEpochNano()-this._toEpochNano();switch(o){case y.NANOS:return E;case y.MICROS:return p.intDiv(E,1e3);case y.MILLIS:return p.intDiv(E,1e6);case y.SECONDS:return p.intDiv(E,b.NANOS_PER_SECOND);case y.MINUTES:return p.intDiv(E,b.NANOS_PER_MINUTE);case y.HOURS:return p.intDiv(E,b.NANOS_PER_HOUR);case y.HALF_DAYS:return p.intDiv(E,12*b.NANOS_PER_HOUR)}throw new l("Unsupported unit: "+o)}return o.between(this,f)},s.withHour=function(n){return this._withLocalTimeOffset(this._time.withHour(n),this._offset)},s.withMinute=function(n){return this._withLocalTimeOffset(this._time.withMinute(n),this._offset)},s.withSecond=function(n){return this._withLocalTimeOffset(this._time.withSecond(n),this._offset)},s.withNano=function(n){return this._withLocalTimeOffset(this._time.withNano(n),this._offset)},s.withOffsetSameInstant=function(n){if(w(n,"offset"),n.equals(this._offset))return this;var o=n.totalSeconds()-this._offset.totalSeconds(),f=this._time.plusSeconds(o);return new u(f,n)},s.withOffsetSameLocal=function(n){return n!=null&&n.equals(this._offset)?this:new u(this._time,n)},s._toEpochNano=function(){var n=this._time.toNanoOfDay(),o=this._offset.totalSeconds()*b.NANOS_PER_SECOND;return n-o},s._withAdjuster=function(n){return w(n,"adjuster"),n instanceof b?this._withLocalTimeOffset(n,this._offset):n instanceof Z?this._withLocalTimeOffset(this._time,n):n instanceof u?n:n.adjustInto(this)},s._withField=function(n,o){return w(n,"field"),n instanceof d?n===d.OFFSET_SECONDS?this._withLocalTimeOffset(this._time,Z.ofTotalSeconds(n.checkValidIntValue(o))):this._withLocalTimeOffset(this._time.with(n,o),this._offset):n.adjustInto(this,o)},s._withLocalTimeOffset=function(n,o){return this._time===n&&this._offset.equals(o)?this:new u(n,o)},s.compareTo=function(n){if(w(n,"other"),k(n,u,"other"),this._offset.equals(n._offset))return this._time.compareTo(n._time);var o=p.compareNumbers(this._toEpochNano(),n._toEpochNano());return o===0?this._time.compareTo(n._time):o},s.equals=function(n){return this===n?!0:n instanceof u?this._time.equals(n._time)&&this._offset.equals(n._offset):!1},s.hashCode=function(){return this._time.hashCode()^this._offset.hashCode()},s.toString=function(){return this._time.toString()+this._offset.toString()},s.toJSON=function(){return this.toString()},u}(ze);function xg(){gt.MIN=gt.ofNumbers(0,0,0,0,Z.MAX),gt.MAX=gt.ofNumbers(23,59,59,999999999,Z.MIN),gt.FROM=Le("OffsetTime.FROM",function(_){return gt.from(_)})}var sa=function(_){O(u,_);function u(){return _.apply(this,arguments)||this}var s=u.prototype;return s.query=function(n){return n===P.zoneId()||n===P.zone()?this.zone():n===P.chronology()?this.toLocalDate().chronology():n===P.precision()?y.NANOS:n===P.offset()?this.offset():n===P.localDate()?H.ofEpochDay(this.toLocalDate().toEpochDay()):n===P.localTime()?this.toLocalTime():_.prototype.query.call(this,n)},s.format=function(n){return w(n,"formatter"),n.format(this)},s.toInstant=function(){return pe.ofEpochSecond(this.toEpochSecond(),this.toLocalTime().nano())},s.toEpochSecond=function(){var n=this.toLocalDate().toEpochDay(),o=n*86400+this.toLocalTime().toSecondOfDay();return o-=this.offset().totalSeconds(),o},s.compareTo=function(n){w(n,"other");var o=p.compareNumbers(this.toEpochSecond(),n.toEpochSecond());return o===0&&(o=this.toLocalTime().nano()-n.toLocalTime().nano(),o===0&&(o=this.toLocalDateTime().compareTo(n.toLocalDateTime()),o===0&&(o=Ug(this.zone().id(),n.zone().id())))),o},s.isAfter=function(n){w(n,"other");var o=this.toEpochSecond(),f=n.toEpochSecond();return o>f||o===f&&this.toLocalTime().nano()>n.toLocalTime().nano()},s.isBefore=function(n){w(n,"other");var o=this.toEpochSecond(),f=n.toEpochSecond();return o<f||o===f&&this.toLocalTime().nano()<n.toLocalTime().nano()},s.isEqual=function(n){return w(n,"other"),this.toEpochSecond()===n.toEpochSecond()&&this.toLocalTime().nano()===n.toLocalTime().nano()},s.equals=function(n){return this===n?!0:n instanceof u?this.compareTo(n)===0:!1},u}(ze);function Ug(_,u){return _<u?-1:_>u?1:0}var at=function(_){O(u,_),u.now=function(n){var o;return n instanceof ae?o=he.system(n):o=n??he.systemDefaultZone(),u.ofInstant(o.instant(),o.zone())},u.of=function(){return arguments.length<=2?u.of2.apply(this,arguments):arguments.length===3&&arguments[0]instanceof H?u.of3.apply(this,arguments):u.of8.apply(this,arguments)},u.of3=function(n,o,f){return u.of2(le.of(n,o),f)},u.of2=function(n,o){return u.ofLocal(n,o,null)},u.of8=function(n,o,f,E,T,I,C,U){var q=le.of(n,o,f,E,T,I,C);return u.ofLocal(q,U,null)},u.ofLocal=function(n,o,f){if(w(n,"localDateTime"),w(o,"zone"),o instanceof Z)return new u(n,o,o);var E=null,T=o.rules(),I=T.validOffsets(n);if(I.length===1)E=I[0];else if(I.length===0){var C=T.transition(n);n=n.plusSeconds(C.duration().seconds()),E=C.offsetAfter()}else f!=null&&I.some(function(U){return U.equals(f)})?E=f:E=w(I[0],"offset");return new u(n,E,o)},u.ofInstant=function(){return arguments.length===2?u.ofInstant2.apply(this,arguments):u.ofInstant3.apply(this,arguments)},u.ofInstant2=function(n,o){return w(n,"instant"),w(o,"zone"),u._create(n.epochSecond(),n.nano(),o)},u.ofInstant3=function(n,o,f){return w(n,"localDateTime"),w(o,"offset"),w(f,"zone"),u._create(n.toEpochSecond(o),n.nano(),f)},u._create=function(n,o,f){var E=f.rules(),T=pe.ofEpochSecond(n,o),I=E.offset(T),C=le.ofEpochSecond(n,o,I);return new u(C,I,f)},u.ofStrict=function(n,o,f){w(n,"localDateTime"),w(o,"offset"),w(f,"zone");var E=f.rules();if(E.isValidOffset(n,o)===!1){var T=E.transition(n);throw T!=null&&T.isGap()?new r("LocalDateTime "+n+" does not exist in zone "+f+" due to a gap in the local time-line, typically caused by daylight savings"):new r('ZoneOffset "'+o+'" is not valid for LocalDateTime "'+n+'" in zone "'+f+'"')}return new u(n,o,f)},u.ofLenient=function(n,o,f){if(w(n,"localDateTime"),w(o,"offset"),w(f,"zone"),f instanceof Z&&o.equals(f)===!1)throw new h("ZoneId must match ZoneOffset");return new u(n,o,f)},u.from=function(n){if(w(n,"temporal"),n instanceof u)return n;var o=ae.from(n);if(n.isSupported(d.INSTANT_SECONDS)){var f=u._from(n,o);if(f!=null)return f}var E=le.from(n);return u.of2(E,o)},u._from=function(n,o){try{return u.__from(n,o)}catch(f){if(!(f instanceof r))throw f}},u.__from=function(n,o){var f=n.getLong(d.INSTANT_SECONDS),E=n.get(d.NANO_OF_SECOND);return u._create(f,E,o)},u.parse=function(n,o){return o===void 0&&(o=Q.ISO_ZONED_DATE_TIME),w(o,"formatter"),o.parse(n,u.FROM)};function u(i,n,o){var f;return w(i,"dateTime"),w(n,"offset"),w(o,"zone"),f=_.call(this)||this,f._dateTime=i,f._offset=n,f._zone=o,f}var s=u.prototype;return s._resolveLocal=function(n){return w(n,"newDateTime"),u.ofLocal(n,this._zone,this._offset)},s._resolveInstant=function(n){return u.ofInstant3(n,this._offset,this._zone)},s._resolveOffset=function(n){return n.equals(this._offset)===!1&&this._zone.rules().isValidOffset(this._dateTime,n)?new u(this._dateTime,n,this._zone):this},s.isSupported=function(n){return n instanceof d?!0:n instanceof y?n.isDateBased()||n.isTimeBased():n!=null&&n.isSupportedBy(this)},s.range=function(n){return n instanceof d?n===d.INSTANT_SECONDS||n===d.OFFSET_SECONDS?n.range():this._dateTime.range(n):n.rangeRefinedBy(this)},s.get=function(n){return this.getLong(n)},s.getLong=function(n){if(n instanceof d){switch(n){case d.INSTANT_SECONDS:return this.toEpochSecond();case d.OFFSET_SECONDS:return this._offset.totalSeconds()}return this._dateTime.getLong(n)}return w(n,"field"),n.getFrom(this)},s.offset=function(){return this._offset},s.withEarlierOffsetAtOverlap=function(){var n=this._zone.rules().transition(this._dateTime);if(n!=null&&n.isOverlap()){var o=n.offsetBefore();if(o.equals(this._offset)===!1)return new u(this._dateTime,o,this._zone)}return this},s.withLaterOffsetAtOverlap=function(){var n=this._zone.rules().transition(this.toLocalDateTime());if(n!=null){var o=n.offsetAfter();if(o.equals(this._offset)===!1)return new u(this._dateTime,o,this._zone)}return this},s.zone=function(){return this._zone},s.withZoneSameLocal=function(n){return w(n,"zone"),this._zone.equals(n)?this:u.ofLocal(this._dateTime,n,this._offset)},s.withZoneSameInstant=function(n){return w(n,"zone"),this._zone.equals(n)?this:u._create(this._dateTime.toEpochSecond(this._offset),this._dateTime.nano(),n)},s.withFixedOffsetZone=function(){return this._zone.equals(this._offset)?this:new u(this._dateTime,this._offset,this._offset)},s.year=function(){return this._dateTime.year()},s.monthValue=function(){return this._dateTime.monthValue()},s.month=function(){return this._dateTime.month()},s.dayOfMonth=function(){return this._dateTime.dayOfMonth()},s.dayOfYear=function(){return this._dateTime.dayOfYear()},s.dayOfWeek=function(){return this._dateTime.dayOfWeek()},s.hour=function(){return this._dateTime.hour()},s.minute=function(){return this._dateTime.minute()},s.second=function(){return this._dateTime.second()},s.nano=function(){return this._dateTime.nano()},s._withAdjuster=function(n){if(n instanceof H)return this._resolveLocal(le.of(n,this._dateTime.toLocalTime()));if(n instanceof b)return this._resolveLocal(le.of(this._dateTime.toLocalDate(),n));if(n instanceof le)return this._resolveLocal(n);if(n instanceof pe){var o=n;return u._create(o.epochSecond(),o.nano(),this._zone)}else if(n instanceof Z)return this._resolveOffset(n);return _.prototype._withAdjuster.call(this,n)},s._withField=function(n,o){if(n instanceof d){switch(n){case d.INSTANT_SECONDS:return u._create(o,this.nano(),this._zone);case d.OFFSET_SECONDS:{var f=Z.ofTotalSeconds(n.checkValidIntValue(o));return this._resolveOffset(f)}}return this._resolveLocal(this._dateTime.with(n,o))}return n.adjustInto(this,o)},s.withYear=function(n){return this._resolveLocal(this._dateTime.withYear(n))},s.withMonth=function(n){return this._resolveLocal(this._dateTime.withMonth(n))},s.withDayOfMonth=function(n){return this._resolveLocal(this._dateTime.withDayOfMonth(n))},s.withDayOfYear=function(n){return this._resolveLocal(this._dateTime.withDayOfYear(n))},s.withHour=function(n){return this._resolveLocal(this._dateTime.withHour(n))},s.withMinute=function(n){return this._resolveLocal(this._dateTime.withMinute(n))},s.withSecond=function(n){return this._resolveLocal(this._dateTime.withSecond(n))},s.withNano=function(n){return this._resolveLocal(this._dateTime.withNano(n))},s.truncatedTo=function(n){return this._resolveLocal(this._dateTime.truncatedTo(n))},s._plusUnit=function(n,o){return o instanceof y?o.isDateBased()?this._resolveLocal(this._dateTime.plus(n,o)):this._resolveInstant(this._dateTime.plus(n,o)):(w(o,"unit"),o.addTo(this,n))},s.plusYears=function(n){return this._resolveLocal(this._dateTime.plusYears(n))},s.plusMonths=function(n){return this._resolveLocal(this._dateTime.plusMonths(n))},s.plusWeeks=function(n){return this._resolveLocal(this._dateTime.plusWeeks(n))},s.plusDays=function(n){return this._resolveLocal(this._dateTime.plusDays(n))},s.plusHours=function(n){return this._resolveInstant(this._dateTime.plusHours(n))},s.plusMinutes=function(n){return this._resolveInstant(this._dateTime.plusMinutes(n))},s.plusSeconds=function(n){return this._resolveInstant(this._dateTime.plusSeconds(n))},s.plusNanos=function(n){return this._resolveInstant(this._dateTime.plusNanos(n))},s._minusUnit=function(n,o){return this._plusUnit(-1*n,o)},s.minusYears=function(n){return this.plusYears(-1*n)},s.minusMonths=function(n){return this.plusMonths(-1*n)},s.minusWeeks=function(n){return this.plusWeeks(-1*n)},s.minusDays=function(n){return this.plusDays(-1*n)},s.minusHours=function(n){return this.plusHours(-1*n)},s.minusMinutes=function(n){return this.plusMinutes(-1*n)},s.minusSeconds=function(n){return this.plusSeconds(-1*n)},s.minusNanos=function(n){return this.plusNanos(-1*n)},s.query=function(n){return n===P.localDate()?this.toLocalDate():(w(n,"query"),_.prototype.query.call(this,n))},s.until=function(n,o){var f=u.from(n);if(o instanceof y){if(f=f.withZoneSameInstant(this._zone),o.isDateBased())return this._dateTime.until(f._dateTime,o);var E=this._offset.totalSeconds()-f._offset.totalSeconds(),T=f._dateTime.plusSeconds(E);return this._dateTime.until(T,o)}return o.between(this,f)},s.toLocalDateTime=function(){return this._dateTime},s.toLocalDate=function(){return this._dateTime.toLocalDate()},s.toLocalTime=function(){return this._dateTime.toLocalTime()},s.toOffsetDateTime=function(){return ut.of(this._dateTime,this._offset)},s.equals=function(n){return this===n?!0:n instanceof u?this._dateTime.equals(n._dateTime)&&this._offset.equals(n._offset)&&this._zone.equals(n._zone):!1},s.hashCode=function(){return p.hashCode(this._dateTime.hashCode(),this._offset.hashCode(),this._zone.hashCode())},s.toString=function(){var n=this._dateTime.toString()+this._offset.toString();return this._offset!==this._zone&&(n+="["+this._zone.toString()+"]"),n},s.toJSON=function(){return this.toString()},s.format=function(n){return _.prototype.format.call(this,n)},u}(sa);function kg(){at.FROM=Le("ZonedDateTime.FROM",function(_){return at.from(_)})}var ut=function(_){O(u,_),u.from=function(n){if(w(n,"temporal"),n instanceof u)return n;try{var o=Z.from(n);try{var f=le.from(n);return u.of(f,o)}catch{var E=pe.from(n);return u.ofInstant(E,o)}}catch{throw new r("Unable to obtain OffsetDateTime TemporalAccessor: "+n+", type "+(n.constructor!=null?n.constructor.name:""))}},u.now=function(n){if(arguments.length===0)return u.now(he.systemDefaultZone());if(w(n,"clockOrZone"),n instanceof ae)return u.now(he.system(n));if(n instanceof he){var o=n.instant();return u.ofInstant(o,n.zone().rules().offset(o))}else throw new h("clockOrZone must be an instance of ZoneId or Clock")},u.of=function(){return arguments.length<=2?u.ofDateTime.apply(this,arguments):arguments.length===3?u.ofDateAndTime.apply(this,arguments):u.ofNumbers.apply(this,arguments)},u.ofDateTime=function(n,o){return new u(n,o)},u.ofDateAndTime=function(n,o,f){var E=le.of(n,o);return new u(E,f)},u.ofNumbers=function(n,o,f,E,T,I,C,U){E===void 0&&(E=0),T===void 0&&(T=0),I===void 0&&(I=0),C===void 0&&(C=0);var q=le.of(n,o,f,E,T,I,C);return new u(q,U)},u.ofInstant=function(n,o){w(n,"instant"),w(o,"zone");var f=o.rules(),E=f.offset(n),T=le.ofEpochSecond(n.epochSecond(),n.nano(),E);return new u(T,E)},u.parse=function(n,o){return o===void 0&&(o=Q.ISO_OFFSET_DATE_TIME),w(o,"formatter"),o.parse(n,u.FROM)};function u(i,n){var o;return o=_.call(this)||this,w(i,"dateTime"),k(i,le,"dateTime"),w(n,"offset"),k(n,Z,"offset"),o._dateTime=i,o._offset=n,o}var s=u.prototype;return s.adjustInto=function(n){return n.with(d.EPOCH_DAY,this.toLocalDate().toEpochDay()).with(d.NANO_OF_DAY,this.toLocalTime().toNanoOfDay()).with(d.OFFSET_SECONDS,this.offset().totalSeconds())},s.until=function(n,o){var f=u.from(n);return o instanceof y?(f=f.withOffsetSameInstant(this._offset),this._dateTime.until(f._dateTime,o)):o.between(this,f)},s.atZoneSameInstant=function(n){return at.ofInstant(this._dateTime,this._offset,n)},s.atZoneSimilarLocal=function(n){return at.ofLocal(this._dateTime,n,this._offset)},s.query=function(n){return w(n,"query"),n===P.chronology()?ue.INSTANCE:n===P.precision()?y.NANOS:n===P.offset()||n===P.zone()?this.offset():n===P.localDate()?this.toLocalDate():n===P.localTime()?this.toLocalTime():n===P.zoneId()?null:_.prototype.query.call(this,n)},s.get=function(n){if(n instanceof d){switch(n){case d.INSTANT_SECONDS:throw new r("Field too large for an int: "+n);case d.OFFSET_SECONDS:return this.offset().totalSeconds()}return this._dateTime.get(n)}return _.prototype.get.call(this,n)},s.getLong=function(n){if(n instanceof d){switch(n){case d.INSTANT_SECONDS:return this.toEpochSecond();case d.OFFSET_SECONDS:return this.offset().totalSeconds()}return this._dateTime.getLong(n)}return n.getFrom(this)},s.offset=function(){return this._offset},s.year=function(){return this._dateTime.year()},s.monthValue=function(){return this._dateTime.monthValue()},s.month=function(){return this._dateTime.month()},s.dayOfMonth=function(){return this._dateTime.dayOfMonth()},s.dayOfYear=function(){return this._dateTime.dayOfYear()},s.dayOfWeek=function(){return this._dateTime.dayOfWeek()},s.hour=function(){return this._dateTime.hour()},s.minute=function(){return this._dateTime.minute()},s.second=function(){return this._dateTime.second()},s.nano=function(){return this._dateTime.nano()},s.toLocalDateTime=function(){return this._dateTime},s.toLocalDate=function(){return this._dateTime.toLocalDate()},s.toLocalTime=function(){return this._dateTime.toLocalTime()},s.toOffsetTime=function(){return gt.of(this._dateTime.toLocalTime(),this._offset)},s.toZonedDateTime=function(){return at.of(this._dateTime,this._offset)},s.toInstant=function(){return this._dateTime.toInstant(this._offset)},s.toEpochSecond=function(){return this._dateTime.toEpochSecond(this._offset)},s.isSupported=function(n){return n instanceof d||n instanceof y?n.isDateBased()||n.isTimeBased():n!=null&&n.isSupportedBy(this)},s.range=function(n){return n instanceof d?n===d.INSTANT_SECONDS||n===d.OFFSET_SECONDS?n.range():this._dateTime.range(n):n.rangeRefinedBy(this)},s._withAdjuster=function(n){return w(n),n instanceof H||n instanceof b||n instanceof le?this._withDateTimeOffset(this._dateTime.with(n),this._offset):n instanceof pe?u.ofInstant(n,this._offset):n instanceof Z?this._withDateTimeOffset(this._dateTime,n):n instanceof u?n:n.adjustInto(this)},s._withField=function(n,o){if(w(n),n instanceof d){var f=n;switch(f){case d.INSTANT_SECONDS:return u.ofInstant(pe.ofEpochSecond(o,this.nano()),this._offset);case d.OFFSET_SECONDS:return this._withDateTimeOffset(this._dateTime,Z.ofTotalSeconds(f.checkValidIntValue(o)))}return this._withDateTimeOffset(this._dateTime.with(n,o),this._offset)}return n.adjustInto(this,o)},s._withDateTimeOffset=function(n,o){return this._dateTime===n&&this._offset.equals(o)?this:new u(n,o)},s.withYear=function(n){return this._withDateTimeOffset(this._dateTime.withYear(n),this._offset)},s.withMonth=function(n){return this._withDateTimeOffset(this._dateTime.withMonth(n),this._offset)},s.withDayOfMonth=function(n){return this._withDateTimeOffset(this._dateTime.withDayOfMonth(n),this._offset)},s.withDayOfYear=function(n){return this._withDateTimeOffset(this._dateTime.withDayOfYear(n),this._offset)},s.withHour=function(n){return this._withDateTimeOffset(this._dateTime.withHour(n),this._offset)},s.withMinute=function(n){return this._withDateTimeOffset(this._dateTime.withMinute(n),this._offset)},s.withSecond=function(n){return this._withDateTimeOffset(this._dateTime.withSecond(n),this._offset)},s.withNano=function(n){return this._withDateTimeOffset(this._dateTime.withNano(n),this._offset)},s.withOffsetSameLocal=function(n){return w(n,"offset"),this._withDateTimeOffset(this._dateTime,n)},s.withOffsetSameInstant=function(n){if(w(n,"offset"),n.equals(this._offset))return this;var o=n.totalSeconds()-this._offset.totalSeconds(),f=this._dateTime.plusSeconds(o);return new u(f,n)},s.truncatedTo=function(n){return this._withDateTimeOffset(this._dateTime.truncatedTo(n),this._offset)},s._plusAmount=function(n){return w(n,"amount"),n.addTo(this)},s._plusUnit=function(n,o){return o instanceof y?this._withDateTimeOffset(this._dateTime.plus(n,o),this._offset):o.addTo(this,n)},s.plusYears=function(n){return this._withDateTimeOffset(this._dateTime.plusYears(n),this._offset)},s.plusMonths=function(n){return this._withDateTimeOffset(this._dateTime.plusMonths(n),this._offset)},s.plusWeeks=function(n){return this._withDateTimeOffset(this._dateTime.plusWeeks(n),this._offset)},s.plusDays=function(n){return this._withDateTimeOffset(this._dateTime.plusDays(n),this._offset)},s.plusHours=function(n){return this._withDateTimeOffset(this._dateTime.plusHours(n),this._offset)},s.plusMinutes=function(n){return this._withDateTimeOffset(this._dateTime.plusMinutes(n),this._offset)},s.plusSeconds=function(n){return this._withDateTimeOffset(this._dateTime.plusSeconds(n),this._offset)},s.plusNanos=function(n){return this._withDateTimeOffset(this._dateTime.plusNanos(n),this._offset)},s._minusAmount=function(n){return w(n),n.subtractFrom(this)},s._minusUnit=function(n,o){return this.plus(-1*n,o)},s.minusYears=function(n){return this._withDateTimeOffset(this._dateTime.minusYears(n),this._offset)},s.minusMonths=function(n){return this._withDateTimeOffset(this._dateTime.minusMonths(n),this._offset)},s.minusWeeks=function(n){return this._withDateTimeOffset(this._dateTime.minusWeeks(n),this._offset)},s.minusDays=function(n){return this._withDateTimeOffset(this._dateTime.minusDays(n),this._offset)},s.minusHours=function(n){return this._withDateTimeOffset(this._dateTime.minusHours(n),this._offset)},s.minusMinutes=function(n){return this._withDateTimeOffset(this._dateTime.minusMinutes(n),this._offset)},s.minusSeconds=function(n){return this._withDateTimeOffset(this._dateTime.minusSeconds(n),this._offset)},s.minusNanos=function(n){return this._withDateTimeOffset(this._dateTime.minusNanos(n),this._offset)},s.compareTo=function(n){if(w(n,"other"),k(n,u,"other"),this.offset().equals(n.offset()))return this.toLocalDateTime().compareTo(n.toLocalDateTime());var o=p.compareNumbers(this.toEpochSecond(),n.toEpochSecond());return o===0&&(o=this.toLocalTime().nano()-n.toLocalTime().nano(),o===0&&(o=this.toLocalDateTime().compareTo(n.toLocalDateTime()))),o},s.isAfter=function(n){w(n,"other");var o=this.toEpochSecond(),f=n.toEpochSecond();return o>f||o===f&&this.toLocalTime().nano()>n.toLocalTime().nano()},s.isBefore=function(n){w(n,"other");var o=this.toEpochSecond(),f=n.toEpochSecond();return o<f||o===f&&this.toLocalTime().nano()<n.toLocalTime().nano()},s.isEqual=function(n){return w(n,"other"),this.toEpochSecond()===n.toEpochSecond()&&this.toLocalTime().nano()===n.toLocalTime().nano()},s.equals=function(n){return this===n?!0:n instanceof u?this._dateTime.equals(n._dateTime)&&this._offset.equals(n._offset):!1},s.hashCode=function(){return this._dateTime.hashCode()^this._offset.hashCode()},s.toString=function(){return this._dateTime.toString()+this._offset.toString()},s.toJSON=function(){return this.toString()},s.format=function(n){return w(n,"formatter"),n.format(this)},u}(ze);function Bg(){ut.MIN=le.MIN.atOffset(Z.MAX),ut.MAX=le.MAX.atOffset(Z.MIN),ut.FROM=Le("OffsetDateTime.FROM",function(_){return ut.from(_)})}var jr=146097,af=jr*5-(30*365+7),H=function(_){O(u,_),u.now=function(n){var o;return n==null?o=he.systemDefaultZone():n instanceof ae?o=he.system(n):o=n,u.ofInstant(o.instant(),o.zone())},u.ofInstant=function(n,o){o===void 0&&(o=ae.systemDefault()),w(n,"instant");var f=o.rules().offset(n),E=n.epochSecond()+f.totalSeconds(),T=p.floorDiv(E,b.SECONDS_PER_DAY);return u.ofEpochDay(T)},u.of=function(n,o,f){return new u(n,o,f)},u.ofYearDay=function(n,o){d.YEAR.checkValidValue(n);var f=ue.isLeapYear(n);o===366&&f===!1&&F(!1,"Invalid date 'DayOfYear 366' as '"+n+"' is not a leap year",r);var E=K.of(Math.floor((o-1)/31+1)),T=E.firstDayOfYear(f)+E.length(f)-1;o>T&&(E=E.plus(1));var I=o-E.firstDayOfYear(f)+1;return new u(n,E.value(),I)},u.ofEpochDay=function(n){n===void 0&&(n=0);var o,f,E,T,I;I=n+af,I-=60,o=0,I<0&&(f=p.intDiv(I+1,jr)-1,o=f*400,I+=-f*jr),T=p.intDiv(400*I+591,jr),E=I-(365*T+p.intDiv(T,4)-p.intDiv(T,100)+p.intDiv(T,400)),E<0&&(T--,E=I-(365*T+p.intDiv(T,4)-p.intDiv(T,100)+p.intDiv(T,400))),T+=o;var C=E,U=p.intDiv(C*5+2,153),q=(U+2)%12+1,j=C-p.intDiv(U*306+5,10)+1;T+=p.intDiv(U,10);var z=T;return new u(z,q,j)},u.from=function(n){w(n,"temporal");var o=n.query(P.localDate());if(o==null)throw new r("Unable to obtain LocalDate from TemporalAccessor: "+n+", type "+(n.constructor!=null?n.constructor.name:""));return o},u.parse=function(n,o){return o===void 0&&(o=Q.ISO_LOCAL_DATE),F(o!=null,"formatter",g),o.parse(n,u.FROM)},u._resolvePreviousValid=function(n,o,f){switch(o){case 2:f=Math.min(f,ue.isLeapYear(n)?29:28);break;case 4:case 6:case 9:case 11:f=Math.min(f,30);break}return u.of(n,o,f)};function u(i,n,o){var f;return f=_.call(this)||this,w(i,"year"),w(n,"month"),w(o,"dayOfMonth"),n instanceof K&&(n=n.value()),f._year=p.safeToInt(i),f._month=p.safeToInt(n),f._day=p.safeToInt(o),u._validate(f._year,f._month,f._day),f}u._validate=function(n,o,f){var E;if(d.YEAR.checkValidValue(n),d.MONTH_OF_YEAR.checkValidValue(o),d.DAY_OF_MONTH.checkValidValue(f),f>28){switch(E=31,o){case 2:E=ue.isLeapYear(n)?29:28;break;case 4:case 6:case 9:case 11:E=30}f>E&&(f===29?F(!1,"Invalid date 'February 29' as '"+n+"' is not a leap year",r):F(!1,"Invalid date '"+n+"' '"+o+"' '"+f+"'",r))}};var s=u.prototype;return s.isSupported=function(n){return _.prototype.isSupported.call(this,n)},s.range=function(n){if(n instanceof d){if(n.isDateBased()){switch(n){case d.DAY_OF_MONTH:return X.of(1,this.lengthOfMonth());case d.DAY_OF_YEAR:return X.of(1,this.lengthOfYear());case d.ALIGNED_WEEK_OF_MONTH:return X.of(1,this.month()===K.FEBRUARY&&this.isLeapYear()===!1?4:5);case d.YEAR_OF_ERA:return this._year<=0?X.of(1,st.MAX_VALUE+1):X.of(1,st.MAX_VALUE)}return n.range()}throw new l("Unsupported field: "+n)}return n.rangeRefinedBy(this)},s.get=function(n){return this.getLong(n)},s.getLong=function(n){return F(n!=null,"",g),n instanceof d?this._get0(n):n.getFrom(this)},s._get0=function(n){switch(n){case d.DAY_OF_WEEK:return this.dayOfWeek().value();case d.ALIGNED_DAY_OF_WEEK_IN_MONTH:return p.intMod(this._day-1,7)+1;case d.ALIGNED_DAY_OF_WEEK_IN_YEAR:return p.intMod(this.dayOfYear()-1,7)+1;case d.DAY_OF_MONTH:return this._day;case d.DAY_OF_YEAR:return this.dayOfYear();case d.EPOCH_DAY:return this.toEpochDay();case d.ALIGNED_WEEK_OF_MONTH:return p.intDiv(this._day-1,7)+1;case d.ALIGNED_WEEK_OF_YEAR:return p.intDiv(this.dayOfYear()-1,7)+1;case d.MONTH_OF_YEAR:return this._month;case d.PROLEPTIC_MONTH:return this._prolepticMonth();case d.YEAR_OF_ERA:return this._year>=1?this._year:1-this._year;case d.YEAR:return this._year;case d.ERA:return this._year>=1?1:0}throw new l("Unsupported field: "+n)},s._prolepticMonth=function(){return this._year*12+(this._month-1)},s.chronology=function(){return ue.INSTANCE},s.year=function(){return this._year},s.monthValue=function(){return this._month},s.month=function(){return K.of(this._month)},s.dayOfMonth=function(){return this._day},s.dayOfYear=function(){return this.month().firstDayOfYear(this.isLeapYear())+this._day-1},s.dayOfWeek=function(){var n=p.floorMod(this.toEpochDay()+3,7);return de.of(n+1)},s.isLeapYear=function(){return ue.isLeapYear(this._year)},s.lengthOfMonth=function(){switch(this._month){case 2:return this.isLeapYear()?29:28;case 4:case 6:case 9:case 11:return 30;default:return 31}},s.lengthOfYear=function(){return this.isLeapYear()?366:365},s._withAdjuster=function(n){return w(n,"adjuster"),n instanceof u?n:_.prototype._withAdjuster.call(this,n)},s._withField=function(n,o){if(F(n!=null,"field",g),n instanceof d){var f=n;switch(f.checkValidValue(o),f){case d.DAY_OF_WEEK:return this.plusDays(o-this.dayOfWeek().value());case d.ALIGNED_DAY_OF_WEEK_IN_MONTH:return this.plusDays(o-this.getLong(d.ALIGNED_DAY_OF_WEEK_IN_MONTH));case d.ALIGNED_DAY_OF_WEEK_IN_YEAR:return this.plusDays(o-this.getLong(d.ALIGNED_DAY_OF_WEEK_IN_YEAR));case d.DAY_OF_MONTH:return this.withDayOfMonth(o);case d.DAY_OF_YEAR:return this.withDayOfYear(o);case d.EPOCH_DAY:return u.ofEpochDay(o);case d.ALIGNED_WEEK_OF_MONTH:return this.plusWeeks(o-this.getLong(d.ALIGNED_WEEK_OF_MONTH));case d.ALIGNED_WEEK_OF_YEAR:return this.plusWeeks(o-this.getLong(d.ALIGNED_WEEK_OF_YEAR));case d.MONTH_OF_YEAR:return this.withMonth(o);case d.PROLEPTIC_MONTH:return this.plusMonths(o-this.getLong(d.PROLEPTIC_MONTH));case d.YEAR_OF_ERA:return this.withYear(this._year>=1?o:1-o);case d.YEAR:return this.withYear(o);case d.ERA:return this.getLong(d.ERA)===o?this:this.withYear(1-this._year)}throw new l("Unsupported field: "+n)}return n.adjustInto(this,o)},s.withYear=function(n){return this._year===n?this:(d.YEAR.checkValidValue(n),u._resolvePreviousValid(n,this._month,this._day))},s.withMonth=function(n){var o=n instanceof K?n.value():n;return this._month===o?this:(d.MONTH_OF_YEAR.checkValidValue(o),u._resolvePreviousValid(this._year,o,this._day))},s.withDayOfMonth=function(n){return this._day===n?this:u.of(this._year,this._month,n)},s.withDayOfYear=function(n){return this.dayOfYear()===n?this:u.ofYearDay(this._year,n)},s._plusUnit=function(n,o){if(w(n,"amountToAdd"),w(o,"unit"),o instanceof y){switch(o){case y.DAYS:return this.plusDays(n);case y.WEEKS:return this.plusWeeks(n);case y.MONTHS:return this.plusMonths(n);case y.YEARS:return this.plusYears(n);case y.DECADES:return this.plusYears(p.safeMultiply(n,10));case y.CENTURIES:return this.plusYears(p.safeMultiply(n,100));case y.MILLENNIA:return this.plusYears(p.safeMultiply(n,1e3));case y.ERAS:return this.with(d.ERA,p.safeAdd(this.getLong(d.ERA),n))}throw new l("Unsupported unit: "+o)}return o.addTo(this,n)},s.plusYears=function(n){if(n===0)return this;var o=d.YEAR.checkValidIntValue(this._year+n);return u._resolvePreviousValid(o,this._month,this._day)},s.plusMonths=function(n){if(n===0)return this;var o=this._year*12+(this._month-1),f=o+n,E=d.YEAR.checkValidIntValue(p.floorDiv(f,12)),T=p.floorMod(f,12)+1;return u._resolvePreviousValid(E,T,this._day)},s.plusWeeks=function(n){return this.plusDays(p.safeMultiply(n,7))},s.plusDays=function(n){if(n===0)return this;var o=p.safeAdd(this.toEpochDay(),n);return u.ofEpochDay(o)},s._minusUnit=function(n,o){return w(n,"amountToSubtract"),w(o,"unit"),this._plusUnit(-1*n,o)},s.minusYears=function(n){return this.plusYears(n*-1)},s.minusMonths=function(n){return this.plusMonths(n*-1)},s.minusWeeks=function(n){return this.plusWeeks(n*-1)},s.minusDays=function(n){return this.plusDays(n*-1)},s.query=function(n){return w(n,"query"),n===P.localDate()?this:_.prototype.query.call(this,n)},s.adjustInto=function(n){return _.prototype.adjustInto.call(this,n)},s.until=function(n,o){return arguments.length<2?this.until1(n):this.until2(n,o)},s.until2=function(n,o){var f=u.from(n);if(o instanceof y){switch(o){case y.DAYS:return this.daysUntil(f);case y.WEEKS:return p.intDiv(this.daysUntil(f),7);case y.MONTHS:return this._monthsUntil(f);case y.YEARS:return p.intDiv(this._monthsUntil(f),12);case y.DECADES:return p.intDiv(this._monthsUntil(f),120);case y.CENTURIES:return p.intDiv(this._monthsUntil(f),1200);case y.MILLENNIA:return p.intDiv(this._monthsUntil(f),12e3);case y.ERAS:return f.getLong(d.ERA)-this.getLong(d.ERA)}throw new l("Unsupported unit: "+o)}return o.between(this,f)},s.daysUntil=function(n){return n.toEpochDay()-this.toEpochDay()},s._monthsUntil=function(n){var o=this._prolepticMonth()*32+this.dayOfMonth(),f=n._prolepticMonth()*32+n.dayOfMonth();return p.intDiv(f-o,32)},s.until1=function(n){var o=u.from(n),f=o._prolepticMonth()-this._prolepticMonth(),E=o._day-this._day;if(f>0&&E<0){f--;var T=this.plusMonths(f);E=o.toEpochDay()-T.toEpochDay()}else f<0&&E>0&&(f++,E-=o.lengthOfMonth());var I=p.intDiv(f,12),C=p.intMod(f,12);return It.of(I,C,E)},s.atTime=function(){return arguments.length===1?this.atTime1.apply(this,arguments):this.atTime4.apply(this,arguments)},s.atTime1=function(n){if(w(n,"time"),n instanceof b)return le.of(this,n);if(n instanceof gt)return this._atTimeOffsetTime(n);throw new h("time must be an instance of LocalTime or OffsetTime"+(n&&n.constructor&&n.constructor.name?", but is "+n.constructor.name:""))},s.atTime4=function(n,o,f,E){return f===void 0&&(f=0),E===void 0&&(E=0),this.atTime1(b.of(n,o,f,E))},s._atTimeOffsetTime=function(n){return ut.of(le.of(this,n.toLocalTime()),n.offset())},s.atStartOfDay=function(n){return n!=null?this._atStartOfDayWithZone(n):le.of(this,b.MIDNIGHT)},s._atStartOfDayWithZone=function(n){w(n,"zone");var o=this.atTime(b.MIDNIGHT);if(!(n instanceof Z)){var f=n.rules().transition(o);f!=null&&f.isGap()&&(o=f.dateTimeAfter())}return at.of(o,n)},s.toEpochDay=function(){var n=this._year,o=this._month,f=0;return f+=365*n,n>=0?f+=p.intDiv(n+3,4)-p.intDiv(n+99,100)+p.intDiv(n+399,400):f-=p.intDiv(n,-4)-p.intDiv(n,-100)+p.intDiv(n,-400),f+=p.intDiv(367*o-362,12),f+=this.dayOfMonth()-1,o>2&&(f--,ue.isLeapYear(n)||f--),f-af},s.compareTo=function(n){return w(n,"other"),k(n,u,"other"),this._compareTo0(n)},s._compareTo0=function(n){var o=this._year-n._year;return o===0&&(o=this._month-n._month,o===0&&(o=this._day-n._day)),o},s.isAfter=function(n){return this.compareTo(n)>0},s.isBefore=function(n){return this.compareTo(n)<0},s.isEqual=function(n){return this.compareTo(n)===0},s.equals=function(n){return this===n?!0:n instanceof u?this._compareTo0(n)===0:!1},s.hashCode=function(){var n=this._year,o=this._month,f=this._day;return p.hash(n&4294965248^(n<<11)+(o<<6)+f)},s.toString=function(){var n,o,f,E=this._year,T=this._month,I=this._day,C=Math.abs(E);return C<1e3?E<0?f="-"+(""+(E-1e4)).slice(-4):f=(""+(E+1e4)).slice(-4):E>9999?f="+"+E:f=""+E,T<10?o="-0"+T:o="-"+T,I<10?n="-0"+I:n="-"+I,f+o+n},s.toJSON=function(){return this.toString()},s.format=function(n){return w(n,"formatter"),k(n,Q,"formatter"),_.prototype.format.call(this,n)},u}(On);function Yg(){H.MIN=H.of(Ce.MIN_VALUE,1,1),H.MAX=H.of(Ce.MAX_VALUE,12,31),H.EPOCH_0=H.ofEpochDay(0),H.FROM=Le("LocalDate.FROM",function(_){return H.from(_)})}var aa=function(_){O(u,_);function u(){return _.apply(this,arguments)||this}var s=u.prototype;return s.chronology=function(){return this.toLocalDate().chronology()},s.query=function(n){return n===P.chronology()?this.chronology():n===P.precision()?y.NANOS:n===P.localDate()?H.ofEpochDay(this.toLocalDate().toEpochDay()):n===P.localTime()?this.toLocalTime():n===P.zone()||n===P.zoneId()||n===P.offset()?null:_.prototype.query.call(this,n)},s.adjustInto=function(n){return n.with(d.EPOCH_DAY,this.toLocalDate().toEpochDay()).with(d.NANO_OF_DAY,this.toLocalTime().toNanoOfDay())},s.toInstant=function(n){return k(n,Z,"zoneId"),pe.ofEpochSecond(this.toEpochSecond(n),this.toLocalTime().nano())},s.toEpochSecond=function(n){w(n,"offset");var o=this.toLocalDate().toEpochDay(),f=o*86400+this.toLocalTime().toSecondOfDay();return f-=n.totalSeconds(),p.safeToInt(f)},u}(ze),le=function(_){O(u,_),u.now=function(n){return n==null?u._now(he.systemDefaultZone()):n instanceof he?u._now(n):u._now(he.system(n))},u._now=function(n){return w(n,"clock"),u.ofInstant(n.instant(),n.zone())},u._ofEpochMillis=function(n,o){var f=p.floorDiv(n,1e3)+o.totalSeconds(),E=p.floorDiv(f,b.SECONDS_PER_DAY),T=p.floorMod(f,b.SECONDS_PER_DAY),I=p.floorMod(n,1e3)*1e6,C=H.ofEpochDay(E),U=b.ofSecondOfDay(T,I);return new u(C,U)},u.of=function(){return arguments.length<=2?u.ofDateAndTime.apply(this,arguments):u.ofNumbers.apply(this,arguments)},u.ofNumbers=function(n,o,f,E,T,I,C){E===void 0&&(E=0),T===void 0&&(T=0),I===void 0&&(I=0),C===void 0&&(C=0);var U=H.of(n,o,f),q=b.of(E,T,I,C);return new u(U,q)},u.ofDateAndTime=function(n,o){return w(n,"date"),w(o,"time"),new u(n,o)},u.ofInstant=function(n,o){o===void 0&&(o=ae.systemDefault()),w(n,"instant"),k(n,pe,"instant"),w(o,"zone");var f=o.rules().offset(n);return u.ofEpochSecond(n.epochSecond(),n.nano(),f)},u.ofEpochSecond=function(n,o,f){n===void 0&&(n=0),o===void 0&&(o=0),arguments.length===2&&o instanceof Z&&(f=o,o=0),w(f,"offset");var E=n+f.totalSeconds(),T=p.floorDiv(E,b.SECONDS_PER_DAY),I=p.floorMod(E,b.SECONDS_PER_DAY),C=H.ofEpochDay(T),U=b.ofSecondOfDay(I,o);return new u(C,U)},u.from=function(n){if(w(n,"temporal"),n instanceof u)return n;if(n instanceof at)return n.toLocalDateTime();try{var o=H.from(n),f=b.from(n);return new u(o,f)}catch{throw new r("Unable to obtain LocalDateTime TemporalAccessor: "+n+", type "+(n.constructor!=null?n.constructor.name:""))}},u.parse=function(n,o){return o===void 0&&(o=Q.ISO_LOCAL_DATE_TIME),w(o,"formatter"),o.parse(n,u.FROM)};function u(i,n){var o;return o=_.call(this)||this,k(i,H,"date"),k(n,b,"time"),o._date=i,o._time=n,o}var s=u.prototype;return s._withDateTime=function(n,o){return this._date.equals(n)&&this._time.equals(o)?this:new u(n,o)},s.isSupported=function(n){return n instanceof d||n instanceof y?n.isDateBased()||n.isTimeBased():n!=null&&n.isSupportedBy(this)},s.range=function(n){return n instanceof d?n.isTimeBased()?this._time.range(n):this._date.range(n):n.rangeRefinedBy(this)},s.get=function(n){return n instanceof d?n.isTimeBased()?this._time.get(n):this._date.get(n):_.prototype.get.call(this,n)},s.getLong=function(n){return w(n,"field"),n instanceof d?n.isTimeBased()?this._time.getLong(n):this._date.getLong(n):n.getFrom(this)},s.year=function(){return this._date.year()},s.monthValue=function(){return this._date.monthValue()},s.month=function(){return this._date.month()},s.dayOfMonth=function(){return this._date.dayOfMonth()},s.dayOfYear=function(){return this._date.dayOfYear()},s.dayOfWeek=function(){return this._date.dayOfWeek()},s.hour=function(){return this._time.hour()},s.minute=function(){return this._time.minute()},s.second=function(){return this._time.second()},s.nano=function(){return this._time.nano()},s._withAdjuster=function(n){return w(n,"adjuster"),n instanceof H?this._withDateTime(n,this._time):n instanceof b?this._withDateTime(this._date,n):n instanceof u?n:_.prototype._withAdjuster.call(this,n)},s._withField=function(n,o){return w(n,"field"),n instanceof d?n.isTimeBased()?this._withDateTime(this._date,this._time.with(n,o)):this._withDateTime(this._date.with(n,o),this._time):n.adjustInto(this,o)},s.withYear=function(n){return this._withDateTime(this._date.withYear(n),this._time)},s.withMonth=function(n){return this._withDateTime(this._date.withMonth(n),this._time)},s.withDayOfMonth=function(n){return this._withDateTime(this._date.withDayOfMonth(n),this._time)},s.withDayOfYear=function(n){return this._withDateTime(this._date.withDayOfYear(n),this._time)},s.withHour=function(n){var o=this._time.withHour(n);return this._withDateTime(this._date,o)},s.withMinute=function(n){var o=this._time.withMinute(n);return this._withDateTime(this._date,o)},s.withSecond=function(n){var o=this._time.withSecond(n);return this._withDateTime(this._date,o)},s.withNano=function(n){var o=this._time.withNano(n);return this._withDateTime(this._date,o)},s.truncatedTo=function(n){return this._withDateTime(this._date,this._time.truncatedTo(n))},s._plusUnit=function(n,o){if(w(o,"unit"),o instanceof y){switch(o){case y.NANOS:return this.plusNanos(n);case y.MICROS:return this.plusDays(p.intDiv(n,b.MICROS_PER_DAY)).plusNanos(p.intMod(n,b.MICROS_PER_DAY)*1e3);case y.MILLIS:return this.plusDays(p.intDiv(n,b.MILLIS_PER_DAY)).plusNanos(p.intMod(n,b.MILLIS_PER_DAY)*1e6);case y.SECONDS:return this.plusSeconds(n);case y.MINUTES:return this.plusMinutes(n);case y.HOURS:return this.plusHours(n);case y.HALF_DAYS:return this.plusDays(p.intDiv(n,256)).plusHours(p.intMod(n,256)*12)}return this._withDateTime(this._date.plus(n,o),this._time)}return o.addTo(this,n)},s.plusYears=function(n){var o=this._date.plusYears(n);return this._withDateTime(o,this._time)},s.plusMonths=function(n){var o=this._date.plusMonths(n);return this._withDateTime(o,this._time)},s.plusWeeks=function(n){var o=this._date.plusWeeks(n);return this._withDateTime(o,this._time)},s.plusDays=function(n){var o=this._date.plusDays(n);return this._withDateTime(o,this._time)},s.plusHours=function(n){return this._plusWithOverflow(this._date,n,0,0,0,1)},s.plusMinutes=function(n){return this._plusWithOverflow(this._date,0,n,0,0,1)},s.plusSeconds=function(n){return this._plusWithOverflow(this._date,0,0,n,0,1)},s.plusNanos=function(n){return this._plusWithOverflow(this._date,0,0,0,n,1)},s._minusUnit=function(n,o){return w(o,"unit"),this._plusUnit(-1*n,o)},s.minusYears=function(n){return this.plusYears(-1*n)},s.minusMonths=function(n){return this.plusMonths(-1*n)},s.minusWeeks=function(n){return this.plusWeeks(-1*n)},s.minusDays=function(n){return this.plusDays(-1*n)},s.minusHours=function(n){return this._plusWithOverflow(this._date,n,0,0,0,-1)},s.minusMinutes=function(n){return this._plusWithOverflow(this._date,0,n,0,0,-1)},s.minusSeconds=function(n){return this._plusWithOverflow(this._date,0,0,n,0,-1)},s.minusNanos=function(n){return this._plusWithOverflow(this._date,0,0,0,n,-1)},s._plusWithOverflow=function(n,o,f,E,T,I){if(o===0&&f===0&&E===0&&T===0)return this._withDateTime(n,this._time);var C=p.intDiv(T,b.NANOS_PER_DAY)+p.intDiv(E,b.SECONDS_PER_DAY)+p.intDiv(f,b.MINUTES_PER_DAY)+p.intDiv(o,b.HOURS_PER_DAY);C*=I;var U=p.intMod(T,b.NANOS_PER_DAY)+p.intMod(E,b.SECONDS_PER_DAY)*b.NANOS_PER_SECOND+p.intMod(f,b.MINUTES_PER_DAY)*b.NANOS_PER_MINUTE+p.intMod(o,b.HOURS_PER_DAY)*b.NANOS_PER_HOUR,q=this._time.toNanoOfDay();U=U*I+q,C+=p.floorDiv(U,b.NANOS_PER_DAY);var j=p.floorMod(U,b.NANOS_PER_DAY),z=j===q?this._time:b.ofNanoOfDay(j);return this._withDateTime(n.plusDays(C),z)},s.query=function(n){return w(n,"query"),n===P.localDate()?this.toLocalDate():_.prototype.query.call(this,n)},s.adjustInto=function(n){return _.prototype.adjustInto.call(this,n)},s.until=function(n,o){w(n,"endExclusive"),w(o,"unit");var f=u.from(n);if(o instanceof y){if(o.isTimeBased()){var E=this._date.daysUntil(f._date),T=f._time.toNanoOfDay()-this._time.toNanoOfDay();E>0&&T<0?(E--,T+=b.NANOS_PER_DAY):E<0&&T>0&&(E++,T-=b.NANOS_PER_DAY);var I=E;switch(o){case y.NANOS:return I=p.safeMultiply(I,b.NANOS_PER_DAY),p.safeAdd(I,T);case y.MICROS:return I=p.safeMultiply(I,b.MICROS_PER_DAY),p.safeAdd(I,p.intDiv(T,1e3));case y.MILLIS:return I=p.safeMultiply(I,b.MILLIS_PER_DAY),p.safeAdd(I,p.intDiv(T,1e6));case y.SECONDS:return I=p.safeMultiply(I,b.SECONDS_PER_DAY),p.safeAdd(I,p.intDiv(T,b.NANOS_PER_SECOND));case y.MINUTES:return I=p.safeMultiply(I,b.MINUTES_PER_DAY),p.safeAdd(I,p.intDiv(T,b.NANOS_PER_MINUTE));case y.HOURS:return I=p.safeMultiply(I,b.HOURS_PER_DAY),p.safeAdd(I,p.intDiv(T,b.NANOS_PER_HOUR));case y.HALF_DAYS:return I=p.safeMultiply(I,2),p.safeAdd(I,p.intDiv(T,b.NANOS_PER_HOUR*12))}throw new l("Unsupported unit: "+o)}var C=f._date,U=f._time;return C.isAfter(this._date)&&U.isBefore(this._time)?C=C.minusDays(1):C.isBefore(this._date)&&U.isAfter(this._time)&&(C=C.plusDays(1)),this._date.until(C,o)}return o.between(this,f)},s.atOffset=function(n){return ut.of(this,n)},s.atZone=function(n){return at.of(this,n)},s.toLocalDate=function(){return this._date},s.toLocalTime=function(){return this._time},s.compareTo=function(n){return w(n,"other"),k(n,u,"other"),this._compareTo0(n)},s._compareTo0=function(n){var o=this._date.compareTo(n.toLocalDate());return o===0&&(o=this._time.compareTo(n.toLocalTime())),o},s.isAfter=function(n){return this.compareTo(n)>0},s.isBefore=function(n){return this.compareTo(n)<0},s.isEqual=function(n){return this.compareTo(n)===0},s.equals=function(n){return this===n?!0:n instanceof u?this._date.equals(n._date)&&this._time.equals(n._time):!1},s.hashCode=function(){return this._date.hashCode()^this._time.hashCode()},s.toString=function(){return this._date.toString()+"T"+this._time.toString()},s.toJSON=function(){return this.toString()},s.format=function(n){return w(n,"formatter"),n.format(this)},u}(aa);function qg(){le.MIN=le.of(H.MIN,b.MIN),le.MAX=le.of(H.MAX,b.MAX),le.FROM=Le("LocalDateTime.FROM",function(_){return le.from(_)})}var b=function(_){O(u,_),u.now=function(n){return n==null?u._now(he.systemDefaultZone()):n instanceof he?u._now(n):u._now(he.system(n))},u._now=function(n){return n===void 0&&(n=he.systemDefaultZone()),w(n,"clock"),u.ofInstant(n.instant(),n.zone())},u.ofInstant=function(n,o){o===void 0&&(o=ae.systemDefault());var f=o.rules().offset(n),E=p.intMod(n.epochSecond(),u.SECONDS_PER_DAY);return E=p.intMod(E+f.totalSeconds(),u.SECONDS_PER_DAY),E<0&&(E+=u.SECONDS_PER_DAY),u.ofSecondOfDay(E,n.nano())},u.of=function(n,o,f,E){return new u(n,o,f,E)},u.ofSecondOfDay=function(n,o){n===void 0&&(n=0),o===void 0&&(o=0),d.SECOND_OF_DAY.checkValidValue(n),d.NANO_OF_SECOND.checkValidValue(o);var f=p.intDiv(n,u.SECONDS_PER_HOUR);n-=f*u.SECONDS_PER_HOUR;var E=p.intDiv(n,u.SECONDS_PER_MINUTE);return n-=E*u.SECONDS_PER_MINUTE,new u(f,E,n,o)},u.ofNanoOfDay=function(n){n===void 0&&(n=0),d.NANO_OF_DAY.checkValidValue(n);var o=p.intDiv(n,u.NANOS_PER_HOUR);n-=o*u.NANOS_PER_HOUR;var f=p.intDiv(n,u.NANOS_PER_MINUTE);n-=f*u.NANOS_PER_MINUTE;var E=p.intDiv(n,u.NANOS_PER_SECOND);return n-=E*u.NANOS_PER_SECOND,new u(o,f,E,n)},u.from=function(n){w(n,"temporal");var o=n.query(P.localTime());if(o==null)throw new r("Unable to obtain LocalTime TemporalAccessor: "+n+", type "+(n.constructor!=null?n.constructor.name:""));return o},u.parse=function(n,o){return o===void 0&&(o=Q.ISO_LOCAL_TIME),w(o,"formatter"),o.parse(n,u.FROM)};function u(i,n,o,f){var E;i===void 0&&(i=0),n===void 0&&(n=0),o===void 0&&(o=0),f===void 0&&(f=0),E=_.call(this)||this;var T=p.safeToInt(i),I=p.safeToInt(n),C=p.safeToInt(o),U=p.safeToInt(f);return u._validate(T,I,C,U),I===0&&C===0&&U===0?(u.HOURS[T]||(E._hour=T,E._minute=I,E._second=C,E._nano=U,u.HOURS[T]=x(E)),u.HOURS[T]||x(E)):(E._hour=T,E._minute=I,E._second=C,E._nano=U,E)}u._validate=function(n,o,f,E){d.HOUR_OF_DAY.checkValidValue(n),d.MINUTE_OF_HOUR.checkValidValue(o),d.SECOND_OF_MINUTE.checkValidValue(f),d.NANO_OF_SECOND.checkValidValue(E)};var s=u.prototype;return s.isSupported=function(n){return n instanceof d||n instanceof y?n.isTimeBased():n!=null&&n.isSupportedBy(this)},s.range=function(n){return w(n),_.prototype.range.call(this,n)},s.get=function(n){return this.getLong(n)},s.getLong=function(n){return w(n,"field"),n instanceof d?this._get0(n):n.getFrom(this)},s._get0=function(n){switch(n){case d.NANO_OF_SECOND:return this._nano;case d.NANO_OF_DAY:return this.toNanoOfDay();case d.MICRO_OF_SECOND:return p.intDiv(this._nano,1e3);case d.MICRO_OF_DAY:return p.intDiv(this.toNanoOfDay(),1e3);case d.MILLI_OF_SECOND:return p.intDiv(this._nano,1e6);case d.MILLI_OF_DAY:return p.intDiv(this.toNanoOfDay(),1e6);case d.SECOND_OF_MINUTE:return this._second;case d.SECOND_OF_DAY:return this.toSecondOfDay();case d.MINUTE_OF_HOUR:return this._minute;case d.MINUTE_OF_DAY:return this._hour*60+this._minute;case d.HOUR_OF_AMPM:return p.intMod(this._hour,12);case d.CLOCK_HOUR_OF_AMPM:{var o=p.intMod(this._hour,12);return o%12===0?12:o}case d.HOUR_OF_DAY:return this._hour;case d.CLOCK_HOUR_OF_DAY:return this._hour===0?24:this._hour;case d.AMPM_OF_DAY:return p.intDiv(this._hour,12)}throw new l("Unsupported field: "+n)},s.hour=function(){return this._hour},s.minute=function(){return this._minute},s.second=function(){return this._second},s.nano=function(){return this._nano},s._withAdjuster=function(n){return w(n,"adjuster"),n instanceof u?n:_.prototype._withAdjuster.call(this,n)},s._withField=function(n,o){if(w(n,"field"),k(n,_t,"field"),n instanceof d){switch(n.checkValidValue(o),n){case d.NANO_OF_SECOND:return this.withNano(o);case d.NANO_OF_DAY:return u.ofNanoOfDay(o);case d.MICRO_OF_SECOND:return this.withNano(o*1e3);case d.MICRO_OF_DAY:return u.ofNanoOfDay(o*1e3);case d.MILLI_OF_SECOND:return this.withNano(o*1e6);case d.MILLI_OF_DAY:return u.ofNanoOfDay(o*1e6);case d.SECOND_OF_MINUTE:return this.withSecond(o);case d.SECOND_OF_DAY:return this.plusSeconds(o-this.toSecondOfDay());case d.MINUTE_OF_HOUR:return this.withMinute(o);case d.MINUTE_OF_DAY:return this.plusMinutes(o-(this._hour*60+this._minute));case d.HOUR_OF_AMPM:return this.plusHours(o-p.intMod(this._hour,12));case d.CLOCK_HOUR_OF_AMPM:return this.plusHours((o===12?0:o)-p.intMod(this._hour,12));case d.HOUR_OF_DAY:return this.withHour(o);case d.CLOCK_HOUR_OF_DAY:return this.withHour(o===24?0:o);case d.AMPM_OF_DAY:return this.plusHours((o-p.intDiv(this._hour,12))*12)}throw new l("Unsupported field: "+n)}return n.adjustInto(this,o)},s.withHour=function(n){return n===void 0&&(n=0),this._hour===n?this:new u(n,this._minute,this._second,this._nano)},s.withMinute=function(n){return n===void 0&&(n=0),this._minute===n?this:new u(this._hour,n,this._second,this._nano)},s.withSecond=function(n){return n===void 0&&(n=0),this._second===n?this:new u(this._hour,this._minute,n,this._nano)},s.withNano=function(n){return n===void 0&&(n=0),this._nano===n?this:new u(this._hour,this._minute,this._second,n)},s.truncatedTo=function(n){if(w(n,"unit"),n===y.NANOS)return this;var o=n.duration();if(o.seconds()>u.SECONDS_PER_DAY)throw new r("Unit is too large to be used for truncation");var f=o.toNanos();if(p.intMod(u.NANOS_PER_DAY,f)!==0)throw new r("Unit must divide into a standard day without remainder");var E=this.toNanoOfDay();return u.ofNanoOfDay(p.intDiv(E,f)*f)},s._plusUnit=function(n,o){if(w(o,"unit"),o instanceof y){switch(o){case y.NANOS:return this.plusNanos(n);case y.MICROS:return this.plusNanos(p.intMod(n,u.MICROS_PER_DAY)*1e3);case y.MILLIS:return this.plusNanos(p.intMod(n,u.MILLIS_PER_DAY)*1e6);case y.SECONDS:return this.plusSeconds(n);case y.MINUTES:return this.plusMinutes(n);case y.HOURS:return this.plusHours(n);case y.HALF_DAYS:return this.plusHours(p.intMod(n,2)*12)}throw new l("Unsupported unit: "+o)}return o.addTo(this,n)},s.plusHours=function(n){if(n===0)return this;var o=p.intMod(p.intMod(n,u.HOURS_PER_DAY)+this._hour+u.HOURS_PER_DAY,u.HOURS_PER_DAY);return new u(o,this._minute,this._second,this._nano)},s.plusMinutes=function(n){if(n===0)return this;var o=this._hour*u.MINUTES_PER_HOUR+this._minute,f=p.intMod(p.intMod(n,u.MINUTES_PER_DAY)+o+u.MINUTES_PER_DAY,u.MINUTES_PER_DAY);if(o===f)return this;var E=p.intDiv(f,u.MINUTES_PER_HOUR),T=p.intMod(f,u.MINUTES_PER_HOUR);return new u(E,T,this._second,this._nano)},s.plusSeconds=function(n){if(n===0)return this;var o=this._hour*u.SECONDS_PER_HOUR+this._minute*u.SECONDS_PER_MINUTE+this._second,f=p.intMod(p.intMod(n,u.SECONDS_PER_DAY)+o+u.SECONDS_PER_DAY,u.SECONDS_PER_DAY);if(o===f)return this;var E=p.intDiv(f,u.SECONDS_PER_HOUR),T=p.intMod(p.intDiv(f,u.SECONDS_PER_MINUTE),u.MINUTES_PER_HOUR),I=p.intMod(f,u.SECONDS_PER_MINUTE);return new u(E,T,I,this._nano)},s.plusNanos=function(n){if(n===0)return this;var o=this.toNanoOfDay(),f=p.intMod(p.intMod(n,u.NANOS_PER_DAY)+o+u.NANOS_PER_DAY,u.NANOS_PER_DAY);if(o===f)return this;var E=p.intDiv(f,u.NANOS_PER_HOUR),T=p.intMod(p.intDiv(f,u.NANOS_PER_MINUTE),u.MINUTES_PER_HOUR),I=p.intMod(p.intDiv(f,u.NANOS_PER_SECOND),u.SECONDS_PER_MINUTE),C=p.intMod(f,u.NANOS_PER_SECOND);return new u(E,T,I,C)},s._minusUnit=function(n,o){return w(o,"unit"),this._plusUnit(-1*n,o)},s.minusHours=function(n){return this.plusHours(-1*p.intMod(n,u.HOURS_PER_DAY))},s.minusMinutes=function(n){return this.plusMinutes(-1*p.intMod(n,u.MINUTES_PER_DAY))},s.minusSeconds=function(n){return this.plusSeconds(-1*p.intMod(n,u.SECONDS_PER_DAY))},s.minusNanos=function(n){return this.plusNanos(-1*p.intMod(n,u.NANOS_PER_DAY))},s.query=function(n){return w(n,"query"),n===P.precision()?y.NANOS:n===P.localTime()?this:n===P.chronology()||n===P.zoneId()||n===P.zone()||n===P.offset()||n===P.localDate()?null:n.queryFrom(this)},s.adjustInto=function(n){return n.with(u.NANO_OF_DAY,this.toNanoOfDay())},s.until=function(n,o){w(n,"endExclusive"),w(o,"unit");var f=u.from(n);if(o instanceof y){var E=f.toNanoOfDay()-this.toNanoOfDay();switch(o){case y.NANOS:return E;case y.MICROS:return p.intDiv(E,1e3);case y.MILLIS:return p.intDiv(E,1e6);case y.SECONDS:return p.intDiv(E,u.NANOS_PER_SECOND);case y.MINUTES:return p.intDiv(E,u.NANOS_PER_MINUTE);case y.HOURS:return p.intDiv(E,u.NANOS_PER_HOUR);case y.HALF_DAYS:return p.intDiv(E,12*u.NANOS_PER_HOUR)}throw new l("Unsupported unit: "+o)}return o.between(this,f)},s.atDate=function(n){return le.of(n,this)},s.atOffset=function(n){return gt.of(this,n)},s.toSecondOfDay=function(){var n=this._hour*u.SECONDS_PER_HOUR;return n+=this._minute*u.SECONDS_PER_MINUTE,n+=this._second,n},s.toNanoOfDay=function(){var n=this._hour*u.NANOS_PER_HOUR;return n+=this._minute*u.NANOS_PER_MINUTE,n+=this._second*u.NANOS_PER_SECOND,n+=this._nano,n},s.compareTo=function(n){w(n,"other"),k(n,u,"other");var o=p.compareNumbers(this._hour,n._hour);return o===0&&(o=p.compareNumbers(this._minute,n._minute),o===0&&(o=p.compareNumbers(this._second,n._second),o===0&&(o=p.compareNumbers(this._nano,n._nano)))),o},s.isAfter=function(n){return this.compareTo(n)>0},s.isBefore=function(n){return this.compareTo(n)<0},s.equals=function(n){return this===n?!0:n instanceof u?this._hour===n._hour&&this._minute===n._minute&&this._second===n._second&&this._nano===n._nano:!1},s.hashCode=function(){var n=this.toNanoOfDay();return p.hash(n)},s.toString=function(){var n="",o=this._hour,f=this._minute,E=this._second,T=this._nano;return n+=o<10?"0":"",n+=o,n+=f<10?":0":":",n+=f,(E>0||T>0)&&(n+=E<10?":0":":",n+=E,T>0&&(n+=".",p.intMod(T,1e6)===0?n+=(""+(p.intDiv(T,1e6)+1e3)).substring(1):p.intMod(T,1e3)===0?n+=(""+(p.intDiv(T,1e3)+1e6)).substring(1):n+=(""+(T+1e9)).substring(1))),n},s.toJSON=function(){return this.toString()},s.format=function(n){return w(n,"formatter"),n.format(this)},u}(ze);function Vg(){b.HOURS=[];for(var _=0;_<24;_++)b.of(_,0,0,0);b.MIN=b.HOURS[0],b.MAX=new b(23,59,59,999999999),b.MIDNIGHT=b.HOURS[0],b.NOON=b.HOURS[12],b.FROM=Le("LocalTime.FROM",function(u){return b.from(u)})}b.HOURS_PER_DAY=24,b.MINUTES_PER_HOUR=60,b.MINUTES_PER_DAY=b.MINUTES_PER_HOUR*b.HOURS_PER_DAY,b.SECONDS_PER_MINUTE=60,b.SECONDS_PER_HOUR=b.SECONDS_PER_MINUTE*b.MINUTES_PER_HOUR,b.SECONDS_PER_DAY=b.SECONDS_PER_HOUR*b.HOURS_PER_DAY,b.MILLIS_PER_DAY=b.SECONDS_PER_DAY*1e3,b.MICROS_PER_DAY=b.SECONDS_PER_DAY*1e6,b.NANOS_PER_SECOND=1e9,b.NANOS_PER_MINUTE=b.NANOS_PER_SECOND*b.SECONDS_PER_MINUTE,b.NANOS_PER_HOUR=b.NANOS_PER_MINUTE*b.MINUTES_PER_HOUR,b.NANOS_PER_DAY=b.NANOS_PER_HOUR*b.HOURS_PER_DAY;var zr=1e6,pe=function(_){O(u,_),u.now=function(n){return n===void 0&&(n=he.systemUTC()),n.instant()},u.ofEpochSecond=function(n,o){o===void 0&&(o=0);var f=n+p.floorDiv(o,b.NANOS_PER_SECOND),E=p.floorMod(o,b.NANOS_PER_SECOND);return u._create(f,E)},u.ofEpochMilli=function(n){var o=p.floorDiv(n,1e3),f=p.floorMod(n,1e3);return u._create(o,f*1e6)},u.ofEpochMicro=function(n){var o=p.floorDiv(n,1e6),f=p.floorMod(n,1e6);return u._create(o,f*1e3)},u.from=function(n){try{var o=n.getLong(d.INSTANT_SECONDS),f=n.get(d.NANO_OF_SECOND);return u.ofEpochSecond(o,f)}catch(E){throw new r("Unable to obtain Instant from TemporalAccessor: "+n+", type "+typeof n,E)}},u.parse=function(n){return Q.ISO_INSTANT.parse(n,u.FROM)},u._create=function(n,o){return n===0&&o===0?u.EPOCH:new u(n,o)},u._validate=function(n,o){if(n<u.MIN_SECONDS||n>u.MAX_SECONDS)throw new r("Instant exceeds minimum or maximum instant");if(o<0||o>b.NANOS_PER_SECOND)throw new r("Instant exceeds minimum or maximum instant")};function u(i,n){var o;return o=_.call(this)||this,u._validate(i,n),o._seconds=p.safeToInt(i),o._nanos=p.safeToInt(n),o}var s=u.prototype;return s.isSupported=function(n){return n instanceof d?n===d.INSTANT_SECONDS||n===d.NANO_OF_SECOND||n===d.MICRO_OF_SECOND||n===d.MILLI_OF_SECOND:n instanceof y?n.isTimeBased()||n===y.DAYS:n!=null&&n.isSupportedBy(this)},s.range=function(n){return _.prototype.range.call(this,n)},s.get=function(n){return this.getLong(n)},s.getLong=function(n){if(n instanceof d){switch(n){case d.NANO_OF_SECOND:return this._nanos;case d.MICRO_OF_SECOND:return p.intDiv(this._nanos,1e3);case d.MILLI_OF_SECOND:return p.intDiv(this._nanos,zr);case d.INSTANT_SECONDS:return this._seconds}throw new l("Unsupported field: "+n)}return n.getFrom(this)},s.epochSecond=function(){return this._seconds},s.nano=function(){return this._nanos},s._withField=function(n,o){if(w(n,"field"),n instanceof d){switch(n.checkValidValue(o),n){case d.MILLI_OF_SECOND:{var f=o*zr;return f!==this._nanos?u._create(this._seconds,f):this}case d.MICRO_OF_SECOND:{var E=o*1e3;return E!==this._nanos?u._create(this._seconds,E):this}case d.NANO_OF_SECOND:return o!==this._nanos?u._create(this._seconds,o):this;case d.INSTANT_SECONDS:return o!==this._seconds?u._create(o,this._nanos):this}throw new l("Unsupported field: "+n)}return n.adjustInto(this,o)},s.truncatedTo=function(n){if(w(n,"unit"),n===y.NANOS)return this;var o=n.duration();if(o.seconds()>b.SECONDS_PER_DAY)throw new r("Unit is too large to be used for truncation");var f=o.toNanos();if(p.intMod(b.NANOS_PER_DAY,f)!==0)throw new r("Unit must divide into a standard day without remainder");var E=p.intMod(this._seconds,b.SECONDS_PER_DAY)*b.NANOS_PER_SECOND+this._nanos,T=p.intDiv(E,f)*f;return this.plusNanos(T-E)},s._plusUnit=function(n,o){if(w(n,"amountToAdd"),w(o,"unit"),k(o,G),o instanceof y){switch(o){case y.NANOS:return this.plusNanos(n);case y.MICROS:return this.plusMicros(n);case y.MILLIS:return this.plusMillis(n);case y.SECONDS:return this.plusSeconds(n);case y.MINUTES:return this.plusSeconds(p.safeMultiply(n,b.SECONDS_PER_MINUTE));case y.HOURS:return this.plusSeconds(p.safeMultiply(n,b.SECONDS_PER_HOUR));case y.HALF_DAYS:return this.plusSeconds(p.safeMultiply(n,b.SECONDS_PER_DAY/2));case y.DAYS:return this.plusSeconds(p.safeMultiply(n,b.SECONDS_PER_DAY))}throw new l("Unsupported unit: "+o)}return o.addTo(this,n)},s.plusSeconds=function(n){return this._plus(n,0)},s.plusMillis=function(n){return this._plus(p.intDiv(n,1e3),p.intMod(n,1e3)*zr)},s.plusNanos=function(n){return this._plus(0,n)},s.plusMicros=function(n){return this._plus(p.intDiv(n,1e6),p.intMod(n,1e6)*1e3)},s._plus=function(n,o){if(n===0&&o===0)return this;var f=this._seconds+n;f=f+p.intDiv(o,b.NANOS_PER_SECOND);var E=this._nanos+o%b.NANOS_PER_SECOND;return u.ofEpochSecond(f,E)},s._minusUnit=function(n,o){return this._plusUnit(-1*n,o)},s.minusSeconds=function(n){return this.plusSeconds(n*-1)},s.minusMillis=function(n){return this.plusMillis(-1*n)},s.minusNanos=function(n){return this.plusNanos(-1*n)},s.minusMicros=function(n){return this.plusMicros(-1*n)},s.query=function(n){return w(n,"query"),n===P.precision()?y.NANOS:n===P.localDate()||n===P.localTime()||n===P.chronology()||n===P.zoneId()||n===P.zone()||n===P.offset()?null:n.queryFrom(this)},s.adjustInto=function(n){return w(n,"temporal"),n.with(d.INSTANT_SECONDS,this._seconds).with(d.NANO_OF_SECOND,this._nanos)},s.until=function(n,o){w(n,"endExclusive"),w(o,"unit");var f=u.from(n);if(o instanceof y){switch(o){case y.NANOS:return this._nanosUntil(f);case y.MICROS:return this._microsUntil(f);case y.MILLIS:return p.safeSubtract(f.toEpochMilli(),this.toEpochMilli());case y.SECONDS:return this._secondsUntil(f);case y.MINUTES:return p.intDiv(this._secondsUntil(f),b.SECONDS_PER_MINUTE);case y.HOURS:return p.intDiv(this._secondsUntil(f),b.SECONDS_PER_HOUR);case y.HALF_DAYS:return p.intDiv(this._secondsUntil(f),12*b.SECONDS_PER_HOUR);case y.DAYS:return p.intDiv(this._secondsUntil(f),b.SECONDS_PER_DAY)}throw new l("Unsupported unit: "+o)}return o.between(this,f)},s._microsUntil=function(n){var o=p.safeSubtract(n.epochSecond(),this.epochSecond()),f=p.safeMultiply(o,1e6);return p.safeAdd(f,p.intDiv(n.nano()-this.nano(),1e3))},s._nanosUntil=function(n){var o=p.safeSubtract(n.epochSecond(),this.epochSecond()),f=p.safeMultiply(o,b.NANOS_PER_SECOND);return p.safeAdd(f,n.nano()-this.nano())},s._secondsUntil=function(n){var o=p.safeSubtract(n.epochSecond(),this.epochSecond()),f=n.nano()-this.nano();return o>0&&f<0?o--:o<0&&f>0&&o++,o},s.atOffset=function(n){return ut.ofInstant(this,n)},s.atZone=function(n){return at.ofInstant(this,n)},s.toEpochMilli=function(){var n=p.safeMultiply(this._seconds,1e3);return n+p.intDiv(this._nanos,zr)},s.compareTo=function(n){w(n,"otherInstant"),k(n,u,"otherInstant");var o=p.compareNumbers(this._seconds,n._seconds);return o!==0?o:this._nanos-n._nanos},s.isAfter=function(n){return this.compareTo(n)>0},s.isBefore=function(n){return this.compareTo(n)<0},s.equals=function(n){return this===n?!0:n instanceof u?this.epochSecond()===n.epochSecond()&&this.nano()===n.nano():!1},s.hashCode=function(){return p.hashCode(this._seconds,this._nanos)},s.toString=function(){return Q.ISO_INSTANT.format(this)},s.toJSON=function(){return this.toString()},u}(ze);function Hg(){pe.MIN_SECONDS=-31619119219200,pe.MAX_SECONDS=31494816403199,pe.EPOCH=new pe(0,0),pe.MIN=pe.ofEpochSecond(pe.MIN_SECONDS,0),pe.MAX=pe.ofEpochSecond(pe.MAX_SECONDS,999999999),pe.FROM=Le("Instant.FROM",function(_){return pe.from(_)})}var he=function(){function _(){}_.systemUTC=function(){return new ua(Z.UTC)},_.systemDefaultZone=function(){return new ua(ae.systemDefault())},_.system=function(i){return new ua(i)},_.fixed=function(i,n){return new Wg(i,n)},_.offset=function(i,n){return new Gg(i,n)};var u=_.prototype;return u.millis=function(){S("Clock.millis")},u.instant=function(){S("Clock.instant")},u.zone=function(){S("Clock.zone")},u.withZone=function(){S("Clock.withZone")},_}(),ua=function(_){O(u,_);function u(i){var n;return w(i,"zone"),n=_.call(this)||this,n._zone=i,n}var s=u.prototype;return s.zone=function(){return this._zone},s.millis=function(){return new Date().getTime()},s.instant=function(){return pe.ofEpochMilli(this.millis())},s.equals=function(n){return n instanceof u?this._zone.equals(n._zone):!1},s.withZone=function(n){return n.equals(this._zone)?this:new u(n)},s.toString=function(){return"SystemClock["+this._zone.toString()+"]"},u}(he),Wg=function(_){O(u,_);function u(i,n){var o;return o=_.call(this)||this,o._instant=i,o._zoneId=n,o}var s=u.prototype;return s.instant=function(){return this._instant},s.millis=function(){return this._instant.toEpochMilli()},s.zone=function(){return this._zoneId},s.toString=function(){return"FixedClock[]"},s.equals=function(n){return n instanceof u?this._instant.equals(n._instant)&&this._zoneId.equals(n._zoneId):!1},s.withZone=function(n){return n.equals(this._zoneId)?this:new u(this._instant,n)},u}(he),Gg=function(_){O(u,_);function u(i,n){var o;return o=_.call(this)||this,o._baseClock=i,o._offset=n,o}var s=u.prototype;return s.zone=function(){return this._baseClock.zone()},s.withZone=function(n){return n.equals(this._baseClock.zone())?this:new u(this._baseClock.withZone(n),this._offset)},s.millis=function(){return this._baseClock.millis()+this._offset.toMillis()},s.instant=function(){return this._baseClock.instant().plus(this._offset)},s.equals=function(n){return n instanceof u?this._baseClock.equals(n._baseClock)&&this._offset.equals(n._offset):!1},s.toString=function(){return"OffsetClock["+this._baseClock+","+this._offset+"]"},u}(he);var uf=function(){_.of=function(i,n,o){return new _(i,n,o)};function _(s,i,n){if(w(s,"transition"),w(i,"offsetBefore"),w(n,"offsetAfter"),i.equals(n))throw new h("Offsets must not be equal");if(s.nano()!==0)throw new h("Nano-of-second must be zero");s instanceof le?this._transition=s:this._transition=le.ofEpochSecond(s,0,i),this._offsetBefore=i,this._offsetAfter=n}var u=_.prototype;return u.instant=function(){return this._transition.toInstant(this._offsetBefore)},u.toEpochSecond=function(){return this._transition.toEpochSecond(this._offsetBefore)},u.dateTimeBefore=function(){return this._transition},u.dateTimeAfter=function(){return this._transition.plusSeconds(this.durationSeconds())},u.offsetBefore=function(){return this._offsetBefore},u.offsetAfter=function(){return this._offsetAfter},u.duration=function(){return Y.ofSeconds(this.durationSeconds())},u.durationSeconds=function(){return this._offsetAfter.totalSeconds()-this._offsetBefore.totalSeconds()},u.isGap=function(){return this._offsetAfter.totalSeconds()>this._offsetBefore.totalSeconds()},u.isOverlap=function(){return this._offsetAfter.totalSeconds()<this._offsetBefore.totalSeconds()},u.isValidOffset=function(i){return this.isGap()?!1:this._offsetBefore.equals(i)||this._offsetAfter.equals(i)},u.validOffsets=function(){return this.isGap()?[]:[this._offsetBefore,this._offsetAfter]},u.compareTo=function(i){return this.instant().compareTo(i.instant())},u.equals=function(i){if(i===this)return!0;if(i instanceof _){var n=i;return this._transition.equals(n._transition)&&this._offsetBefore.equals(n.offsetBefore())&&this._offsetAfter.equals(n.offsetAfter())}return!1},u.hashCode=function(){return this._transition.hashCode()^this._offsetBefore.hashCode()^this._offsetAfter.hashCode()>>>16},u.toString=function(){return"Transition["+(this.isGap()?"Gap":"Overlap")+" at "+this._transition.toString()+this._offsetBefore.toString()+" to "+this._offsetAfter+"]"},_}();function jg(){P.ZONE_ID=Le("ZONE_ID",function(_){return _.query(P.ZONE_ID)}),P.CHRONO=Le("CHRONO",function(_){return _.query(P.CHRONO)}),P.PRECISION=Le("PRECISION",function(_){return _.query(P.PRECISION)}),P.OFFSET=Le("OFFSET",function(_){return _.isSupported(d.OFFSET_SECONDS)?Z.ofTotalSeconds(_.get(d.OFFSET_SECONDS)):null}),P.ZONE=Le("ZONE",function(_){var u=_.query(P.ZONE_ID);return u??_.query(P.OFFSET)}),P.LOCAL_DATE=Le("LOCAL_DATE",function(_){return _.isSupported(d.EPOCH_DAY)?H.ofEpochDay(_.getLong(d.EPOCH_DAY)):null}),P.LOCAL_TIME=Le("LOCAL_TIME",function(_){return _.isSupported(d.NANO_OF_DAY)?b.ofNanoOfDay(_.getLong(d.NANO_OF_DAY)):null})}var zg=function(_){O(u,_);function u(){return _.apply(this,arguments)||this}var s=u.prototype;return s.isFixedOffset=function(){return!1},s.offsetOfInstant=function(n){var o=new Date(n.toEpochMilli()).getTimezoneOffset();return Z.ofTotalMinutes(o*-1)},s.offsetOfEpochMilli=function(n){var o=new Date(n).getTimezoneOffset();return Z.ofTotalMinutes(o*-1)},s.offsetOfLocalDateTime=function(n){var o=n.toEpochSecond(Z.UTC)*1e3,f=new Date(o).getTimezoneOffset(),E=o+f*6e4,T=new Date(E).getTimezoneOffset();return Z.ofTotalMinutes(T*-1)},s.validOffsets=function(n){return[this.offsetOfLocalDateTime(n)]},s.transition=function(){return null},s.standardOffset=function(n){return this.offsetOfInstant(n)},s.daylightSavings=function(){this._throwNotSupported()},s.isDaylightSavings=function(){this._throwNotSupported()},s.isValidOffset=function(n,o){return this.offsetOfLocalDateTime(n).equals(o)},s.nextTransition=function(){this._throwNotSupported()},s.previousTransition=function(){this._throwNotSupported()},s.transitions=function(){this._throwNotSupported()},s.transitionRules=function(){this._throwNotSupported()},s._throwNotSupported=function(){throw new r("not supported operation")},s.equals=function(n){return this===n||n instanceof u},s.toString=function(){return"SYSTEM"},u}(ir),Kg=function(_){O(u,_);function u(){var i;return i=_.call(this)||this,i._rules=new zg,i}var s=u.prototype;return s.rules=function(){return this._rules},s.equals=function(n){return this===n},s.id=function(){return"SYSTEM"},u}(ae);var Cn=function(){function _(){}return _.systemDefault=function(){return la},_.getAvailableZoneIds=function(){return ar.getAvailableZoneIds()},_.of=function(s){if(w(s,"zoneId"),s==="Z")return Z.UTC;if(s.length===1)throw new r("Invalid zone: "+s);if(Dt.startsWith(s,"+")||Dt.startsWith(s,"-"))return Z.of(s);if(s==="UTC"||s==="GMT"||s==="GMT0"||s==="UT")return new mt(s,Z.UTC.rules());if(Dt.startsWith(s,"UTC+")||Dt.startsWith(s,"GMT+")||Dt.startsWith(s,"UTC-")||Dt.startsWith(s,"GMT-")){var i=Z.of(s.substring(3));return i.totalSeconds()===0?new mt(s.substring(0,3),i.rules()):new mt(s.substring(0,3)+i.id(),i.rules())}if(Dt.startsWith(s,"UT+")||Dt.startsWith(s,"UT-")){var n=Z.of(s.substring(2));return n.totalSeconds()===0?new mt("UT",n.rules()):new mt("UT"+n.id(),n.rules())}return s==="SYSTEM"?ae.systemDefault():mt.ofId(s)},_.ofOffset=function(s,i){if(w(s,"prefix"),w(i,"offset"),s.length===0)return i;if(s==="GMT"||s==="UTC"||s==="UT")return i.totalSeconds()===0?new mt(s,i.rules()):new mt(s+i.id(),i.rules());throw new h("Invalid prefix, must be GMT, UTC or UT: "+s)},_.from=function(s){w(s,"temporal");var i=s.query(P.zone());if(i==null)throw new r("Unable to obtain ZoneId from TemporalAccessor: "+s+", type "+(s.constructor!=null?s.constructor.name:""));return i},_}(),la=null;function Zg(){la=new Kg,ae.systemDefault=Cn.systemDefault,ae.getAvailableZoneIds=Cn.getAvailableZoneIds,ae.of=Cn.of,ae.ofOffset=Cn.ofOffset,ae.from=Cn.from,Z.from=Cn.from,ae.SYSTEM=la,ae.UTC=Z.ofTotalSeconds(0)}var lf=!1;function $g(){lf||(lf=!0,zs(),pt(),dg(),pg(),Vg(),Ag(),jg(),_g(),Hg(),Yg(),qg(),Pg(),Eg(),Mg(),Cg(),gg(),Tg(),kg(),Zg(),Fg(),Lg(),Rg(),Bg(),xg())}$g();var Xg=function(){function _(s,i){var n;if(s instanceof pe){this.instant=s;return}else if(s instanceof H)i=i??ae.systemDefault(),n=s.atStartOfDay(i);else if(s instanceof le)i=i??ae.systemDefault(),n=s.atZone(i);else if(s instanceof at)i==null?n=s:n=s.withZoneSameInstant(i);else throw new h("unsupported instance for convert operation:"+s);this.instant=n.toInstant()}var u=_.prototype;return u.toDate=function(){return new Date(this.instant.toEpochMilli())},u.toEpochMilli=function(){return this.instant.toEpochMilli()},_}();function cf(_,u){return new Xg(_,u)}function ff(_,u){if(u===void 0&&(u=ae.systemDefault()),w(_,"date"),w(u,"zone"),_ instanceof Date)return pe.ofEpochMilli(_.getTime()).atZone(u);if(typeof _.toDate=="function"&&_.toDate()instanceof Date)return pe.ofEpochMilli(_.toDate().getTime()).atZone(u);throw new h("date must be a javascript Date or a moment instance")}function Jg(_){var u=[];return function(i){return~u.indexOf(i)||(i(_),u.push(i)),_}}var hf={assert:R,DateTimeBuilder:Hr,DateTimeParseContext:$c,DateTimePrintContext:Jc,MathUtil:p,StringUtil:Dt,StringBuilder:of},df={_:hf,convert:cf,nativeJs:ff,ArithmeticException:c,DateTimeException:r,DateTimeParseException:a,IllegalArgumentException:h,IllegalStateException:m,UnsupportedTemporalTypeException:l,NullPointerException:g,Clock:he,DayOfWeek:de,Duration:Y,Instant:pe,LocalDate:H,LocalTime:b,LocalDateTime:le,OffsetTime:gt,OffsetDateTime:ut,Month:K,MonthDay:lr,ParsePosition:Ks,Period:It,Year:st,YearConstants:Ce,YearMonth:Ln,ZonedDateTime:at,ZoneOffset:Z,ZoneId:ae,ZoneRegion:mt,ZoneOffsetTransition:uf,ZoneRules:ir,ZoneRulesProvider:ar,ChronoLocalDate:On,ChronoLocalDateTime:aa,ChronoZonedDateTime:sa,IsoChronology:ue,ChronoField:d,ChronoUnit:y,IsoFields:ot,Temporal:ze,TemporalAccessor:Vt,TemporalAdjuster:cr,TemporalAdjusters:ia,TemporalAmount:V,TemporalField:_t,TemporalQueries:P,TemporalQuery:vn,TemporalUnit:G,ValueRange:X,DateTimeFormatter:Q,DateTimeFormatterBuilder:ce,DecimalStyle:or,ResolverStyle:$,SignStyle:ie,TextStyle:se},pf=Jg(df);df.use=pf,t.ArithmeticException=c,t.ChronoField=d,t.ChronoLocalDate=On,t.ChronoLocalDateTime=aa,t.ChronoUnit=y,t.ChronoZonedDateTime=sa,t.Clock=he,t.DateTimeException=r,t.DateTimeFormatter=Q,t.DateTimeFormatterBuilder=ce,t.DateTimeParseException=a,t.DayOfWeek=de,t.DecimalStyle=or,t.Duration=Y,t.IllegalArgumentException=h,t.IllegalStateException=m,t.Instant=pe,t.IsoChronology=ue,t.IsoFields=ot,t.LocalDate=H,t.LocalDateTime=le,t.LocalTime=b,t.Month=K,t.MonthDay=lr,t.NullPointerException=g,t.OffsetDateTime=ut,t.OffsetTime=gt,t.ParsePosition=Ks,t.Period=It,t.ResolverStyle=$,t.SignStyle=ie,t.Temporal=ze,t.TemporalAccessor=Vt,t.TemporalAdjuster=cr,t.TemporalAdjusters=ia,t.TemporalAmount=V,t.TemporalField=_t,t.TemporalQueries=P,t.TemporalQuery=vn,t.TemporalUnit=G,t.TextStyle=se,t.UnsupportedTemporalTypeException=l,t.ValueRange=X,t.Year=st,t.YearConstants=Ce,t.YearMonth=Ln,t.ZoneId=ae,t.ZoneOffset=Z,t.ZoneOffsetTransition=uf,t.ZoneRegion=mt,t.ZoneRules=ir,t.ZoneRulesProvider=ar,t.ZonedDateTime=at,t._=hf,t.convert=cf,t.nativeJs=ff,t.use=pf})});var o0=M((Bo,i0)=>{"use strict";Object.defineProperty(Bo,"__esModule",{value:!0});Bo.default=void 0;var lA=cA(bo()),ko=Cr();function cA(t){return t&&t.__esModule?t:{default:t}}var fA=ko.LocalDate.ofYearDay(1900,1),hA=Buffer.from([0]),dA=Buffer.from([8]),r0={id:61,type:"DATETIME",name:"DateTime",declaration:function(){return"datetime"},generateTypeInfo(){return Buffer.from([lA.default.id,8])},generateParameterLength(t,e){return t.value==null?hA:dA},generateParameterData:function*(t,e){if(t.value==null)return;let r=t.value,a;e.useUTC?a=ko.LocalDate.of(r.getUTCFullYear(),r.getUTCMonth()+1,r.getUTCDate()):a=ko.LocalDate.of(r.getFullYear(),r.getMonth()+1,r.getDate());let l=fA.until(a,ko.ChronoUnit.DAYS),c,h;if(e.useUTC){let g=r.getUTCHours()*60*60;g+=r.getUTCMinutes()*60,g+=r.getUTCSeconds(),c=g*1e3+r.getUTCMilliseconds()}else{let g=r.getHours()*60*60;g+=r.getMinutes()*60,g+=r.getSeconds(),c=g*1e3+r.getMilliseconds()}h=c/(3+1/3),h=Math.round(h),h===2592e4&&(l+=1,h=0);let m=Buffer.alloc(8);m.writeInt32LE(l,0),m.writeUInt32LE(h,4),yield m},validate:function(t,e,r){if(t==null)return null;t instanceof Date||(t=new Date(Date.parse(t))),t=t;let a;if(r&&r.useUTC?a=t.getUTCFullYear():a=t.getFullYear(),a<1753||a>9999)throw new TypeError("Out of range.");if(isNaN(t))throw new TypeError("Invalid date.");return t}},EL=Bo.default=r0;i0.exports=r0});var u0=M((Yo,a0)=>{"use strict";Object.defineProperty(Yo,"__esModule",{value:!0});Yo.default=void 0;var pA=_A(Co());function _A(t){return t&&t.__esModule?t:{default:t}}var EA=Buffer.from([0]),s0={id:62,type:"FLT8",name:"Float",declaration:function(){return"float"},generateTypeInfo(){return Buffer.from([pA.default.id,8])},generateParameterLength(t,e){return t.value==null?EA:Buffer.from([8])},*generateParameterData(t,e){if(t.value==null)return;let r=Buffer.alloc(8);r.writeDoubleLE(parseFloat(t.value),0),yield r},validate:function(t){if(t==null)return null;if(t=parseFloat(t),isNaN(t))throw new TypeError("Invalid number.");return t}},mL=Yo.default=s0;a0.exports=s0});var Sl=M((qo,c0)=>{"use strict";Object.defineProperty(qo,"__esModule",{value:!0});qo.default=void 0;var l0={id:106,type:"DECIMALN",name:"DecimalN",declaration(){throw new Error("not implemented")},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}},gL=qo.default=l0;c0.exports=l0});var p0=M((Vo,d0)=>{"use strict";Object.defineProperty(Vo,"__esModule",{value:!0});Vo.default=void 0;var mA=f0(Sl()),vl=f0(Xe());function f0(t){return t&&t.__esModule?t:{default:t}}var gA=Buffer.from([0]),h0={id:55,type:"DECIMAL",name:"Decimal",declaration:function(t){return"decimal("+this.resolvePrecision(t)+", "+this.resolveScale(t)+")"},resolvePrecision:function(t){return t.precision!=null?t.precision:t.value===null?1:18},resolveScale:function(t){return t.scale!=null?t.scale:0},generateTypeInfo(t,e){let r;return t.precision<=9?r=5:t.precision<=19?r=9:t.precision<=28?r=13:r=17,Buffer.from([mA.default.id,r,t.precision,t.scale])},generateParameterLength(t,e){if(t.value==null)return gA;let r=t.precision;return r<=9?Buffer.from([5]):r<=19?Buffer.from([9]):r<=28?Buffer.from([13]):Buffer.from([17])},*generateParameterData(t,e){if(t.value==null)return;let r=t.value<0?0:1,a=Math.round(Math.abs(t.value*Math.pow(10,t.scale))),l=t.precision;if(l<=9){let c=Buffer.alloc(5);c.writeUInt8(r,0),c.writeUInt32LE(a,1),yield c}else if(l<=19){let c=new vl.default(9);c.writeUInt8(r),c.writeUInt64LE(a),yield c.data}else if(l<=28){let c=new vl.default(13);c.writeUInt8(r),c.writeUInt64LE(a),c.writeUInt32LE(0),yield c.data}else{let c=new vl.default(17);c.writeUInt8(r),c.writeUInt64LE(a),c.writeUInt32LE(0),c.writeUInt32LE(0),yield c.data}},validate:function(t){if(t==null)return null;if(t=parseFloat(t),isNaN(t))throw new TypeError("Invalid number.");return t}},wL=Vo.default=h0;d0.exports=h0});var Nl=M((Ho,E0)=>{"use strict";Object.defineProperty(Ho,"__esModule",{value:!0});Ho.default=void 0;var _0={id:108,type:"NUMERICN",name:"NumericN",declaration(){throw new Error("not implemented")},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}},TL=Ho.default=_0;E0.exports=_0});var T0=M((Wo,w0)=>{"use strict";Object.defineProperty(Wo,"__esModule",{value:!0});Wo.default=void 0;var wA=m0(Nl()),Ol=m0(Xe());function m0(t){return t&&t.__esModule?t:{default:t}}var TA=Buffer.from([0]),g0={id:63,type:"NUMERIC",name:"Numeric",declaration:function(t){return"numeric("+this.resolvePrecision(t)+", "+this.resolveScale(t)+")"},resolvePrecision:function(t){return t.precision!=null?t.precision:t.value===null?1:18},resolveScale:function(t){return t.scale!=null?t.scale:0},generateTypeInfo(t){let e;return t.precision<=9?e=5:t.precision<=19?e=9:t.precision<=28?e=13:e=17,Buffer.from([wA.default.id,e,t.precision,t.scale])},generateParameterLength(t,e){if(t.value==null)return TA;let r=t.precision;return r<=9?Buffer.from([5]):r<=19?Buffer.from([9]):r<=28?Buffer.from([13]):Buffer.from([17])},*generateParameterData(t,e){if(t.value==null)return;let r=t.value<0?0:1,a=Math.round(Math.abs(t.value*Math.pow(10,t.scale)));if(t.precision<=9){let l=Buffer.alloc(5);l.writeUInt8(r,0),l.writeUInt32LE(a,1),yield l}else if(t.precision<=19){let l=new Ol.default(10);l.writeUInt8(r),l.writeUInt64LE(a),yield l.data}else if(t.precision<=28){let l=new Ol.default(14);l.writeUInt8(r),l.writeUInt64LE(a),l.writeUInt32LE(0),yield l.data}else{let l=new Ol.default(18);l.writeUInt8(r),l.writeUInt64LE(a),l.writeUInt32LE(0),l.writeUInt32LE(0),yield l.data}},validate:function(t){if(t==null)return null;if(t=parseFloat(t),isNaN(t))throw new TypeError("Invalid number.");return t}},yL=Wo.default=g0;w0.exports=g0});var v0=M((Go,S0)=>{"use strict";Object.defineProperty(Go,"__esModule",{value:!0});Go.default=void 0;var yA=SA(Fo());function SA(t){return t&&t.__esModule?t:{default:t}}var vA=Buffer.from([4]),NA=Buffer.from([0]),y0={id:122,type:"MONEY4",name:"SmallMoney",declaration:function(){return"smallmoney"},generateTypeInfo:function(){return Buffer.from([yA.default.id,4])},generateParameterLength(t,e){return t.value==null?NA:vA},*generateParameterData(t,e){if(t.value==null)return;let r=Buffer.alloc(4);r.writeInt32LE(t.value*1e4,0),yield r},validate:function(t){if(t==null)return null;if(t=parseFloat(t),isNaN(t))throw new TypeError("Invalid number.");if(t<-214748.3648||t>214748.3647)throw new TypeError("Value must be between -214748.3648 and 214748.3647.");return t}},SL=Go.default=y0;S0.exports=y0});var b0=M((jo,D0)=>{"use strict";Object.defineProperty(jo,"__esModule",{value:!0});jo.default=void 0;var OA=A0(Xn()),AA=A0(Xe());function A0(t){return t&&t.__esModule?t:{default:t}}var IA=Buffer.from([8]),DA=Buffer.from([0]),N0=9223372036854775807n,O0=-9223372036854775808n,I0={id:127,type:"INT8",name:"BigInt",declaration:function(){return"bigint"},generateTypeInfo(){return Buffer.from([OA.default.id,8])},generateParameterLength(t,e){return t.value==null?DA:IA},*generateParameterData(t,e){if(t.value==null)return;let r=new AA.default(8);r.writeBigInt64LE(typeof t.value=="bigint"?t.value:globalThis.BigInt(t.value)),yield r.data},validate:function(t){if(t==null)return null;if(typeof t!="bigint"&&(t=globalThis.BigInt(t)),t<O0||t>N0)throw new TypeError(`Value must be between ${O0} and ${N0}, inclusive.`);return t}},vL=jo.default=I0;D0.exports=I0});var C0=M((zo,L0)=>{"use strict";Object.defineProperty(zo,"__esModule",{value:!0});zo.default=void 0;var bA=Buffer.from([255,255,255,255]),R0={id:34,type:"IMAGE",name:"Image",hasTableName:!0,declaration:function(){return"image"},resolveLength:function(t){return t.value!=null?t.value.length:-1},generateTypeInfo(t){let e=Buffer.alloc(5);return e.writeUInt8(this.id,0),e.writeInt32LE(t.length,1),e},generateParameterLength(t,e){if(t.value==null)return bA;let r=Buffer.alloc(4);return r.writeInt32LE(t.value.length,0),r},*generateParameterData(t,e){t.value!=null&&(yield t.value)},validate:function(t){if(t==null)return null;if(!Buffer.isBuffer(t))throw new TypeError("Invalid buffer.");return t}},NL=zo.default=R0;L0.exports=R0});var F0=M((Ko,P0)=>{"use strict";Object.defineProperty(Ko,"__esModule",{value:!0});Ko.default=void 0;var RA=LA(require("iconv-lite"));function LA(t){return t&&t.__esModule?t:{default:t}}var CA=Buffer.from([255,255,255,255]),M0={id:35,type:"TEXT",name:"Text",hasTableName:!0,declaration:function(){return"text"},resolveLength:function(t){let e=t.value;return e!=null?e.length:-1},generateTypeInfo(t,e){let r=Buffer.alloc(10);return r.writeUInt8(this.id,0),r.writeInt32LE(t.length,1),t.collation&&t.collation.toBuffer().copy(r,5,0,5),r},generateParameterLength(t,e){let r=t.value;if(r==null)return CA;let a=Buffer.alloc(4);return a.writeInt32LE(r.length,0),a},generateParameterData:function*(t,e){let r=t.value;r!=null&&(yield r)},validate:function(t,e){if(t==null)return null;if(typeof t!="string")throw new TypeError("Invalid string.");if(!e)throw new Error("No collation was set by the server for the current connection.");if(!e.codepage)throw new Error("The collation set by the server has no associated encoding.");return RA.default.encode(t,e.codepage)}},OL=Ko.default=M0;P0.exports=M0});var Al=M(Mr=>{"use strict";Object.defineProperty(Mr,"__esModule",{value:!0});Mr.bufferToLowerCaseGuid=PA;Mr.bufferToUpperCaseGuid=MA;Mr.guidToArray=FA;var We=["00","01","02","03","04","05","06","07","08","09","0A","0B","0C","0D","0E","0F","10","11","12","13","14","15","16","17","18","19","1A","1B","1C","1D","1E","1F","20","21","22","23","24","25","26","27","28","29","2A","2B","2C","2D","2E","2F","30","31","32","33","34","35","36","37","38","39","3A","3B","3C","3D","3E","3F","40","41","42","43","44","45","46","47","48","49","4A","4B","4C","4D","4E","4F","50","51","52","53","54","55","56","57","58","59","5A","5B","5C","5D","5E","5F","60","61","62","63","64","65","66","67","68","69","6A","6B","6C","6D","6E","6F","70","71","72","73","74","75","76","77","78","79","7A","7B","7C","7D","7E","7F","80","81","82","83","84","85","86","87","88","89","8A","8B","8C","8D","8E","8F","90","91","92","93","94","95","96","97","98","99","9A","9B","9C","9D","9E","9F","A0","A1","A2","A3","A4","A5","A6","A7","A8","A9","AA","AB","AC","AD","AE","AF","B0","B1","B2","B3","B4","B5","B6","B7","B8","B9","BA","BB","BC","BD","BE","BF","C0","C1","C2","C3","C4","C5","C6","C7","C8","C9","CA","CB","CC","CD","CE","CF","D0","D1","D2","D3","D4","D5","D6","D7","D8","D9","DA","DB","DC","DD","DE","DF","E0","E1","E2","E3","E4","E5","E6","E7","E8","E9","EA","EB","EC","ED","EE","EF","F0","F1","F2","F3","F4","F5","F6","F7","F8","F9","FA","FB","FC","FD","FE","FF"],Ge=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];function MA(t){return We[t[3]]+We[t[2]]+We[t[1]]+We[t[0]]+"-"+We[t[5]]+We[t[4]]+"-"+We[t[7]]+We[t[6]]+"-"+We[t[8]]+We[t[9]]+"-"+We[t[10]]+We[t[11]]+We[t[12]]+We[t[13]]+We[t[14]]+We[t[15]]}function PA(t){return Ge[t[3]]+Ge[t[2]]+Ge[t[1]]+Ge[t[0]]+"-"+Ge[t[5]]+Ge[t[4]]+"-"+Ge[t[7]]+Ge[t[6]]+"-"+Ge[t[8]]+Ge[t[9]]+"-"+Ge[t[10]]+Ge[t[11]]+Ge[t[12]]+Ge[t[13]]+Ge[t[14]]+Ge[t[15]]}var ke={},Jn=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","A","B","C","D","E","F"].map(t=>t.charCodeAt(0));for(let t=0;t<Jn.length;t++){let e=ke[Jn[t]]={};for(let r=0;r<Jn.length;r++){let a=String.fromCharCode(Jn[t],Jn[r]),l=parseInt(a,16);e[Jn[r]]=l}}function FA(t){return[ke[t.charCodeAt(6)][t.charCodeAt(7)],ke[t.charCodeAt(4)][t.charCodeAt(5)],ke[t.charCodeAt(2)][t.charCodeAt(3)],ke[t.charCodeAt(0)][t.charCodeAt(1)],ke[t.charCodeAt(11)][t.charCodeAt(12)],ke[t.charCodeAt(9)][t.charCodeAt(10)],ke[t.charCodeAt(16)][t.charCodeAt(17)],ke[t.charCodeAt(14)][t.charCodeAt(15)],ke[t.charCodeAt(19)][t.charCodeAt(20)],ke[t.charCodeAt(21)][t.charCodeAt(22)],ke[t.charCodeAt(24)][t.charCodeAt(25)],ke[t.charCodeAt(26)][t.charCodeAt(27)],ke[t.charCodeAt(28)][t.charCodeAt(29)],ke[t.charCodeAt(30)][t.charCodeAt(31)],ke[t.charCodeAt(32)][t.charCodeAt(33)],ke[t.charCodeAt(34)][t.charCodeAt(35)]]}});var k0=M((Zo,U0)=>{"use strict";Object.defineProperty(Zo,"__esModule",{value:!0});Zo.default=void 0;var xA=Al(),UA=Buffer.from([0]),kA=Buffer.from([16]),x0={id:36,type:"GUIDN",name:"UniqueIdentifier",declaration:function(){return"uniqueidentifier"},resolveLength:function(){return 16},generateTypeInfo(){return Buffer.from([this.id,16])},generateParameterLength(t,e){return t.value==null?UA:kA},generateParameterData:function*(t,e){t.value!=null&&(yield Buffer.from((0,xA.guidToArray)(t.value)))},validate:function(t){if(t==null)return null;if(typeof t!="string")throw new TypeError("Invalid string.");if(!/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(t))throw new TypeError("Invalid GUID.");return t}},IL=Zo.default=x0;U0.exports=x0});var q0=M(($o,Y0)=>{"use strict";Object.defineProperty($o,"__esModule",{value:!0});$o.default=void 0;var BA=Buffer.from([255,255,255,255]),B0={id:99,type:"NTEXT",name:"NText",hasTableName:!0,declaration:function(){return"ntext"},resolveLength:function(t){let e=t.value;return e!=null?e.length:-1},generateTypeInfo(t,e){let r=Buffer.alloc(10);return r.writeUInt8(this.id,0),r.writeInt32LE(t.length,1),t.collation&&t.collation.toBuffer().copy(r,5,0,5),r},generateParameterLength(t,e){if(t.value==null)return BA;let r=Buffer.alloc(4);return r.writeInt32LE(Buffer.byteLength(t.value,"ucs2"),0),r},generateParameterData:function*(t,e){t.value!=null&&(yield Buffer.from(t.value.toString(),"ucs2"))},validate:function(t){if(t==null)return null;if(typeof t!="string")throw new TypeError("Invalid string.");return t}},DL=$o.default=B0;Y0.exports=B0});var W0=M((Xo,H0)=>{"use strict";Object.defineProperty(Xo,"__esModule",{value:!0});Xo.default=void 0;var YA=65535,qA=Buffer.from([254,255,255,255,255,255,255,255]),VA=Buffer.from([0,0,0,0]),HA=Buffer.from([255,255]),WA=Buffer.from([255,255,255,255,255,255,255,255]),V0={id:165,type:"BIGVARBIN",name:"VarBinary",maximumLength:8e3,declaration:function(t){let e=t.value,r;return t.length?r=t.length:e!=null?r=e.length||1:e===null&&!t.output?r=1:r=this.maximumLength,r<=this.maximumLength?"varbinary("+r+")":"varbinary(max)"},resolveLength:function(t){let e=t.value;return t.length!=null?t.length:e!=null?e.length:this.maximumLength},generateTypeInfo:function(t){let e=Buffer.alloc(3);return e.writeUInt8(this.id,0),t.length<=this.maximumLength?e.writeUInt16LE(t.length,1):e.writeUInt16LE(YA,1),e},generateParameterLength(t,e){if(t.value==null)return t.length<=this.maximumLength?HA:WA;let r=t.value;Buffer.isBuffer(r)||(r=r.toString());let a=Buffer.byteLength(r,"ucs2");if(t.length<=this.maximumLength){let l=Buffer.alloc(2);return l.writeUInt16LE(a,0),l}else return qA},*generateParameterData(t,e){if(t.value==null)return;let r=t.value;if(t.length<=this.maximumLength)Buffer.isBuffer(r)?yield r:yield Buffer.from(r.toString(),"ucs2");else{Buffer.isBuffer(r)||(r=r.toString());let a=Buffer.byteLength(r,"ucs2");if(a>0){let l=Buffer.alloc(4);l.writeUInt32LE(a,0),yield l,Buffer.isBuffer(r)?yield r:yield Buffer.from(r,"ucs2")}yield VA}},validate:function(t){if(t==null)return null;if(!Buffer.isBuffer(t))throw new TypeError("Invalid buffer.");return t}},bL=Xo.default=V0;H0.exports=V0});var z0=M((Jo,j0)=>{"use strict";Object.defineProperty(Jo,"__esModule",{value:!0});Jo.default=void 0;var GA=jA(require("iconv-lite"));function jA(t){return t&&t.__esModule?t:{default:t}}var zA=65535,KA=Buffer.from([254,255,255,255,255,255,255,255]),ZA=Buffer.from([0,0,0,0]),$A=Buffer.from([255,255]),XA=Buffer.from([255,255,255,255,255,255,255,255]),G0={id:167,type:"BIGVARCHR",name:"VarChar",maximumLength:8e3,declaration:function(t){let e=t.value,r;return t.length?r=t.length:e!=null?r=e.length||1:e===null&&!t.output?r=1:r=this.maximumLength,r<=this.maximumLength?"varchar("+r+")":"varchar(max)"},resolveLength:function(t){let e=t.value;return t.length!=null?t.length:e!=null?e.length||1:this.maximumLength},generateTypeInfo(t){let e=Buffer.alloc(8);return e.writeUInt8(this.id,0),t.length<=this.maximumLength?e.writeUInt16LE(t.length,1):e.writeUInt16LE(zA,1),t.collation&&t.collation.toBuffer().copy(e,3,0,5),e},generateParameterLength(t,e){let r=t.value;if(r==null)return t.length<=this.maximumLength?$A:XA;if(t.length<=this.maximumLength){let a=Buffer.alloc(2);return a.writeUInt16LE(r.length,0),a}else return KA},*generateParameterData(t,e){let r=t.value;if(r!=null)if(t.length<=this.maximumLength)yield r;else{if(r.length>0){let a=Buffer.alloc(4);a.writeUInt32LE(r.length,0),yield a,yield r}yield ZA}},validate:function(t,e){if(t==null)return null;if(typeof t!="string")throw new TypeError("Invalid string.");if(!e)throw new Error("No collation was set by the server for the current connection.");if(!e.codepage)throw new Error("The collation set by the server has no associated encoding.");return GA.default.encode(t,e.codepage)}},RL=Jo.default=G0;j0.exports=G0});var $0=M((Qo,Z0)=>{"use strict";Object.defineProperty(Qo,"__esModule",{value:!0});Qo.default=void 0;var JA=Buffer.from([255,255]),K0={id:173,type:"BIGBinary",name:"Binary",maximumLength:8e3,declaration:function(t){let e=t.value,r;return t.length?r=t.length:e!=null?r=e.length||1:e===null&&!t.output?r=1:r=this.maximumLength,"binary("+r+")"},resolveLength:function(t){let e=t.value;return e!=null?e.length:this.maximumLength},generateTypeInfo(t){let e=Buffer.alloc(3);return e.writeUInt8(this.id,0),e.writeUInt16LE(t.length,1),e},generateParameterLength(t,e){if(t.value==null)return JA;let r=Buffer.alloc(2);return r.writeUInt16LE(t.length,0),r},*generateParameterData(t,e){t.value!=null&&(yield t.value.slice(0,t.length!==void 0?Math.min(t.length,this.maximumLength):this.maximumLength))},validate:function(t){if(t==null)return null;if(!Buffer.isBuffer(t))throw new TypeError("Invalid buffer.");return t}},LL=Qo.default=K0;Z0.exports=K0});var Q0=M((es,J0)=>{"use strict";Object.defineProperty(es,"__esModule",{value:!0});es.default=void 0;var QA=eI(require("iconv-lite"));function eI(t){return t&&t.__esModule?t:{default:t}}var tI=Buffer.from([255,255]),X0={id:175,type:"BIGCHAR",name:"Char",maximumLength:8e3,declaration:function(t){let e=t.value,r;return t.length?r=t.length:e!=null?r=e.length||1:e===null&&!t.output?r=1:r=this.maximumLength,r<this.maximumLength?"char("+r+")":"char("+this.maximumLength+")"},resolveLength:function(t){let e=t.value;return t.length!=null?t.length:e!=null?e.length||1:this.maximumLength},generateTypeInfo(t){let e=Buffer.alloc(8);return e.writeUInt8(this.id,0),e.writeUInt16LE(t.length,1),t.collation&&t.collation.toBuffer().copy(e,3,0,5),e},generateParameterLength(t,e){let r=t.value;if(r==null)return tI;let a=Buffer.alloc(2);return a.writeUInt16LE(r.length,0),a},*generateParameterData(t,e){t.value!=null&&(yield Buffer.from(t.value,"ascii"))},validate:function(t,e){if(t==null)return null;if(typeof t!="string")throw new TypeError("Invalid string.");if(!e)throw new Error("No collation was set by the server for the current connection.");if(!e.codepage)throw new Error("The collation set by the server has no associated encoding.");return QA.default.encode(t,e.codepage)}},CL=es.default=X0;J0.exports=X0});var nE=M((ts,tE)=>{"use strict";Object.defineProperty(ts,"__esModule",{value:!0});ts.default=void 0;var nI=65535,rI=Buffer.from([254,255,255,255,255,255,255,255]),iI=Buffer.from([0,0,0,0]),oI=Buffer.from([255,255]),sI=Buffer.from([255,255,255,255,255,255,255,255]),eE={id:231,type:"NVARCHAR",name:"NVarChar",maximumLength:4e3,declaration:function(t){let e=t.value,r;return t.length?r=t.length:e!=null?r=e.toString().length||1:e===null&&!t.output?r=1:r=this.maximumLength,r<=this.maximumLength?"nvarchar("+r+")":"nvarchar(max)"},resolveLength:function(t){let e=t.value;return t.length!=null?t.length:e!=null?Buffer.isBuffer(e)?e.length/2||1:e.toString().length||1:this.maximumLength},generateTypeInfo(t){let e=Buffer.alloc(8);return e.writeUInt8(this.id,0),t.length<=this.maximumLength?e.writeUInt16LE(t.length*2,1):e.writeUInt16LE(nI,1),t.collation&&t.collation.toBuffer().copy(e,3,0,5),e},generateParameterLength(t,e){if(t.value==null)return t.length<=this.maximumLength?oI:sI;let r=t.value;if(t.length<=this.maximumLength){let a;r instanceof Buffer?a=r.length:(r=r.toString(),a=Buffer.byteLength(r,"ucs2"));let l=Buffer.alloc(2);return l.writeUInt16LE(a,0),l}else return rI},*generateParameterData(t,e){if(t.value==null)return;let r=t.value;if(t.length<=this.maximumLength)r instanceof Buffer?yield r:(r=r.toString(),yield Buffer.from(r,"ucs2"));else{if(r instanceof Buffer){let a=r.length;if(a>0){let l=Buffer.alloc(4);l.writeUInt32LE(a,0),yield l,yield r}}else{r=r.toString();let a=Buffer.byteLength(r,"ucs2");if(a>0){let l=Buffer.alloc(4);l.writeUInt32LE(a,0),yield l,yield Buffer.from(r,"ucs2")}}yield iI}},validate:function(t){if(t==null)return null;if(typeof t!="string")throw new TypeError("Invalid string.");return t}},ML=ts.default=eE;tE.exports=eE});var oE=M((ns,iE)=>{"use strict";Object.defineProperty(ns,"__esModule",{value:!0});ns.default=void 0;var aI=Buffer.from([255,255]),rE={id:239,type:"NCHAR",name:"NChar",maximumLength:4e3,declaration:function(t){let e=t.value,r;return t.length?r=t.length:t.value!=null?r=e.toString().length||1:t.value===null&&!t.output?r=1:r=this.maximumLength,r<this.maximumLength?"nchar("+r+")":"nchar("+this.maximumLength+")"},resolveLength:function(t){let e=t.value;return t.length!=null?t.length:t.value!=null?Buffer.isBuffer(t.value)?t.value.length/2||1:e.toString().length||1:this.maximumLength},generateTypeInfo:function(t){let e=Buffer.alloc(8);return e.writeUInt8(this.id,0),e.writeUInt16LE(t.length*2,1),t.collation&&t.collation.toBuffer().copy(e,3,0,5),e},generateParameterLength(t,e){if(t.value==null)return aI;let{value:r}=t;if(r instanceof Buffer){let a=r.length,l=Buffer.alloc(2);return l.writeUInt16LE(a,0),l}else{let a=Buffer.byteLength(r.toString(),"ucs2"),l=Buffer.alloc(2);return l.writeUInt16LE(a,0),l}},*generateParameterData(t,e){if(t.value==null)return;let r=t.value;r instanceof Buffer?yield r:yield Buffer.from(r,"ucs2")},validate:function(t){if(t==null)return null;if(typeof t!="string")throw new TypeError("Invalid string.");return t}},PL=ns.default=rE;iE.exports=rE});var uE=M((rs,aE)=>{"use strict";Object.defineProperty(rs,"__esModule",{value:!0});rs.default=void 0;var sE={id:241,type:"XML",name:"Xml",declaration(){throw new Error("not implemented")},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}},FL=rs.default=sE;aE.exports=sE});var fE=M((is,cE)=>{"use strict";Object.defineProperty(is,"__esModule",{value:!0});is.default=void 0;var uI=lI(Xe());function lI(t){return t&&t.__esModule?t:{default:t}}var cI=Buffer.from([0]),lE={id:41,type:"TIMEN",name:"Time",declaration:function(t){return"time("+this.resolveScale(t)+")"},resolveScale:function(t){return t.scale!=null?t.scale:t.value===null?0:7},generateTypeInfo(t){return Buffer.from([this.id,t.scale])},generateParameterLength(t,e){if(t.value==null)return cI;switch(t.scale){case 0:case 1:case 2:return Buffer.from([3]);case 3:case 4:return Buffer.from([4]);case 5:case 6:case 7:return Buffer.from([5]);default:throw new Error("invalid scale")}},*generateParameterData(t,e){if(t.value==null)return;let r=new uI.default(16),a=t.value,l;switch(e.useUTC?l=((a.getUTCHours()*60+a.getUTCMinutes())*60+a.getUTCSeconds())*1e3+a.getUTCMilliseconds():l=((a.getHours()*60+a.getMinutes())*60+a.getSeconds())*1e3+a.getMilliseconds(),l=l*Math.pow(10,t.scale-3),l+=(t.value.nanosecondDelta!=null?t.value.nanosecondDelta:0)*Math.pow(10,t.scale),l=Math.round(l),t.scale){case 0:case 1:case 2:r.writeUInt24LE(l);break;case 3:case 4:r.writeUInt32LE(l);break;case 5:case 6:case 7:r.writeUInt40LE(l)}yield r.data},validate:function(t){if(t==null)return null;if(t instanceof Date||(t=new Date(Date.parse(t))),isNaN(t))throw new TypeError("Invalid time.");return t}},xL=is.default=lE;cE.exports=lE});var pE=M((ss,dE)=>{"use strict";Object.defineProperty(ss,"__esModule",{value:!0});ss.default=void 0;var os=Cr(),Il=global.Date,fI=os.LocalDate.ofYearDay(1,1),hI=Buffer.from([0]),dI=Buffer.from([3]),hE={id:40,type:"DATEN",name:"Date",declaration:function(){return"date"},generateTypeInfo:function(){return Buffer.from([this.id])},generateParameterLength(t,e){return t.value==null?hI:dI},*generateParameterData(t,e){if(t.value==null)return;let r=t.value,a;e.useUTC?a=os.LocalDate.of(r.getUTCFullYear(),r.getUTCMonth()+1,r.getUTCDate()):a=os.LocalDate.of(r.getFullYear(),r.getMonth()+1,r.getDate());let l=fI.until(a,os.ChronoUnit.DAYS),c=Buffer.alloc(3);c.writeUIntLE(l,0,3),yield c},validate:function(t,e,r){if(t==null)return null;t instanceof Il||(t=new Il(Il.parse(t))),t=t;let a;if(r&&r.useUTC?a=t.getUTCFullYear():a=t.getFullYear(),a<1||a>9999)throw new TypeError("Out of range.");if(isNaN(t))throw new TypeError("Invalid date.");return t}},UL=ss.default=hE;dE.exports=hE});var mE=M((us,EE)=>{"use strict";Object.defineProperty(us,"__esModule",{value:!0});us.default=void 0;var as=Cr(),pI=_I(Xe());function _I(t){return t&&t.__esModule?t:{default:t}}var EI=as.LocalDate.ofYearDay(1,1),mI=Buffer.from([0]),_E={id:42,type:"DATETIME2N",name:"DateTime2",declaration:function(t){return"datetime2("+this.resolveScale(t)+")"},resolveScale:function(t){return t.scale!=null?t.scale:t.value===null?0:7},generateTypeInfo(t,e){return Buffer.from([this.id,t.scale])},generateParameterLength(t,e){if(t.value==null)return mI;switch(t.scale){case 0:case 1:case 2:return Buffer.from([6]);case 3:case 4:return Buffer.from([7]);case 5:case 6:case 7:return Buffer.from([8]);default:throw new Error("invalid scale")}},*generateParameterData(t,e){if(t.value==null)return;let r=t.value,a=t.scale,l=new pI.default(16);a=a;let c;switch(e.useUTC?c=((r.getUTCHours()*60+r.getUTCMinutes())*60+r.getUTCSeconds())*1e3+r.getUTCMilliseconds():c=((r.getHours()*60+r.getMinutes())*60+r.getSeconds())*1e3+r.getMilliseconds(),c=c*Math.pow(10,a-3),c+=(r.nanosecondDelta!=null?r.nanosecondDelta:0)*Math.pow(10,a),c=Math.round(c),a){case 0:case 1:case 2:l.writeUInt24LE(c);break;case 3:case 4:l.writeUInt32LE(c);break;case 5:case 6:case 7:l.writeUInt40LE(c)}let h;e.useUTC?h=as.LocalDate.of(r.getUTCFullYear(),r.getUTCMonth()+1,r.getUTCDate()):h=as.LocalDate.of(r.getFullYear(),r.getMonth()+1,r.getDate());let m=EI.until(h,as.ChronoUnit.DAYS);l.writeUInt24LE(m),yield l.data},validate:function(t,e,r){if(t==null)return null;t instanceof Date||(t=new Date(Date.parse(t))),t=t;let a;if(r&&r.useUTC?a=t.getUTCFullYear():a=t.getFullYear(),a<1||a>9999)throw new TypeError("Out of range.");if(isNaN(t))throw new TypeError("Invalid date.");return t}},kL=us.default=_E;EE.exports=_E});var TE=M((ls,wE)=>{"use strict";Object.defineProperty(ls,"__esModule",{value:!0});ls.default=void 0;var Dl=Cr(),gI=wI(Xe());function wI(t){return t&&t.__esModule?t:{default:t}}var TI=Dl.LocalDate.ofYearDay(1,1),yI=Buffer.from([0]),gE={id:43,type:"DATETIMEOFFSETN",name:"DateTimeOffset",declaration:function(t){return"datetimeoffset("+this.resolveScale(t)+")"},resolveScale:function(t){return t.scale!=null?t.scale:t.value===null?0:7},generateTypeInfo(t){return Buffer.from([this.id,t.scale])},generateParameterLength(t,e){if(t.value==null)return yI;switch(t.scale){case 0:case 1:case 2:return Buffer.from([8]);case 3:case 4:return Buffer.from([9]);case 5:case 6:case 7:return Buffer.from([10]);default:throw new Error("invalid scale")}},*generateParameterData(t,e){if(t.value==null)return;let r=t.value,a=t.scale,l=new gI.default(16);a=a;let c;switch(c=((r.getUTCHours()*60+r.getUTCMinutes())*60+r.getUTCSeconds())*1e3+r.getMilliseconds(),c=c*Math.pow(10,a-3),c+=(r.nanosecondDelta!=null?r.nanosecondDelta:0)*Math.pow(10,a),c=Math.round(c),a){case 0:case 1:case 2:l.writeUInt24LE(c);break;case 3:case 4:l.writeUInt32LE(c);break;case 5:case 6:case 7:l.writeUInt40LE(c)}let h=Dl.LocalDate.of(r.getUTCFullYear(),r.getUTCMonth()+1,r.getUTCDate()),m=TI.until(h,Dl.ChronoUnit.DAYS);l.writeUInt24LE(m);let g=-r.getTimezoneOffset();l.writeInt16LE(g),yield l.data},validate:function(t,e,r){if(t==null)return null;t instanceof Date||(t=new Date(Date.parse(t))),t=t;let a;if(r&&r.useUTC?a=t.getUTCFullYear():a=t.getFullYear(),a<1||a>9999)throw new TypeError("Out of range.");if(isNaN(t))throw new TypeError("Invalid date.");return t}},BL=ls.default=gE;wE.exports=gE});var vE=M((cs,SE)=>{"use strict";Object.defineProperty(cs,"__esModule",{value:!0});cs.default=void 0;var yE={id:240,type:"UDTTYPE",name:"UDT",declaration(){throw new Error("not implemented")},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}},YL=cs.default=yE;SE.exports=yE});var AE=M((hs,OE)=>{"use strict";Object.defineProperty(hs,"__esModule",{value:!0});hs.default=void 0;var SI=Xt(),vI=NI(Xe());function NI(t){return t&&t.__esModule?t:{default:t}}var OI=Buffer.from([1]),fs=Buffer.from([0]),AI=Buffer.from([255,255]),NE={id:243,type:"TVPTYPE",name:"TVP",declaration:function(t){return t.value.name+" readonly"},generateTypeInfo(t){let e="",r=t.value?.schema??"",a=t.value?.name??"",l=2+Buffer.byteLength(e,"ucs2")+1+Buffer.byteLength(r,"ucs2")+1+Buffer.byteLength(a,"ucs2"),c=new vI.default(l,"ucs2");return c.writeUInt8(this.id),c.writeBVarchar(e),c.writeBVarchar(r),c.writeBVarchar(a),c.data},generateParameterLength(t,e){if(t.value==null)return AI;let{columns:r}=t.value,a=Buffer.alloc(2);return a.writeUInt16LE(r.length,0),a},*generateParameterData(t,e){if(t.value==null){yield fs,yield fs;return}let{columns:r,rows:a}=t.value;for(let l=0,c=r.length;l<c;l++){let h=r[l],m=Buffer.alloc(6);m.writeUInt32LE(0,0),m.writeUInt16LE(0,4),yield m,yield h.type.generateTypeInfo(h),yield Buffer.from([0])}yield fs;for(let l=0,c=a.length;l<c;l++){yield OI;let h=a[l];for(let m=0,g=h.length;m<g;m++){let v=r[m],N=h[m],O;try{O=v.type.validate(N,t.collation)}catch(x){throw new SI.InputError(`TVP column '${v.name}' has invalid data at row index ${l}`,{cause:x})}let L={value:O,length:v.length,scale:v.scale,precision:v.precision};yield v.type.generateParameterLength(L,e),yield*v.type.generateParameterData(L,e)}}yield fs},validate:function(t){if(t==null)return null;if(typeof t!="object")throw new TypeError("Invalid table.");if(!Array.isArray(t.columns))throw new TypeError("Invalid table.");if(!Array.isArray(t.rows))throw new TypeError("Invalid table.");return t}},qL=hs.default=NE;OE.exports=NE});var bE=M((ds,DE)=>{"use strict";Object.defineProperty(ds,"__esModule",{value:!0});ds.default=void 0;var IE={id:98,type:"SSVARIANTTYPE",name:"Variant",declaration:function(){return"sql_variant"},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}},VL=ds.default=IE;DE.exports=IE});var Pr=M(on=>{"use strict";Object.defineProperty(on,"__esModule",{value:!0});on.typeByName=on.TYPES=on.TYPE=void 0;var RE=ne(v_()),bl=ne(D_()),Rl=ne(M_()),Ll=ne(x_()),Cl=ne(B_()),Ml=ne(G_()),Pl=ne($_()),Fl=ne(t0()),xl=ne(o0()),Ul=ne(u0()),kl=ne(p0()),Bl=ne(T0()),Yl=ne(v0()),ql=ne(b0()),Vl=ne(C0()),Hl=ne(F0()),Wl=ne(k0()),LE=ne(Xn()),Gl=ne(q0()),CE=ne(yl()),ME=ne(Sl()),PE=ne(Nl()),FE=ne(Co()),xE=ne(Fo()),UE=ne(bo()),jl=ne(W0()),zl=ne(z0()),Kl=ne($0()),Zl=ne(Q0()),$l=ne(nE()),Xl=ne(oE()),Jl=ne(uE()),Ql=ne(fE()),ec=ne(pE()),tc=ne(mE()),nc=ne(TE()),rc=ne(vE()),ic=ne(AE()),oc=ne(bE());function ne(t){return t&&t.__esModule?t:{default:t}}var HL=on.TYPE={[RE.default.id]:RE.default,[bl.default.id]:bl.default,[Rl.default.id]:Rl.default,[Ll.default.id]:Ll.default,[Cl.default.id]:Cl.default,[Ml.default.id]:Ml.default,[Pl.default.id]:Pl.default,[Fl.default.id]:Fl.default,[xl.default.id]:xl.default,[Ul.default.id]:Ul.default,[kl.default.id]:kl.default,[Bl.default.id]:Bl.default,[Yl.default.id]:Yl.default,[ql.default.id]:ql.default,[Vl.default.id]:Vl.default,[Hl.default.id]:Hl.default,[Wl.default.id]:Wl.default,[LE.default.id]:LE.default,[Gl.default.id]:Gl.default,[CE.default.id]:CE.default,[ME.default.id]:ME.default,[PE.default.id]:PE.default,[FE.default.id]:FE.default,[xE.default.id]:xE.default,[UE.default.id]:UE.default,[jl.default.id]:jl.default,[zl.default.id]:zl.default,[Kl.default.id]:Kl.default,[Zl.default.id]:Zl.default,[$l.default.id]:$l.default,[Xl.default.id]:Xl.default,[Jl.default.id]:Jl.default,[Ql.default.id]:Ql.default,[ec.default.id]:ec.default,[tc.default.id]:tc.default,[nc.default.id]:nc.default,[rc.default.id]:rc.default,[ic.default.id]:ic.default,[oc.default.id]:oc.default},II=on.TYPES={TinyInt:bl.default,Bit:Rl.default,SmallInt:Ll.default,Int:Cl.default,SmallDateTime:Ml.default,Real:Pl.default,Money:Fl.default,DateTime:xl.default,Float:Ul.default,Decimal:kl.default,Numeric:Bl.default,SmallMoney:Yl.default,BigInt:ql.default,Image:Vl.default,Text:Hl.default,UniqueIdentifier:Wl.default,NText:Gl.default,VarBinary:jl.default,VarChar:zl.default,Binary:Kl.default,Char:Zl.default,NVarChar:$l.default,NChar:Xl.default,Xml:Jl.default,Time:Ql.default,Date:ec.default,DateTime2:tc.default,DateTimeOffset:nc.default,UDT:rc.default,TVP:ic.default,Variant:oc.default},WL=on.typeByName=II});var Be=M(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.Result=ve.NotEnoughDataError=void 0;ve.readBVarByte=BI;ve.readBVarChar=kI;ve.readBigInt64LE=FI;ve.readBigUInt64LE=PI;ve.readDoubleLE=UI;ve.readFloatLE=xI;ve.readInt16LE=DI;ve.readInt32LE=MI;ve.readUInt16LE=ac;ve.readUInt24LE=bI;ve.readUInt32BE=LI;ve.readUInt32LE=RI;ve.readUInt40LE=CI;ve.readUInt8=sc;ve.readUNumeric128LE=WI;ve.readUNumeric64LE=VI;ve.readUNumeric96LE=HI;ve.readUsVarByte=qI;ve.readUsVarChar=YI;var Ie=class{constructor(e,r){this.value=e,this.offset=r}};ve.Result=Ie;var De=class extends Error{byteCount;constructor(e){super(),this.byteCount=e}};ve.NotEnoughDataError=De;function sc(t,e){if(e=+e,t.length<e+1)throw new De(e+1);return new Ie(t.readUInt8(e),e+1)}function ac(t,e){if(e=+e,t.length<e+2)throw new De(e+2);return new Ie(t.readUInt16LE(e),e+2)}function DI(t,e){if(e=+e,t.length<e+2)throw new De(e+2);return new Ie(t.readInt16LE(e),e+2)}function bI(t,e){if(e=+e,t.length<e+3)throw new De(e+3);return new Ie(t.readUIntLE(e,3),e+3)}function RI(t,e){if(e=+e,t.length<e+4)throw new De(e+4);return new Ie(t.readUInt32LE(e),e+4)}function LI(t,e){if(e=+e,t.length<e+4)throw new De(e+4);return new Ie(t.readUInt32BE(e),e+4)}function CI(t,e){if(e=+e,t.length<e+5)throw new De(e+5);return new Ie(t.readUIntLE(e,5),e+5)}function MI(t,e){if(e=+e,t.length<e+4)throw new De(e+4);return new Ie(t.readInt32LE(e),e+4)}function PI(t,e){if(e=+e,t.length<e+8)throw new De(e+8);return new Ie(t.readBigUInt64LE(e),e+8)}function FI(t,e){if(e=+e,t.length<e+8)throw new De(e+8);return new Ie(t.readBigInt64LE(e),e+8)}function xI(t,e){if(e=+e,t.length<e+4)throw new De(e+4);return new Ie(t.readFloatLE(e),e+4)}function UI(t,e){if(e=+e,t.length<e+8)throw new De(e+8);return new Ie(t.readDoubleLE(e),e+8)}function kI(t,e){e=+e;let r;({offset:e,value:r}=sc(t,e));let a=r*2;if(t.length<e+a)throw new De(e+a);return new Ie(t.toString("ucs2",e,e+a),e+a)}function BI(t,e){e=+e;let r;if({offset:e,value:r}=sc(t,e),t.length<e+r)throw new De(e+r);return new Ie(t.slice(e,e+r),e+r)}function YI(t,e){e=+e;let r;({offset:e,value:r}=ac(t,e));let a=r*2;if(t.length<e+a)throw new De(e+a);return new Ie(t.toString("ucs2",e,e+a),e+a)}function qI(t,e){e=+e;let r;if({offset:e,value:r}=ac(t,e),t.length<e+r)throw new De(e+r);return new Ie(t.slice(e,e+r),e+r)}function VI(t,e){if(e=+e,t.length<e+8)throw new De(e+8);let r=t.readUInt32LE(e),a=t.readUInt32LE(e+4);return new Ie(4294967296*a+r,e+8)}function HI(t,e){if(e=+e,t.length<e+12)throw new De(e+12);let r=t.readUInt32LE(e),a=t.readUInt32LE(e+4),l=t.readUInt32LE(e+8);return new Ie(r+4294967296*a+4294967296*4294967296*l,e+12)}function WI(t,e){if(e=+e,t.length<e+16)throw new De(e+16);let r=t.readUInt32LE(e),a=t.readUInt32LE(e+4),l=t.readUInt32LE(e+8),c=t.readUInt32LE(e+12);return new Ie(r+4294967296*a+4294967296*4294967296*l+4294967296*4294967296*4294967296*c,e+16)}});var Es=M((Qn,_s)=>{"use strict";Object.defineProperty(Qn,"__esModule",{value:!0});Qn.default=void 0;Qn.readCollation=ps;Qn.readMetadata=uc;var GI=Tl(),jI=Pr(),kE=Mn(),te=Be();function ps(t,e){if(e=+e,t.length<e+5)throw new te.NotEnoughDataError(e+5);let r=GI.Collation.fromBuffer(t.slice(e,e+5));return new te.Result(r,e+5)}function zI(t,e){e=+e;let r;if({offset:e,value:r}=(0,te.readUInt8)(t,e),r!==1)return new te.Result(void 0,e);let a;({offset:e,value:a}=(0,te.readBVarChar)(t,e));let l;({offset:e,value:l}=(0,te.readBVarChar)(t,e));let c;return{offset:e,value:c}=(0,te.readUsVarChar)(t,e),new te.Result({dbname:a,owningSchema:l,xmlSchemaCollection:c},e)}function KI(t,e){let r;({offset:e,value:r}=(0,te.readUInt16LE)(t,e));let a;({offset:e,value:a}=(0,te.readBVarChar)(t,e));let l;({offset:e,value:l}=(0,te.readBVarChar)(t,e));let c;({offset:e,value:c}=(0,te.readBVarChar)(t,e));let h;return{offset:e,value:h}=(0,te.readUsVarChar)(t,e),new te.Result({maxByteSize:r,dbname:a,owningSchema:l,typeName:c,assemblyName:h},e)}function uc(t,e,r){let a;({offset:e,value:a}=(r.tdsVersion<"7_2"?te.readUInt16LE:te.readUInt32LE)(t,e));let l;({offset:e,value:l}=(0,te.readUInt16LE)(t,e));let c;({offset:e,value:c}=(0,te.readUInt8)(t,e));let h=jI.TYPE[c];if(!h)throw new Error((0,kE.sprintf)("Unrecognised data type 0x%02X",c));switch(h.name){case"Null":case"TinyInt":case"SmallInt":case"Int":case"BigInt":case"Real":case"Float":case"SmallMoney":case"Money":case"Bit":case"SmallDateTime":case"DateTime":case"Date":return new te.Result({userType:a,flags:l,type:h,collation:void 0,precision:void 0,scale:void 0,dataLength:void 0,schema:void 0,udtInfo:void 0},e);case"IntN":case"FloatN":case"MoneyN":case"BitN":case"UniqueIdentifier":case"DateTimeN":{let m;return{offset:e,value:m}=(0,te.readUInt8)(t,e),new te.Result({userType:a,flags:l,type:h,collation:void 0,precision:void 0,scale:void 0,dataLength:m,schema:void 0,udtInfo:void 0},e)}case"Variant":{let m;return{offset:e,value:m}=(0,te.readUInt32LE)(t,e),new te.Result({userType:a,flags:l,type:h,collation:void 0,precision:void 0,scale:void 0,dataLength:m,schema:void 0,udtInfo:void 0},e)}case"VarChar":case"Char":case"NVarChar":case"NChar":{let m;({offset:e,value:m}=(0,te.readUInt16LE)(t,e));let g;return{offset:e,value:g}=ps(t,e),new te.Result({userType:a,flags:l,type:h,collation:g,precision:void 0,scale:void 0,dataLength:m,schema:void 0,udtInfo:void 0},e)}case"Text":case"NText":{let m;({offset:e,value:m}=(0,te.readUInt32LE)(t,e));let g;return{offset:e,value:g}=ps(t,e),new te.Result({userType:a,flags:l,type:h,collation:g,precision:void 0,scale:void 0,dataLength:m,schema:void 0,udtInfo:void 0},e)}case"VarBinary":case"Binary":{let m;return{offset:e,value:m}=(0,te.readUInt16LE)(t,e),new te.Result({userType:a,flags:l,type:h,collation:void 0,precision:void 0,scale:void 0,dataLength:m,schema:void 0,udtInfo:void 0},e)}case"Image":{let m;return{offset:e,value:m}=(0,te.readUInt32LE)(t,e),new te.Result({userType:a,flags:l,type:h,collation:void 0,precision:void 0,scale:void 0,dataLength:m,schema:void 0,udtInfo:void 0},e)}case"Xml":{let m;return{offset:e,value:m}=zI(t,e),new te.Result({userType:a,flags:l,type:h,collation:void 0,precision:void 0,scale:void 0,dataLength:void 0,schema:m,udtInfo:void 0},e)}case"Time":case"DateTime2":case"DateTimeOffset":{let m;return{offset:e,value:m}=(0,te.readUInt8)(t,e),new te.Result({userType:a,flags:l,type:h,collation:void 0,precision:void 0,scale:m,dataLength:void 0,schema:void 0,udtInfo:void 0},e)}case"NumericN":case"DecimalN":{let m;({offset:e,value:m}=(0,te.readUInt8)(t,e));let g;({offset:e,value:g}=(0,te.readUInt8)(t,e));let v;return{offset:e,value:v}=(0,te.readUInt8)(t,e),new te.Result({userType:a,flags:l,type:h,collation:void 0,precision:g,scale:v,dataLength:m,schema:void 0,udtInfo:void 0},e)}case"UDT":{let m;return{offset:e,value:m}=KI(t,e),new te.Result({userType:a,flags:l,type:h,collation:void 0,precision:void 0,scale:void 0,dataLength:void 0,schema:void 0,udtInfo:m},e)}default:throw new Error((0,kE.sprintf)("Unrecognised type %s",h.name))}}function BE(t,e,r){(async()=>{for(;;){let a;try{a=uc(t.buffer,t.position,e)}catch(l){if(l instanceof te.NotEnoughDataError){await t.waitForChunk();continue}throw l}return t.position=a.offset,r(a.value)}})()}var zL=Qn.default=BE;_s.exports=BE;_s.exports.readCollation=ps;_s.exports.readMetadata=uc});var VE=M((ms,qE)=>{"use strict";Object.defineProperty(ms,"__esModule",{value:!0});ms.default=void 0;var ZI=Es(),$I=Ye(),nt=Be();function XI(t,e,r,a){if(!r.type.hasTableName)return new nt.Result(void 0,e);if(a.tdsVersion<"7_2")return(0,nt.readUsVarChar)(t,e);let l;({offset:e,value:l}=(0,nt.readUInt8)(t,e));let c=[];for(let h=0;h<l;h++){let m;({offset:e,value:m}=(0,nt.readUsVarChar)(t,e)),c.push(m)}return new nt.Result(c,e)}function JI(t,e,r,a,l){let c;return{offset:e,value:c}=(0,nt.readBVarChar)(t,e),l.columnNameReplacer?new nt.Result(l.columnNameReplacer(c,r,a),e):l.camelCaseColumns?new nt.Result(c.replace(/^[A-Z]/,function(h){return h.toLowerCase()}),e):new nt.Result(c,e)}function QI(t,e,r,a){let l;({offset:e,value:l}=(0,ZI.readMetadata)(t,e,r));let c;({offset:e,value:c}=XI(t,e,l,r));let h;return{offset:e,value:h}=JI(t,e,a,l,r),new nt.Result({userType:l.userType,flags:l.flags,type:l.type,collation:l.collation,precision:l.precision,scale:l.scale,udtInfo:l.udtInfo,dataLength:l.dataLength,schema:l.schema,colName:h,tableName:c},e)}async function YE(t){let e;for(;;){let a;try{({offset:a,value:e}=(0,nt.readUInt16LE)(t.buffer,t.position))}catch(l){if(l instanceof nt.NotEnoughDataError){await t.waitForChunk();continue}throw l}t.position=a;break}let r=[];for(let a=0;a<e;a++)for(;;){let l,c;try{({offset:c,value:l}=QI(t.buffer,t.position,t.options,a))}catch(h){if(h instanceof nt.NotEnoughDataError){await t.waitForChunk();continue}throw h}t.position=c,r.push(l);break}return new $I.ColMetadataToken(r)}var KL=ms.default=YE;qE.exports=YE});var HE=M(xr=>{"use strict";Object.defineProperty(xr,"__esModule",{value:!0});xr.doneInProcParser=tD;xr.doneParser=eD;xr.doneProcParser=nD;var lc=Ye(),sn=Be(),Fr={MORE:1,ERROR:2,INXACT:4,COUNT:16,ATTN:32,SRVERROR:256};function cc(t,e,r){let a;({offset:e,value:a}=(0,sn.readUInt16LE)(t,e));let l=!!(a&Fr.MORE),c=!!(a&Fr.ERROR),h=!!(a&Fr.COUNT),m=!!(a&Fr.ATTN),g=!!(a&Fr.SRVERROR),v;({offset:e,value:v}=(0,sn.readUInt16LE)(t,e));let N;return{offset:e,value:N}=(r.tdsVersion<"7_2"?sn.readUInt32LE:sn.readBigUInt64LE)(t,e),new sn.Result({more:l,sqlError:c,attention:m,serverError:g,rowCount:h?Number(N):void 0,curCmd:v},e)}function eD(t,e,r){let a;return{offset:e,value:a}=cc(t,e,r),new sn.Result(new lc.DoneToken(a),e)}function tD(t,e,r){let a;return{offset:e,value:a}=cc(t,e,r),new sn.Result(new lc.DoneInProcToken(a),e)}function nD(t,e,r){let a;return{offset:e,value:a}=cc(t,e,r),new sn.Result(new lc.DoneProcToken(a),e)}});var zE=M((gs,jE)=>{"use strict";Object.defineProperty(gs,"__esModule",{value:!0});gs.default=void 0;var WE=Tl(),Nt=Ye(),be=Be(),rD={1:{name:"DATABASE",event:"databaseChange"},2:{name:"LANGUAGE",event:"languageChange"},3:{name:"CHARSET",event:"charsetChange"},4:{name:"PACKET_SIZE",event:"packetSizeChange"},7:{name:"SQL_COLLATION",event:"sqlCollationChange"},8:{name:"BEGIN_TXN",event:"beginTransaction"},9:{name:"COMMIT_TXN",event:"commitTransaction"},10:{name:"ROLLBACK_TXN",event:"rollbackTransaction"},13:{name:"DATABASE_MIRRORING_PARTNER",event:"partnerNode"},17:{name:"TXN_ENDED"},18:{name:"RESET_CONNECTION",event:"resetConnection"},20:{name:"ROUTING_CHANGE",event:"routingChange"}};function iD(t,e,r,a){switch(a.name){case"DATABASE":case"LANGUAGE":case"CHARSET":case"PACKET_SIZE":case"DATABASE_MIRRORING_PARTNER":{let l;({offset:e,value:l}=(0,be.readBVarChar)(t,e));let c;switch({offset:e,value:c}=(0,be.readBVarChar)(t,e),a.name){case"PACKET_SIZE":return new be.Result(new Nt.PacketSizeEnvChangeToken(parseInt(l),parseInt(c)),e);case"DATABASE":return new be.Result(new Nt.DatabaseEnvChangeToken(l,c),e);case"LANGUAGE":return new be.Result(new Nt.LanguageEnvChangeToken(l,c),e);case"CHARSET":return new be.Result(new Nt.CharsetEnvChangeToken(l,c),e);case"DATABASE_MIRRORING_PARTNER":return new be.Result(new Nt.DatabaseMirroringPartnerEnvChangeToken(l,c),e)}throw new Error("unreachable")}case"SQL_COLLATION":case"BEGIN_TXN":case"COMMIT_TXN":case"ROLLBACK_TXN":case"RESET_CONNECTION":{let l;({offset:e,value:l}=(0,be.readBVarByte)(t,e));let c;switch({offset:e,value:c}=(0,be.readBVarByte)(t,e),a.name){case"SQL_COLLATION":{let h=l.length?WE.Collation.fromBuffer(l):void 0,m=c.length?WE.Collation.fromBuffer(c):void 0;return new be.Result(new Nt.CollationChangeToken(h,m),e)}case"BEGIN_TXN":return new be.Result(new Nt.BeginTransactionEnvChangeToken(l,c),e);case"COMMIT_TXN":return new be.Result(new Nt.CommitTransactionEnvChangeToken(l,c),e);case"ROLLBACK_TXN":return new be.Result(new Nt.RollbackTransactionEnvChangeToken(l,c),e);case"RESET_CONNECTION":return new be.Result(new Nt.ResetConnectionEnvChangeToken(l,c),e)}throw new Error("unreachable")}case"ROUTING_CHANGE":{let l;({offset:e,value:l}=(0,be.readUsVarByte)(t,e));let c;({offset:e,value:c}=(0,be.readUsVarByte)(t,e));let h=l.readUInt8(0);if(h!==0)throw new Error("Unknown protocol byte in routing change event");let m=l.readUInt16LE(1),g=l.readUInt16LE(3),v=l.toString("ucs2",5,5+g*2),N={protocol:h,port:m,server:v};return new be.Result(new Nt.RoutingEnvChangeToken(N,c),e)}default:return console.error("Tedious > Unsupported ENVCHANGE type "+a.name),new be.Result(void 0,e+r-1)}}function GE(t,e,r){let a;if({offset:e,value:a}=(0,be.readUInt16LE)(t,e),t.length<e+a)throw new be.NotEnoughDataError(e+a);let l;({offset:e,value:l}=(0,be.readUInt8)(t,e));let c=rD[l];return c?iD(t,e,a,c):(console.error("Tedious > Unsupported ENVCHANGE type "+l),new be.Result(void 0,e+a-1))}var $L=gs.default=GE;jE.exports=GE});var $E=M(ws=>{"use strict";Object.defineProperty(ws,"__esModule",{value:!0});ws.errorParser=sD;ws.infoParser=oD;var rt=Be(),KE=Ye();function ZE(t,e,r){let a;if({offset:e,value:a}=(0,rt.readUInt16LE)(t,e),t.length<a+e)throw new rt.NotEnoughDataError(a+e);let l;({offset:e,value:l}=(0,rt.readUInt32LE)(t,e));let c;({offset:e,value:c}=(0,rt.readUInt8)(t,e));let h;({offset:e,value:h}=(0,rt.readUInt8)(t,e));let m;({offset:e,value:m}=(0,rt.readUsVarChar)(t,e));let g;({offset:e,value:g}=(0,rt.readBVarChar)(t,e));let v;({offset:e,value:v}=(0,rt.readBVarChar)(t,e));let N;return{offset:e,value:N}=r.tdsVersion<"7_2"?(0,rt.readUInt16LE)(t,e):(0,rt.readUInt32LE)(t,e),new rt.Result({number:l,state:c,class:h,message:m,serverName:g,procName:v,lineNumber:N},e)}function oD(t,e,r){let a;return{offset:e,value:a}=ZE(t,e,r),new rt.Result(new KE.InfoMessageToken(a),e)}function sD(t,e,r){let a;return{offset:e,value:a}=ZE(t,e,r),new rt.Result(new KE.ErrorMessageToken(a),e)}});var em=M((Ts,QE)=>{"use strict";Object.defineProperty(Ts,"__esModule",{value:!0});Ts.default=void 0;var fc=Be(),aD=Ye(),XE={STSURL:1,SPN:2};function uD(t){let e=0,r,a,l=t.readUInt32LE(e);e+=4;for(let c=0;c<l;c++){let h=t.readUInt8(e);e+=1;let m=t.readUInt32LE(e);e+=4;let g=t.readUInt32LE(e);switch(e+=4,h){case XE.SPN:r=t.toString("ucs2",g,g+m);break;case XE.STSURL:a=t.toString("ucs2",g,g+m);break;default:break}}return{spn:r,stsurl:a}}function JE(t,e,r){let a;if({offset:e,value:a}=(0,fc.readUInt32LE)(t,e),t.length<e+a)throw new fc.NotEnoughDataError(e+a);let l=t.slice(e,e+a);e+=a;let{spn:c,stsurl:h}=uD(l);return new fc.Result(new aD.FedAuthInfoToken(c,h),e)}var JL=Ts.default=JE;QE.exports=JE});var rm=M((Ss,nm)=>{"use strict";Object.defineProperty(Ss,"__esModule",{value:!0});Ss.default=void 0;var ys=Be(),lD=Ye(),hc={SESSIONRECOVERY:1,FEDAUTH:2,COLUMNENCRYPTION:4,GLOBALTRANSACTIONS:5,AZURESQLSUPPORT:8,UTF8_SUPPORT:10,TERMINATOR:255};function tm(t,e,r){let a,l;for(;;){let c;if({value:c,offset:e}=(0,ys.readUInt8)(t,e),c===hc.TERMINATOR)return new ys.Result(new lD.FeatureExtAckToken(a,l),e);let h;if({value:h,offset:e}=(0,ys.readUInt32LE)(t,e),t.length<e+h)throw new ys.NotEnoughDataError(e+h);let m=t.slice(e,e+h);switch(e+=h,c){case hc.FEDAUTH:a=m;break;case hc.UTF8_SUPPORT:l=!!m[0];break}}}var QL=Ss.default=tm;nm.exports=tm});var sm=M((vs,om)=>{"use strict";Object.defineProperty(vs,"__esModule",{value:!0});vs.default=void 0;var cD=Ye(),fD=dr(),Bt=Be(),hD={0:"SQL_DFLT",1:"SQL_TSQL"};function im(t,e,r){let a;if({offset:e,value:a}=(0,Bt.readUInt16LE)(t,e),t.length<a+e)throw new Bt.NotEnoughDataError(a+e);let l;({offset:e,value:l}=(0,Bt.readUInt8)(t,e));let c=hD[l],h;({offset:e,value:h}=(0,Bt.readUInt32BE)(t,e));let m=fD.versionsByValue[h],g;({offset:e,value:g}=(0,Bt.readBVarChar)(t,e));let v;({offset:e,value:v}=(0,Bt.readUInt8)(t,e));let N;({offset:e,value:N}=(0,Bt.readUInt8)(t,e));let O;({offset:e,value:O}=(0,Bt.readUInt8)(t,e));let L;return{offset:e,value:L}=(0,Bt.readUInt8)(t,e),new Bt.Result(new cD.LoginAckToken({interface:c,tdsVersion:m,progName:g,progVersion:{major:v,minor:N,buildNumHi:O,buildNumLow:L}}),e)}var eC=vs.default=im;om.exports=im});var lm=M((Os,um)=>{"use strict";Object.defineProperty(Os,"__esModule",{value:!0});Os.default=void 0;var dD=Ye(),Ns=Be();function am(t,e,r){let a;if({offset:e,value:a}=(0,Ns.readUInt16LE)(t,e),t.length<e+a)throw new Ns.NotEnoughDataError(e+a);let l=[];for(let c=0;c<a;c+=2){let h;({offset:e,value:h}=(0,Ns.readUInt16LE)(t,e)),l.push(h)}return new Ns.Result(new dD.OrderToken(l),e)}var tC=Os.default=am;um.exports=am});var dm=M((As,hm)=>{"use strict";Object.defineProperty(As,"__esModule",{value:!0});As.default=void 0;var cm=Be(),pD=Ye();function fm(t,e,r){let a;return{value:a,offset:e}=(0,cm.readInt32LE)(t,e),new cm.Result(new pD.ReturnStatusToken(a),e)}var nC=As.default=fm;hm.exports=fm});var bs=M((Ur,Ds)=>{"use strict";Object.defineProperty(Ur,"__esModule",{value:!0});Ur.isPLPStream=wm;Ur.readPLPStream=Sm;Ur.readValue=gm;var pm=Es(),_D=Pr(),ED=mD(require("iconv-lite")),Em=Mn(),_m=Al(),B=Be();function mD(t){return t&&t.__esModule?t:{default:t}}var dc=65535,gD=65535,wD=3+1/3,mm=1e4,TD=0xFFFFFFFFFFFFFFFFn,yD=0xFFFFFFFFFFFFFFFEn,SD="utf8";function pc(t,e){return(0,B.readUInt8)(t,e)}function _c(t,e){return(0,B.readInt16LE)(t,e)}function Ec(t,e){return(0,B.readInt32LE)(t,e)}function mc(t,e){let r;return{offset:e,value:r}=(0,B.readBigInt64LE)(t,e),new B.Result(r.toString(),e)}function gc(t,e){return(0,B.readFloatLE)(t,e)}function wc(t,e){return(0,B.readDoubleLE)(t,e)}function Tc(t,e){let r;return{offset:e,value:r}=(0,B.readInt32LE)(t,e),new B.Result(r/mm,e)}function yc(t,e){let r;({offset:e,value:r}=(0,B.readInt32LE)(t,e));let a;return{offset:e,value:a}=(0,B.readUInt32LE)(t,e),new B.Result((a+4294967296*r)/mm,e)}function Sc(t,e){let r;return{offset:e,value:r}=(0,B.readUInt8)(t,e),new B.Result(!!r,e)}function gm(t,e,r,a){switch(r.type.name){case"Null":return new B.Result(null,e);case"TinyInt":return pc(t,e);case"SmallInt":return _c(t,e);case"Int":return Ec(t,e);case"BigInt":return mc(t,e);case"IntN":{let c;switch({offset:e,value:c}=(0,B.readUInt8)(t,e),c){case 0:return new B.Result(null,e);case 1:return pc(t,e);case 2:return _c(t,e);case 4:return Ec(t,e);case 8:return mc(t,e);default:throw new Error("Unsupported dataLength "+c+" for IntN")}}case"Real":return gc(t,e);case"Float":return wc(t,e);case"FloatN":{let c;switch({offset:e,value:c}=(0,B.readUInt8)(t,e),c){case 0:return new B.Result(null,e);case 4:return gc(t,e);case 8:return wc(t,e);default:throw new Error("Unsupported dataLength "+c+" for FloatN")}}case"SmallMoney":return Tc(t,e);case"Money":return yc(t,e);case"MoneyN":{let c;switch({offset:e,value:c}=(0,B.readUInt8)(t,e),c){case 0:return new B.Result(null,e);case 4:return Tc(t,e);case 8:return yc(t,e);default:throw new Error("Unsupported dataLength "+c+" for MoneyN")}}case"Bit":return Sc(t,e);case"BitN":{let c;switch({offset:e,value:c}=(0,B.readUInt8)(t,e),c){case 0:return new B.Result(null,e);case 1:return Sc(t,e);default:throw new Error("Unsupported dataLength "+c+" for BitN")}}case"VarChar":case"Char":{let c=r.collation.codepage,h;return{offset:e,value:h}=(0,B.readUInt16LE)(t,e),h===dc?new B.Result(null,e):vc(t,e,h,c)}case"NVarChar":case"NChar":{let c;return{offset:e,value:c}=(0,B.readUInt16LE)(t,e),c===dc?new B.Result(null,e):Nc(t,e,c)}case"VarBinary":case"Binary":{let c;return{offset:e,value:c}=(0,B.readUInt16LE)(t,e),c===dc?new B.Result(null,e):Yt(t,e,c)}case"Text":{let c;if({offset:e,value:c}=(0,B.readUInt8)(t,e),c===0)return new B.Result(null,e);({offset:e}=Yt(t,e,c)),{offset:e}=Yt(t,e,8);let h;return{offset:e,value:h}=(0,B.readUInt32LE)(t,e),vc(t,e,h,r.collation.codepage)}case"NText":{let c;if({offset:e,value:c}=(0,B.readUInt8)(t,e),c===0)return new B.Result(null,e);({offset:e}=Yt(t,e,c)),{offset:e}=Yt(t,e,8);let h;return{offset:e,value:h}=(0,B.readUInt32LE)(t,e),Nc(t,e,h)}case"Image":{let c;if({offset:e,value:c}=(0,B.readUInt8)(t,e),c===0)return new B.Result(null,e);({offset:e}=Yt(t,e,c)),{offset:e}=Yt(t,e,8);let h;return{offset:e,value:h}=(0,B.readUInt32LE)(t,e),Yt(t,e,h)}case"SmallDateTime":return Oc(t,e,a.useUTC);case"DateTime":return Ac(t,e,a.useUTC);case"DateTimeN":{let c;switch({offset:e,value:c}=(0,B.readUInt8)(t,e),c){case 0:return new B.Result(null,e);case 4:return Oc(t,e,a.useUTC);case 8:return Ac(t,e,a.useUTC);default:throw new Error("Unsupported dataLength "+c+" for DateTimeN")}}case"Time":{let c;return{offset:e,value:c}=(0,B.readUInt8)(t,e),c===0?new B.Result(null,e):Is(t,e,c,r.scale,a.useUTC)}case"Date":{let c;return{offset:e,value:c}=(0,B.readUInt8)(t,e),c===0?new B.Result(null,e):vm(t,e,a.useUTC)}case"DateTime2":{let c;return{offset:e,value:c}=(0,B.readUInt8)(t,e),c===0?new B.Result(null,e):Nm(t,e,c,r.scale,a.useUTC)}case"DateTimeOffset":{let c;return{offset:e,value:c}=(0,B.readUInt8)(t,e),c===0?new B.Result(null,e):Om(t,e,c,r.scale)}case"NumericN":case"DecimalN":{let c;return{offset:e,value:c}=(0,B.readUInt8)(t,e),c===0?new B.Result(null,e):ym(t,e,c,r.precision,r.scale)}case"UniqueIdentifier":{let c;switch({offset:e,value:c}=(0,B.readUInt8)(t,e),c){case 0:return new B.Result(null,e);case 16:return Tm(t,e,a);default:throw new Error((0,Em.sprintf)("Unsupported guid size %d",c-1))}}case"Variant":{let c;return{offset:e,value:c}=(0,B.readUInt32LE)(t,e),c===0?new B.Result(null,e):vD(t,e,a,c)}default:throw new Error("Invalid type!")}}function wm(t){switch(t.type.name){case"VarChar":case"NVarChar":case"VarBinary":return t.dataLength===gD;case"Xml":return!0;case"UDT":return!0}}function Tm(t,e,r){let a;return{value:a,offset:e}=Yt(t,e,16),new B.Result(r.lowerCaseGuids?(0,_m.bufferToLowerCaseGuid)(a):(0,_m.bufferToUpperCaseGuid)(a),e)}function ym(t,e,r,a,l){let c;({offset:e,value:c}=(0,B.readUInt8)(t,e)),c=c===1?1:-1;let h;if(r===5)({offset:e,value:h}=(0,B.readUInt32LE)(t,e));else if(r===9)({offset:e,value:h}=(0,B.readUNumeric64LE)(t,e));else if(r===13)({offset:e,value:h}=(0,B.readUNumeric96LE)(t,e));else if(r===17)({offset:e,value:h}=(0,B.readUNumeric128LE)(t,e));else throw new Error((0,Em.sprintf)("Unsupported numeric dataLength %d",r));return new B.Result(h*c/Math.pow(10,l),e)}function vD(t,e,r,a){let l;({value:l,offset:e}=(0,B.readUInt8)(t,e));let c=_D.TYPE[l],h;switch({value:h,offset:e}=(0,B.readUInt8)(t,e),a=a-h-2,c.name){case"UniqueIdentifier":return Tm(t,e,r);case"Bit":return Sc(t,e);case"TinyInt":return pc(t,e);case"SmallInt":return _c(t,e);case"Int":return Ec(t,e);case"BigInt":return mc(t,e);case"SmallDateTime":return Oc(t,e,r.useUTC);case"DateTime":return Ac(t,e,r.useUTC);case"Real":return gc(t,e);case"Float":return wc(t,e);case"SmallMoney":return Tc(t,e);case"Money":return yc(t,e);case"Date":return vm(t,e,r.useUTC);case"Time":{let m;return{value:m,offset:e}=(0,B.readUInt8)(t,e),Is(t,e,a,m,r.useUTC)}case"DateTime2":{let m;return{value:m,offset:e}=(0,B.readUInt8)(t,e),Nm(t,e,a,m,r.useUTC)}case"DateTimeOffset":{let m;return{value:m,offset:e}=(0,B.readUInt8)(t,e),Om(t,e,a,m)}case"VarBinary":case"Binary":return{offset:e}=(0,B.readUInt16LE)(t,e),Yt(t,e,a);case"NumericN":case"DecimalN":{let m;({value:m,offset:e}=(0,B.readUInt8)(t,e));let g;return{value:g,offset:e}=(0,B.readUInt8)(t,e),ym(t,e,a,m,g)}case"VarChar":case"Char":{({offset:e}=(0,B.readUInt16LE)(t,e));let m;return{value:m,offset:e}=(0,pm.readCollation)(t,e),vc(t,e,a,m.codepage)}case"NVarChar":case"NChar":return{offset:e}=(0,B.readUInt16LE)(t,e),{offset:e}=(0,pm.readCollation)(t,e),Nc(t,e,a);default:throw new Error("Invalid type!")}}function Yt(t,e,r){if(t.length<e+r)throw new B.NotEnoughDataError(e+r);return new B.Result(t.slice(e,e+r),e+r)}function vc(t,e,r,a){if(t.length<e+r)throw new B.NotEnoughDataError(e+r);return new B.Result(ED.default.decode(t.slice(e,e+r),a??SD),e+r)}function Nc(t,e,r){if(t.length<e+r)throw new B.NotEnoughDataError(e+r);return new B.Result(t.toString("ucs2",e,e+r),e+r)}async function Sm(t){for(;t.buffer.length<t.position+8;)await t.waitForChunk();let e=t.buffer.readBigUInt64LE(t.position);if(t.position+=8,e===TD)return null;let r=[],a=0;for(;;){for(;t.buffer.length<t.position+4;)await t.waitForChunk();let l=t.buffer.readUInt32LE(t.position);if(t.position+=4,!l)break;for(;t.buffer.length<t.position+l;)await t.waitForChunk();r.push(t.buffer.slice(t.position,t.position+l)),t.position+=l,a+=l}if(e!==yD&&a!==Number(e))throw new Error("Partially Length-prefixed Bytes unmatched lengths : expected "+e+", but got "+a+" bytes");return r}function Oc(t,e,r){let a;({offset:e,value:a}=(0,B.readUInt16LE)(t,e));let l;({offset:e,value:l}=(0,B.readUInt16LE)(t,e));let c;return r?c=new Date(Date.UTC(1900,0,1+a,0,l)):c=new Date(1900,0,1+a,0,l),new B.Result(c,e)}function Ac(t,e,r){let a;({offset:e,value:a}=(0,B.readInt32LE)(t,e));let l;({offset:e,value:l}=(0,B.readInt32LE)(t,e));let c=Math.round(l*wD),h;return r?h=new Date(Date.UTC(1900,0,1+a,0,0,0,c)):h=new Date(1900,0,1+a,0,0,0,c),new B.Result(h,e)}function Is(t,e,r,a,l){let c;switch(r){case 3:{({value:c,offset:e}=(0,B.readUInt24LE)(t,e));break}case 4:{({value:c,offset:e}=(0,B.readUInt32LE)(t,e));break}case 5:{({value:c,offset:e}=(0,B.readUInt40LE)(t,e));break}default:throw new Error("unreachable")}if(a<7)for(let m=a;m<7;m++)c*=10;let h;return l?h=new Date(Date.UTC(1970,0,1,0,0,0,c/1e4)):h=new Date(1970,0,1,0,0,0,c/1e4),Object.defineProperty(h,"nanosecondsDelta",{enumerable:!1,value:c%1e4/Math.pow(10,7)}),new B.Result(h,e)}function vm(t,e,r){let a;return{offset:e,value:a}=(0,B.readUInt24LE)(t,e),r?new B.Result(new Date(Date.UTC(2e3,0,a-730118)),e):new B.Result(new Date(2e3,0,a-730118),e)}function Nm(t,e,r,a,l){let c;({offset:e,value:c}=Is(t,e,r-3,a,l));let h;({offset:e,value:h}=(0,B.readUInt24LE)(t,e));let m;return l?m=new Date(Date.UTC(2e3,0,h-730118,0,0,0,+c)):m=new Date(2e3,0,h-730118,c.getHours(),c.getMinutes(),c.getSeconds(),c.getMilliseconds()),Object.defineProperty(m,"nanosecondsDelta",{enumerable:!1,value:c.nanosecondsDelta}),new B.Result(m,e)}function Om(t,e,r,a){let l;({offset:e,value:l}=Is(t,e,r-5,a,!0));let c;({offset:e,value:c}=(0,B.readUInt24LE)(t,e)),{offset:e}=(0,B.readUInt16LE)(t,e);let h=new Date(Date.UTC(2e3,0,c-730118,0,0,0,+l));return Object.defineProperty(h,"nanosecondsDelta",{enumerable:!1,value:l.nanosecondsDelta}),new B.Result(h,e)}Ds.exports.readValue=gm;Ds.exports.isPLPStream=wm;Ds.exports.readPLPStream=Sm});var bm=M((Rs,Dm)=>{"use strict";Object.defineProperty(Rs,"__esModule",{value:!0});Rs.default=void 0;var ND=Ye(),OD=Es(),Ic=bs(),kr=Be(),AD=ID(require("iconv-lite"));function Am(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(Am=function(a){return a?r:e})(t)}function ID(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var r=Am(e);if(r&&r.has(t))return r.get(t);var a={__proto__:null},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in t)if(c!=="default"&&Object.prototype.hasOwnProperty.call(t,c)){var h=l?Object.getOwnPropertyDescriptor(t,c):null;h&&(h.get||h.set)?Object.defineProperty(a,c,h):a[c]=t[c]}return a.default=t,r&&r.set(t,a),a}async function Im(t){let e,r,a;for(;;){let c=t.buffer,h=t.position;try{({offset:h,value:r}=(0,kr.readUInt16LE)(c,h)),{offset:h,value:e}=(0,kr.readBVarChar)(c,h),{offset:h}=(0,kr.readUInt8)(c,h),{offset:h,value:a}=(0,OD.readMetadata)(c,h,t.options),e.charAt(0)==="@"&&(e=e.slice(1))}catch(m){if(m instanceof kr.NotEnoughDataError){await t.waitForChunk();continue}throw m}t.position=h;break}let l;for(;;){let c=t.buffer,h=t.position;if((0,Ic.isPLPStream)(a)){let m=await(0,Ic.readPLPStream)(t);m===null?l=m:a.type.name==="NVarChar"||a.type.name==="Xml"?l=Buffer.concat(m).toString("ucs2"):a.type.name==="VarChar"?l=AD.decode(Buffer.concat(m),a.collation?.codepage??"utf8"):(a.type.name==="VarBinary"||a.type.name==="UDT")&&(l=Buffer.concat(m))}else{try{({value:l,offset:h}=(0,Ic.readValue)(c,h,a,t.options))}catch(m){if(m instanceof kr.NotEnoughDataError){await t.waitForChunk();continue}throw m}t.position=h}break}return new ND.ReturnValueToken({paramOrdinal:r,paramName:e,metadata:a,value:l})}var rC=Rs.default=Im;Dm.exports=Im});var Pm=M((Ls,Mm)=>{"use strict";Object.defineProperty(Ls,"__esModule",{value:!0});Ls.default=void 0;var Rm=Ye(),DD=RD(require("iconv-lite")),Dc=bs(),bD=Be();function Lm(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(Lm=function(a){return a?r:e})(t)}function RD(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var r=Lm(e);if(r&&r.has(t))return r.get(t);var a={__proto__:null},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in t)if(c!=="default"&&Object.prototype.hasOwnProperty.call(t,c)){var h=l?Object.getOwnPropertyDescriptor(t,c):null;h&&(h.get||h.set)?Object.defineProperty(a,c,h):a[c]=t[c]}return a.default=t,r&&r.set(t,a),a}async function Cm(t){let e=[];for(let r of t.colMetadata)for(;;){if((0,Dc.isPLPStream)(r)){let a=await(0,Dc.readPLPStream)(t);a===null?e.push({value:a,metadata:r}):r.type.name==="NVarChar"||r.type.name==="Xml"?e.push({value:Buffer.concat(a).toString("ucs2"),metadata:r}):r.type.name==="VarChar"?e.push({value:DD.decode(Buffer.concat(a),r.collation?.codepage??"utf8"),metadata:r}):(r.type.name==="VarBinary"||r.type.name==="UDT")&&e.push({value:Buffer.concat(a),metadata:r})}else{let a;try{a=(0,Dc.readValue)(t.buffer,t.position,r,t.options)}catch(l){if(l instanceof bD.NotEnoughDataError){await t.waitForChunk();continue}throw l}t.position=a.offset,e.push({value:a.value,metadata:r})}break}if(t.options.useColumnNames){let r=Object.create(null);return e.forEach(a=>{let l=a.metadata.colName;r[l]==null&&(r[l]=a)}),new Rm.RowToken(r)}else return new Rm.RowToken(e)}var iC=Ls.default=Cm;Mm.exports=Cm});var Bm=M((Cs,km)=>{"use strict";Object.defineProperty(Cs,"__esModule",{value:!0});Cs.default=void 0;var Fm=Ye(),LD=MD(require("iconv-lite")),bc=bs(),CD=Be();function xm(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(xm=function(a){return a?r:e})(t)}function MD(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var r=xm(e);if(r&&r.has(t))return r.get(t);var a={__proto__:null},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in t)if(c!=="default"&&Object.prototype.hasOwnProperty.call(t,c)){var h=l?Object.getOwnPropertyDescriptor(t,c):null;h&&(h.get||h.set)?Object.defineProperty(a,c,h):a[c]=t[c]}return a.default=t,r&&r.set(t,a),a}async function Um(t){let e=t.colMetadata,r=[],a=[],l=Math.ceil(e.length/8);for(;t.buffer.length-t.position<l;)await t.waitForChunk();let c=t.buffer.slice(t.position,t.position+l);t.position+=l;for(let h=0,m=c.length;h<m;h++){let g=c[h];a.push(!!(g&1)),a.push(!!(g&2)),a.push(!!(g&4)),a.push(!!(g&8)),a.push(!!(g&16)),a.push(!!(g&32)),a.push(!!(g&64)),a.push(!!(g&128))}for(let h=0;h<e.length;h++){let m=e[h];if(a[h]){r.push({value:null,metadata:m});continue}for(;;){if((0,bc.isPLPStream)(m)){let g=await(0,bc.readPLPStream)(t);g===null?r.push({value:g,metadata:m}):m.type.name==="NVarChar"||m.type.name==="Xml"?r.push({value:Buffer.concat(g).toString("ucs2"),metadata:m}):m.type.name==="VarChar"?r.push({value:LD.decode(Buffer.concat(g),m.collation?.codepage??"utf8"),metadata:m}):(m.type.name==="VarBinary"||m.type.name==="UDT")&&r.push({value:Buffer.concat(g),metadata:m})}else{let g;try{g=(0,bc.readValue)(t.buffer,t.position,m,t.options)}catch(v){if(v instanceof CD.NotEnoughDataError){await t.waitForChunk();continue}throw v}t.position=g.offset,r.push({value:g.value,metadata:m})}break}}if(t.options.useColumnNames){let h=Object.create(null);return r.forEach(m=>{let g=m.metadata.colName;h[g]==null&&(h[g]=m)}),new Fm.NBCRowToken(h)}else return new Fm.NBCRowToken(r)}var oC=Cs.default=Um;km.exports=Um});var Vm=M((Ms,qm)=>{"use strict";Object.defineProperty(Ms,"__esModule",{value:!0});Ms.default=void 0;var Rc=Be(),PD=Ye();function FD(t){let e={};return e.magic=t.slice(0,8).toString("utf8"),e.type=t.readInt32LE(8),e.domainLen=t.readInt16LE(12),e.domainMax=t.readInt16LE(14),e.domainOffset=t.readInt32LE(16),e.flags=t.readInt32LE(20),e.nonce=t.slice(24,32),e.zeroes=t.slice(32,40),e.targetLen=t.readInt16LE(40),e.targetMax=t.readInt16LE(42),e.targetOffset=t.readInt32LE(44),e.oddData=t.slice(48,56),e.domain=t.slice(56,56+e.domainLen).toString("ucs2"),e.target=t.slice(56+e.domainLen,56+e.domainLen+e.targetLen),e}function Ym(t,e,r){let a;if({offset:e,value:a}=(0,Rc.readUInt16LE)(t,e),t.length<e+a)throw new Rc.NotEnoughDataError(e+a);let l=t.slice(e,e+a);return e+=a,new Rc.Result(new PD.SSPIToken(FD(l),l),e)}var sC=Ms.default=Ym;qm.exports=Ym});var Gm=M((Fs,Wm)=>{"use strict";Object.defineProperty(Fs,"__esModule",{value:!0});Fs.default=void 0;var je=Ye(),xD=Ot(VE()),Lc=HE(),UD=Ot(zE()),Hm=$E(),kD=Ot(em()),BD=Ot(rm()),YD=Ot(sm()),qD=Ot(lm()),VD=Ot(dm()),HD=Ot(bm()),WD=Ot(Pm()),GD=Ot(Bm()),jD=Ot(Vm()),ht=Be();function Ot(t){return t&&t.__esModule?t:{default:t}}var Ps=class t{debug;colMetadata;options;iterator;buffer;position;static async*parseTokens(e,r,a,l=[]){let c=new t(e,r,a);for(c.colMetadata=l;;){try{await c.waitForChunk()}catch(h){if(c.position===c.buffer.length)return;throw h}for(;c.buffer.length>=c.position+1;){let h=c.buffer.readUInt8(c.position);c.position+=1;let m=c.readToken(h);m!==void 0&&(yield m)}}}readToken(e){switch(e){case je.TYPE.DONE:return this.readDoneToken();case je.TYPE.DONEPROC:return this.readDoneProcToken();case je.TYPE.DONEINPROC:return this.readDoneInProcToken();case je.TYPE.ERROR:return this.readErrorToken();case je.TYPE.INFO:return this.readInfoToken();case je.TYPE.ENVCHANGE:return this.readEnvChangeToken();case je.TYPE.LOGINACK:return this.readLoginAckToken();case je.TYPE.RETURNSTATUS:return this.readReturnStatusToken();case je.TYPE.ORDER:return this.readOrderToken();case je.TYPE.FEDAUTHINFO:return this.readFedAuthInfoToken();case je.TYPE.SSPI:return this.readSSPIToken();case je.TYPE.COLMETADATA:return this.readColMetadataToken();case je.TYPE.RETURNVALUE:return this.readReturnValueToken();case je.TYPE.ROW:return this.readRowToken();case je.TYPE.NBCROW:return this.readNbcRowToken();case je.TYPE.FEATUREEXTACK:return this.readFeatureExtAckToken();default:throw new Error("Unknown type: "+e)}}readFeatureExtAckToken(){let e;try{e=(0,BD.default)(this.buffer,this.position,this.options)}catch(r){if(r instanceof ht.NotEnoughDataError)return this.waitForChunk().then(()=>this.readFeatureExtAckToken());throw r}return this.position=e.offset,e.value}async readNbcRowToken(){return await(0,GD.default)(this)}async readReturnValueToken(){return await(0,HD.default)(this)}async readColMetadataToken(){let e=await(0,xD.default)(this);return this.colMetadata=e.columns,e}readSSPIToken(){let e;try{e=(0,jD.default)(this.buffer,this.position,this.options)}catch(r){if(r instanceof ht.NotEnoughDataError)return this.waitForChunk().then(()=>this.readSSPIToken());throw r}return this.position=e.offset,e.value}readFedAuthInfoToken(){let e;try{e=(0,kD.default)(this.buffer,this.position,this.options)}catch(r){if(r instanceof ht.NotEnoughDataError)return this.waitForChunk().then(()=>this.readFedAuthInfoToken());throw r}return this.position=e.offset,e.value}readOrderToken(){let e;try{e=(0,qD.default)(this.buffer,this.position,this.options)}catch(r){if(r instanceof ht.NotEnoughDataError)return this.waitForChunk().then(()=>this.readOrderToken());throw r}return this.position=e.offset,e.value}readReturnStatusToken(){let e;try{e=(0,VD.default)(this.buffer,this.position,this.options)}catch(r){if(r instanceof ht.NotEnoughDataError)return this.waitForChunk().then(()=>this.readReturnStatusToken());throw r}return this.position=e.offset,e.value}readLoginAckToken(){let e;try{e=(0,YD.default)(this.buffer,this.position,this.options)}catch(r){if(r instanceof ht.NotEnoughDataError)return this.waitForChunk().then(()=>this.readLoginAckToken());throw r}return this.position=e.offset,e.value}readEnvChangeToken(){let e;try{e=(0,UD.default)(this.buffer,this.position,this.options)}catch(r){if(r instanceof ht.NotEnoughDataError)return this.waitForChunk().then(()=>this.readEnvChangeToken());throw r}return this.position=e.offset,e.value}readRowToken(){return(0,WD.default)(this)}readInfoToken(){let e;try{e=(0,Hm.infoParser)(this.buffer,this.position,this.options)}catch(r){if(r instanceof ht.NotEnoughDataError)return this.waitForChunk().then(()=>this.readInfoToken());throw r}return this.position=e.offset,e.value}readErrorToken(){let e;try{e=(0,Hm.errorParser)(this.buffer,this.position,this.options)}catch(r){if(r instanceof ht.NotEnoughDataError)return this.waitForChunk().then(()=>this.readErrorToken());throw r}return this.position=e.offset,e.value}readDoneInProcToken(){let e;try{e=(0,Lc.doneInProcParser)(this.buffer,this.position,this.options)}catch(r){if(r instanceof ht.NotEnoughDataError)return this.waitForChunk().then(()=>this.readDoneInProcToken());throw r}return this.position=e.offset,e.value}readDoneProcToken(){let e;try{e=(0,Lc.doneProcParser)(this.buffer,this.position,this.options)}catch(r){if(r instanceof ht.NotEnoughDataError)return this.waitForChunk().then(()=>this.readDoneProcToken());throw r}return this.position=e.offset,e.value}readDoneToken(){let e;try{e=(0,Lc.doneParser)(this.buffer,this.position,this.options)}catch(r){if(r instanceof ht.NotEnoughDataError)return this.waitForChunk().then(()=>this.readDoneToken());throw r}return this.position=e.offset,e.value}constructor(e,r,a){this.debug=r,this.colMetadata=[],this.options=a,this.iterator=(e[Symbol.asyncIterator]||e[Symbol.iterator]).call(e),this.buffer=Buffer.alloc(0),this.position=0}async waitForChunk(){let e=await this.iterator.next();if(e.done)throw new Error("unexpected end of data");this.position===this.buffer.length?this.buffer=e.value:this.buffer=Buffer.concat([this.buffer.slice(this.position),e.value]),this.position=0}},aC=Fs.default=Ps;Wm.exports=Ps});var jm=M(xs=>{"use strict";Object.defineProperty(xs,"__esModule",{value:!0});xs.Parser=void 0;var zD=require("events"),KD=$D(Gm()),ZD=require("stream");function $D(t){return t&&t.__esModule?t:{default:t}}var Cc=class extends zD.EventEmitter{constructor(e,r,a,l){super(),this.debug=r,this.options=l,this.parser=ZD.Readable.from(KD.default.parseTokens(e,this.debug,this.options)),this.parser.on("data",c=>{r.token(c),a[c.handlerName](c)}),this.parser.on("drain",()=>{this.emit("drain")}),this.parser.on("end",()=>{this.emit("end")})}pause(){return this.parser.pause()}resume(){return this.parser.resume()}};xs.Parser=Cc});var Pc=M(At=>{"use strict";Object.defineProperty(At,"__esModule",{value:!0});At.Transaction=At.OPERATION_TYPE=At.ISOLATION_LEVEL=void 0;At.assertValidIsolationLevel=JD;At.isolationLevelByValue=void 0;var Us=XD(Xe()),ks=Ni();function XD(t){return t&&t.__esModule?t:{default:t}}var Bs=At.OPERATION_TYPE={TM_GET_DTC_ADDRESS:0,TM_PROPAGATE_XACT:1,TM_BEGIN_XACT:5,TM_PROMOTE_XACT:6,TM_COMMIT_XACT:7,TM_ROLLBACK_XACT:8,TM_SAVE_XACT:9},an=At.ISOLATION_LEVEL={NO_CHANGE:0,READ_UNCOMMITTED:1,READ_COMMITTED:2,REPEATABLE_READ:3,SERIALIZABLE:4,SNAPSHOT:5},zm=At.isolationLevelByValue={};for(let t in an){let e=an[t];zm[e]=t}function JD(t,e){if(typeof t!="number")throw new TypeError(`The "${e}" ${e.includes(".")?"property":"argument"} must be of type number. Received type ${typeof t} (${t})`);if(!Number.isInteger(t))throw new RangeError(`The value of "${e}" is out of range. It must be an integer. Received: ${t}`);if(!(t>=0&&t<=5))throw new RangeError(`The value of "${e}" is out of range. It must be >= 0 && <= 5. Received: ${t}`)}var Mc=class{constructor(e,r=an.NO_CHANGE){this.name=e,this.isolationLevel=r,this.outstandingRequestCount=1}beginPayload(e){let r=new Us.default(100,"ucs2");return(0,ks.writeToTrackingBuffer)(r,e,this.outstandingRequestCount),r.writeUShort(Bs.TM_BEGIN_XACT),r.writeUInt8(this.isolationLevel),r.writeUInt8(this.name.length*2),r.writeString(this.name,"ucs2"),{*[Symbol.iterator](){yield r.data},toString:()=>"Begin Transaction: name="+this.name+", isolationLevel="+zm[this.isolationLevel]}}commitPayload(e){let r=new Us.default(100,"ascii");return(0,ks.writeToTrackingBuffer)(r,e,this.outstandingRequestCount),r.writeUShort(Bs.TM_COMMIT_XACT),r.writeUInt8(this.name.length*2),r.writeString(this.name,"ucs2"),r.writeUInt8(0),{*[Symbol.iterator](){yield r.data},toString:()=>"Commit Transaction: name="+this.name}}rollbackPayload(e){let r=new Us.default(100,"ascii");return(0,ks.writeToTrackingBuffer)(r,e,this.outstandingRequestCount),r.writeUShort(Bs.TM_ROLLBACK_XACT),r.writeUInt8(this.name.length*2),r.writeString(this.name,"ucs2"),r.writeUInt8(0),{*[Symbol.iterator](){yield r.data},toString:()=>"Rollback Transaction: name="+this.name}}savePayload(e){let r=new Us.default(100,"ascii");return(0,ks.writeToTrackingBuffer)(r,e,this.outstandingRequestCount),r.writeUShort(Bs.TM_SAVE_XACT),r.writeUInt8(this.name.length*2),r.writeString(this.name,"ucs2"),{*[Symbol.iterator](){yield r.data},toString:()=>"Save Transaction: name="+this.name}}isolationLevelToTSQL(){switch(this.isolationLevel){case an.READ_UNCOMMITTED:return"READ UNCOMMITTED";case an.READ_COMMITTED:return"READ COMMITTED";case an.REPEATABLE_READ:return"REPEATABLE READ";case an.SERIALIZABLE:return"SERIALIZABLE";case an.SNAPSHOT:return"SNAPSHOT"}return""}};At.Transaction=Mc});var Km=M(Br=>{"use strict";Object.defineProperty(Br,"__esModule",{value:!0});Br.connectInParallel=eb;Br.connectInSequence=tb;Br.lookupAllAddresses=xc;var Ys=Fc(require("net")),QD=Fc(require("node:url")),er=Fc(ri());function Fc(t){return t&&t.__esModule?t:{default:t}}async function eb(t,e,r){if(r.aborted)throw new er.default;let a=await xc(t.host,e,r);return await new Promise((l,c)=>{let h=new Array(a.length),m=[];function g(O){m.push(O),this.removeListener("error",g),this.removeListener("connect",v),this.destroy(),m.length===a.length&&(r.removeEventListener("abort",N),c(new AggregateError(m,"Could not connect (parallel)")))}function v(){r.removeEventListener("abort",N);for(let O=0;O<h.length;O++){let L=h[O];this!==L&&(L.removeListener("error",g),L.removeListener("connect",v),L.destroy())}l(this)}let N=()=>{for(let O=0;O<h.length;O++){let L=h[O];L.removeListener("error",g),L.removeListener("connect",v),L.destroy()}c(new er.default)};for(let O=0,L=a.length;O<L;O++){let x=h[O]=Ys.default.connect({...t,host:a[O].address,family:a[O].family});x.on("error",g),x.on("connect",v)}r.addEventListener("abort",N,{once:!0})})}async function tb(t,e,r){if(r.aborted)throw new er.default;let a=[],l=await xc(t.host,e,r);for(let c of l)try{return await new Promise((h,m)=>{let g=Ys.default.connect({...t,host:c.address,family:c.family}),v=()=>{g.removeListener("error",N),g.removeListener("connect",O),g.destroy(),m(new er.default)},N=L=>{r.removeEventListener("abort",v),g.removeListener("error",N),g.removeListener("connect",O),g.destroy(),m(L)},O=()=>{r.removeEventListener("abort",v),g.removeListener("error",N),g.removeListener("connect",O),h(g)};r.addEventListener("abort",v,{once:!0}),g.on("error",N),g.on("connect",O)})}catch(h){if(h instanceof Error&&h.name==="AbortError")throw h;a.push(h);continue}throw new AggregateError(a,"Could not connect (sequence)")}async function xc(t,e,r){if(r.aborted)throw new er.default;return Ys.default.isIPv6(t)?[{address:t,family:6}]:Ys.default.isIPv4(t)?[{address:t,family:4}]:await new Promise((a,l)=>{let c=()=>{l(new er.default)};r.addEventListener("abort",c);let h=QD.default.domainToASCII(t);e(h===""?t:h,{all:!0},(m,g)=>{r.removeEventListener("abort",c),m?l(m):a(g)})})}});var Uc=M(qs=>{"use strict";Object.defineProperty(qs,"__esModule",{value:!0});qs.name=void 0;var fC=qs.name="Tedious"});var Zm=M(kc=>{"use strict";Object.defineProperty(kc,"__esModule",{value:!0});kc.createNTLMRequest=nb;var dt={NTLM_NegotiateUnicode:1,NTLM_NegotiateOEM:2,NTLM_RequestTarget:4,NTLM_Unknown9:8,NTLM_NegotiateSign:16,NTLM_NegotiateSeal:32,NTLM_NegotiateDatagram:64,NTLM_NegotiateLanManagerKey:128,NTLM_Unknown8:256,NTLM_NegotiateNTLM:512,NTLM_NegotiateNTOnly:1024,NTLM_Anonymous:2048,NTLM_NegotiateOemDomainSupplied:4096,NTLM_NegotiateOemWorkstationSupplied:8192,NTLM_Unknown6:16384,NTLM_NegotiateAlwaysSign:32768,NTLM_TargetTypeDomain:65536,NTLM_TargetTypeServer:131072,NTLM_TargetTypeShare:262144,NTLM_NegotiateExtendedSecurity:524288,NTLM_NegotiateIdentify:1048576,NTLM_Unknown5:2097152,NTLM_RequestNonNTSessionKey:4194304,NTLM_NegotiateTargetInfo:8388608,NTLM_Unknown4:16777216,NTLM_NegotiateVersion:33554432,NTLM_Unknown3:67108864,NTLM_Unknown2:134217728,NTLM_Unknown1:268435456,NTLM_Negotiate128:536870912,NTLM_NegotiateKeyExchange:1073741824,NTLM_Negotiate56:2147483648};function nb(t){let e=escape(t.domain.toUpperCase()),r=t.workstation?escape(t.workstation.toUpperCase()):"",a=dt.NTLM_NegotiateUnicode+dt.NTLM_NegotiateOEM+dt.NTLM_RequestTarget+dt.NTLM_NegotiateNTLM+dt.NTLM_NegotiateOemDomainSupplied+dt.NTLM_NegotiateOemWorkstationSupplied+dt.NTLM_NegotiateAlwaysSign+dt.NTLM_NegotiateVersion+dt.NTLM_NegotiateExtendedSecurity+dt.NTLM_Negotiate128+dt.NTLM_Negotiate56;r===""&&(a-=dt.NTLM_NegotiateOemWorkstationSupplied);let l=Buffer.alloc(40),c=[l],h=0;return h+=l.write("NTLMSSP",h,7,"ascii"),h=l.writeUInt8(0,h),h=l.writeUInt32LE(1,h),h=l.writeUInt32LE(a,h),h=l.writeUInt16LE(e.length,h),h=l.writeUInt16LE(e.length,h),h=l.writeUInt32LE(l.length+r.length,h),h=l.writeUInt16LE(r.length,h),h=l.writeUInt16LE(r.length,h),h=l.writeUInt32LE(l.length,h),h=l.writeUInt8(5,h),h=l.writeUInt8(0,h),h=l.writeUInt16LE(2195,h),h=l.writeUInt8(0,h),h=l.writeUInt8(0,h),h=l.writeUInt8(0,h),l.writeUInt8(15,h),c.push(Buffer.from(r,"ascii")),c.push(Buffer.from(e,"ascii")),Buffer.concat(c)}});var $m=M(Vs=>{"use strict";Object.defineProperty(Vs,"__esModule",{value:!0});Vs.BulkLoadPayload=void 0;var Bc=class{constructor(e){this.bulkLoad=e,this.iterator=this.bulkLoad.rowToPacketTransform[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterator}toString(e=""){return e+"BulkLoad"}};Vs.BulkLoadPayload=Bc});var Qm=M((Hs,Jm)=>{"use strict";Object.defineProperty(Hs,"__esModule",{value:!0});Hs.default=void 0;var Xm={Sp_Cursor:1,Sp_CursorOpen:2,Sp_CursorPrepare:3,Sp_CursorExecute:4,Sp_CursorPrepExec:5,Sp_CursorUnprepare:6,Sp_CursorFetch:7,Sp_CursorOption:8,Sp_CursorClose:9,Sp_ExecuteSql:10,Sp_Prepare:11,Sp_Execute:12,Sp_PrepExec:13,Sp_PrepExecRpc:14,Sp_Unprepare:15},_C=Hs.default=Xm;Jm.exports=Xm});var eg=M((EC,rb)=>{rb.exports={author:"Mike D Pilsbury <mike.pilsbury@gmail.com>",contributors:["Alex Robson","Arthur Schreiber","Bret Copeland <bret@atlantisflight.org> (https://github.com/bretcope)","Bryan Ross <bryan@rossipedia.com> (https://github.com/rossipedia)","Ciaran Jessup <ciaranj@gmail.com>","Cort Fritz <cfritz@caa.com>","lastonesky","Patrik Simek <patrik@patriksimek.cz>","Phil Dodderidge <pdodde@poyntz.com>","Zach Aller"],name:"tedious",description:"A TDS driver, for connecting to MS SQLServer databases.",keywords:["sql","database","mssql","sqlserver","sql-server","tds","msnodesql","azure"],homepage:"https://github.com/tediousjs/tedious",bugs:"https://github.com/tediousjs/tedious/issues",license:"MIT",version:"18.6.1",main:"./lib/tedious.js",types:"./lib/tedious.d.ts",repository:{type:"git",url:"https://github.com/tediousjs/tedious.git"},engines:{node:">=18"},publishConfig:{tag:"next",provenance:!0},dependencies:{"@azure/core-auth":"^1.7.2","@azure/identity":"^4.2.1","@azure/keyvault-keys":"^4.4.0","@js-joda/core":"^5.6.1","@types/node":">=18",bl:"^6.0.11","iconv-lite":"^0.6.3","js-md4":"^0.3.2","native-duplexpair":"^1.0.0","sprintf-js":"^1.1.3"},devDependencies:{"@babel/cli":"^7.23.9","@babel/core":"^7.23.9","@babel/node":"^7.23.9","@babel/preset-env":"^7.23.9","@babel/preset-typescript":"^7.23.3","@babel/register":"^7.23.7","@types/async":"^3.2.24","@types/bl":"^5.1.0","@types/chai":"^4.3.12","@types/depd":"^1.1.36","@types/lru-cache":"^5.1.1","@types/mocha":"^10.0.6","@types/sprintf-js":"^1.1.4","@typescript-eslint/eslint-plugin":"^7.0.2","@typescript-eslint/parser":"^7.0.2",async:"^3.2.5","babel-plugin-istanbul":"^6.1.1",chai:"^4.4.1",codecov:"^3.8.3",eslint:"^8.57.0",mitm:"^1.7.2",mocha:"^10.3.0",nyc:"^15.1.0",rimraf:"^5.0.5","semantic-release":"^19.0.3",sinon:"^15.2.0",typedoc:"^0.26.5",typescript:"^5.5.4"},scripts:{docs:"typedoc",lint:"eslint src test --ext .js,.ts && tsc",test:"mocha --forbid-only test/unit test/unit/token test/unit/tracking-buffer","test-integration":"mocha --forbid-only test/integration/","test-all":"mocha --forbid-only test/unit/ test/unit/token/ test/unit/tracking-buffer test/integration/","build:types":"tsc --project tsconfig.build-types.json",build:"rimraf lib && babel src --out-dir lib --extensions .js,.ts && npm run build:types",prepublish:"npm run build","semantic-release":"semantic-release"},babel:{sourceMaps:"both",ignore:["./src/**/*.d.ts"],presets:[["@babel/preset-env",{targets:{node:18}}],["@babel/preset-typescript",{allowDeclareFields:!0}]],plugins:[["@babel/transform-typescript",{allowDeclareFields:!0}]]},mocha:{require:"test/setup.js",timeout:5e3,extension:["js","ts"]},nyc:{sourceMap:!1,instrument:!1,extension:[".ts"]}}});var tg=M(Qe=>{"use strict";Object.defineProperty(Qe,"__esModule",{value:!0});Qe.UnexpectedTokenError=Qe.TokenHandler=Qe.RequestTokenHandler=Qe.Login7TokenHandler=Qe.InitialSqlTokenHandler=Qe.AttentionTokenHandler=void 0;var ib=ob(vi()),qt=Xt();function ob(t){return t&&t.__esModule?t:{default:t}}var Ee=class extends Error{constructor(e,r){super("Unexpected token `"+r.name+"` in `"+e.constructor.name+"`")}};Qe.UnexpectedTokenError=Ee;var yn=class{onInfoMessage(e){throw new Ee(this,e)}onErrorMessage(e){throw new Ee(this,e)}onSSPI(e){throw new Ee(this,e)}onDatabaseChange(e){throw new Ee(this,e)}onLanguageChange(e){throw new Ee(this,e)}onCharsetChange(e){throw new Ee(this,e)}onSqlCollationChange(e){throw new Ee(this,e)}onRoutingChange(e){throw new Ee(this,e)}onPacketSizeChange(e){throw new Ee(this,e)}onResetConnection(e){throw new Ee(this,e)}onBeginTransaction(e){throw new Ee(this,e)}onCommitTransaction(e){throw new Ee(this,e)}onRollbackTransaction(e){throw new Ee(this,e)}onFedAuthInfo(e){throw new Ee(this,e)}onFeatureExtAck(e){throw new Ee(this,e)}onLoginAck(e){throw new Ee(this,e)}onColMetadata(e){throw new Ee(this,e)}onOrder(e){throw new Ee(this,e)}onRow(e){throw new Ee(this,e)}onReturnStatus(e){throw new Ee(this,e)}onReturnValue(e){throw new Ee(this,e)}onDoneProc(e){throw new Ee(this,e)}onDoneInProc(e){throw new Ee(this,e)}onDone(e){throw new Ee(this,e)}onDatabaseMirroringPartner(e){throw new Ee(this,e)}};Qe.TokenHandler=yn;var Yc=class extends yn{constructor(e){super(),this.connection=e}onInfoMessage(e){this.connection.emit("infoMessage",e)}onErrorMessage(e){this.connection.emit("errorMessage",e)}onDatabaseChange(e){this.connection.emit("databaseChange",e.newValue)}onLanguageChange(e){this.connection.emit("languageChange",e.newValue)}onCharsetChange(e){this.connection.emit("charsetChange",e.newValue)}onSqlCollationChange(e){this.connection.databaseCollation=e.newValue}onPacketSizeChange(e){this.connection.messageIo.packetSize(e.newValue)}onBeginTransaction(e){this.connection.transactionDescriptors.push(e.newValue),this.connection.inTransaction=!0}onCommitTransaction(e){this.connection.transactionDescriptors.length=1,this.connection.inTransaction=!1}onRollbackTransaction(e){this.connection.transactionDescriptors.length=1,this.connection.inTransaction=!1,this.connection.emit("rollbackTransaction")}onColMetadata(e){this.connection.emit("error",new Error("Received 'columnMetadata' when no sqlRequest is in progress")),this.connection.close()}onOrder(e){this.connection.emit("error",new Error("Received 'order' when no sqlRequest is in progress")),this.connection.close()}onRow(e){this.connection.emit("error",new Error("Received 'row' when no sqlRequest is in progress")),this.connection.close()}onReturnStatus(e){}onReturnValue(e){}onDoneProc(e){}onDoneInProc(e){}onDone(e){}onResetConnection(e){this.connection.emit("resetConnection")}};Qe.InitialSqlTokenHandler=Yc;var qc=class extends yn{constructor(e){super(),this.loginAckReceived=!1,this.connection=e}onInfoMessage(e){this.connection.emit("infoMessage",e)}onErrorMessage(e){this.connection.emit("errorMessage",e);let r=new qt.ConnectionError(e.message,"ELOGIN");this.connection.transientErrorLookup.isTransientError(e.number)&&this.connection.curTransientRetryCount!==this.connection.config.options.maxRetriesOnTransientErrors&&(r.isTransient=!0),this.connection.loginError=r}onSSPI(e){e.ntlmpacket&&(this.connection.ntlmpacket=e.ntlmpacket,this.connection.ntlmpacketBuffer=e.ntlmpacketBuffer)}onDatabaseChange(e){this.connection.emit("databaseChange",e.newValue)}onLanguageChange(e){this.connection.emit("languageChange",e.newValue)}onCharsetChange(e){this.connection.emit("charsetChange",e.newValue)}onSqlCollationChange(e){this.connection.databaseCollation=e.newValue}onFedAuthInfo(e){this.fedAuthInfoToken=e}onFeatureExtAck(e){let{authentication:r}=this.connection.config;r.type==="azure-active-directory-password"||r.type==="azure-active-directory-access-token"||r.type==="azure-active-directory-msi-vm"||r.type==="azure-active-directory-msi-app-service"||r.type==="azure-active-directory-service-principal-secret"||r.type==="azure-active-directory-default"?e.fedAuth===void 0?this.connection.loginError=new qt.ConnectionError("Did not receive Active Directory authentication acknowledgement"):e.fedAuth.length!==0&&(this.connection.loginError=new qt.ConnectionError(`Active Directory authentication acknowledgment for ${r.type} authentication method includes extra data`)):e.fedAuth===void 0&&e.utf8Support===void 0?this.connection.loginError=new qt.ConnectionError("Received acknowledgement for unknown feature"):e.fedAuth&&(this.connection.loginError=new qt.ConnectionError("Did not request Active Directory authentication, but received the acknowledgment"))}onLoginAck(e){if(!e.tdsVersion){this.connection.loginError=new qt.ConnectionError("Server responded with unknown TDS version.","ETDS");return}if(!e.interface){this.connection.loginError=new qt.ConnectionError("Server responded with unsupported interface.","EINTERFACENOTSUPP");return}this.connection.config.options.tdsVersion=e.tdsVersion,this.loginAckReceived=!0}onRoutingChange(e){let[r]=e.newValue.server.split("\\");this.routingData={server:r,port:e.newValue.port}}onDoneInProc(e){}onDone(e){}onPacketSizeChange(e){this.connection.messageIo.packetSize(e.newValue)}onDatabaseMirroringPartner(e){}};Qe.Login7TokenHandler=qc;var Vc=class extends yn{constructor(e,r){super(),this.connection=e,this.request=r,this.errors=[]}onInfoMessage(e){this.connection.emit("infoMessage",e)}onErrorMessage(e){if(this.connection.emit("errorMessage",e),!this.request.canceled){let r=new qt.RequestError(e.message,"EREQUEST");r.number=e.number,r.state=e.state,r.class=e.class,r.serverName=e.serverName,r.procName=e.procName,r.lineNumber=e.lineNumber,this.errors.push(r),this.request.error=r,this.request instanceof ib.default&&this.errors.length>1&&(this.request.error=new AggregateError(this.errors))}}onDatabaseChange(e){this.connection.emit("databaseChange",e.newValue)}onLanguageChange(e){this.connection.emit("languageChange",e.newValue)}onCharsetChange(e){this.connection.emit("charsetChange",e.newValue)}onSqlCollationChange(e){this.connection.databaseCollation=e.newValue}onPacketSizeChange(e){this.connection.messageIo.packetSize(e.newValue)}onBeginTransaction(e){this.connection.transactionDescriptors.push(e.newValue),this.connection.inTransaction=!0}onCommitTransaction(e){this.connection.transactionDescriptors.length=1,this.connection.inTransaction=!1}onRollbackTransaction(e){this.connection.transactionDescriptors.length=1,this.connection.inTransaction=!1,this.connection.emit("rollbackTransaction")}onColMetadata(e){if(!this.request.canceled)if(this.connection.config.options.useColumnNames){let r=Object.create(null);for(let a=0,l=e.columns.length;a<l;a++){let c=e.columns[a];r[c.colName]==null&&(r[c.colName]=c)}this.request.emit("columnMetadata",r)}else this.request.emit("columnMetadata",e.columns)}onOrder(e){this.request.canceled||this.request.emit("order",e.orderColumns)}onRow(e){this.request.canceled||(this.connection.config.options.rowCollectionOnRequestCompletion&&this.request.rows.push(e.columns),this.connection.config.options.rowCollectionOnDone&&this.request.rst.push(e.columns),this.request.emit("row",e.columns))}onReturnStatus(e){this.request.canceled||(this.connection.procReturnStatusValue=e.value)}onReturnValue(e){this.request.canceled||this.request.emit("returnValue",e.paramName,e.value,e.metadata)}onDoneProc(e){this.request.canceled||(e.sqlError&&!this.request.error&&(this.request.error=new qt.RequestError("An unknown error has occurred.","UNKNOWN")),this.request.emit("doneProc",e.rowCount,e.more,this.connection.procReturnStatusValue,this.request.rst),this.connection.procReturnStatusValue=void 0,e.rowCount!==void 0&&(this.request.rowCount+=e.rowCount),this.connection.config.options.rowCollectionOnDone&&(this.request.rst=[]))}onDoneInProc(e){this.request.canceled||(this.request.emit("doneInProc",e.rowCount,e.more,this.request.rst),e.rowCount!==void 0&&(this.request.rowCount+=e.rowCount),this.connection.config.options.rowCollectionOnDone&&(this.request.rst=[]))}onDone(e){this.request.canceled||(e.sqlError&&!this.request.error&&(this.request.error=new qt.RequestError("An unknown error has occurred.","UNKNOWN")),this.request.emit("done",e.rowCount,e.more,this.request.rst),e.rowCount!==void 0&&(this.request.rowCount+=e.rowCount),this.connection.config.options.rowCollectionOnDone&&(this.request.rst=[]))}onResetConnection(e){this.connection.emit("resetConnection")}};Qe.RequestTokenHandler=Vc;var Hc=class extends yn{constructor(e,r){super(),this.connection=e,this.request=r,this.attentionReceived=!1}onDone(e){e.attention&&(this.attentionReceived=!0)}};Qe.AttentionTokenHandler=Hc});var cg=M((js,lg)=>{"use strict";Object.defineProperty(js,"__esModule",{value:!0});js.default=void 0;var sb=$e(require("crypto")),ab=$e(require("os")),ng=ug(require("tls")),ub=ug(require("net")),lb=$e(require("dns")),cb=$e(require("constants")),Wc=require("stream"),Ws=Ya(),fb=Ya(),hb=$e(Ba()),db=$e(Of()),nr=require("events"),pb=Mf(),_b=Pf(),xe=hr(),sg=$e(Yf()),Eb=$e(Hf()),mb=$e(Kf()),et=$e(vi()),Yr=$e(Qf()),rg=$e(th()),gb=$e(T_()),wb=jm(),it=Pc(),Re=Xt(),ig=Km(),Tb=Uc(),yb=dr(),og=$e(Mi()),Sb=Zm(),Sn=Pr(),vb=$m(),Gs=$e(Qm()),Nb=eg(),Ob=require("url"),tr=tg();function ag(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(ag=function(a){return a?r:e})(t)}function ug(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var r=ag(e);if(r&&r.has(t))return r.get(t);var a={__proto__:null},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in t)if(c!=="default"&&Object.prototype.hasOwnProperty.call(t,c)){var h=l?Object.getOwnPropertyDescriptor(t,c):null;h&&(h.get||h.set)?Object.defineProperty(a,c,h):a[c]=t[c]}return a.default=t,r&&r.set(t,a),a}function $e(t){return t&&t.__esModule?t:{default:t}}var Ab=30*1e3,Ib=15*1e3,Db=15*1e3,bb=5*1e3,Rb=500,Lb=4*1024,Cb=2147483647,Mb=7,Pb=1433,Fb="7_4",xb="us_english",Ub="mdy",qr={NORMAL:0,REDIRECT:1,RETRY:2},Vr=class extends nr.EventEmitter{_cancelAfterRequestSent;constructor(e){if(super(),typeof e!="object"||e===null)throw new TypeError('The "config" argument is required and must be of type Object.');if(typeof e.server!="string")throw new TypeError('The "config.server" property is required and must be of type string.');this.fedAuthRequired=!1;let r;if(e.authentication!==void 0){if(typeof e.authentication!="object"||e.authentication===null)throw new TypeError('The "config.authentication" property must be of type Object.');let a=e.authentication.type,l=e.authentication.options===void 0?{}:e.authentication.options;if(typeof a!="string")throw new TypeError('The "config.authentication.type" property must be of type string.');if(a!=="default"&&a!=="ntlm"&&a!=="token-credential"&&a!=="azure-active-directory-password"&&a!=="azure-active-directory-access-token"&&a!=="azure-active-directory-msi-vm"&&a!=="azure-active-directory-msi-app-service"&&a!=="azure-active-directory-service-principal-secret"&&a!=="azure-active-directory-default")throw new TypeError('The "type" property must one of "default", "ntlm", "token-credential", "azure-active-directory-password", "azure-active-directory-access-token", "azure-active-directory-default", "azure-active-directory-msi-vm" or "azure-active-directory-msi-app-service" or "azure-active-directory-service-principal-secret".');if(typeof l!="object"||l===null)throw new TypeError('The "config.authentication.options" property must be of type object.');if(a==="ntlm"){if(typeof l.domain!="string")throw new TypeError('The "config.authentication.options.domain" property must be of type string.');if(l.userName!==void 0&&typeof l.userName!="string")throw new TypeError('The "config.authentication.options.userName" property must be of type string.');if(l.password!==void 0&&typeof l.password!="string")throw new TypeError('The "config.authentication.options.password" property must be of type string.');r={type:"ntlm",options:{userName:l.userName,password:l.password,domain:l.domain&&l.domain.toUpperCase()}}}else if(a==="token-credential"){if(!(0,fb.isTokenCredential)(l.credential))throw new TypeError('The "config.authentication.options.credential" property must be an instance of the token credential class.');r={type:"token-credential",options:{credential:l.credential}}}else if(a==="azure-active-directory-password"){if(typeof l.clientId!="string")throw new TypeError('The "config.authentication.options.clientId" property must be of type string.');if(l.userName!==void 0&&typeof l.userName!="string")throw new TypeError('The "config.authentication.options.userName" property must be of type string.');if(l.password!==void 0&&typeof l.password!="string")throw new TypeError('The "config.authentication.options.password" property must be of type string.');if(l.tenantId!==void 0&&typeof l.tenantId!="string")throw new TypeError('The "config.authentication.options.tenantId" property must be of type string.');r={type:"azure-active-directory-password",options:{userName:l.userName,password:l.password,tenantId:l.tenantId,clientId:l.clientId}}}else if(a==="azure-active-directory-access-token"){if(typeof l.token!="string")throw new TypeError('The "config.authentication.options.token" property must be of type string.');r={type:"azure-active-directory-access-token",options:{token:l.token}}}else if(a==="azure-active-directory-msi-vm"){if(l.clientId!==void 0&&typeof l.clientId!="string")throw new TypeError('The "config.authentication.options.clientId" property must be of type string.');r={type:"azure-active-directory-msi-vm",options:{clientId:l.clientId}}}else if(a==="azure-active-directory-default"){if(l.clientId!==void 0&&typeof l.clientId!="string")throw new TypeError('The "config.authentication.options.clientId" property must be of type string.');r={type:"azure-active-directory-default",options:{clientId:l.clientId}}}else if(a==="azure-active-directory-msi-app-service"){if(l.clientId!==void 0&&typeof l.clientId!="string")throw new TypeError('The "config.authentication.options.clientId" property must be of type string.');r={type:"azure-active-directory-msi-app-service",options:{clientId:l.clientId}}}else if(a==="azure-active-directory-service-principal-secret"){if(typeof l.clientId!="string")throw new TypeError('The "config.authentication.options.clientId" property must be of type string.');if(typeof l.clientSecret!="string")throw new TypeError('The "config.authentication.options.clientSecret" property must be of type string.');if(typeof l.tenantId!="string")throw new TypeError('The "config.authentication.options.tenantId" property must be of type string.');r={type:"azure-active-directory-service-principal-secret",options:{clientId:l.clientId,clientSecret:l.clientSecret,tenantId:l.tenantId}}}else{if(l.userName!==void 0&&typeof l.userName!="string")throw new TypeError('The "config.authentication.options.userName" property must be of type string.');if(l.password!==void 0&&typeof l.password!="string")throw new TypeError('The "config.authentication.options.password" property must be of type string.');r={type:"default",options:{userName:l.userName,password:l.password}}}}else r={type:"default",options:{userName:void 0,password:void 0}};if(this.config={server:e.server,authentication:r,options:{abortTransactionOnError:!1,appName:void 0,camelCaseColumns:!1,cancelTimeout:bb,columnEncryptionKeyCacheTTL:2*60*60*1e3,columnEncryptionSetting:!1,columnNameReplacer:void 0,connectionRetryInterval:Rb,connectTimeout:Ib,connector:void 0,connectionIsolationLevel:it.ISOLATION_LEVEL.READ_COMMITTED,cryptoCredentialsDetails:{},database:void 0,datefirst:Mb,dateFormat:Ub,debug:{data:!1,packet:!1,payload:!1,token:!1},enableAnsiNull:!0,enableAnsiNullDefault:!0,enableAnsiPadding:!0,enableAnsiWarnings:!0,enableArithAbort:!0,enableConcatNullYieldsNull:!0,enableCursorCloseOnCommit:null,enableImplicitTransactions:!1,enableNumericRoundabort:!1,enableQuotedIdentifier:!0,encrypt:!0,fallbackToDefaultDb:!1,encryptionKeyStoreProviders:void 0,instanceName:void 0,isolationLevel:it.ISOLATION_LEVEL.READ_COMMITTED,language:xb,localAddress:void 0,maxRetriesOnTransientErrors:3,multiSubnetFailover:!1,packetSize:Lb,port:Pb,readOnlyIntent:!1,requestTimeout:Db,rowCollectionOnDone:!1,rowCollectionOnRequestCompletion:!1,serverName:void 0,serverSupportsColumnEncryption:!1,tdsVersion:Fb,textsize:Cb,trustedServerNameAE:void 0,trustServerCertificate:!1,useColumnNames:!1,useUTC:!0,workstationId:void 0,lowerCaseGuids:!1}},e.options){if(e.options.port&&e.options.instanceName)throw new Error("Port and instanceName are mutually exclusive, but "+e.options.port+" and "+e.options.instanceName+" provided");if(e.options.abortTransactionOnError!==void 0){if(typeof e.options.abortTransactionOnError!="boolean"&&e.options.abortTransactionOnError!==null)throw new TypeError('The "config.options.abortTransactionOnError" property must be of type string or null.');this.config.options.abortTransactionOnError=e.options.abortTransactionOnError}if(e.options.appName!==void 0){if(typeof e.options.appName!="string")throw new TypeError('The "config.options.appName" property must be of type string.');this.config.options.appName=e.options.appName}if(e.options.camelCaseColumns!==void 0){if(typeof e.options.camelCaseColumns!="boolean")throw new TypeError('The "config.options.camelCaseColumns" property must be of type boolean.');this.config.options.camelCaseColumns=e.options.camelCaseColumns}if(e.options.cancelTimeout!==void 0){if(typeof e.options.cancelTimeout!="number")throw new TypeError('The "config.options.cancelTimeout" property must be of type number.');this.config.options.cancelTimeout=e.options.cancelTimeout}if(e.options.columnNameReplacer){if(typeof e.options.columnNameReplacer!="function")throw new TypeError('The "config.options.cancelTimeout" property must be of type function.');this.config.options.columnNameReplacer=e.options.columnNameReplacer}if(e.options.connectionIsolationLevel!==void 0&&((0,it.assertValidIsolationLevel)(e.options.connectionIsolationLevel,"config.options.connectionIsolationLevel"),this.config.options.connectionIsolationLevel=e.options.connectionIsolationLevel),e.options.connectTimeout!==void 0){if(typeof e.options.connectTimeout!="number")throw new TypeError('The "config.options.connectTimeout" property must be of type number.');this.config.options.connectTimeout=e.options.connectTimeout}if(e.options.connector!==void 0){if(typeof e.options.connector!="function")throw new TypeError('The "config.options.connector" property must be a function.');this.config.options.connector=e.options.connector}if(e.options.cryptoCredentialsDetails!==void 0){if(typeof e.options.cryptoCredentialsDetails!="object"||e.options.cryptoCredentialsDetails===null)throw new TypeError('The "config.options.cryptoCredentialsDetails" property must be of type Object.');this.config.options.cryptoCredentialsDetails=e.options.cryptoCredentialsDetails}if(e.options.database!==void 0){if(typeof e.options.database!="string")throw new TypeError('The "config.options.database" property must be of type string.');this.config.options.database=e.options.database}if(e.options.datefirst!==void 0){if(typeof e.options.datefirst!="number"&&e.options.datefirst!==null)throw new TypeError('The "config.options.datefirst" property must be of type number.');if(e.options.datefirst!==null&&(e.options.datefirst<1||e.options.datefirst>7))throw new RangeError('The "config.options.datefirst" property must be >= 1 and <= 7');this.config.options.datefirst=e.options.datefirst}if(e.options.dateFormat!==void 0){if(typeof e.options.dateFormat!="string"&&e.options.dateFormat!==null)throw new TypeError('The "config.options.dateFormat" property must be of type string or null.');this.config.options.dateFormat=e.options.dateFormat}if(e.options.debug){if(e.options.debug.data!==void 0){if(typeof e.options.debug.data!="boolean")throw new TypeError('The "config.options.debug.data" property must be of type boolean.');this.config.options.debug.data=e.options.debug.data}if(e.options.debug.packet!==void 0){if(typeof e.options.debug.packet!="boolean")throw new TypeError('The "config.options.debug.packet" property must be of type boolean.');this.config.options.debug.packet=e.options.debug.packet}if(e.options.debug.payload!==void 0){if(typeof e.options.debug.payload!="boolean")throw new TypeError('The "config.options.debug.payload" property must be of type boolean.');this.config.options.debug.payload=e.options.debug.payload}if(e.options.debug.token!==void 0){if(typeof e.options.debug.token!="boolean")throw new TypeError('The "config.options.debug.token" property must be of type boolean.');this.config.options.debug.token=e.options.debug.token}}if(e.options.enableAnsiNull!==void 0){if(typeof e.options.enableAnsiNull!="boolean"&&e.options.enableAnsiNull!==null)throw new TypeError('The "config.options.enableAnsiNull" property must be of type boolean or null.');this.config.options.enableAnsiNull=e.options.enableAnsiNull}if(e.options.enableAnsiNullDefault!==void 0){if(typeof e.options.enableAnsiNullDefault!="boolean"&&e.options.enableAnsiNullDefault!==null)throw new TypeError('The "config.options.enableAnsiNullDefault" property must be of type boolean or null.');this.config.options.enableAnsiNullDefault=e.options.enableAnsiNullDefault}if(e.options.enableAnsiPadding!==void 0){if(typeof e.options.enableAnsiPadding!="boolean"&&e.options.enableAnsiPadding!==null)throw new TypeError('The "config.options.enableAnsiPadding" property must be of type boolean or null.');this.config.options.enableAnsiPadding=e.options.enableAnsiPadding}if(e.options.enableAnsiWarnings!==void 0){if(typeof e.options.enableAnsiWarnings!="boolean"&&e.options.enableAnsiWarnings!==null)throw new TypeError('The "config.options.enableAnsiWarnings" property must be of type boolean or null.');this.config.options.enableAnsiWarnings=e.options.enableAnsiWarnings}if(e.options.enableArithAbort!==void 0){if(typeof e.options.enableArithAbort!="boolean"&&e.options.enableArithAbort!==null)throw new TypeError('The "config.options.enableArithAbort" property must be of type boolean or null.');this.config.options.enableArithAbort=e.options.enableArithAbort}if(e.options.enableConcatNullYieldsNull!==void 0){if(typeof e.options.enableConcatNullYieldsNull!="boolean"&&e.options.enableConcatNullYieldsNull!==null)throw new TypeError('The "config.options.enableConcatNullYieldsNull" property must be of type boolean or null.');this.config.options.enableConcatNullYieldsNull=e.options.enableConcatNullYieldsNull}if(e.options.enableCursorCloseOnCommit!==void 0){if(typeof e.options.enableCursorCloseOnCommit!="boolean"&&e.options.enableCursorCloseOnCommit!==null)throw new TypeError('The "config.options.enableCursorCloseOnCommit" property must be of type boolean or null.');this.config.options.enableCursorCloseOnCommit=e.options.enableCursorCloseOnCommit}if(e.options.enableImplicitTransactions!==void 0){if(typeof e.options.enableImplicitTransactions!="boolean"&&e.options.enableImplicitTransactions!==null)throw new TypeError('The "config.options.enableImplicitTransactions" property must be of type boolean or null.');this.config.options.enableImplicitTransactions=e.options.enableImplicitTransactions}if(e.options.enableNumericRoundabort!==void 0){if(typeof e.options.enableNumericRoundabort!="boolean"&&e.options.enableNumericRoundabort!==null)throw new TypeError('The "config.options.enableNumericRoundabort" property must be of type boolean or null.');this.config.options.enableNumericRoundabort=e.options.enableNumericRoundabort}if(e.options.enableQuotedIdentifier!==void 0){if(typeof e.options.enableQuotedIdentifier!="boolean"&&e.options.enableQuotedIdentifier!==null)throw new TypeError('The "config.options.enableQuotedIdentifier" property must be of type boolean or null.');this.config.options.enableQuotedIdentifier=e.options.enableQuotedIdentifier}if(e.options.encrypt!==void 0){if(typeof e.options.encrypt!="boolean"&&e.options.encrypt!=="strict")throw new TypeError('The "encrypt" property must be set to "strict", or of type boolean.');this.config.options.encrypt=e.options.encrypt}if(e.options.fallbackToDefaultDb!==void 0){if(typeof e.options.fallbackToDefaultDb!="boolean")throw new TypeError('The "config.options.fallbackToDefaultDb" property must be of type boolean.');this.config.options.fallbackToDefaultDb=e.options.fallbackToDefaultDb}if(e.options.instanceName!==void 0){if(typeof e.options.instanceName!="string")throw new TypeError('The "config.options.instanceName" property must be of type string.');this.config.options.instanceName=e.options.instanceName,this.config.options.port=void 0}if(e.options.isolationLevel!==void 0&&((0,it.assertValidIsolationLevel)(e.options.isolationLevel,"config.options.isolationLevel"),this.config.options.isolationLevel=e.options.isolationLevel),e.options.language!==void 0){if(typeof e.options.language!="string"&&e.options.language!==null)throw new TypeError('The "config.options.language" property must be of type string or null.');this.config.options.language=e.options.language}if(e.options.localAddress!==void 0){if(typeof e.options.localAddress!="string")throw new TypeError('The "config.options.localAddress" property must be of type string.');this.config.options.localAddress=e.options.localAddress}if(e.options.multiSubnetFailover!==void 0){if(typeof e.options.multiSubnetFailover!="boolean")throw new TypeError('The "config.options.multiSubnetFailover" property must be of type boolean.');this.config.options.multiSubnetFailover=e.options.multiSubnetFailover}if(e.options.packetSize!==void 0){if(typeof e.options.packetSize!="number")throw new TypeError('The "config.options.packetSize" property must be of type number.');this.config.options.packetSize=e.options.packetSize}if(e.options.port!==void 0){if(typeof e.options.port!="number")throw new TypeError('The "config.options.port" property must be of type number.');if(e.options.port<=0||e.options.port>=65536)throw new RangeError('The "config.options.port" property must be > 0 and < 65536');this.config.options.port=e.options.port,this.config.options.instanceName=void 0}if(e.options.readOnlyIntent!==void 0){if(typeof e.options.readOnlyIntent!="boolean")throw new TypeError('The "config.options.readOnlyIntent" property must be of type boolean.');this.config.options.readOnlyIntent=e.options.readOnlyIntent}if(e.options.requestTimeout!==void 0){if(typeof e.options.requestTimeout!="number")throw new TypeError('The "config.options.requestTimeout" property must be of type number.');this.config.options.requestTimeout=e.options.requestTimeout}if(e.options.maxRetriesOnTransientErrors!==void 0){if(typeof e.options.maxRetriesOnTransientErrors!="number")throw new TypeError('The "config.options.maxRetriesOnTransientErrors" property must be of type number.');if(e.options.maxRetriesOnTransientErrors<0)throw new TypeError('The "config.options.maxRetriesOnTransientErrors" property must be equal or greater than 0.');this.config.options.maxRetriesOnTransientErrors=e.options.maxRetriesOnTransientErrors}if(e.options.connectionRetryInterval!==void 0){if(typeof e.options.connectionRetryInterval!="number")throw new TypeError('The "config.options.connectionRetryInterval" property must be of type number.');if(e.options.connectionRetryInterval<=0)throw new TypeError('The "config.options.connectionRetryInterval" property must be greater than 0.');this.config.options.connectionRetryInterval=e.options.connectionRetryInterval}if(e.options.rowCollectionOnDone!==void 0){if(typeof e.options.rowCollectionOnDone!="boolean")throw new TypeError('The "config.options.rowCollectionOnDone" property must be of type boolean.');this.config.options.rowCollectionOnDone=e.options.rowCollectionOnDone}if(e.options.rowCollectionOnRequestCompletion!==void 0){if(typeof e.options.rowCollectionOnRequestCompletion!="boolean")throw new TypeError('The "config.options.rowCollectionOnRequestCompletion" property must be of type boolean.');this.config.options.rowCollectionOnRequestCompletion=e.options.rowCollectionOnRequestCompletion}if(e.options.tdsVersion!==void 0){if(typeof e.options.tdsVersion!="string")throw new TypeError('The "config.options.tdsVersion" property must be of type string.');this.config.options.tdsVersion=e.options.tdsVersion}if(e.options.textsize!==void 0){if(typeof e.options.textsize!="number"&&e.options.textsize!==null)throw new TypeError('The "config.options.textsize" property must be of type number or null.');if(e.options.textsize>2147483647)throw new TypeError(`The "config.options.textsize" can't be greater than 2147483647.`);if(e.options.textsize<-1)throw new TypeError(`The "config.options.textsize" can't be smaller than -1.`);this.config.options.textsize=e.options.textsize|0}if(e.options.trustServerCertificate!==void 0){if(typeof e.options.trustServerCertificate!="boolean")throw new TypeError('The "config.options.trustServerCertificate" property must be of type boolean.');this.config.options.trustServerCertificate=e.options.trustServerCertificate}if(e.options.serverName!==void 0){if(typeof e.options.serverName!="string")throw new TypeError('The "config.options.serverName" property must be of type string.');this.config.options.serverName=e.options.serverName}if(e.options.useColumnNames!==void 0){if(typeof e.options.useColumnNames!="boolean")throw new TypeError('The "config.options.useColumnNames" property must be of type boolean.');this.config.options.useColumnNames=e.options.useColumnNames}if(e.options.useUTC!==void 0){if(typeof e.options.useUTC!="boolean")throw new TypeError('The "config.options.useUTC" property must be of type boolean.');this.config.options.useUTC=e.options.useUTC}if(e.options.workstationId!==void 0){if(typeof e.options.workstationId!="string")throw new TypeError('The "config.options.workstationId" property must be of type string.');this.config.options.workstationId=e.options.workstationId}if(e.options.lowerCaseGuids!==void 0){if(typeof e.options.lowerCaseGuids!="boolean")throw new TypeError('The "config.options.lowerCaseGuids" property must be of type boolean.');this.config.options.lowerCaseGuids=e.options.lowerCaseGuids}}this.secureContextOptions=this.config.options.cryptoCredentialsDetails,this.secureContextOptions.secureOptions===void 0&&(this.secureContextOptions=Object.create(this.secureContextOptions,{secureOptions:{value:cb.default.SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS}})),this.debug=this.createDebug(),this.inTransaction=!1,this.transactionDescriptors=[Buffer.from([0,0,0,0,0,0,0,0])],this.transactionDepth=0,this.isSqlBatch=!1,this.closed=!1,this.messageBuffer=Buffer.alloc(0),this.curTransientRetryCount=0,this.transientErrorLookup=new _b.TransientErrorLookup,this.state=this.STATE.INITIALIZED,this._cancelAfterRequestSent=()=>{this.messageIo.sendMessage(xe.TYPE.ATTENTION),this.createCancelTimer()}}connect(e){if(this.state!==this.STATE.INITIALIZED)throw new Re.ConnectionError("`.connect` can not be called on a Connection in `"+this.state.name+"` state.");if(e){let r=l=>{this.removeListener("error",a),e(l)},a=l=>{this.removeListener("connect",r),e(l)};this.once("connect",r),this.once("error",a)}this.transitionTo(this.STATE.CONNECTING)}on(e,r){return super.on(e,r)}emit(e,...r){return super.emit(e,...r)}close(){this.transitionTo(this.STATE.FINAL)}initialiseConnection(){let e=this.createConnectTimer();return this.config.options.port?this.connectOnPort(this.config.options.port,this.config.options.multiSubnetFailover,e,this.config.options.connector):(0,pb.instanceLookup)({server:this.config.server,instanceName:this.config.options.instanceName,timeout:this.config.options.connectTimeout,signal:e}).then(r=>{process.nextTick(()=>{this.connectOnPort(r,this.config.options.multiSubnetFailover,e,this.config.options.connector)})},r=>{this.clearConnectTimer(),!e.aborted&&process.nextTick(()=>{this.emit("connect",new Re.ConnectionError(r.message,"EINSTLOOKUP",{cause:r}))})})}cleanupConnection(e){if(!this.closed){this.clearConnectTimer(),this.clearRequestTimer(),this.clearRetryTimer(),this.closeConnection(),e===qr.REDIRECT?this.emit("rerouting"):e!==qr.RETRY&&process.nextTick(()=>{this.emit("end")});let r=this.request;if(r){let a=new Re.RequestError("Connection closed before request completed.","ECLOSE");r.callback(a),this.request=void 0}this.closed=!0,this.loginError=void 0}}createDebug(){let e=new db.default(this.config.options.debug);return e.on("debug",r=>{this.emit("debug",r)}),e}createTokenStreamParser(e,r){return new wb.Parser(e,this.debug,r,this.config.options)}socketHandlingForSendPreLogin(e){e.on("error",r=>{this.socketError(r)}),e.on("close",()=>{this.socketClose()}),e.on("end",()=>{this.socketEnd()}),e.setKeepAlive(!0,Ab),this.messageIo=new gb.default(e,this.config.options.packetSize,this.debug),this.messageIo.on("secure",r=>{this.emit("secure",r)}),this.socket=e,this.closed=!1,this.debug.log("connected to "+this.config.server+":"+this.config.options.port),this.sendPreLogin(),this.transitionTo(this.STATE.SENT_PRELOGIN)}wrapWithTls(e,r){return r.throwIfAborted(),new Promise((a,l)=>{let c=ng.createSecureContext(this.secureContextOptions),h=ub.isIP(this.config.server)?"":this.config.server,m={host:this.config.server,socket:e,ALPNProtocols:["tds/8.0"],secureContext:c,servername:this.config.options.serverName?this.config.options.serverName:h},g=ng.connect(m),v=()=>{g.removeListener("error",N),g.removeListener("connect",O),g.destroy(),l(r.reason)},N=L=>{r.removeEventListener("abort",v),g.removeListener("error",N),g.removeListener("connect",O),g.destroy(),l(L)},O=()=>{r.removeEventListener("abort",v),g.removeListener("error",N),g.removeListener("connect",O),a(g)};r.addEventListener("abort",v,{once:!0}),g.on("error",N),g.on("secureConnect",O)})}connectOnPort(e,r,a,l){let c={host:this.routingData?this.routingData.server:this.config.server,port:this.routingData?this.routingData.port:e,localAddress:this.config.options.localAddress},h=l||(r?ig.connectInParallel:ig.connectInSequence);(async()=>{let m=await h(c,lb.default.lookup,a);if(this.config.options.encrypt==="strict")try{m=await this.wrapWithTls(m,a)}catch(g){throw m.end(),g}this.socketHandlingForSendPreLogin(m)})().catch(m=>{this.clearConnectTimer(),!a.aborted&&process.nextTick(()=>{this.socketError(m)})})}closeConnection(){this.socket&&this.socket.destroy()}createConnectTimer(){let e=new AbortController;return this.connectTimer=setTimeout(()=>{e.abort(),this.connectTimeout()},this.config.options.connectTimeout),e.signal}createCancelTimer(){this.clearCancelTimer();let e=this.config.options.cancelTimeout;e>0&&(this.cancelTimer=setTimeout(()=>{this.cancelTimeout()},e))}createRequestTimer(){this.clearRequestTimer();let e=this.request,r=e.timeout!==void 0?e.timeout:this.config.options.requestTimeout;r&&(this.requestTimer=setTimeout(()=>{this.requestTimeout()},r))}createRetryTimer(){this.clearRetryTimer(),this.retryTimer=setTimeout(()=>{this.retryTimeout()},this.config.options.connectionRetryInterval)}connectTimeout(){let e=this.config.options.port?`:${this.config.options.port}`:`\\${this.config.options.instanceName}`,r=this.routingData?this.routingData.server:this.config.server,a=this.routingData?`:${this.routingData.port}`:e,l=this.routingData?` (redirected from ${this.config.server}${e})`:"",c=`Failed to connect to ${r}${a}${l} in ${this.config.options.connectTimeout}ms`;this.debug.log(c),this.emit("connect",new Re.ConnectionError(c,"ETIMEOUT")),this.connectTimer=void 0,this.dispatchEvent("connectTimeout")}cancelTimeout(){let e=`Failed to cancel request in ${this.config.options.cancelTimeout}ms`;this.debug.log(e),this.dispatchEvent("socketError",new Re.ConnectionError(e,"ETIMEOUT"))}requestTimeout(){this.requestTimer=void 0;let e=this.request;e.cancel();let a="Timeout: Request failed to complete in "+(e.timeout!==void 0?e.timeout:this.config.options.requestTimeout)+"ms";e.error=new Re.RequestError(a,"ETIMEOUT")}retryTimeout(){this.retryTimer=void 0,this.emit("retry"),this.transitionTo(this.STATE.CONNECTING)}clearConnectTimer(){this.connectTimer&&(clearTimeout(this.connectTimer),this.connectTimer=void 0)}clearCancelTimer(){this.cancelTimer&&(clearTimeout(this.cancelTimer),this.cancelTimer=void 0)}clearRequestTimer(){this.requestTimer&&(clearTimeout(this.requestTimer),this.requestTimer=void 0)}clearRetryTimer(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=void 0)}transitionTo(e){if(this.state===e){this.debug.log("State is already "+e.name);return}this.state&&this.state.exit&&this.state.exit.call(this,e),this.debug.log("State change: "+(this.state?this.state.name:"undefined")+" -> "+e.name),this.state=e,this.state.enter&&this.state.enter.apply(this)}getEventHandler(e){let r=this.state.events[e];if(!r)throw new Error(`No event '${e}' in state '${this.state.name}'`);return r}dispatchEvent(e,...r){let a=this.state.events[e];a?a.apply(this,r):(this.emit("error",new Error(`No event '${e}' in state '${this.state.name}'`)),this.close())}socketError(e){if(this.state===this.STATE.CONNECTING||this.state===this.STATE.SENT_TLSSSLNEGOTIATION){let r=this.config.options.port?`:${this.config.options.port}`:`\\${this.config.options.instanceName}`,a=this.routingData?this.routingData.server:this.config.server,l=this.routingData?`:${this.routingData.port}`:r,c=this.routingData?` (redirected from ${this.config.server}${r})`:"",h=`Failed to connect to ${a}${l}${c} - ${e.message}`;this.debug.log(h),this.emit("connect",new Re.ConnectionError(h,"ESOCKET",{cause:e}))}else{let r=`Connection lost - ${e.message}`;this.debug.log(r),this.emit("error",new Re.ConnectionError(r,"ESOCKET",{cause:e}))}this.dispatchEvent("socketError",e)}socketEnd(){if(this.debug.log("socket ended"),this.state!==this.STATE.FINAL){let e=new Error("socket hang up");e.code="ECONNRESET",this.socketError(e)}}socketClose(){if(this.debug.log("connection to "+this.config.server+":"+this.config.options.port+" closed"),this.state===this.STATE.REROUTING)this.debug.log("Rerouting to "+this.routingData.server+":"+this.routingData.port),this.dispatchEvent("reconnect");else if(this.state===this.STATE.TRANSIENT_FAILURE_RETRY){let e=this.routingData?this.routingData.server:this.config.server,r=this.routingData?this.routingData.port:this.config.options.port;this.debug.log("Retry after transient failure connecting to "+e+":"+r),this.dispatchEvent("retry")}else this.transitionTo(this.STATE.FINAL)}sendPreLogin(){let[,e,r,a]=/^(\d+)\.(\d+)\.(\d+)/.exec(Nb.version)??["0.0.0","0","0","0"],l=new sg.default({encrypt:typeof this.config.options.encrypt=="boolean"&&this.config.options.encrypt,version:{major:Number(e),minor:Number(r),build:Number(a),subbuild:0}});this.messageIo.sendMessage(xe.TYPE.PRELOGIN,l.data),this.debug.payload(function(){return l.toString("  ")})}sendLogin7Packet(){let e=new Eb.default({tdsVersion:yb.versions[this.config.options.tdsVersion],packetSize:this.config.options.packetSize,clientProgVer:0,clientPid:process.pid,connectionId:0,clientTimeZone:new Date().getTimezoneOffset(),clientLcid:1033}),{authentication:r}=this.config;switch(r.type){case"azure-active-directory-password":e.fedAuth={type:"ADAL",echo:this.fedAuthRequired,workflow:"default"};break;case"azure-active-directory-access-token":e.fedAuth={type:"SECURITYTOKEN",echo:this.fedAuthRequired,fedAuthToken:r.options.token};break;case"token-credential":case"azure-active-directory-msi-vm":case"azure-active-directory-default":case"azure-active-directory-msi-app-service":case"azure-active-directory-service-principal-secret":e.fedAuth={type:"ADAL",echo:this.fedAuthRequired,workflow:"integrated"};break;case"ntlm":e.sspi=(0,Sb.createNTLMRequest)({domain:r.options.domain});break;default:e.userName=r.options.userName,e.password=r.options.password}e.hostname=this.config.options.workstationId||ab.default.hostname(),e.serverName=this.routingData?this.routingData.server:this.config.server,e.appName=this.config.options.appName||"Tedious",e.libraryName=Tb.name,e.language=this.config.options.language,e.database=this.config.options.database,e.clientId=Buffer.from([1,2,3,4,5,6]),e.readOnlyIntent=this.config.options.readOnlyIntent,e.initDbFatal=!this.config.options.fallbackToDefaultDb,this.routingData=void 0,this.messageIo.sendMessage(xe.TYPE.LOGIN7,e.toBuffer()),this.debug.payload(function(){return e.toString("  ")})}sendFedAuthTokenMessage(e){let r=Buffer.byteLength(e,"ucs2"),a=Buffer.alloc(8+r),l=0;l=a.writeUInt32LE(r+4,l),l=a.writeUInt32LE(r,l),a.write(e,l,"ucs2"),this.messageIo.sendMessage(xe.TYPE.FEDAUTH_TOKEN,a),this.transitionTo(this.STATE.SENT_LOGIN7_WITH_STANDARD_LOGIN)}sendInitialSql(){let e=new rg.default(this.getInitialSql(),this.currentTransactionDescriptor(),this.config.options),r=new og.default({type:xe.TYPE.SQL_BATCH});this.messageIo.outgoingMessageStream.write(r),Wc.Readable.from(e).pipe(r)}getInitialSql(){let e=[];return this.config.options.enableAnsiNull===!0?e.push("set ansi_nulls on"):this.config.options.enableAnsiNull===!1&&e.push("set ansi_nulls off"),this.config.options.enableAnsiNullDefault===!0?e.push("set ansi_null_dflt_on on"):this.config.options.enableAnsiNullDefault===!1&&e.push("set ansi_null_dflt_on off"),this.config.options.enableAnsiPadding===!0?e.push("set ansi_padding on"):this.config.options.enableAnsiPadding===!1&&e.push("set ansi_padding off"),this.config.options.enableAnsiWarnings===!0?e.push("set ansi_warnings on"):this.config.options.enableAnsiWarnings===!1&&e.push("set ansi_warnings off"),this.config.options.enableArithAbort===!0?e.push("set arithabort on"):this.config.options.enableArithAbort===!1&&e.push("set arithabort off"),this.config.options.enableConcatNullYieldsNull===!0?e.push("set concat_null_yields_null on"):this.config.options.enableConcatNullYieldsNull===!1&&e.push("set concat_null_yields_null off"),this.config.options.enableCursorCloseOnCommit===!0?e.push("set cursor_close_on_commit on"):this.config.options.enableCursorCloseOnCommit===!1&&e.push("set cursor_close_on_commit off"),this.config.options.datefirst!==null&&e.push(`set datefirst ${this.config.options.datefirst}`),this.config.options.dateFormat!==null&&e.push(`set dateformat ${this.config.options.dateFormat}`),this.config.options.enableImplicitTransactions===!0?e.push("set implicit_transactions on"):this.config.options.enableImplicitTransactions===!1&&e.push("set implicit_transactions off"),this.config.options.language!==null&&e.push(`set language ${this.config.options.language}`),this.config.options.enableNumericRoundabort===!0?e.push("set numeric_roundabort on"):this.config.options.enableNumericRoundabort===!1&&e.push("set numeric_roundabort off"),this.config.options.enableQuotedIdentifier===!0?e.push("set quoted_identifier on"):this.config.options.enableQuotedIdentifier===!1&&e.push("set quoted_identifier off"),this.config.options.textsize!==null&&e.push(`set textsize ${this.config.options.textsize}`),this.config.options.connectionIsolationLevel!==null&&e.push(`set transaction isolation level ${this.getIsolationLevelText(this.config.options.connectionIsolationLevel)}`),this.config.options.abortTransactionOnError===!0?e.push("set xact_abort on"):this.config.options.abortTransactionOnError===!1&&e.push("set xact_abort off"),e.join(`
`)}processedInitialSql(){this.clearConnectTimer(),this.emit("connect")}execSqlBatch(e){this.makeRequest(e,xe.TYPE.SQL_BATCH,new rg.default(e.sqlTextOrProcedure,this.currentTransactionDescriptor(),this.config.options))}execSql(e){try{e.validateParameters(this.databaseCollation)}catch(a){e.error=a,process.nextTick(()=>{this.debug.log(a.message),e.callback(a)});return}let r=[];r.push({type:Sn.TYPES.NVarChar,name:"statement",value:e.sqlTextOrProcedure,output:!1,length:void 0,precision:void 0,scale:void 0}),e.parameters.length&&(r.push({type:Sn.TYPES.NVarChar,name:"params",value:e.makeParamsParameter(e.parameters),output:!1,length:void 0,precision:void 0,scale:void 0}),r.push(...e.parameters)),this.makeRequest(e,xe.TYPE.RPC_REQUEST,new Yr.default(Gs.default.Sp_ExecuteSql,r,this.currentTransactionDescriptor(),this.config.options,this.databaseCollation))}newBulkLoad(e,r,a){let l;if(a===void 0?(a=r,l={}):l=r,typeof l!="object")throw new TypeError('"options" argument must be an object');return new hb.default(e,this.databaseCollation,this.config.options,l,a)}execBulkLoad(e,r){if(e.executionStarted=!0,r){if(e.streamingMode)throw new Error("Connection.execBulkLoad can't be called with a BulkLoad that was put in streaming mode.");if(e.firstRowWritten)throw new Error("Connection.execBulkLoad can't be called with a BulkLoad that already has rows written to it.");let h=Wc.Readable.from(r);h.on("error",m=>{e.rowToPacketTransform.destroy(m)}),e.rowToPacketTransform.on("error",m=>{h.destroy(m)}),h.pipe(e.rowToPacketTransform)}else e.streamingMode||e.rowToPacketTransform.end();let a=()=>{c.cancel()},l=new vb.BulkLoadPayload(e),c=new et.default(e.getBulkInsertSql(),h=>{if(e.removeListener("cancel",a),h){h.code==="UNKNOWN"&&(h.message+=" This is likely because the schema of the BulkLoad does not match the schema of the table you are attempting to insert into."),e.error=h,e.callback(h);return}this.makeRequest(e,xe.TYPE.BULK_LOAD,l)});e.once("cancel",a),this.execSqlBatch(c)}prepare(e){let r=[];r.push({type:Sn.TYPES.Int,name:"handle",value:void 0,output:!0,length:void 0,precision:void 0,scale:void 0}),r.push({type:Sn.TYPES.NVarChar,name:"params",value:e.parameters.length?e.makeParamsParameter(e.parameters):null,output:!1,length:void 0,precision:void 0,scale:void 0}),r.push({type:Sn.TYPES.NVarChar,name:"stmt",value:e.sqlTextOrProcedure,output:!1,length:void 0,precision:void 0,scale:void 0}),e.preparing=!0,e.on("returnValue",(a,l)=>{a==="handle"?e.handle=l:e.error=new Re.RequestError(`Tedious > Unexpected output parameter ${a} from sp_prepare`)}),this.makeRequest(e,xe.TYPE.RPC_REQUEST,new Yr.default(Gs.default.Sp_Prepare,r,this.currentTransactionDescriptor(),this.config.options,this.databaseCollation))}unprepare(e){let r=[];r.push({type:Sn.TYPES.Int,name:"handle",value:e.handle,output:!1,length:void 0,precision:void 0,scale:void 0}),this.makeRequest(e,xe.TYPE.RPC_REQUEST,new Yr.default(Gs.default.Sp_Unprepare,r,this.currentTransactionDescriptor(),this.config.options,this.databaseCollation))}execute(e,r){let a=[];a.push({type:Sn.TYPES.Int,name:"",value:e.handle,output:!1,length:void 0,precision:void 0,scale:void 0});try{for(let l=0,c=e.parameters.length;l<c;l++){let h=e.parameters[l];a.push({...h,value:h.type.validate(r?r[h.name]:null,this.databaseCollation)})}}catch(l){e.error=l,process.nextTick(()=>{this.debug.log(l.message),e.callback(l)});return}this.makeRequest(e,xe.TYPE.RPC_REQUEST,new Yr.default(Gs.default.Sp_Execute,a,this.currentTransactionDescriptor(),this.config.options,this.databaseCollation))}callProcedure(e){try{e.validateParameters(this.databaseCollation)}catch(r){e.error=r,process.nextTick(()=>{this.debug.log(r.message),e.callback(r)});return}this.makeRequest(e,xe.TYPE.RPC_REQUEST,new Yr.default(e.sqlTextOrProcedure,e.parameters,this.currentTransactionDescriptor(),this.config.options,this.databaseCollation))}beginTransaction(e,r="",a=this.config.options.isolationLevel){(0,it.assertValidIsolationLevel)(a,"isolationLevel");let l=new it.Transaction(r,a);if(this.config.options.tdsVersion<"7_2")return this.execSqlBatch(new et.default("SET TRANSACTION ISOLATION LEVEL "+l.isolationLevelToTSQL()+";BEGIN TRAN "+l.name,h=>{this.transactionDepth++,this.transactionDepth===1&&(this.inTransaction=!0),e(h)}));let c=new et.default(void 0,h=>e(h,this.currentTransactionDescriptor()));return this.makeRequest(c,xe.TYPE.TRANSACTION_MANAGER,l.beginPayload(this.currentTransactionDescriptor()))}commitTransaction(e,r=""){let a=new it.Transaction(r);if(this.config.options.tdsVersion<"7_2")return this.execSqlBatch(new et.default("COMMIT TRAN "+a.name,c=>{this.transactionDepth--,this.transactionDepth===0&&(this.inTransaction=!1),e(c)}));let l=new et.default(void 0,e);return this.makeRequest(l,xe.TYPE.TRANSACTION_MANAGER,a.commitPayload(this.currentTransactionDescriptor()))}rollbackTransaction(e,r=""){let a=new it.Transaction(r);if(this.config.options.tdsVersion<"7_2")return this.execSqlBatch(new et.default("ROLLBACK TRAN "+a.name,c=>{this.transactionDepth--,this.transactionDepth===0&&(this.inTransaction=!1),e(c)}));let l=new et.default(void 0,e);return this.makeRequest(l,xe.TYPE.TRANSACTION_MANAGER,a.rollbackPayload(this.currentTransactionDescriptor()))}saveTransaction(e,r){let a=new it.Transaction(r);if(this.config.options.tdsVersion<"7_2")return this.execSqlBatch(new et.default("SAVE TRAN "+a.name,c=>{this.transactionDepth++,e(c)}));let l=new et.default(void 0,e);return this.makeRequest(l,xe.TYPE.TRANSACTION_MANAGER,a.savePayload(this.currentTransactionDescriptor()))}transaction(e,r){if(typeof e!="function")throw new TypeError("`cb` must be a function");let a=this.inTransaction,l="_tedious_"+sb.default.randomBytes(10).toString("hex"),c=(h,m,...g)=>{h?this.inTransaction&&this.state===this.STATE.LOGGED_IN?this.rollbackTransaction(v=>{m(v||h,...g)},l):m(h,...g):a?(this.config.options.tdsVersion<"7_2"&&this.transactionDepth--,m(null,...g)):this.commitTransaction(v=>{m(v,...g)},l)};return a?this.saveTransaction(h=>h?e(h):r?this.execSqlBatch(new et.default("SET transaction isolation level "+this.getIsolationLevelText(r),m=>e(m,c))):e(null,c),l):this.beginTransaction(h=>h?e(h):e(null,c),l,r)}makeRequest(e,r,a){if(this.state!==this.STATE.LOGGED_IN){let l="Requests can only be made in the "+this.STATE.LOGGED_IN.name+" state, not the "+this.state.name+" state";this.debug.log(l),e.callback(new Re.RequestError(l,"EINVALIDSTATE"))}else if(e.canceled)process.nextTick(()=>{e.callback(new Re.RequestError("Canceled.","ECANCEL"))});else{r===xe.TYPE.SQL_BATCH?this.isSqlBatch=!0:this.isSqlBatch=!1,this.request=e,e.connection=this,e.rowCount=0,e.rows=[],e.rst=[];let l=()=>{h.unpipe(c),h.destroy(new Re.RequestError("Canceled.","ECANCEL")),c.ignore=!0,c.end(),e instanceof et.default&&e.paused&&e.resume()};e.once("cancel",l),this.createRequestTimer();let c=new og.default({type:r,resetConnection:this.resetConnectionOnNextRequest});this.messageIo.outgoingMessageStream.write(c),this.transitionTo(this.STATE.SENT_CLIENT_REQUEST),c.once("finish",()=>{e.removeListener("cancel",l),e.once("cancel",this._cancelAfterRequestSent),this.resetConnectionOnNextRequest=!1,this.debug.payload(function(){return a.toString("  ")})});let h=Wc.Readable.from(a);h.once("error",m=>{h.unpipe(c),e.error??=m,c.ignore=!0,c.end()}),h.pipe(c)}}cancel(){return!this.request||this.request.canceled?!1:(this.request.cancel(),!0)}reset(e){let r=new et.default(this.getInitialSql(),a=>{this.config.options.tdsVersion<"7_2"&&(this.inTransaction=!1),e(a)});this.resetConnectionOnNextRequest=!0,this.execSqlBatch(r)}currentTransactionDescriptor(){return this.transactionDescriptors[this.transactionDescriptors.length-1]}getIsolationLevelText(e){switch(e){case it.ISOLATION_LEVEL.READ_UNCOMMITTED:return"read uncommitted";case it.ISOLATION_LEVEL.REPEATABLE_READ:return"repeatable read";case it.ISOLATION_LEVEL.SERIALIZABLE:return"serializable";case it.ISOLATION_LEVEL.SNAPSHOT:return"snapshot";default:return"read committed"}}};function Gc(t){return t instanceof AggregateError&&(t=t.errors[0]),t instanceof Re.ConnectionError&&!!t.isTransient}var gC=js.default=Vr;lg.exports=Vr;Vr.prototype.STATE={INITIALIZED:{name:"Initialized",events:{}},CONNECTING:{name:"Connecting",enter:function(){this.initialiseConnection()},events:{socketError:function(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)}}},SENT_PRELOGIN:{name:"SentPrelogin",enter:function(){(async()=>{let t=Buffer.alloc(0),e;try{e=await this.messageIo.readMessage()}catch(l){return this.socketError(l)}for await(let l of e)t=Buffer.concat([t,l]);let r=new sg.default(t);if(this.debug.payload(function(){return r.toString("  ")}),r.fedAuthRequired===1&&(this.fedAuthRequired=!0),this.config.options.encrypt!=="strict"&&(r.encryptionString==="ON"||r.encryptionString==="REQ")){if(!this.config.options.encrypt)return this.emit("connect",new Re.ConnectionError("Server requires encryption, set 'encrypt' config option to true.","EENCRYPT")),this.close();try{this.transitionTo(this.STATE.SENT_TLSSSLNEGOTIATION),await this.messageIo.startTls(this.secureContextOptions,this.config.options.serverName?this.config.options.serverName:this.routingData?.server??this.config.server,this.config.options.trustServerCertificate)}catch(l){return this.socketError(l)}}this.sendLogin7Packet();let{authentication:a}=this.config;switch(a.type){case"token-credential":case"azure-active-directory-password":case"azure-active-directory-msi-vm":case"azure-active-directory-msi-app-service":case"azure-active-directory-service-principal-secret":case"azure-active-directory-default":this.transitionTo(this.STATE.SENT_LOGIN7_WITH_FEDAUTH);break;case"ntlm":this.transitionTo(this.STATE.SENT_LOGIN7_WITH_NTLM);break;default:this.transitionTo(this.STATE.SENT_LOGIN7_WITH_STANDARD_LOGIN);break}})().catch(t=>{process.nextTick(()=>{throw t})})},events:{socketError:function(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)}}},REROUTING:{name:"ReRouting",enter:function(){this.cleanupConnection(qr.REDIRECT)},events:{message:function(){},socketError:function(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)},reconnect:function(){this.transitionTo(this.STATE.CONNECTING)}}},TRANSIENT_FAILURE_RETRY:{name:"TRANSIENT_FAILURE_RETRY",enter:function(){this.curTransientRetryCount++,this.cleanupConnection(qr.RETRY)},events:{message:function(){},socketError:function(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)},retry:function(){this.createRetryTimer()}}},SENT_TLSSSLNEGOTIATION:{name:"SentTLSSSLNegotiation",events:{socketError:function(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)}}},SENT_LOGIN7_WITH_STANDARD_LOGIN:{name:"SentLogin7WithStandardLogin",enter:function(){(async()=>{let t;try{t=await this.messageIo.readMessage()}catch(a){return this.socketError(a)}let e=new tr.Login7TokenHandler(this),r=this.createTokenStreamParser(t,e);await(0,nr.once)(r,"end"),e.loginAckReceived?e.routingData?(this.routingData=e.routingData,this.transitionTo(this.STATE.REROUTING)):this.transitionTo(this.STATE.LOGGED_IN_SENDING_INITIAL_SQL):this.loginError?Gc(this.loginError)?(this.debug.log("Initiating retry on transient error"),this.transitionTo(this.STATE.TRANSIENT_FAILURE_RETRY)):(this.emit("connect",this.loginError),this.transitionTo(this.STATE.FINAL)):(this.emit("connect",new Re.ConnectionError("Login failed.","ELOGIN")),this.transitionTo(this.STATE.FINAL))})().catch(t=>{process.nextTick(()=>{throw t})})},events:{socketError:function(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)}}},SENT_LOGIN7_WITH_NTLM:{name:"SentLogin7WithNTLMLogin",enter:function(){(async()=>{for(;;){let t;try{t=await this.messageIo.readMessage()}catch(a){return this.socketError(a)}let e=new tr.Login7TokenHandler(this),r=this.createTokenStreamParser(t,e);if(await(0,nr.once)(r,"end"),e.loginAckReceived)return e.routingData?(this.routingData=e.routingData,this.transitionTo(this.STATE.REROUTING)):this.transitionTo(this.STATE.LOGGED_IN_SENDING_INITIAL_SQL);if(this.ntlmpacket){let a=this.config.authentication,l=new mb.default({domain:a.options.domain,userName:a.options.userName,password:a.options.password,ntlmpacket:this.ntlmpacket});this.messageIo.sendMessage(xe.TYPE.NTLMAUTH_PKT,l.data),this.debug.payload(function(){return l.toString("  ")}),this.ntlmpacket=void 0}else return this.loginError?Gc(this.loginError)?(this.debug.log("Initiating retry on transient error"),this.transitionTo(this.STATE.TRANSIENT_FAILURE_RETRY)):(this.emit("connect",this.loginError),this.transitionTo(this.STATE.FINAL)):(this.emit("connect",new Re.ConnectionError("Login failed.","ELOGIN")),this.transitionTo(this.STATE.FINAL))}})().catch(t=>{process.nextTick(()=>{throw t})})},events:{socketError:function(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)}}},SENT_LOGIN7_WITH_FEDAUTH:{name:"SentLogin7Withfedauth",enter:function(){(async()=>{let t;try{t=await this.messageIo.readMessage()}catch(l){return this.socketError(l)}let e=new tr.Login7TokenHandler(this),r=this.createTokenStreamParser(t,e);if(await(0,nr.once)(r,"end"),e.loginAckReceived){e.routingData?(this.routingData=e.routingData,this.transitionTo(this.STATE.REROUTING)):this.transitionTo(this.STATE.LOGGED_IN_SENDING_INITIAL_SQL);return}let a=e.fedAuthInfoToken;if(a&&a.stsurl&&a.spn){let l=this.config.authentication,c=new Ob.URL("/.default",a.spn).toString(),h;switch(l.type){case"token-credential":h=l.options.credential;break;case"azure-active-directory-password":h=new Ws.UsernamePasswordCredential(l.options.tenantId??"common",l.options.clientId,l.options.userName,l.options.password);break;case"azure-active-directory-msi-vm":case"azure-active-directory-msi-app-service":let g=l.options.clientId?[l.options.clientId,{}]:[{}];h=new Ws.ManagedIdentityCredential(...g);break;case"azure-active-directory-default":let v=l.options.clientId?{managedIdentityClientId:l.options.clientId}:{};h=new Ws.DefaultAzureCredential(v);break;case"azure-active-directory-service-principal-secret":h=new Ws.ClientSecretCredential(l.options.tenantId,l.options.clientId,l.options.clientSecret);break}let m;try{m=await h.getToken(c)}catch(g){this.loginError=new AggregateError([new Re.ConnectionError("Security token could not be authenticated or authorized.","EFEDAUTH"),g]),this.emit("connect",this.loginError),this.transitionTo(this.STATE.FINAL);return}if(m===null){this.loginError=new AggregateError([new Re.ConnectionError("Security token could not be authenticated or authorized.","EFEDAUTH")]),this.emit("connect",this.loginError),this.transitionTo(this.STATE.FINAL);return}this.sendFedAuthTokenMessage(m.token)}else this.loginError?Gc(this.loginError)?(this.debug.log("Initiating retry on transient error"),this.transitionTo(this.STATE.TRANSIENT_FAILURE_RETRY)):(this.emit("connect",this.loginError),this.transitionTo(this.STATE.FINAL)):(this.emit("connect",new Re.ConnectionError("Login failed.","ELOGIN")),this.transitionTo(this.STATE.FINAL))})().catch(t=>{process.nextTick(()=>{throw t})})},events:{socketError:function(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)}}},LOGGED_IN_SENDING_INITIAL_SQL:{name:"LoggedInSendingInitialSql",enter:function(){(async()=>{this.sendInitialSql();let t;try{t=await this.messageIo.readMessage()}catch(r){return this.socketError(r)}let e=this.createTokenStreamParser(t,new tr.InitialSqlTokenHandler(this));await(0,nr.once)(e,"end"),this.transitionTo(this.STATE.LOGGED_IN),this.processedInitialSql()})().catch(t=>{process.nextTick(()=>{throw t})})},events:{socketError:function(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)}}},LOGGED_IN:{name:"LoggedIn",events:{socketError:function(){this.transitionTo(this.STATE.FINAL)}}},SENT_CLIENT_REQUEST:{name:"SentClientRequest",enter:function(){(async()=>{let t;try{t=await this.messageIo.readMessage()}catch(h){return this.socketError(h)}this.clearRequestTimer();let e=this.createTokenStreamParser(t,new tr.RequestTokenHandler(this,this.request));if(this.request?.canceled&&this.cancelTimer)return this.transitionTo(this.STATE.SENT_ATTENTION);let r=()=>{e.resume()},a=()=>{e.pause(),this.request?.once("resume",r)};this.request?.on("pause",a),this.request instanceof et.default&&this.request.paused&&a();let l=()=>{e.removeListener("end",c),this.request instanceof et.default&&this.request.paused&&this.request.resume(),this.request?.removeListener("pause",a),this.request?.removeListener("resume",r),this.transitionTo(this.STATE.SENT_ATTENTION)},c=()=>{this.request?.removeListener("cancel",this._cancelAfterRequestSent),this.request?.removeListener("cancel",l),this.request?.removeListener("pause",a),this.request?.removeListener("resume",r),this.transitionTo(this.STATE.LOGGED_IN);let h=this.request;this.request=void 0,this.config.options.tdsVersion<"7_2"&&h.error&&this.isSqlBatch&&(this.inTransaction=!1),h.callback(h.error,h.rowCount,h.rows)};e.once("end",c),this.request?.once("cancel",l)})()},exit:function(t){this.clearRequestTimer()},events:{socketError:function(t){let e=this.request;this.request=void 0,this.transitionTo(this.STATE.FINAL),e.callback(t)}}},SENT_ATTENTION:{name:"SentAttention",enter:function(){(async()=>{let t;try{t=await this.messageIo.readMessage()}catch(a){return this.socketError(a)}let e=new tr.AttentionTokenHandler(this,this.request),r=this.createTokenStreamParser(t,e);if(await(0,nr.once)(r,"end"),e.attentionReceived){this.clearCancelTimer();let a=this.request;this.request=void 0,this.transitionTo(this.STATE.LOGGED_IN),a.error&&a.error instanceof Re.RequestError&&a.error.code==="ETIMEOUT"?a.callback(a.error):a.callback(new Re.RequestError("Canceled.","ECANCEL"))}})().catch(t=>{process.nextTick(()=>{throw t})})},events:{socketError:function(t){let e=this.request;this.request=void 0,this.transitionTo(this.STATE.FINAL),e.callback(t)}}},FINAL:{name:"Final",enter:function(){this.cleanupConnection(qr.NORMAL)},events:{connectTimeout:function(){},message:function(){},socketError:function(){}}}}});Object.defineProperty(exports,"__esModule",{value:!0});Object.defineProperty(exports,"BulkLoad",{enumerable:!0,get:function(){return kb.default}});Object.defineProperty(exports,"Connection",{enumerable:!0,get:function(){return fg.default}});Object.defineProperty(exports,"ConnectionError",{enumerable:!0,get:function(){return hg.ConnectionError}});Object.defineProperty(exports,"ISOLATION_LEVEL",{enumerable:!0,get:function(){return Vb.ISOLATION_LEVEL}});Object.defineProperty(exports,"Request",{enumerable:!0,get:function(){return Bb.default}});Object.defineProperty(exports,"RequestError",{enumerable:!0,get:function(){return hg.RequestError}});Object.defineProperty(exports,"TDS_VERSION",{enumerable:!0,get:function(){return Hb.versions}});Object.defineProperty(exports,"TYPES",{enumerable:!0,get:function(){return qb.TYPES}});exports.connect=Wb;exports.library=void 0;var kb=jc(Ba()),fg=jc(cg()),Bb=jc(vi()),Yb=Uc(),hg=Xt(),qb=Pr(),Vb=Pc(),Hb=dr();function jc(t){return t&&t.__esModule?t:{default:t}}var wC=exports.library={name:Yb.name};function Wb(t,e){let r=new fg.default(t);return r.connect(e),r}
/*! Bundled license information:

js-md4/src/md4.js:
  (**
   * [js-md4]{@link https://github.com/emn178/js-md4}
   *
   * @namespace md4
   * @version 0.3.2
   * @author Yi-Cyuan Chen [emn178@gmail.com]
   * @copyright Yi-Cyuan Chen 2015-2027
   * @license MIT
   *)

@js-joda/core/dist/js-joda.js:
  (*! @version @js-joda/core - 5.6.2 *)
  (*! @copyright (c) 2015-present, Philipp Thürwächter, Pattrick Hüper & js-joda contributors *)
  (*! @copyright (c) 2007-present, Stephen Colebourne & Michael Nascimento Santos *)
  (*! @license BSD-3-Clause (see LICENSE in the root directory of this source tree) *)
  (**
   * @copyright (c) 2016, Philipp Thürwächter & Pattrick Hüper
   * @license BSD-3-Clause (see LICENSE in the root directory of this source tree)
   *)
  (**
   * @copyright (c) 2016, Philipp Thürwächter & Pattrick Hüper
   * @copyright (c) 2007-present, Stephen Colebourne & Michael Nascimento Santos
   * @license BSD-3-Clause (see LICENSE in the root directory of this source tree)
   *)
  (*
   * @copyright (c) 2016, Philipp Thürwächter & Pattrick Hüper
   * @copyright (c) 2007-present, Stephen Colebourne & Michael Nascimento Santos
   * @license BSD-3-Clause (see LICENSE in the root directory of this source tree)
   *)
  (*
   * @copyright (c) 2016, Philipp Thürwächter & Pattrick Hüper
   * @license BSD-3-Clause (see LICENSE.md in the root directory of this source tree)
   *)
  (*
   * @copyright (c) 2016, Philipp Thürwächter & Pattrick Hüper
   * @license BSD-3-Clause (see LICENSE in the root directory of this source tree)
   *)
  (*
   * @copyright (c) 2016, Philipp Thürwächter, Pattrick Hüper
   * @copyright (c) 2007-present, Stephen Colebourne & Michael Nascimento Santos
   * @license BSD-3-Clause (see LICENSE in the root directory of this source tree)
   *)
  (*
   * @copyright (c) 2015-present, Philipp Thürwächter, Pattrick Hüper & js-joda contributors
   * @license BSD-3-Clause (see LICENSE in the root directory of this source tree)
   *)
*/
